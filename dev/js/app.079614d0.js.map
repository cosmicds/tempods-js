{"version":3,"file":"js/app.079614d0.js","mappings":"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AU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,KAAO,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,SACv9EC,EAAG,CAAC,OAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,MAAQ,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,SAC19EC,EAAG,CAAC,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,KAAO,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,UCHj9EC,EAAoB,CAC/BH,EAAG,CAAC,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,SACj+EC,EAAG,CAAC,OAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,SACl+EC,EAAG,CAAC,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,UCHp9EE,EAAmB,CAC9BJ,EAAG,CAAC,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,SAC/9EC,EAAG,CAAC,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAU,OAAU,OAAU,OAAU,OAAU,OAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,SAC/9EC,EAAG,CAAC,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,MAAQ,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,UCH98EG,EAAoB,CAC/BL,EAAG,CAAC,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,KAAO,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,SAC59EC,EAAG,CAAC,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,KAAO,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,SAC59EC,EAAG,CAAC,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,UCH59EI,EAAoB,CAC/BN,EAAG,CAAC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,IAAM,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,SAC52EC,EAAG,CAAC,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,OAAS,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,SACv9EC,EAAG,CAAC,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,MAAQ,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,UCHh9EK,EAAiB,CAC5BP,EAAG,CAAC,EAAK,mBAAqB,mBAAqB,oBAAsB,mBAAqB,kBAAoB,oBAAsB,oBAAsB,mBAAqB,mBAAqB,kBAAoB,oBAAsB,oBAAsB,oBAAsB,oBAAsB,oBAAsB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,GAAK,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,iBAAmB,GAAK,iBAAmB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,kBAAoB,kBAAoB,iBAAmB,iBAAmB,GAAK,kBAAoB,kBAAoB,iBAAmB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,iBAAmB,iBAAmB,GAAK,iBAAmB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,kBAAoB,kBAAoB,iBAAmB,GACh/JC,EAAG,CAAC,EAAK,mBAAqB,mBAAqB,oBAAsB,mBAAqB,kBAAoB,oBAAsB,oBAAsB,mBAAqB,mBAAqB,kBAAoB,oBAAsB,oBAAsB,oBAAsB,oBAAsB,oBAAsB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,GAAK,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,iBAAmB,GAAK,iBAAmB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,kBAAoB,kBAAoB,iBAAmB,iBAAmB,GAAK,kBAAoB,kBAAoB,iBAAmB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,iBAAmB,iBAAmB,GAAK,iBAAmB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,kBAAoB,kBAAoB,iBAAmB,GACh/JC,EAAG,CAAC,EAAK,mBAAqB,mBAAqB,oBAAsB,mBAAqB,kBAAoB,oBAAsB,oBAAsB,mBAAqB,mBAAqB,kBAAoB,oBAAsB,oBAAsB,oBAAsB,oBAAsB,oBAAsB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,GAAK,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,iBAAmB,GAAK,iBAAmB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,kBAAoB,kBAAoB,iBAAmB,iBAAmB,GAAK,kBAAoB,kBAAoB,iBAAmB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,iBAAmB,iBAAmB,GAAK,iBAAmB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,kBAAoB,kBAAoB,iBAAmB,ICFr+JM,EAAiC,CAC5CR,EAAG,CAAC,QAAU,QAAU,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,QAAU,QAAU,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,GAAK,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,GAAK,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,SAC79EC,EAAG,CAAC,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,QAAU,QAAU,QAAU,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,QAAU,QAAU,QAAU,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,GAAK,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,GAAK,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,GAAK,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,SACjiFC,EAAG,CAAC,SAAW,QAAU,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,GAAK,GAAK,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,UAIn9EO,EAAe,CAC1B,KAAQ,YACR,WAAc,CACZ,CACE,KAAQ,cACR,UAAa,CACX,EACA,EACA,GACA,KAEF,QAAW,CACT,GACA,EACA,GACA,KAEF,UAAa,sBACb,MAAS,EACT,KAAQ,qBAEV,CACE,KAAQ,cACR,UAAa,CACX,GACA,EACA,GACA,KAEF,QAAW,CACT,GACA,GACA,GACA,KAEF,UAAa,sBACb,MAAS,oBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,GACA,GACA,GACA,KAEF,QAAW,CACT,GACA,GACA,GACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,GACA,GACA,GACA,KAEF,QAAW,CACT,GACA,GACA,GACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,GACA,GACA,GACA,KAEF,QAAW,CACT,GACA,GACA,IACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,GACA,GACA,IACA,KAEF,QAAW,CACT,IACA,GACA,IACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,GACA,IACA,KAEF,QAAW,CACT,IACA,GACA,IACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,GACA,IACA,KAEF,QAAW,CACT,IACA,GACA,IACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,GACA,IACA,KAEF,QAAW,CACT,IACA,GACA,IACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,GACA,IACA,KAEF,QAAW,CACT,IACA,GACA,IACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,GACA,IACA,KAEF,QAAW,CACT,IACA,IACA,GACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,GACA,KAEF,QAAW,CACT,IACA,IACA,GACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,GACA,KAEF,QAAW,CACT,IACA,IACA,IACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,IACA,KAEF,QAAW,CACT,IACA,IACA,IACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,IACA,KAEF,QAAW,CACT,IACA,IACA,IACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,IACA,KAEF,QAAW,CACT,IACA,IACA,IACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,IACA,KAEF,QAAW,CACT,IACA,IACA,IACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,IACA,KAEF,QAAW,CACT,IACA,IACA,IACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,IACA,KAEF,QAAW,CACT,IACA,IACA,IACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,IACA,KAEF,QAAW,CACT,GACA,IACA,IACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,GACA,IACA,IACA,KAEF,QAAW,CACT,GACA,IACA,IACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,KCnYDC,EAAsB,CACjCV,EAAG,CAAC,kBAAoB,mBAAqB,iBAAmB,GAAK,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,kBAAoB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,iBAAmB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,iBAAmB,iBAAmB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,GAAK,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,GAAK,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,kBAAoB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,mBACh8JC,EAAG,CAAC,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,GAAK,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,GAAK,iBAAmB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,iBAAmB,GAAK,kBAAoB,iBAAmB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,GAAK,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,mBACh+JC,EAAG,CAAC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,mBAAqB,mBAAqB,mBAAqB,mBAAqB,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,EAAK,EAAK,EAAK,EAAK,mBAAqB,mBAAqB,mBAAqB,mBAAqB,oBAAsB,mBAAqB,oBAAsB,oBAAsB,mBAAqB,kBAAoB,oBAAsB,oBAAsB,oBAAsB,oBAAsB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,kBAAoB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,mBAAqB,kBAAoB,mBAAqB,mBAAqB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,GAAK,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,GAAK,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,iBAAmB,kBAAoB,kBAAoB,kBAAoB,kBAAoB,oBAIxgJS,EAAqB,CAChC,KAAQ,YACR,WAAc,CACZ,CACE,KAAQ,cACR,UAAa,CACX,GACA,GACA,EACA,KAEF,QAAW,CACT,IACA,GACA,EACA,KAEF,UAAa,sBACb,MAAS,EACT,KAAQ,qBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,GACA,EACA,KAEF,QAAW,CACT,IACA,GACA,EACA,KAEF,UAAa,sBACb,MAAS,oBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,GACA,EACA,KAEF,QAAW,CACT,IACA,GACA,EACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,GACA,EACA,KAEF,QAAW,CACT,IACA,GACA,EACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,GACA,EACA,KAEF,QAAW,CACT,IACA,IACA,EACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,EACA,KAEF,QAAW,CACT,IACA,IACA,EACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,EACA,KAEF,QAAW,CACT,IACA,IACA,GACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,GACA,KAEF,QAAW,CACT,IACA,IACA,GACA,KAEF,UAAa,sBACb,MAAS,kBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,GACA,KAEF,QAAW,CACT,IACA,IACA,GACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,GACA,KAEF,QAAW,CACT,IACA,IACA,GACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,oBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,GACA,KAEF,QAAW,CACT,IACA,IACA,GACA,KAEF,UAAa,sBACb,MAAS,mBACT,KAAQ,mBAEV,CACE,KAAQ,cACR,UAAa,CACX,IACA,IACA,GACA,KAEF,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","sources":["webpack://@cosmicds/tempo-lite/./src/components/LocationSearch.vue?5288","webpack://@cosmicds/tempo-lite/./src/components/LocationSearch.vue","webpack://@cosmicds/tempo-lite/./src/mapbox.ts","webpack://@cosmicds/tempo-lite/./src/components/LocationSearch.vue?99f6","webpack://@cosmicds/tempo-lite/./src/colormaps/magma.ts","webpack://@cosmicds/tempo-lite/./src/colormaps/inferno.ts","webpack://@cosmicds/tempo-lite/./src/colormaps/plasma.ts","webpack://@cosmicds/tempo-lite/./src/colormaps/viridis.ts","webpack://@cosmicds/tempo-lite/./src/colormaps/cividis.ts","webpack://@cosmicds/tempo-lite/./src/colormaps/gray.ts","webpack://@cosmicds/tempo-lite/./src/colormaps/svs_nitrogen_dioxide.ts","webpack://@cosmicds/tempo-lite/./src/colormaps/sargassum.ts","webpack://@cosmicds/tempo-lite/./src/colormaps/index.ts","webpack://@cosmicds/tempo-lite/./src/esri/ImageLayerConfig.ts","webpack://@cosmicds/tempo-lite/./src/esri/utils.ts","webpack://@cosmicds/tempo-lite/./src/esri/geometry.ts","webpack://@cosmicds/tempo-lite/./src/esri/services/array_math.ts","webpack://@cosmicds/tempo-lite/./src/esri/services/sampling.ts","webpack://@cosmicds/tempo-lite/./src/esri/services/TempoDataService.ts","webpack://@cosmicds/tempo-lite/./src/composables/useUniqueTimeSelection.ts","webpack://@cosmicds/tempo-lite/./src/composables/useTimezone.ts","webpack://@cosmicds/tempo-lite/./src/utils/atleast1d.ts","webpack://@cosmicds/tempo-lite/./src/utils/timeRange.ts","webpack://@cosmicds/tempo-lite/./src/stores/app.ts","webpack://@cosmicds/tempo-lite/./src/TempoLite.vue","webpack://@cosmicds/tempo-lite/./src/TempoLite.vue?f66b","webpack://@cosmicds/tempo-lite/./src/TempoLite.vue?8f1a","webpack://@cosmicds/tempo-lite/./src/components/ColorBar.vue?15b2","webpack://@cosmicds/tempo-lite/./src/components/ColorBar.vue","webpack://@cosmicds/tempo-lite/./src/components/ColorBar.vue?632f","webpack://@cosmicds/tempo-lite/./src/components/ColorBarHorizontal.vue?50bf","webpack://@cosmicds/tempo-lite/./src/components/ColorBarHorizontal.vue","webpack://@cosmicds/tempo-lite/./src/components/ColorBarHorizontal.vue?6f32","webpack://@cosmicds/tempo-lite/./src/components/InfoButton.vue?e04c","webpack://@cosmicds/tempo-lite/./src/components/InfoButton.vue","webpack://@cosmicds/tempo-lite/./src/components/InfoButton.vue?de13","webpack://@cosmicds/tempo-lite/./plugins/vuetify.ts","webpack://@cosmicds/tempo-lite/./src/components/SnackbarAlert.vue?dde0","webpack://@cosmicds/tempo-lite/./src/components/SnackbarAlert.vue","webpack://@cosmicds/tempo-lite/./src/components/SnackbarAlert.vue?3716","webpack://@cosmicds/tempo-lite/./src/components/ShareButton.vue?f44e","webpack://@cosmicds/tempo-lite/./src/components/ShareButton.vue","webpack://@cosmicds/tempo-lite/./src/components/ShareButton.vue?a5b6","webpack://@cosmicds/tempo-lite/./src/utils/dom.ts","webpack://@cosmicds/tempo-lite/./src/composables/useDraggableDialog.ts","webpack://@cosmicds/tempo-lite/./src/components/CDSDialog.vue?f933","webpack://@cosmicds/tempo-lite/./src/components/CDSDialog.vue","webpack://@cosmicds/tempo-lite/./src/components/CDSDialog.vue?51b6","webpack://@cosmicds/tempo-lite/./src/components/MarqeeAlert.vue?b891","webpack://@cosmicds/tempo-lite/./src/components/MarqeeAlert.vue","webpack://@cosmicds/tempo-lite/./src/components/MarqeeAlert.vue?852b","webpack://@cosmicds/tempo-lite/./src/components/TimeseriesGraph.vue?a88f","webpack://@cosmicds/tempo-lite/./src/components/TimeseriesGraph.vue","webpack://@cosmicds/tempo-lite/./src/components/TimeseriesGraph.vue?a5cc","webpack://@cosmicds/tempo-lite/./src/components/SelectionComposer.vue?63bd","webpack://@cosmicds/tempo-lite/./src/components/SelectionComposer.vue","webpack://@cosmicds/tempo-lite/./src/components/SelectionComposer.vue?525e","webpack://@cosmicds/tempo-lite/./src/changes.ts","webpack://@cosmicds/tempo-lite/./src/components/HeaderBar.vue?c32b","webpack://@cosmicds/tempo-lite/./src/components/HeaderBar.vue","webpack://@cosmicds/tempo-lite/./src/components/HeaderBar.vue?482e","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/useTimezone.ts","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/useDateTimeSelector.ts","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/DateTimeRangeSelection.vue?5777","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/DateTimeRangeSelection.vue","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/DateTimeRangeSelection.vue?5987","webpack://@cosmicds/tempo-lite/./src/esri/services/aggregation.ts","webpack://@cosmicds/tempo-lite/./src/components/PlotlyGraph.vue?43a4","webpack://@cosmicds/tempo-lite/./src/components/PlotlyGraph.vue","webpack://@cosmicds/tempo-lite/./src/components/PlotlyGraph.vue?a344","webpack://@cosmicds/tempo-lite/./src/components/DataAggregation.vue?10be","webpack://@cosmicds/tempo-lite/./src/components/DataAggregation.vue","webpack://@cosmicds/tempo-lite/./src/components/DataAggregation.vue?d23c","webpack://@cosmicds/tempo-lite/./src/components/DataFolding.vue?838e","webpack://@cosmicds/tempo-lite/./src/components/DataFolding.vue","webpack://@cosmicds/tempo-lite/./src/components/DataFolding.vue?1369","webpack://@cosmicds/tempo-lite/./src/components/AdvancedOperations.vue?7006","webpack://@cosmicds/tempo-lite/./src/components/AdvancedOperations.vue","webpack://@cosmicds/tempo-lite/./src/components/AdvancedOperations.vue?a53d","webpack://@cosmicds/tempo-lite/./src/components/CTextField.vue?3472","webpack://@cosmicds/tempo-lite/./src/components/CTextField.vue","webpack://@cosmicds/tempo-lite/./src/components/CTextField.vue?1cb1","webpack://@cosmicds/tempo-lite/./src/components/DatasetControls.vue?731f","webpack://@cosmicds/tempo-lite/./src/components/DatasetControls.vue","webpack://@cosmicds/tempo-lite/./src/components/DatasetControls.vue?d58e","webpack://@cosmicds/tempo-lite/./src/composables/useEsriTimesteps.ts","webpack://@cosmicds/tempo-lite/./src/components/TimeChips.vue?2981","webpack://@cosmicds/tempo-lite/./src/components/TimeChips.vue","webpack://@cosmicds/tempo-lite/./src/components/TimeChips.vue?b22d","webpack://@cosmicds/tempo-lite/./src/components/MapControls.vue?90e0","webpack://@cosmicds/tempo-lite/./src/components/MapControls.vue","webpack://@cosmicds/tempo-lite/./src/components/MapControls.vue?552a","webpack://@cosmicds/tempo-lite/./src/colormaps/utils.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useMarker.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/baseUseSelection.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useRectangleSelection.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/utils.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/usePointSelection.ts","webpack://@cosmicds/tempo-lite/./src/utils/color.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useMultiMarker.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useMap.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/MaplibreHomeTool.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useZoomHome.ts","webpack://@cosmicds/tempo-lite/./src/components/MaplibreMap.vue?df5a","webpack://@cosmicds/tempo-lite/./src/components/MaplibreMap.vue","webpack://@cosmicds/tempo-lite/./src/components/MaplibreMap.vue?d3f0","webpack://@cosmicds/tempo-lite/./src/esri/maplibre/useEsriImageLayer.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useFieldOfRegard.ts","webpack://@cosmicds/tempo-lite/./src/components/EsriMap.vue?2726","webpack://@cosmicds/tempo-lite/./src/components/EsriMap.vue","webpack://@cosmicds/tempo-lite/./src/components/EsriMap.vue?e24d","webpack://@cosmicds/tempo-lite/./src/components/MapColorbarWrap.vue?6038","webpack://@cosmicds/tempo-lite/./src/components/MapColorbarWrap.vue","webpack://@cosmicds/tempo-lite/./src/components/MapColorbarWrap.vue?dc27","webpack://@cosmicds/tempo-lite/./src/components/MapWithControls.vue?1f2a","webpack://@cosmicds/tempo-lite/./src/components/MapWithControls.vue","webpack://@cosmicds/tempo-lite/./src/components/MapWithControls.vue?3721","webpack://@cosmicds/tempo-lite/./src/main.ts","webpack://@cosmicds/tempo-lite/webpack/bootstrap","webpack://@cosmicds/tempo-lite/webpack/runtime/chunk loaded","webpack://@cosmicds/tempo-lite/webpack/runtime/compat get default export","webpack://@cosmicds/tempo-lite/webpack/runtime/define property getters","webpack://@cosmicds/tempo-lite/webpack/runtime/global","webpack://@cosmicds/tempo-lite/webpack/runtime/hasOwnProperty shorthand","webpack://@cosmicds/tempo-lite/webpack/runtime/make namespace object","webpack://@cosmicds/tempo-lite/webpack/runtime/publicPath","webpack://@cosmicds/tempo-lite/webpack/runtime/jsonp chunk loading","webpack://@cosmicds/tempo-lite/webpack/startup"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderSlot as _renderSlot, vShow as _vShow, withDirectives as _withDirectives, withKeys as _withKeys, normalizeClass as _normalizeClass, withCtx as _withCtx, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\")!\n  const _component_v_combobox = _resolveComponent(\"v-combobox\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"forward-geocoding-container\",\n    style: _normalizeStyle(_ctx.cssStyles)\n  }, [\n    _withDirectives(_createVNode(_component_v_combobox, {\n      class: _normalizeClass(['forward-geocoding-input', _ctx.locationJustUpdated ? 'geocode-success' : '', _ctx.small ? 'forward-geocoding-input-small' : '']),\n      modelValue: _ctx.searchText,\n      \"onUpdate:modelValue\": [\n        _cache[0] || (_cache[0] = ($event: any) => ((_ctx.searchText) = $event)),\n        _ctx.setLocationFromSearchFeature\n      ],\n      items: _ctx.searchResults ? _ctx.searchResults.features : [],\n      \"item-title\": _ctx.textForMapboxFeature,\n      \"bg-color\": _ctx.bgColor,\n      label: \"Enter city or zip\",\n      density: _ctx.small ? 'compact' : 'default',\n      \"hide-details\": \"\",\n      solo: \"\",\n      color: _ctx.accentColor,\n      onInput: () => {},\n      onKeydown: [\n        _withKeys(_ctx.performForwardGeocodingSearch, [\"enter\"]),\n        _cache[1] || (_cache[1] = _withKeys(($event: any) => (_ctx.searchResults = null), [\"esc\"]))\n      ],\n      \"error-messages\": _ctx.searchErrorMessage,\n      \"onClick:append\": _ctx.focusCombobox,\n      \"onUpdate:focused\": _cache[2] || (_cache[2] = ($event: any) => (_ctx.onFocusChange($event))),\n      ref: \"searchInput\",\n      menu: _ctx.menuOpen,\n      \"onUpdate:menu\": _cache[3] || (_cache[3] = ($event: any) => (_ctx.menuOpen = $event))\n    }, {\n      append: _withCtx(() => [\n        _createVNode(_component_font_awesome_icon, {\n          class: \"geocoding-search-icon\",\n          icon: \"magnifying-glass\",\n          size: _ctx.searchOpen ? 'xl' : _ctx.buttonSize,\n          color: \"gray\",\n          onClick: _ctx.toggleSearch\n        }, null, 8, [\"size\", \"onClick\"]),\n        _renderSlot(_ctx.$slots, \"append-icon\", { class: \"geocode-icon\" }),\n        _withDirectives(_createVNode(_component_font_awesome_icon, {\n          class: \"geocoding-close-icon\",\n          icon: \"circle-xmark\",\n          size: _ctx.searchOpen ? 'xl' : '1x',\n          color: \"gray\",\n          onClick: _ctx.closeSearch\n        }, null, 8, [\"size\", \"onClick\"]), [\n          [_vShow, _ctx.searchOpen && !_ctx.stayOpen]\n        ])\n      ]),\n      _: 3\n    }, 8, [\"class\", \"modelValue\", \"items\", \"item-title\", \"bg-color\", \"density\", \"color\", \"onUpdate:modelValue\", \"onKeydown\", \"error-messages\", \"onClick:append\", \"menu\"]), [\n      [_vShow, _ctx.searchOpen]\n    ]),\n    _withDirectives(_createVNode(_component_font_awesome_icon, {\n      class: \"geocoding-search-icon\",\n      icon: \"magnifying-glass\",\n      size: _ctx.searchOpen ? 'xl' : _ctx.buttonSize,\n      color: \"gray\",\n      onClick: _withModifiers(_ctx.toggleSearch, [\"prevent\"])\n    }, null, 8, [\"size\", \"onClick\"]), [\n      [_vShow, !_ctx.searchOpen && !_ctx.stayOpen]\n    ])\n  ], 4))\n}","<template>\n  <div class=\"forward-geocoding-container\" :style=\"cssStyles\">\n    <v-combobox\n      v-show=\"searchOpen\"\n      :class=\"['forward-geocoding-input', locationJustUpdated ? 'geocode-success' : '', small ? 'forward-geocoding-input-small' : '']\"\n      v-model=\"searchText\"\n      :items=\"searchResults ? searchResults.features : []\"\n      :item-title=\"textForMapboxFeature\"\n      :bg-color=\"bgColor\"\n      label=\"Enter city or zip\"\n      :density=\"small ? 'compact' : 'default'\"\n      hide-details\n      solo\n      :color=\"accentColor\"\n      @input=\"() => {}\"\n      @update:model-value=\"setLocationFromSearchFeature\"\n      @keydown.enter=\"performForwardGeocodingSearch\"\n      @keydown.esc=\"searchResults = null\"\n      :error-messages=\"searchErrorMessage\"\n      @click:append=\"focusCombobox\"\n      @update:focused=\"onFocusChange($event)\"\n      ref=\"searchInput\"\n      :menu=\"menuOpen\"\n      @update:menu=\"menuOpen = $event\"\n    >\n    <template v-slot:append>\n      <font-awesome-icon\n        class=\"geocoding-search-icon\"\n        icon=\"magnifying-glass\"\n        :size=\"searchOpen ? 'xl' : buttonSize\"\n        color=\"gray\"\n        @click=\"toggleSearch\"\n      ></font-awesome-icon>\n\n      <slot name=\"append-icon\" class=\"geocode-icon\"></slot>\n\n      <font-awesome-icon\n        class=\"geocoding-close-icon\"\n        v-show=\"searchOpen && !stayOpen\"\n        icon=\"circle-xmark\"\n        :size=\"searchOpen ? 'xl' : '1x'\"\n        color=\"gray\"\n        @click=\"closeSearch\"\n      ></font-awesome-icon>\n    </template>\n  </v-combobox>\n  <font-awesome-icon\n      v-show=\"!searchOpen && !stayOpen\"\n      class=\"geocoding-search-icon\"\n      icon=\"magnifying-glass\"\n      :size=\"searchOpen ? 'xl' : buttonSize\"\n      color=\"gray\"\n      @click.prevent=\"toggleSearch\"\n    ></font-awesome-icon>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { MapBoxFeatureCollection, MapBoxFeature, textForMapboxFeature } from \"@/mapbox\";\n\ntype SearchProvider = (searchText: string) => Promise<MapBoxFeatureCollection | null>;\n\nexport default defineComponent({\n  name: 'LocationSearch',\n\n  emits: ['update:modelValue', 'set-location', 'error', 'geolocate'],\n\n  props: {\n    searchProvider: {\n      type: Function as PropType<SearchProvider>,\n      default: () => {}\n    },\n    modelValue: {\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    stayOpen: {\n      type: Boolean,\n      default: false,\n    },\n    accentColor: {\n      type: String,\n      default: 'white',\n    },\n    small: {\n      type: Boolean,\n      default: false,\n    },\n    theme: {\n      type: String,\n      default: 'dark',\n    },\n    buttonSize: {\n      type: String,\n      default: '1x',\n    },\n    \n    bgColor: {\n      type: String,\n      default: 'white',\n    },\n    \n    persistSelected: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  \n  data() {\n    return {\n      searchOpen: this.modelValue || this.stayOpen,\n      searchText: null as string | null,\n      searchResults: null as MapBoxFeatureCollection | null,\n      searchErrorMessage: null as string | null,\n      locationJustUpdated: false,\n      locationUpdatedText: 'Location updated',\n      comboFocused: false,\n      menuOpen: false,\n    };\n  },\n\n  computed: {\n    cssStyles() {\n      return {\n        '--accent-color': this.accentColor,\n        '--bg-color': this.bgColor,\n        '--fg-container-padding': this.searchOpen ? (this.small ? '0px 5px 0px 0px' : '5px 10px 12px 10px') : '0px',\n        '--border-radius': this.searchOpen ? '7px' : '20px',\n      };\n    },\n  },\n  \n  \n  \n\n  \n  methods: {\n    performForwardGeocodingSearch() {\n      console.log('performForwardGeocodingSearch', this.searchText);\n      if (this.searchText === null || this.searchText.length < 3) {\n        return;\n      }\n      this.searchProvider(this.searchText).then((info) => {\n        if (info !== null && info.features?.length === 1) {\n          this.setLocationFromSearchFeature(info.features[0]);\n        } else if (info !== null && info.features?.length == 0) {\n          this.searchErrorMessage = \"No matching places were found\";\n          console.log('No matching places were found');\n          this.$emit('error', this.searchErrorMessage);\n        } else {\n          this.searchResults = info;\n        }\n      });\n    },\n    \n    textForMapboxFeature(feature: MapBoxFeature) {\n      if (typeof feature === 'string') {\n        return;\n      }\n      return textForMapboxFeature(feature);\n    },\n    \n       \n    onFocusChange(focused: boolean) {\n      console.log('focus change', focused);\n      this.comboFocused = focused;\n      // if (!focused && this.searchResults === null) {\n      //   this.searchText = null;\n      // }\n    },\n    \n    blurCombobox() {\n      console.log('blurring');\n      const input = this.$refs.searchInput as HTMLInputElement;\n      console.log(input);\n      input.blur();\n    },\n    \n    focusCombobox() {\n      const input = this.$refs.searchInput as HTMLInputElement;\n      input.focus();\n    },\n    \n    setLocationFromSearchFeature(feature: MapBoxFeature | string) {\n      // if it's a string do nothing\n      if (typeof feature === 'string') {\n        return;\n      }\n      console.log('setting location');\n      if (feature === null) { return; }\n      const name = this.textForMapboxFeature(feature);\n      if (name !== undefined) {\n        this.locationUpdatedText = name;\n      } else {\n        this.locationUpdatedText = feature.place_name.split(',').slice(0, 2).join(', ');\n      }\n      \n      // blur (defocus) the v-combobox\n      this.blurCombobox();\n      this.timedJustUpdatedLocation();\n      this.clearSearchData();\n      this.$emit('set-location', [feature, this.locationUpdatedText]);\n    },\n\n    toggleSearch() {\n      console.log('toggleSearch', this.searchOpen, this.searchText);\n      if (this.searchOpen) {\n        this.performForwardGeocodingSearch();\n        // this.$nextTick(() => this.focusCombobox());\n        this.menuOpen = true;\n        this.focusCombobox();\n      } else {\n        this.searchOpen = true;\n      }\n    },\n\n    closeSearch() {\n      this.searchOpen = false;\n      this.clearSearchData();\n    },\n\n    clearSearchData() {\n      this.searchResults = null;\n      this.searchText = null;\n      this.searchErrorMessage = null;\n    },\n    \n    timedJustUpdatedLocation() {\n      this.locationJustUpdated = true;\n      setTimeout(() => {\n        this.locationJustUpdated = this.persistSelected;\n      }, 5000);\n    },\n  },\n  \n  watch: {\n    \n    modelValue(value: boolean) {\n      this.searchOpen = value;\n    },\n    \n    searchOpen(value: boolean) {\n      this.$emit('update:modelValue', value);\n    },\n    \n    searchText(text: string | null) {\n      if (this.searchErrorMessage) {\n        this.searchErrorMessage = null;\n      }\n      if (!text || text.length === 0) {\n        this.searchResults = null;\n      }\n    },\n  }\n  \n});\n\n</script>\n\n\n<style lang=\"less\">\n\n// https://vue-loader.vuejs.org/guide/scoped-css.html#deep-selectors\n.forward-geocoding-container {\n  --border-radius: 20px;\n  position: relative;\n  color: var(--accent-color);\n  background-color: rgba(255, 255, 255, 0.4);\n  border-radius: var(--border-radius);\n  margin-left: 0.25rem;\n  margin-bottom: 0.25rem;\n  padding: var(--fg-container-padding);\n  backdrop-filter: blur(2px);\n\n  .v-field {\n    background-color: transparent !important;\n  }\n\n  // there are two separate labels, we want the 2nd one to be large. the first is the small floating label\n  .v-field > .v-field__field > .v-label.v-field-label:nth-child(2) {\n    font-size: 1.2rem;\n  }\n\n  // .v-input--horizontal .v-input__append {\n  //   margin-inline-start: 0;\n  // }\n  \n  .v-text-field {\n    min-width: 150px;\n  }\n  \n  .v-field--variant-filled.v-field--has-background .v-field__overlay {\n    border-top-right-radius: 0px;\n}\n\n  .forward-geocoding-input > .v-input__control > .v-field {\n    border-radius: var(--border-radius);\n  }\n  \n  .forward-geocoding-input.geocode-success label {\n    opacity: 1;\n  }\n  \n  .forward-geocoding-input-small label {\n    // .v-label sets default to 1rem\n    font-size: 0.8rem;\n  }\n\n  .forward-geocoding-input-row {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    gap: 10px;\n    align-items: center;\n  }\n  \n  .geocoding-search-icon {\n    padding-inline: calc(0.3 * var(--default-line-height));\n    padding-block: calc(0.4 * var(--default-line-height));\n  }\n\n  .geocoding-search-icon:hover, #geocoding-close-icon:hover {\n    cursor: pointer;\n  }\n\n}\n</style>\n","export interface MapBoxContextItem {\n  id: string;\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  mapbox_id: string;\n  text: string;\n  wikidata: string;\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  short_code?: string;\n}\n\n// The field names here come from MapBox\nexport interface MapBoxFeature {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  place_type: string[];\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  place_name: string;\n  text?: string;\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  properties: { short_code: string; };\n  center: [number, number];\n  context: MapBoxContextItem[];\n}\n\nexport interface MapBoxFeatureCollection {\n  type: \"FeatureCollection\";\n  features: MapBoxFeature[];\n}\n\n// TODO: Add more options as we need them\n// See https://docs.mapbox.com/api/search/geocoding-v6/#forward-geocoding-with-search-text-input\nexport interface MapBoxForwardGeocodingOptions {\n  // For countries, use the ISO 3166-1 alpha-2 country codes:\n  // https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2\n  countries?: string[];\n  types?: string[];\n  limit?: number;\n}\n\nconst RELEVANT_FEATURE_TYPES = [\"postcode\", \"place\", \"region\", \"country\"];\nconst NA_COUNTRIES = [\"United States\", \"Canada\", \"Mexico\"];\nconst NA_ABBREVIATIONS = [\"US-\", \"CA-\", \"MX-\"];\n\nexport function findBestFeature(collection: MapBoxFeatureCollection): MapBoxFeature | null {\n  const relevantFeatures = collection.features.filter(feature => RELEVANT_FEATURE_TYPES.some(type => feature.place_type.includes(type)));\n  const placeFeature = relevantFeatures.find(feature => feature.place_type.includes(\"place\")) ?? (relevantFeatures.find(feature => feature.place_type.includes(\"postcode\")) ?? undefined);\n  if (placeFeature !== undefined) {\n    return placeFeature;\n  }\n  const regionFeature = relevantFeatures.find(feature => feature.place_type.includes(\"region\"));\n  if (regionFeature !== undefined) {\n    return regionFeature;\n  }\n  const countryFeature = relevantFeatures.find(feature => feature.place_type.includes(\"country\"));\n  if (countryFeature !== undefined) {\n    return countryFeature;\n  }\n  return null;\n}\n\nexport function textForMapboxFeature(feature: MapBoxFeature): string {\n  const pieces: string[] = [];\n  if (feature.text) {\n    pieces.push(feature.text);\n  }\n  feature.context.forEach(item => {\n    const itemType = item.id.split(\".\")[0];\n    if (!RELEVANT_FEATURE_TYPES.includes(itemType)) {\n      return;\n    }\n    let text = null as string | null;\n    const shortCode = item.short_code;\n    if (itemType === \"region\" && shortCode != null) {\n      if (NA_ABBREVIATIONS.some(abbr => shortCode.startsWith(abbr))) {\n        text = shortCode.substring(3);\n      }\n    } else if (itemType === \"country\") {\n      const itemText = item.text;\n      if (!NA_COUNTRIES.includes(itemText)) {\n        text = itemText; \n      }\n    }\n    if (text !== null) {\n      pieces.push(text);\n    }\n  });\n  return pieces.join(\", \");\n}\n\nexport function textForMapboxResults(results: MapBoxFeatureCollection): string {\n  const feature = findBestFeature(results);\n  return feature !== null ? textForMapboxFeature(feature) : \"\";\n}\n\nexport async function textForLocation(longitudeDeg: number, latitudeDeg: number): Promise<string> {\n  const accessToken = process.env.VUE_APP_MAPBOX_ACCESS_TOKEN;\n  const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${longitudeDeg},${latitudeDeg}.json?access_token=${accessToken}`;\n  return fetch(url)\n    .then(response => response.json())\n    .then((result: MapBoxFeatureCollection) => {\n      if (result.features.length === 0) {\n        const ns = latitudeDeg >= 0 ? 'N' : 'S';\n        const ew = longitudeDeg >= 0 ? 'E' : 'W';\n        const lat = Math.abs(latitudeDeg).toFixed(3);\n        const lon = Math.abs(longitudeDeg).toFixed(3);\n        return `${lat} ${ns}, ${lon} ${ew}`;\n      }\n      return textForMapboxResults(result);\n    });\n}\n\nexport async function geocodingInfoForSearch(searchText: string, options?: MapBoxForwardGeocodingOptions): Promise<MapBoxFeatureCollection> {\n  const accessToken = process.env.VUE_APP_MAPBOX_ACCESS_TOKEN;\n  const search = new URLSearchParams();\n  search.set(\"access_token\", accessToken ?? \"\");\n  const types = (options?.types ?? [\"place\", \"postcode\"]).join(\",\");\n  search.set(\"types\", types);\n  if (options?.countries) {\n    search.set(\"country\", options.countries.join(\",\"));\n  }\n  search.set(\"limit\", options?.limit?.toString() ?? \"5\");\n  const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${searchText}.json?${search.toString()}`;\n  return fetch(url).then(response => response.json());\n}\n","import { render } from \"./LocationSearch.vue?vue&type=template&id=19e84937&ts=true\"\nimport script from \"./LocationSearch.vue?vue&type=script&lang=ts\"\nexport * from \"./LocationSearch.vue?vue&type=script&lang=ts\"\n\nimport \"./LocationSearch.vue?vue&type=style&index=0&id=19e84937&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport type { ColorMap } from \"./types\";\n\nexport const magma: ColorMap = {\n  r: [0.001462, 0.002258, 0.003279, 0.004512, 0.00595, 0.007588, 0.009426, 0.011465, 0.013708, 0.016156, 0.018815, 0.021692, 0.024792, 0.028123, 0.031696, 0.03552, 0.039608, 0.04383, 0.048062, 0.05232, 0.056615, 0.060949, 0.06533, 0.069764, 0.074257, 0.078815, 0.083446, 0.088155, 0.092949, 0.097833, 0.102815, 0.107899, 0.113094, 0.118405, 0.123833, 0.12938, 0.135053, 0.140858, 0.146785, 0.152839, 0.159018, 0.165308, 0.171713, 0.178212, 0.184801, 0.19146, 0.198177, 0.204935, 0.211718, 0.218512, 0.225302, 0.232077, 0.238826, 0.245543, 0.25222, 0.258857, 0.265447, 0.271994, 0.278493, 0.284951, 0.291366, 0.29774, 0.304081, 0.310382, 0.316654, 0.322899, 0.329114, 0.335308, 0.341482, 0.347636, 0.353773, 0.359898, 0.366012, 0.372116, 0.378211, 0.384299, 0.390384, 0.396467, 0.402548, 0.408629, 0.414709, 0.420791, 0.426877, 0.432967, 0.439062, 0.445163, 0.451271, 0.457386, 0.463508, 0.46964, 0.47578, 0.481929, 0.488088, 0.494258, 0.500438, 0.506629, 0.512831, 0.519045, 0.52527, 0.531507, 0.537755, 0.544015, 0.550287, 0.556571, 0.562866, 0.569172, 0.57549, 0.581819, 0.588158, 0.594508, 0.600868, 0.607238, 0.613617, 0.620005, 0.626401, 0.632805, 0.639216, 0.645633, 0.652056, 0.658483, 0.664915, 0.671349, 0.677786, 0.684224, 0.690661, 0.697098, 0.703532, 0.709962, 0.716387, 0.722805, 0.729216, 0.735616, 0.742004, 0.748378, 0.754737, 0.761077, 0.767398, 0.773695, 0.779968, 0.786212, 0.792427, 0.798608, 0.804752, 0.810855, 0.816914, 0.822926, 0.828886, 0.834791, 0.840636, 0.846416, 0.852126, 0.857763, 0.86332, 0.868793, 0.874176, 0.879464, 0.884651, 0.889731, 0.8947, 0.899552, 0.904281, 0.908884, 0.913354, 0.917689, 0.921884, 0.925937, 0.929845, 0.933606, 0.937221, 0.940687, 0.944006, 0.94718, 0.95021, 0.953099, 0.955849, 0.958464, 0.960949, 0.96331, 0.965549, 0.967671, 0.96968, 0.971582, 0.973381, 0.975082, 0.97669, 0.97821, 0.979645, 0.981, 0.982279, 0.983485, 0.984622, 0.985693, 0.9867, 0.987646, 0.988533, 0.989363, 0.990138, 0.990871, 0.991558, 0.992196, 0.992785, 0.993326, 0.993834, 0.994309, 0.994738, 0.995122, 0.99548, 0.99581, 0.996096, 0.996341, 0.99658, 0.996775, 0.996925, 0.997077, 0.997186, 0.997254, 0.997325, 0.997351, 0.997351, 0.997341, 0.997285, 0.997228, 0.997138, 0.997019, 0.996898, 0.996727, 0.996571, 0.996369, 0.996162, 0.995932, 0.99568, 0.995424, 0.995131, 0.994851, 0.994524, 0.994222, 0.993866, 0.993545, 0.99317, 0.992831, 0.99244, 0.992089, 0.991688, 0.991332, 0.99093, 0.99057, 0.990175, 0.989815, 0.989434, 0.989077, 0.988717, 0.988367, 0.988033, 0.987691, 0.987387, 0.987053],\n  g: [0.000466, 0.001295, 0.002305, 0.00349, 0.004843, 0.006356, 0.008022, 0.009828, 0.011771, 0.01384, 0.016026, 0.01832, 0.020715, 0.023201, 0.025765, 0.028397, 0.03109, 0.03383, 0.036607, 0.039407, 0.04216, 0.044794, 0.047318, 0.049726, 0.052017, 0.054184, 0.056225, 0.058133, 0.059904, 0.061531, 0.06301, 0.064335, 0.065492, 0.066479, 0.067295, 0.067935, 0.068391, 0.068654, 0.068738, 0.068637, 0.068354, 0.067911, 0.067305, 0.066576, 0.065732, 0.064818, 0.063862, 0.062907, 0.061992, 0.061158, 0.060445, 0.059889, 0.059517, 0.059352, 0.059415, 0.059706, 0.060237, 0.060994, 0.061978, 0.063168, 0.064553, 0.066117, 0.067835, 0.069702, 0.07169, 0.073782, 0.075972, 0.078236, 0.080564, 0.082946, 0.085373, 0.087831, 0.090314, 0.092816, 0.095332, 0.097855, 0.100379, 0.102902, 0.10542, 0.10793, 0.110431, 0.11292, 0.115395, 0.117855, 0.120298, 0.122724, 0.125132, 0.127522, 0.129893, 0.132245, 0.134577, 0.136891, 0.139186, 0.141462, 0.143719, 0.145958, 0.148179, 0.150383, 0.152569, 0.154739, 0.156894, 0.159033, 0.161158, 0.163269, 0.165368, 0.167454, 0.16953, 0.171596, 0.173652, 0.175701, 0.177743, 0.179779, 0.181811, 0.18384, 0.185867, 0.187893, 0.189921, 0.191952, 0.193986, 0.196027, 0.198075, 0.200133, 0.202203, 0.204286, 0.206384, 0.208501, 0.210638, 0.212797, 0.214982, 0.217194, 0.219437, 0.221713, 0.224025, 0.226377, 0.228772, 0.231214, 0.233705, 0.236249, 0.238851, 0.241514, 0.244242, 0.24704, 0.249911, 0.252861, 0.255895, 0.259016, 0.262229, 0.26554, 0.268953, 0.272473, 0.276106, 0.279857, 0.283729, 0.287728, 0.291859, 0.296125, 0.30053, 0.305079, 0.309773, 0.314616, 0.31961, 0.324755, 0.330052, 0.3355, 0.341098, 0.346844, 0.352734, 0.358764, 0.364929, 0.371224, 0.377643, 0.384178, 0.39082, 0.397563, 0.4044, 0.411324, 0.418323, 0.42539, 0.432519, 0.439703, 0.446936, 0.45421, 0.46152, 0.468861, 0.476226, 0.483612, 0.491014, 0.498428, 0.505851, 0.51328, 0.520713, 0.528148, 0.535582, 0.543015, 0.550446, 0.557873, 0.565296, 0.572706, 0.580107, 0.587502, 0.594891, 0.602275, 0.609644, 0.616999, 0.62435, 0.631696, 0.639027, 0.646344, 0.653659, 0.660969, 0.668256, 0.675541, 0.682828, 0.690088, 0.697349, 0.704611, 0.711848, 0.719089, 0.726324, 0.733545, 0.740772, 0.747981, 0.75519, 0.762398, 0.769591, 0.776795, 0.783977, 0.791167, 0.798348, 0.805527, 0.812706, 0.819875, 0.827052, 0.834213, 0.841387, 0.84854, 0.855711, 0.862859, 0.870024, 0.877168, 0.88433, 0.89147, 0.898627, 0.905763, 0.912915, 0.920049, 0.927196, 0.934329, 0.94147, 0.948604, 0.955742, 0.962878, 0.970012, 0.977154, 0.984288, 0.991438],\n  b: [0.013866, 0.018331, 0.023708, 0.029965, 0.03713, 0.044973, 0.052844, 0.06075, 0.068667, 0.076603, 0.084584, 0.09261, 0.100676, 0.108787, 0.116965, 0.125209, 0.133515, 0.141886, 0.150327, 0.158841, 0.167446, 0.176129, 0.184892, 0.193735, 0.20266, 0.211667, 0.220755, 0.229922, 0.239164, 0.248477, 0.257854, 0.267289, 0.276784, 0.286321, 0.295879, 0.305443, 0.315, 0.324538, 0.334011, 0.343404, 0.352688, 0.361816, 0.370771, 0.379497, 0.387973, 0.396152, 0.404009, 0.411514, 0.418647, 0.425392, 0.431742, 0.437695, 0.443256, 0.448436, 0.453248, 0.45771, 0.46184, 0.46566, 0.46919, 0.472451, 0.475462, 0.478243, 0.480812, 0.483186, 0.48538, 0.487408, 0.489287, 0.491024, 0.492631, 0.494121, 0.495501, 0.496778, 0.49796, 0.499053, 0.500067, 0.501002, 0.501864, 0.502658, 0.503386, 0.504052, 0.504662, 0.505215, 0.505714, 0.50616, 0.506555, 0.506901, 0.507198, 0.507448, 0.507652, 0.507809, 0.507921, 0.507989, 0.508011, 0.507988, 0.50792, 0.507806, 0.507648, 0.507443, 0.507192, 0.506895, 0.506551, 0.506159, 0.505719, 0.50523, 0.504692, 0.504105, 0.503466, 0.502777, 0.502035, 0.501241, 0.500394, 0.499492, 0.498536, 0.497524, 0.496456, 0.495332, 0.49415, 0.49291, 0.491611, 0.490253, 0.488836, 0.487358, 0.485819, 0.484219, 0.482558, 0.480835, 0.479049, 0.477201, 0.47529, 0.473316, 0.471279, 0.46918, 0.467018, 0.464794, 0.462509, 0.460162, 0.457755, 0.455289, 0.452765, 0.450184, 0.447543, 0.444848, 0.442102, 0.439305, 0.436461, 0.433573, 0.430644, 0.427671, 0.424666, 0.421631, 0.418573, 0.415496, 0.412403, 0.409303, 0.406205, 0.403118, 0.400047, 0.397002, 0.393995, 0.391037, 0.388137, 0.385308, 0.382563, 0.379915, 0.377376, 0.374959, 0.372677, 0.370541, 0.368567, 0.366762, 0.365136, 0.363701, 0.362468, 0.361438, 0.360619, 0.360014, 0.35963, 0.359469, 0.359529, 0.35981, 0.360311, 0.36103, 0.361965, 0.363111, 0.364466, 0.366025, 0.367783, 0.369734, 0.371874, 0.374198, 0.376698, 0.379371, 0.38221, 0.38521, 0.388365, 0.391671, 0.395122, 0.398714, 0.402441, 0.406299, 0.410283, 0.41439, 0.418613, 0.42295, 0.427397, 0.431951, 0.436607, 0.441361, 0.446213, 0.45116, 0.456192, 0.461314, 0.466526, 0.471811, 0.477182, 0.482635, 0.488154, 0.493755, 0.499428, 0.505167, 0.510983, 0.516859, 0.522806, 0.528821, 0.534892, 0.541039, 0.547233, 0.553499, 0.55982, 0.566202, 0.572645, 0.57914, 0.585701, 0.592307, 0.598983, 0.605696, 0.612482, 0.619299, 0.626189, 0.633109, 0.640099, 0.647116, 0.654202, 0.661309, 0.668481, 0.675675, 0.682926, 0.690198, 0.697519, 0.704863, 0.712242, 0.719649, 0.727077, 0.734536, 0.742002, 0.749504]\n};\n","\nimport type { ColorMap } from \"./types\";\n\nexport const inferno: ColorMap = {\n  r: [0.001462, 0.002267, 0.003299, 0.004547, 0.006006, 0.007676, 0.009561, 0.011663, 0.013995, 0.016561, 0.019373, 0.022447, 0.025793, 0.029432, 0.033385, 0.037668, 0.042253, 0.046915, 0.051644, 0.056449, 0.06134, 0.066331, 0.071429, 0.076637, 0.081962, 0.087411, 0.09299, 0.098702, 0.104551, 0.110536, 0.116656, 0.122908, 0.129285, 0.135778, 0.142378, 0.149073, 0.15585, 0.162689, 0.169575, 0.176493, 0.183429, 0.190367, 0.197297, 0.204209, 0.211095, 0.217949, 0.224763, 0.231538, 0.238273, 0.244967, 0.25162, 0.258234, 0.26481, 0.271347, 0.27785, 0.284321, 0.290763, 0.297178, 0.303568, 0.309935, 0.316282, 0.32261, 0.328921, 0.335217, 0.3415, 0.347771, 0.354032, 0.360284, 0.366529, 0.372768, 0.379001, 0.385228, 0.391453, 0.397674, 0.403894, 0.410113, 0.416331, 0.422549, 0.428768, 0.434987, 0.441207, 0.447428, 0.453651, 0.459875, 0.4661, 0.472328, 0.478558, 0.484789, 0.491022, 0.497257, 0.503493, 0.50973, 0.515967, 0.522206, 0.528444, 0.534683, 0.54092, 0.547157, 0.553392, 0.559624, 0.565854, 0.572081, 0.578304, 0.584521, 0.590734, 0.59694, 0.603139, 0.60933, 0.615513, 0.621685, 0.627847, 0.633998, 0.640135, 0.64626, 0.652369, 0.658463, 0.66454, 0.670599, 0.676638, 0.682656, 0.688653, 0.694627, 0.700576, 0.7065, 0.712396, 0.718264, 0.724103, 0.729909, 0.735683, 0.741423, 0.747127, 0.752794, 0.758422, 0.76401, 0.769556, 0.775059, 0.780517, 0.785929, 0.791293, 0.796607, 0.801871, 0.807082, 0.812239, 0.817341, 0.822386, 0.827372, 0.832299, 0.837165, 0.841969, 0.846709, 0.851384, 0.855992, 0.860533, 0.865006, 0.869409, 0.873741, 0.878001, 0.882188, 0.886302, 0.890341, 0.894305, 0.898192, 0.902003, 0.905735, 0.90939, 0.912966, 0.916462, 0.919879, 0.923215, 0.92647, 0.929644, 0.932737, 0.935747, 0.938675, 0.941521, 0.944285, 0.946965, 0.949562, 0.952075, 0.954506, 0.956852, 0.959114, 0.961293, 0.963387, 0.965397, 0.967322, 0.969163, 0.970919, 0.97259, 0.974176, 0.975677, 0.977092, 0.978422, 0.979666, 0.980824, 0.981895, 0.982881, 0.983779, 0.984591, 0.985315, 0.985952, 0.986502, 0.986964, 0.987337, 0.987622, 0.987819, 0.987926, 0.987945, 0.987874, 0.987714, 0.987464, 0.987124, 0.986694, 0.986175, 0.985566, 0.984865, 0.984075, 0.983196, 0.982228, 0.981173, 0.980032, 0.978806, 0.977497, 0.976108, 0.974638, 0.973088, 0.971468, 0.969783, 0.968041, 0.966243, 0.964394, 0.962517, 0.960626, 0.95872, 0.956834, 0.954997, 0.953215, 0.951546, 0.950018, 0.948683, 0.947594, 0.946809, 0.946392, 0.946403, 0.946903, 0.947937, 0.949545, 0.95174, 0.954529, 0.957896, 0.961812, 0.966249, 0.971162, 0.976511, 0.982257, 0.988362],\n  g: [0.000466, 0.00127, 0.002249, 0.003392, 0.004692, 0.006136, 0.007713, 0.009417, 0.011225, 0.013136, 0.015133, 0.017199, 0.019331, 0.021503, 0.023702, 0.025921, 0.028139, 0.030324, 0.032474, 0.034569, 0.03659, 0.038504, 0.040294, 0.041905, 0.043328, 0.044556, 0.045583, 0.046402, 0.047008, 0.047399, 0.047574, 0.047536, 0.047293, 0.046856, 0.046242, 0.045468, 0.044559, 0.043554, 0.042489, 0.041402, 0.040329, 0.039309, 0.0384, 0.037632, 0.03703, 0.036615, 0.036405, 0.036405, 0.036621, 0.037055, 0.037705, 0.038571, 0.039647, 0.040922, 0.042353, 0.043933, 0.045644, 0.04747, 0.049396, 0.051407, 0.05349, 0.055634, 0.057827, 0.06006, 0.062325, 0.064616, 0.066925, 0.069247, 0.071579, 0.073915, 0.076253, 0.078591, 0.080927, 0.083257, 0.08558, 0.087896, 0.090203, 0.092501, 0.09479, 0.097069, 0.099338, 0.101597, 0.103848, 0.106089, 0.108322, 0.110547, 0.112764, 0.114974, 0.117179, 0.119379, 0.121575, 0.123769, 0.12596, 0.12815, 0.130341, 0.132534, 0.134729, 0.136929, 0.139134, 0.141346, 0.143567, 0.145797, 0.148039, 0.150294, 0.152563, 0.154848, 0.157151, 0.159474, 0.161817, 0.164184, 0.166575, 0.168992, 0.171438, 0.173914, 0.176421, 0.178962, 0.181539, 0.184153, 0.186807, 0.189501, 0.192239, 0.195021, 0.197851, 0.200728, 0.203656, 0.206636, 0.20967, 0.212759, 0.215906, 0.219112, 0.222378, 0.225706, 0.229097, 0.232554, 0.236077, 0.239667, 0.243327, 0.247056, 0.250856, 0.254728, 0.258674, 0.262692, 0.266786, 0.270954, 0.275197, 0.279517, 0.283913, 0.288385, 0.292933, 0.297559, 0.30226, 0.307038, 0.311892, 0.316822, 0.321827, 0.326906, 0.33206, 0.337287, 0.342586, 0.347957, 0.353399, 0.358911, 0.364492, 0.37014, 0.375856, 0.381636, 0.387481, 0.393389, 0.399359, 0.405389, 0.411479, 0.417627, 0.423831, 0.430091, 0.436405, 0.442772, 0.449191, 0.45566, 0.462178, 0.468744, 0.475356, 0.482014, 0.488716, 0.495462, 0.502249, 0.509078, 0.515946, 0.522853, 0.529798, 0.53678, 0.543798, 0.55085, 0.557937, 0.565057, 0.572209, 0.579392, 0.586606, 0.593849, 0.601122, 0.608422, 0.61575, 0.623105, 0.630485, 0.63789, 0.64532, 0.652773, 0.66025, 0.667748, 0.675267, 0.682807, 0.690366, 0.697944, 0.70554, 0.713153, 0.720782, 0.728427, 0.736087, 0.743758, 0.751442, 0.759135, 0.766837, 0.774545, 0.782258, 0.789974, 0.797692, 0.805409, 0.813122, 0.820825, 0.828515, 0.836191, 0.843848, 0.851476, 0.859069, 0.866624, 0.874129, 0.881569, 0.888942, 0.896226, 0.903409, 0.910473, 0.917399, 0.924168, 0.930761, 0.937159, 0.943348, 0.949318, 0.955063, 0.960587, 0.965896, 0.971003, 0.975924, 0.980678, 0.985282, 0.989753, 0.994109, 0.998364],\n  b: [0.013866, 0.01857, 0.024239, 0.030909, 0.038558, 0.046836, 0.055143, 0.06346, 0.071862, 0.080282, 0.088767, 0.097327, 0.10593, 0.114621, 0.123397, 0.132232, 0.141141, 0.150164, 0.159254, 0.168414, 0.177642, 0.186962, 0.196354, 0.205799, 0.215289, 0.224813, 0.234358, 0.243904, 0.25343, 0.262912, 0.272321, 0.281624, 0.290788, 0.299776, 0.308553, 0.317085, 0.325338, 0.333277, 0.340874, 0.348111, 0.354971, 0.361447, 0.367535, 0.373238, 0.378563, 0.383522, 0.388129, 0.3924, 0.396353, 0.400007, 0.403378, 0.406485, 0.409345, 0.411976, 0.414392, 0.416608, 0.418637, 0.420491, 0.422182, 0.423721, 0.425116, 0.426377, 0.427511, 0.428524, 0.429425, 0.430217, 0.430906, 0.431497, 0.431994, 0.4324, 0.432719, 0.432955, 0.433109, 0.433183, 0.433179, 0.433098, 0.432943, 0.432714, 0.432412, 0.432039, 0.431594, 0.43108, 0.430498, 0.429846, 0.429125, 0.428334, 0.427475, 0.426548, 0.425552, 0.424488, 0.423356, 0.422156, 0.420887, 0.419549, 0.418142, 0.416667, 0.415123, 0.413511, 0.411829, 0.410078, 0.408258, 0.406369, 0.404411, 0.402385, 0.40029, 0.398125, 0.395891, 0.393589, 0.391219, 0.388781, 0.386276, 0.383704, 0.381065, 0.378359, 0.375586, 0.372748, 0.369846, 0.366879, 0.363849, 0.360757, 0.357603, 0.354388, 0.351113, 0.347777, 0.344383, 0.340931, 0.337424, 0.333861, 0.330245, 0.326576, 0.322856, 0.319085, 0.315266, 0.311399, 0.307485, 0.303526, 0.299523, 0.295477, 0.29139, 0.287264, 0.283099, 0.278898, 0.274661, 0.27039, 0.266085, 0.26175, 0.257383, 0.252988, 0.248564, 0.244113, 0.239636, 0.235133, 0.230606, 0.226055, 0.221482, 0.216886, 0.212268, 0.207628, 0.202968, 0.198286, 0.193584, 0.18886, 0.184116, 0.17935, 0.174563, 0.169755, 0.164924, 0.16007, 0.155193, 0.150292, 0.145367, 0.140417, 0.13544, 0.130438, 0.125409, 0.120354, 0.115272, 0.110164, 0.105031, 0.099874, 0.094695, 0.089499, 0.084289, 0.079073, 0.073859, 0.068659, 0.063488, 0.058367, 0.053324, 0.048392, 0.043618, 0.03905, 0.034931, 0.031409, 0.028508, 0.02625, 0.024661, 0.02377, 0.023606, 0.024202, 0.025592, 0.027814, 0.030908, 0.034916, 0.039886, 0.045581, 0.05175, 0.058329, 0.065257, 0.072489, 0.07999, 0.087731, 0.095694, 0.103863, 0.112229, 0.120785, 0.129527, 0.138453, 0.147565, 0.156863, 0.166353, 0.176037, 0.185923, 0.196018, 0.206332, 0.216877, 0.227658, 0.238686, 0.249972, 0.261534, 0.273391, 0.285546, 0.29801, 0.31082, 0.323974, 0.337475, 0.351369, 0.365627, 0.380271, 0.395289, 0.410665, 0.426373, 0.442367, 0.458592, 0.47497, 0.491426, 0.50786, 0.524203, 0.540361, 0.556275, 0.571925, 0.587206, 0.602154, 0.61676, 0.631017, 0.644924]\n};\n","\nimport type { ColorMap } from \"./types\";\n\nexport const plasma: ColorMap = {\n  r: [0.050383, 0.063536, 0.075353, 0.086222, 0.096379, 0.10598, 0.115124, 0.123903, 0.132381, 0.140603, 0.148607, 0.156421, 0.16407, 0.171574, 0.17895, 0.186213, 0.193374, 0.200445, 0.207435, 0.21435, 0.221197, 0.227983, 0.234715, 0.241396, 0.248032, 0.254627, 0.261183, 0.267703, 0.274191, 0.280648, 0.287076, 0.293478, 0.299855, 0.30621, 0.312543, 0.318856, 0.32515, 0.331426, 0.337683, 0.343925, 0.35015, 0.356359, 0.362553, 0.368733, 0.374897, 0.381047, 0.387183, 0.393304, 0.399411, 0.405503, 0.41158, 0.417642, 0.423689, 0.429719, 0.435734, 0.441732, 0.447714, 0.453677, 0.459623, 0.46555, 0.471457, 0.477344, 0.48321, 0.489055, 0.494877, 0.500678, 0.506454, 0.512206, 0.517933, 0.523633, 0.529306, 0.534952, 0.54057, 0.546157, 0.551715, 0.557243, 0.562738, 0.568201, 0.573632, 0.579029, 0.584391, 0.589719, 0.595011, 0.600266, 0.605485, 0.610667, 0.615812, 0.620919, 0.625987, 0.631017, 0.636008, 0.640959, 0.645872, 0.650746, 0.65558, 0.660374, 0.665129, 0.669845, 0.674522, 0.67916, 0.683758, 0.688318, 0.69284, 0.697324, 0.701769, 0.706178, 0.710549, 0.714883, 0.719181, 0.723444, 0.72767, 0.731862, 0.736019, 0.740143, 0.744232, 0.748289, 0.752312, 0.756304, 0.760264, 0.764193, 0.76809, 0.771958, 0.775796, 0.779604, 0.783383, 0.787133, 0.790855, 0.794549, 0.798216, 0.801855, 0.805467, 0.809052, 0.812612, 0.816144, 0.819651, 0.823132, 0.826588, 0.830018, 0.833422, 0.836801, 0.840155, 0.843484, 0.846788, 0.850066, 0.853319, 0.856547, 0.85975, 0.862927, 0.866078, 0.869203, 0.872303, 0.875376, 0.878423, 0.881443, 0.884436, 0.887402, 0.89034, 0.89325, 0.896131, 0.898984, 0.901807, 0.904601, 0.907365, 0.910098, 0.9128, 0.915471, 0.918109, 0.920714, 0.923287, 0.925825, 0.928329, 0.930798, 0.933232, 0.93563, 0.93799, 0.940313, 0.942598, 0.944844, 0.947051, 0.949217, 0.951344, 0.953428, 0.95547, 0.957469, 0.959424, 0.961336, 0.963203, 0.965024, 0.966798, 0.968526, 0.970205, 0.971835, 0.973416, 0.974947, 0.976428, 0.977856, 0.979233, 0.980556, 0.981826, 0.983041, 0.984199, 0.985301, 0.986345, 0.987332, 0.98826, 0.989128, 0.989935, 0.990681, 0.991365, 0.991985, 0.992541, 0.993032, 0.993456, 0.993814, 0.994103, 0.994324, 0.994474, 0.994553, 0.994561, 0.994495, 0.994355, 0.994141, 0.993851, 0.993482, 0.993033, 0.992505, 0.991897, 0.991209, 0.990439, 0.989587, 0.988648, 0.987621, 0.986509, 0.985314, 0.984031, 0.982653, 0.98119, 0.979644, 0.977995, 0.976265, 0.974443, 0.97253, 0.970533, 0.968443, 0.966271, 0.964021, 0.961681, 0.959276, 0.956808, 0.954287, 0.951726, 0.949151, 0.946602, 0.944152, 0.941896, 0.940015],\n  g: [0.029803, 0.028426, 0.027206, 0.026125, 0.025165, 0.024309, 0.023556, 0.022878, 0.022258, 0.021687, 0.021154, 0.020651, 0.020171, 0.019706, 0.019252, 0.018803, 0.018354, 0.017902, 0.017442, 0.016973, 0.016497, 0.016007, 0.015502, 0.014979, 0.014439, 0.013882, 0.013308, 0.012716, 0.012109, 0.011488, 0.010855, 0.010213, 0.009561, 0.008902, 0.008239, 0.007576, 0.006915, 0.006261, 0.005618, 0.004991, 0.004382, 0.003798, 0.003243, 0.002724, 0.002245, 0.001814, 0.001434, 0.001114, 0.000859, 0.000678, 0.000577, 0.000564, 0.000646, 0.000831, 0.001127, 0.00154, 0.00208, 0.002755, 0.003574, 0.004545, 0.005678, 0.00698, 0.00846, 0.010127, 0.01199, 0.014055, 0.016333, 0.018833, 0.021563, 0.024532, 0.027747, 0.031217, 0.03495, 0.038954, 0.043136, 0.047331, 0.051545, 0.055778, 0.060028, 0.064296, 0.068579, 0.072878, 0.07719, 0.081516, 0.085854, 0.090204, 0.094564, 0.098934, 0.103312, 0.107699, 0.112092, 0.116492, 0.120898, 0.125309, 0.129725, 0.134144, 0.138566, 0.142992, 0.147419, 0.151848, 0.156278, 0.160709, 0.165141, 0.169573, 0.174005, 0.178437, 0.182868, 0.187299, 0.191729, 0.196158, 0.200586, 0.205013, 0.209439, 0.213864, 0.218288, 0.222711, 0.227133, 0.231555, 0.235976, 0.240396, 0.244817, 0.249237, 0.253658, 0.258078, 0.2625, 0.266922, 0.271345, 0.27577, 0.280197, 0.284626, 0.289057, 0.293491, 0.297928, 0.302368, 0.306812, 0.311261, 0.315714, 0.320172, 0.324635, 0.329105, 0.33358, 0.338062, 0.342551, 0.347048, 0.351553, 0.356066, 0.360588, 0.365119, 0.36966, 0.374212, 0.378774, 0.383347, 0.387932, 0.392529, 0.397139, 0.401762, 0.406398, 0.411048, 0.415712, 0.420392, 0.425087, 0.429797, 0.434524, 0.439268, 0.444029, 0.448807, 0.453603, 0.458417, 0.463251, 0.468103, 0.472975, 0.477867, 0.48278, 0.487712, 0.492667, 0.497642, 0.502639, 0.507658, 0.512699, 0.517763, 0.52285, 0.52796, 0.533093, 0.53825, 0.543431, 0.548636, 0.553865, 0.559118, 0.564396, 0.5697, 0.575028, 0.580382, 0.585761, 0.591165, 0.596595, 0.602051, 0.607532, 0.613039, 0.618572, 0.624131, 0.629718, 0.63533, 0.640969, 0.646633, 0.652325, 0.658043, 0.663787, 0.669558, 0.675355, 0.681179, 0.68703, 0.692907, 0.69881, 0.704741, 0.710698, 0.716681, 0.722691, 0.728728, 0.734791, 0.74088, 0.746995, 0.753137, 0.759304, 0.765499, 0.77172, 0.777967, 0.784239, 0.790537, 0.796859, 0.803205, 0.809579, 0.815978, 0.822401, 0.828846, 0.835315, 0.841812, 0.848329, 0.854866, 0.861432, 0.868016, 0.874622, 0.88125, 0.887896, 0.894564, 0.901249, 0.90795, 0.914672, 0.921407, 0.928152, 0.934908, 0.941671, 0.948435, 0.95519, 0.961916, 0.96859, 0.975158],\n  b: [0.527975, 0.533124, 0.538007, 0.542658, 0.547103, 0.551368, 0.555468, 0.559423, 0.56325, 0.566959, 0.570562, 0.574065, 0.577478, 0.580806, 0.584054, 0.587228, 0.59033, 0.593364, 0.596333, 0.599239, 0.602083, 0.604867, 0.607592, 0.610259, 0.612868, 0.615419, 0.617911, 0.620346, 0.622722, 0.625038, 0.627295, 0.62949, 0.631624, 0.633694, 0.6357, 0.63764, 0.639512, 0.641316, 0.643049, 0.64471, 0.646298, 0.64781, 0.649245, 0.650601, 0.651876, 0.653068, 0.654177, 0.655199, 0.656133, 0.656977, 0.65773, 0.65839, 0.658956, 0.659425, 0.659797, 0.660069, 0.66024, 0.66031, 0.660277, 0.660139, 0.659897, 0.659549, 0.659095, 0.658534, 0.657865, 0.657088, 0.656202, 0.655209, 0.654109, 0.652901, 0.651586, 0.650165, 0.64864, 0.64701, 0.645277, 0.643443, 0.641509, 0.639477, 0.637349, 0.635126, 0.632812, 0.630408, 0.627917, 0.625342, 0.622686, 0.619951, 0.61714, 0.614257, 0.611305, 0.608287, 0.605205, 0.602065, 0.598867, 0.595617, 0.592317, 0.588971, 0.585582, 0.582154, 0.578688, 0.575189, 0.57166, 0.568103, 0.564522, 0.560919, 0.557296, 0.553657, 0.550004, 0.546338, 0.542663, 0.538981, 0.535293, 0.531601, 0.527908, 0.524216, 0.520524, 0.516834, 0.513149, 0.509468, 0.505794, 0.502126, 0.498465, 0.494813, 0.491171, 0.487539, 0.483918, 0.480307, 0.476706, 0.473117, 0.469538, 0.465971, 0.462415, 0.45887, 0.455338, 0.451816, 0.448306, 0.444806, 0.441316, 0.437836, 0.434366, 0.430905, 0.427455, 0.424013, 0.420579, 0.417153, 0.413734, 0.410322, 0.406917, 0.403519, 0.400126, 0.396738, 0.393355, 0.389976, 0.3866, 0.383229, 0.37986, 0.376494, 0.37313, 0.369768, 0.366407, 0.363047, 0.359688, 0.356329, 0.35297, 0.34961, 0.346251, 0.34289, 0.339529, 0.336166, 0.332801, 0.329435, 0.326067, 0.322697, 0.319325, 0.315952, 0.312575, 0.309197, 0.305816, 0.302433, 0.299049, 0.295662, 0.292275, 0.288883, 0.28549, 0.282096, 0.278701, 0.275305, 0.271909, 0.268513, 0.265118, 0.261721, 0.258325, 0.254931, 0.25154, 0.248151, 0.244767, 0.241387, 0.238013, 0.234646, 0.231287, 0.227937, 0.224595, 0.221265, 0.217948, 0.214648, 0.211364, 0.2081, 0.204859, 0.201642, 0.198453, 0.195295, 0.19217, 0.189084, 0.186041, 0.183043, 0.180097, 0.177208, 0.174381, 0.171622, 0.168938, 0.166335, 0.163821, 0.161404, 0.159092, 0.156891, 0.154808, 0.152855, 0.151042, 0.149377, 0.14787, 0.146529, 0.145357, 0.144363, 0.143557, 0.142945, 0.142528, 0.142303, 0.142279, 0.142453, 0.142808, 0.143351, 0.144061, 0.144923, 0.145919, 0.147014, 0.14818, 0.14937, 0.15052, 0.151566, 0.152409, 0.152921, 0.152925, 0.152178, 0.150328, 0.146861, 0.140956, 0.131326]\n};\n","\nimport type { ColorMap } from \"./types\";\n\nexport const viridis: ColorMap = {\n  r: [0.267004, 0.26851, 0.269944, 0.271305, 0.272594, 0.273809, 0.274952, 0.276022, 0.277018, 0.277941, 0.278791, 0.279566, 0.280267, 0.280894, 0.281446, 0.281924, 0.282327, 0.282656, 0.28291, 0.283091, 0.283197, 0.283229, 0.283187, 0.283072, 0.282884, 0.282623, 0.28229, 0.281887, 0.281412, 0.280868, 0.280255, 0.279574, 0.278826, 0.278012, 0.277134, 0.276194, 0.275191, 0.274128, 0.273006, 0.271828, 0.270595, 0.269308, 0.267968, 0.26658, 0.265145, 0.263663, 0.262138, 0.260571, 0.258965, 0.257322, 0.255645, 0.253935, 0.252194, 0.250425, 0.248629, 0.246811, 0.244972, 0.243113, 0.241237, 0.239346, 0.237441, 0.235526, 0.233603, 0.231674, 0.229739, 0.227802, 0.225863, 0.223925, 0.221989, 0.220057, 0.21813, 0.21621, 0.214298, 0.212395, 0.210503, 0.208623, 0.206756, 0.204903, 0.203063, 0.201239, 0.19943, 0.197636, 0.19586, 0.1941, 0.192357, 0.190631, 0.188923, 0.187231, 0.185556, 0.183898, 0.182256, 0.180629, 0.179019, 0.177423, 0.175841, 0.174274, 0.172719, 0.171176, 0.169646, 0.168126, 0.166617, 0.165117, 0.163625, 0.162142, 0.160665, 0.159194, 0.157729, 0.15627, 0.154815, 0.153364, 0.151918, 0.150476, 0.149039, 0.147607, 0.14618, 0.144759, 0.143343, 0.141935, 0.140536, 0.139147, 0.13777, 0.136408, 0.135066, 0.133743, 0.132444, 0.131172, 0.129933, 0.128729, 0.127568, 0.126453, 0.125394, 0.124395, 0.123463, 0.122606, 0.121831, 0.121148, 0.120565, 0.120092, 0.119738, 0.119512, 0.119423, 0.119483, 0.119699, 0.120081, 0.120638, 0.12138, 0.122312, 0.123444, 0.12478, 0.126326, 0.128087, 0.130067, 0.132268, 0.134692, 0.137339, 0.14021, 0.143303, 0.146616, 0.150148, 0.153894, 0.157851, 0.162016, 0.166383, 0.170948, 0.175707, 0.180653, 0.185783, 0.19109, 0.196571, 0.202219, 0.20803, 0.214, 0.220124, 0.226397, 0.232815, 0.239374, 0.24607, 0.252899, 0.259857, 0.266941, 0.274149, 0.281477, 0.288921, 0.296479, 0.304148, 0.311925, 0.319809, 0.327796, 0.335885, 0.344074, 0.35236, 0.360741, 0.369214, 0.377779, 0.386433, 0.395174, 0.404001, 0.412913, 0.421908, 0.430983, 0.440137, 0.449368, 0.458674, 0.468053, 0.477504, 0.487026, 0.496615, 0.506271, 0.515992, 0.525776, 0.535621, 0.545524, 0.555484, 0.565498, 0.575563, 0.585678, 0.595839, 0.606045, 0.616293, 0.626579, 0.636902, 0.647257, 0.657642, 0.668054, 0.678489, 0.688944, 0.699415, 0.709898, 0.720391, 0.730889, 0.741388, 0.751884, 0.762373, 0.772852, 0.783315, 0.79376, 0.804182, 0.814576, 0.82494, 0.83527, 0.845561, 0.85581, 0.866013, 0.876168, 0.886271, 0.89632, 0.906311, 0.916242, 0.926106, 0.935904, 0.945636, 0.9553, 0.964894, 0.974417, 0.983868, 0.993248],\n  g: [0.004874, 0.009605, 0.014625, 0.019942, 0.025563, 0.031497, 0.037752, 0.044167, 0.050344, 0.056324, 0.062145, 0.067836, 0.073417, 0.078907, 0.08432, 0.089666, 0.094955, 0.100196, 0.105393, 0.110553, 0.11568, 0.120777, 0.125848, 0.130895, 0.13592, 0.140926, 0.145912, 0.150881, 0.155834, 0.160771, 0.165693, 0.170599, 0.17549, 0.180367, 0.185228, 0.190074, 0.194905, 0.199721, 0.20452, 0.209303, 0.214069, 0.218818, 0.223549, 0.228262, 0.232956, 0.237631, 0.242286, 0.246922, 0.251537, 0.25613, 0.260703, 0.265254, 0.269783, 0.27429, 0.278775, 0.283237, 0.287675, 0.292092, 0.296485, 0.300855, 0.305202, 0.309527, 0.313828, 0.318106, 0.322361, 0.326594, 0.330805, 0.334994, 0.339161, 0.343307, 0.347432, 0.351535, 0.355619, 0.359683, 0.363727, 0.367752, 0.371758, 0.375746, 0.379716, 0.38367, 0.387607, 0.391528, 0.395433, 0.399323, 0.403199, 0.407061, 0.41091, 0.414746, 0.41857, 0.422383, 0.426184, 0.429975, 0.433756, 0.437527, 0.44129, 0.445044, 0.448791, 0.45253, 0.456262, 0.459988, 0.463708, 0.467423, 0.471133, 0.474838, 0.47854, 0.482237, 0.485932, 0.489624, 0.493313, 0.497, 0.500685, 0.504369, 0.508051, 0.511733, 0.515413, 0.519093, 0.522773, 0.526453, 0.530132, 0.533812, 0.537492, 0.541173, 0.544853, 0.548535, 0.552216, 0.555899, 0.559582, 0.563265, 0.566949, 0.570633, 0.574318, 0.578002, 0.581687, 0.585371, 0.589055, 0.592739, 0.596422, 0.600104, 0.603785, 0.607464, 0.611141, 0.614817, 0.61849, 0.622161, 0.625828, 0.629492, 0.633153, 0.636809, 0.640461, 0.644107, 0.647749, 0.651384, 0.655014, 0.658636, 0.662252, 0.665859, 0.669459, 0.67305, 0.676631, 0.680203, 0.683765, 0.687316, 0.690856, 0.694384, 0.6979, 0.701402, 0.704891, 0.708366, 0.711827, 0.715272, 0.718701, 0.722114, 0.725509, 0.728888, 0.732247, 0.735588, 0.73891, 0.742211, 0.745492, 0.748751, 0.751988, 0.755203, 0.758394, 0.761561, 0.764704, 0.767822, 0.770914, 0.77398, 0.777018, 0.780029, 0.783011, 0.785964, 0.788888, 0.791781, 0.794644, 0.797475, 0.800275, 0.803041, 0.805774, 0.808473, 0.811138, 0.813768, 0.816363, 0.818921, 0.821444, 0.823929, 0.826376, 0.828786, 0.831158, 0.833491, 0.835785, 0.838039, 0.840254, 0.84243, 0.844566, 0.846661, 0.848717, 0.850733, 0.852709, 0.854645, 0.856542, 0.8584, 0.860219, 0.861999, 0.863742, 0.865448, 0.867117, 0.868751, 0.87035, 0.871916, 0.873449, 0.874951, 0.876424, 0.877868, 0.879285, 0.880678, 0.882046, 0.883393, 0.88472, 0.886029, 0.887322, 0.888601, 0.889868, 0.891125, 0.892374, 0.893616, 0.894855, 0.896091, 0.89733, 0.89857, 0.899815, 0.901065, 0.902323, 0.90359, 0.904867, 0.906157],\n  b: [0.329415, 0.335427, 0.341379, 0.347269, 0.353093, 0.358853, 0.364543, 0.370164, 0.375715, 0.381191, 0.386592, 0.391917, 0.397163, 0.402329, 0.407414, 0.412415, 0.417331, 0.42216, 0.426902, 0.431554, 0.436115, 0.440584, 0.44496, 0.449241, 0.453427, 0.457517, 0.46151, 0.465405, 0.469201, 0.472899, 0.476498, 0.479997, 0.483397, 0.486697, 0.489898, 0.493001, 0.496005, 0.498911, 0.501721, 0.504434, 0.507052, 0.509577, 0.512008, 0.514349, 0.516599, 0.518762, 0.520837, 0.522828, 0.524736, 0.526563, 0.528312, 0.529983, 0.531579, 0.533103, 0.534556, 0.535941, 0.53726, 0.538516, 0.539709, 0.540844, 0.541921, 0.542944, 0.543914, 0.544834, 0.545706, 0.546532, 0.547314, 0.548053, 0.548752, 0.549413, 0.550038, 0.550627, 0.551184, 0.55171, 0.552206, 0.552675, 0.553117, 0.553533, 0.553925, 0.554294, 0.554642, 0.554969, 0.555276, 0.555565, 0.555836, 0.556089, 0.556326, 0.556547, 0.556753, 0.556944, 0.55712, 0.557282, 0.55743, 0.557565, 0.557685, 0.557792, 0.557885, 0.557965, 0.55803, 0.558082, 0.558119, 0.558141, 0.558148, 0.55814, 0.558115, 0.558073, 0.558013, 0.557936, 0.55784, 0.557724, 0.557587, 0.55743, 0.55725, 0.557049, 0.556823, 0.556572, 0.556295, 0.555991, 0.555659, 0.555298, 0.554906, 0.554483, 0.554029, 0.553541, 0.553018, 0.552459, 0.551864, 0.551229, 0.550556, 0.549841, 0.549086, 0.548287, 0.547445, 0.546557, 0.545623, 0.544641, 0.543611, 0.54253, 0.5414, 0.540218, 0.538982, 0.537692, 0.536347, 0.534946, 0.533488, 0.531973, 0.530398, 0.528763, 0.527068, 0.525311, 0.523491, 0.521608, 0.519661, 0.517649, 0.515571, 0.513427, 0.511215, 0.508936, 0.506589, 0.504172, 0.501686, 0.499129, 0.496502, 0.493803, 0.491033, 0.488189, 0.485273, 0.482284, 0.479221, 0.476084, 0.472873, 0.469588, 0.466226, 0.462789, 0.459277, 0.455688, 0.452024, 0.448284, 0.444467, 0.440573, 0.436601, 0.432552, 0.428426, 0.424223, 0.419943, 0.415586, 0.411152, 0.40664, 0.402049, 0.397381, 0.392636, 0.387814, 0.382914, 0.377939, 0.372886, 0.367757, 0.362552, 0.357269, 0.35191, 0.346476, 0.340967, 0.335384, 0.329727, 0.323998, 0.318195, 0.312321, 0.306377, 0.300362, 0.294279, 0.288127, 0.281908, 0.275626, 0.269281, 0.262877, 0.256415, 0.249897, 0.243329, 0.236712, 0.230052, 0.223353, 0.21662, 0.209861, 0.203082, 0.196293, 0.189503, 0.182725, 0.175971, 0.169257, 0.162603, 0.156029, 0.149561, 0.143228, 0.137064, 0.131109, 0.125405, 0.120005, 0.114965, 0.110347, 0.106217, 0.102646, 0.099702, 0.097452, 0.095953, 0.09525, 0.095374, 0.096335, 0.098125, 0.100717, 0.104071, 0.108131, 0.112838, 0.118128, 0.123941, 0.130215, 0.136897, 0.143936]\n};\n","\nimport type { ColorMap } from \"./types\";\n\nexport const cividis: ColorMap = {\n  r: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.003602, 0.017852, 0.03211, 0.046205, 0.058378, 0.068968, 0.078624, 0.087465, 0.095645, 0.103401, 0.110658, 0.117612, 0.124291, 0.130669, 0.13683, 0.142852, 0.148638, 0.154261, 0.159733, 0.165113, 0.170362, 0.17549, 0.180503, 0.185453, 0.190303, 0.195057, 0.199764, 0.204385, 0.208926, 0.213431, 0.217863, 0.222264, 0.226598, 0.230871, 0.23512, 0.239312, 0.243485, 0.247605, 0.251675, 0.255731, 0.25974, 0.263738, 0.267693, 0.271639, 0.275513, 0.279411, 0.28324, 0.287065, 0.290884, 0.294669, 0.298421, 0.302169, 0.305886, 0.309601, 0.313287, 0.316941, 0.320595, 0.32425, 0.327875, 0.331474, 0.335073, 0.338673, 0.342246, 0.345793, 0.349341, 0.352892, 0.356418, 0.359916, 0.363446, 0.366923, 0.37043, 0.373884, 0.377371, 0.38083, 0.384268, 0.387705, 0.391151, 0.394568, 0.397991, 0.401418, 0.40482, 0.408226, 0.411607, 0.414992, 0.418383, 0.421748, 0.42512, 0.428462, 0.431817, 0.435168, 0.438504, 0.44181, 0.445148, 0.448447, 0.451759, 0.455072, 0.458366, 0.461616, 0.464947, 0.468254, 0.471501, 0.474812, 0.478186, 0.481622, 0.485141, 0.488697, 0.492278, 0.495913, 0.499552, 0.503185, 0.506866, 0.51054, 0.514226, 0.51792, 0.521643, 0.525348, 0.529086, 0.532829, 0.536553, 0.540307, 0.544069, 0.54784, 0.551612, 0.555393, 0.559181, 0.562972, 0.566802, 0.570607, 0.574417, 0.578236, 0.582087, 0.585916, 0.589753, 0.593622, 0.597469, 0.601354, 0.605211, 0.609105, 0.612977, 0.616852, 0.620765, 0.624654, 0.628576, 0.632506, 0.636412, 0.640352, 0.64427, 0.648222, 0.652178, 0.656114, 0.660082, 0.664055, 0.668008, 0.671991, 0.675981, 0.679979, 0.68395, 0.687957, 0.691971, 0.695985, 0.700008, 0.704037, 0.708067, 0.712105, 0.716177, 0.720222, 0.724274, 0.728334, 0.732422, 0.736488, 0.740589, 0.744664, 0.748772, 0.752886, 0.756975, 0.761096, 0.765223, 0.769353, 0.773486, 0.777651, 0.781795, 0.785965, 0.790116, 0.794298, 0.79848, 0.802667, 0.806859, 0.811054, 0.815274, 0.819499, 0.823729, 0.827959, 0.832192, 0.836429, 0.840693, 0.844957, 0.849223, 0.853515, 0.857809, 0.862105, 0.866421, 0.870717, 0.875057, 0.879378, 0.88372, 0.888081, 0.89244, 0.896818, 0.901195, 0.905589, 0.91, 0.914407, 0.918828, 0.923279, 0.927724, 0.93218, 0.93666, 0.941147, 0.945654, 0.950178, 0.954725, 0.959284, 0.963872, 0.968469, 0.973114, 0.97778, 0.982497, 0.987293, 0.992218, 0.994847, 0.995249, 0.995503, 0.995737],\n  g: [0.135112, 0.138068, 0.141013, 0.143951, 0.146877, 0.149791, 0.152673, 0.155377, 0.157932, 0.160495, 0.163058, 0.165621, 0.168204, 0.1708, 0.17342, 0.176082, 0.178802, 0.18161, 0.18455, 0.186915, 0.188769, 0.19095, 0.193366, 0.195911, 0.198528, 0.201199, 0.203903, 0.206629, 0.209372, 0.212122, 0.214879, 0.217643, 0.220406, 0.22317, 0.225935, 0.228697, 0.231458, 0.234216, 0.236972, 0.239724, 0.242475, 0.245221, 0.247965, 0.250707, 0.253444, 0.25618, 0.258914, 0.261644, 0.264372, 0.267099, 0.269823, 0.272546, 0.275266, 0.277985, 0.280702, 0.283419, 0.286134, 0.288848, 0.291562, 0.294274, 0.296986, 0.299698, 0.302409, 0.30512, 0.307831, 0.310542, 0.313253, 0.315965, 0.318677, 0.32139, 0.324103, 0.326816, 0.329531, 0.332247, 0.334963, 0.337681, 0.340399, 0.34312, 0.345842, 0.348565, 0.351289, 0.354016, 0.356744, 0.359474, 0.362206, 0.364939, 0.367676, 0.370414, 0.373153, 0.375896, 0.378641, 0.381388, 0.384139, 0.38689, 0.389646, 0.392404, 0.395164, 0.397928, 0.400694, 0.403464, 0.406236, 0.409011, 0.41179, 0.414572, 0.417357, 0.420145, 0.422937, 0.425733, 0.428531, 0.431334, 0.43414, 0.43695, 0.439763, 0.44258, 0.445402, 0.448226, 0.451053, 0.453887, 0.456718, 0.459552, 0.462405, 0.465241, 0.468083, 0.47096, 0.473832, 0.476699, 0.479573, 0.482451, 0.485318, 0.488198, 0.491076, 0.49396, 0.496851, 0.499743, 0.502643, 0.505546, 0.508454, 0.511367, 0.514285, 0.517207, 0.520135, 0.523067, 0.526005, 0.528948, 0.531895, 0.534849, 0.537807, 0.540771, 0.543741, 0.546715, 0.549695, 0.552682, 0.555673, 0.55867, 0.561674, 0.564682, 0.567697, 0.570718, 0.573743, 0.576777, 0.579816, 0.582861, 0.585913, 0.58897, 0.592034, 0.595104, 0.59818, 0.601264, 0.604354, 0.60745, 0.610553, 0.613664, 0.61678, 0.619904, 0.623034, 0.626171, 0.629316, 0.632468, 0.635626, 0.638793, 0.641966, 0.645145, 0.648334, 0.651529, 0.654731, 0.657942, 0.66116, 0.664384, 0.667618, 0.670859, 0.674107, 0.677364, 0.680629, 0.6839, 0.687181, 0.69047, 0.693766, 0.697071, 0.700384, 0.703705, 0.707035, 0.710373, 0.713719, 0.717074, 0.720438, 0.72381, 0.72719, 0.73058, 0.733978, 0.737385, 0.740801, 0.744226, 0.747659, 0.751101, 0.754553, 0.758014, 0.761483, 0.764962, 0.76845, 0.771947, 0.775454, 0.778969, 0.782494, 0.786028, 0.789572, 0.793125, 0.796687, 0.800258, 0.803839, 0.80743, 0.81103, 0.814639, 0.818257, 0.821885, 0.825522, 0.829168, 0.832822, 0.836486, 0.840159, 0.843841, 0.84753, 0.851228, 0.854933, 0.858646, 0.862365, 0.866089, 0.869819, 0.87355, 0.877281, 0.881008, 0.884718, 0.888385, 0.892954, 0.898384, 0.903866, 0.909344],\n  b: [0.304751, 0.311105, 0.317579, 0.323982, 0.330479, 0.337065, 0.343704, 0.3505, 0.357521, 0.364534, 0.371608, 0.378769, 0.385902, 0.3931, 0.400353, 0.407577, 0.414764, 0.421859, 0.428802, 0.435532, 0.439563, 0.441085, 0.441561, 0.441564, 0.441248, 0.440785, 0.440196, 0.439531, 0.438863, 0.438105, 0.437342, 0.436593, 0.43579, 0.435067, 0.434308, 0.433547, 0.43284, 0.432148, 0.431404, 0.430752, 0.43012, 0.429528, 0.428908, 0.428325, 0.42779, 0.427299, 0.426788, 0.426329, 0.425924, 0.425497, 0.425126, 0.424809, 0.42448, 0.424206, 0.423914, 0.423678, 0.423498, 0.423304, 0.423167, 0.423014, 0.422917, 0.422873, 0.422814, 0.42281, 0.422789, 0.422821, 0.422837, 0.422979, 0.423031, 0.423211, 0.423373, 0.423517, 0.423716, 0.423973, 0.424213, 0.424512, 0.42479, 0.42512, 0.425512, 0.425889, 0.42625, 0.42667, 0.427144, 0.427605, 0.428053, 0.428559, 0.429127, 0.429685, 0.430226, 0.430823, 0.431501, 0.432075, 0.432796, 0.433428, 0.434209, 0.43489, 0.435653, 0.436475, 0.437305, 0.438096, 0.438986, 0.439848, 0.440708, 0.441642, 0.44257, 0.443577, 0.444578, 0.44556, 0.44664, 0.447692, 0.448864, 0.449982, 0.451134, 0.452341, 0.453659, 0.454885, 0.456264, 0.457582, 0.458976, 0.460457, 0.461969, 0.463395, 0.464908, 0.466357, 0.467681, 0.468845, 0.469767, 0.470384, 0.471008, 0.471453, 0.471751, 0.472032, 0.472305, 0.472432, 0.47255, 0.47264, 0.472707, 0.472639, 0.47266, 0.472543, 0.472401, 0.472352, 0.472163, 0.471947, 0.471704, 0.471439, 0.471147, 0.470829, 0.470488, 0.469988, 0.469593, 0.469172, 0.468724, 0.468118, 0.467618, 0.46709, 0.466401, 0.465821, 0.465074, 0.464441, 0.463638, 0.46295, 0.462237, 0.461351, 0.460583, 0.459641, 0.458668, 0.457818, 0.456791, 0.455886, 0.454801, 0.453689, 0.452702, 0.451534, 0.450338, 0.44927, 0.448018, 0.446736, 0.445424, 0.444251, 0.442886, 0.441491, 0.440072, 0.438624, 0.437147, 0.435647, 0.434117, 0.432386, 0.430805, 0.429194, 0.427554, 0.425717, 0.424028, 0.422131, 0.420393, 0.418448, 0.416472, 0.414659, 0.412638, 0.410587, 0.408516, 0.406422, 0.404112, 0.401966, 0.399613, 0.397423, 0.395016, 0.392597, 0.390153, 0.387684, 0.385198, 0.382504, 0.379785, 0.377043, 0.374292, 0.371529, 0.368747, 0.365746, 0.362741, 0.359729, 0.3565, 0.353259, 0.350011, 0.346571, 0.343333, 0.339685, 0.336241, 0.332599, 0.32877, 0.324968, 0.320982, 0.317021, 0.312889, 0.308594, 0.304348, 0.29996, 0.295244, 0.290611, 0.28588, 0.280876, 0.275815, 0.270532, 0.265085, 0.259365, 0.253563, 0.247445, 0.24131, 0.234677, 0.227954, 0.220878, 0.213336, 0.205468, 0.203445, 0.207561, 0.21237, 0.217772]\n};\n","\nimport type { ColorMap } from \"./types\";\n\nexport const gray: ColorMap = {\n  r: [0.0, 0.00392156862745098, 0.00784313725490196, 0.011764705882352941, 0.01568627450980392, 0.0196078431372549, 0.023529411764705882, 0.027450980392156862, 0.03137254901960784, 0.03529411764705882, 0.0392156862745098, 0.043137254901960784, 0.047058823529411764, 0.050980392156862744, 0.054901960784313725, 0.058823529411764705, 0.06274509803921569, 0.06666666666666667, 0.07058823529411765, 0.07450980392156863, 0.0784313725490196, 0.08235294117647059, 0.08627450980392157, 0.09019607843137255, 0.09411764705882353, 0.09803921568627451, 0.10196078431372549, 0.10588235294117647, 0.10980392156862745, 0.11372549019607843, 0.11764705882352941, 0.12156862745098039, 0.12549019607843137, 0.12941176470588234, 0.13333333333333333, 0.13725490196078433, 0.1411764705882353, 0.14509803921568626, 0.14901960784313725, 0.15294117647058825, 0.1568627450980392, 0.16078431372549018, 0.16470588235294117, 0.16862745098039217, 0.17254901960784313, 0.1764705882352941, 0.1803921568627451, 0.1843137254901961, 0.18823529411764706, 0.19215686274509802, 0.19607843137254902, 0.2, 0.20392156862745098, 0.20784313725490194, 0.21176470588235294, 0.21568627450980393, 0.2196078431372549, 0.22352941176470587, 0.22745098039215686, 0.23137254901960785, 0.23529411764705882, 0.2392156862745098, 0.24313725490196078, 0.24705882352941178, 0.25098039215686274, 0.2549019607843137, 0.2588235294117647, 0.2627450980392157, 0.26666666666666666, 0.27058823529411763, 0.27450980392156865, 0.2784313725490196, 0.2823529411764706, 0.28627450980392155, 0.2901960784313725, 0.29411764705882354, 0.2980392156862745, 0.30196078431372547, 0.3058823529411765, 0.30980392156862746, 0.3137254901960784, 0.3176470588235294, 0.32156862745098036, 0.3254901960784314, 0.32941176470588235, 0.3333333333333333, 0.33725490196078434, 0.3411764705882353, 0.34509803921568627, 0.34901960784313724, 0.3529411764705882, 0.3568627450980392, 0.3607843137254902, 0.36470588235294116, 0.3686274509803922, 0.37254901960784315, 0.3764705882352941, 0.3803921568627451, 0.38431372549019605, 0.38823529411764707, 0.39215686274509803, 0.396078431372549, 0.4, 0.403921568627451, 0.40784313725490196, 0.4117647058823529, 0.4156862745098039, 0.4196078431372549, 0.4235294117647059, 0.42745098039215684, 0.43137254901960786, 0.43529411764705883, 0.4392156862745098, 0.44313725490196076, 0.44705882352941173, 0.45098039215686275, 0.4549019607843137, 0.4588235294117647, 0.4627450980392157, 0.4666666666666667, 0.47058823529411764, 0.4745098039215686, 0.4784313725490196, 0.4823529411764706, 0.48627450980392156, 0.49019607843137253, 0.49411764705882355, 0.4980392156862745, 0.5019607843137255, 0.5058823529411764, 0.5098039215686274, 0.5137254901960784, 0.5176470588235293, 0.5215686274509804, 0.5254901960784314, 0.5294117647058824, 0.5333333333333333, 0.5372549019607843, 0.5411764705882353, 0.5450980392156862, 0.5490196078431373, 0.5529411764705883, 0.5568627450980392, 0.5607843137254902, 0.5647058823529412, 0.5686274509803921, 0.5725490196078431, 0.5764705882352941, 0.580392156862745, 0.5843137254901961, 0.5882352941176471, 0.592156862745098, 0.596078431372549, 0.6, 0.6039215686274509, 0.6078431372549019, 0.611764705882353, 0.615686274509804, 0.6196078431372549, 0.6235294117647059, 0.6274509803921569, 0.6313725490196078, 0.6352941176470588, 0.6392156862745098, 0.6431372549019607, 0.6470588235294118, 0.6509803921568628, 0.6549019607843137, 0.6588235294117647, 0.6627450980392157, 0.6666666666666666, 0.6705882352941176, 0.6745098039215687, 0.6784313725490196, 0.6823529411764706, 0.6862745098039216, 0.6901960784313725, 0.6941176470588235, 0.6980392156862745, 0.7019607843137254, 0.7058823529411764, 0.7098039215686275, 0.7137254901960784, 0.7176470588235294, 0.7215686274509804, 0.7254901960784313, 0.7294117647058823, 0.7333333333333333, 0.7372549019607844, 0.7411764705882353, 0.7450980392156863, 0.7490196078431373, 0.7529411764705882, 0.7568627450980392, 0.7607843137254902, 0.7647058823529411, 0.7686274509803921, 0.7725490196078432, 0.7764705882352941, 0.7803921568627451, 0.7843137254901961, 0.788235294117647, 0.792156862745098, 0.796078431372549, 0.8, 0.803921568627451, 0.807843137254902, 0.8117647058823529, 0.8156862745098039, 0.8196078431372549, 0.8235294117647058, 0.8274509803921568, 0.8313725490196078, 0.8352941176470589, 0.8392156862745098, 0.8431372549019608, 0.8470588235294118, 0.8509803921568627, 0.8549019607843137, 0.8588235294117647, 0.8627450980392157, 0.8666666666666667, 0.8705882352941177, 0.8745098039215686, 0.8784313725490196, 0.8823529411764706, 0.8862745098039215, 0.8901960784313725, 0.8941176470588235, 0.8980392156862745, 0.9019607843137255, 0.9058823529411765, 0.9098039215686274, 0.9137254901960784, 0.9176470588235294, 0.9215686274509803, 0.9254901960784314, 0.9294117647058824, 0.9333333333333333, 0.9372549019607843, 0.9411764705882353, 0.9450980392156862, 0.9490196078431372, 0.9529411764705882, 0.9568627450980391, 0.9607843137254902, 0.9647058823529412, 0.9686274509803922, 0.9725490196078431, 0.9764705882352941, 0.9803921568627451, 0.984313725490196, 0.9882352941176471, 0.9921568627450981, 0.996078431372549, 1.0],\n  g: [0.0, 0.00392156862745098, 0.00784313725490196, 0.011764705882352941, 0.01568627450980392, 0.0196078431372549, 0.023529411764705882, 0.027450980392156862, 0.03137254901960784, 0.03529411764705882, 0.0392156862745098, 0.043137254901960784, 0.047058823529411764, 0.050980392156862744, 0.054901960784313725, 0.058823529411764705, 0.06274509803921569, 0.06666666666666667, 0.07058823529411765, 0.07450980392156863, 0.0784313725490196, 0.08235294117647059, 0.08627450980392157, 0.09019607843137255, 0.09411764705882353, 0.09803921568627451, 0.10196078431372549, 0.10588235294117647, 0.10980392156862745, 0.11372549019607843, 0.11764705882352941, 0.12156862745098039, 0.12549019607843137, 0.12941176470588234, 0.13333333333333333, 0.13725490196078433, 0.1411764705882353, 0.14509803921568626, 0.14901960784313725, 0.15294117647058825, 0.1568627450980392, 0.16078431372549018, 0.16470588235294117, 0.16862745098039217, 0.17254901960784313, 0.1764705882352941, 0.1803921568627451, 0.1843137254901961, 0.18823529411764706, 0.19215686274509802, 0.19607843137254902, 0.2, 0.20392156862745098, 0.20784313725490194, 0.21176470588235294, 0.21568627450980393, 0.2196078431372549, 0.22352941176470587, 0.22745098039215686, 0.23137254901960785, 0.23529411764705882, 0.2392156862745098, 0.24313725490196078, 0.24705882352941178, 0.25098039215686274, 0.2549019607843137, 0.2588235294117647, 0.2627450980392157, 0.26666666666666666, 0.27058823529411763, 0.27450980392156865, 0.2784313725490196, 0.2823529411764706, 0.28627450980392155, 0.2901960784313725, 0.29411764705882354, 0.2980392156862745, 0.30196078431372547, 0.3058823529411765, 0.30980392156862746, 0.3137254901960784, 0.3176470588235294, 0.32156862745098036, 0.3254901960784314, 0.32941176470588235, 0.3333333333333333, 0.33725490196078434, 0.3411764705882353, 0.34509803921568627, 0.34901960784313724, 0.3529411764705882, 0.3568627450980392, 0.3607843137254902, 0.36470588235294116, 0.3686274509803922, 0.37254901960784315, 0.3764705882352941, 0.3803921568627451, 0.38431372549019605, 0.38823529411764707, 0.39215686274509803, 0.396078431372549, 0.4, 0.403921568627451, 0.40784313725490196, 0.4117647058823529, 0.4156862745098039, 0.4196078431372549, 0.4235294117647059, 0.42745098039215684, 0.43137254901960786, 0.43529411764705883, 0.4392156862745098, 0.44313725490196076, 0.44705882352941173, 0.45098039215686275, 0.4549019607843137, 0.4588235294117647, 0.4627450980392157, 0.4666666666666667, 0.47058823529411764, 0.4745098039215686, 0.4784313725490196, 0.4823529411764706, 0.48627450980392156, 0.49019607843137253, 0.49411764705882355, 0.4980392156862745, 0.5019607843137255, 0.5058823529411764, 0.5098039215686274, 0.5137254901960784, 0.5176470588235293, 0.5215686274509804, 0.5254901960784314, 0.5294117647058824, 0.5333333333333333, 0.5372549019607843, 0.5411764705882353, 0.5450980392156862, 0.5490196078431373, 0.5529411764705883, 0.5568627450980392, 0.5607843137254902, 0.5647058823529412, 0.5686274509803921, 0.5725490196078431, 0.5764705882352941, 0.580392156862745, 0.5843137254901961, 0.5882352941176471, 0.592156862745098, 0.596078431372549, 0.6, 0.6039215686274509, 0.6078431372549019, 0.611764705882353, 0.615686274509804, 0.6196078431372549, 0.6235294117647059, 0.6274509803921569, 0.6313725490196078, 0.6352941176470588, 0.6392156862745098, 0.6431372549019607, 0.6470588235294118, 0.6509803921568628, 0.6549019607843137, 0.6588235294117647, 0.6627450980392157, 0.6666666666666666, 0.6705882352941176, 0.6745098039215687, 0.6784313725490196, 0.6823529411764706, 0.6862745098039216, 0.6901960784313725, 0.6941176470588235, 0.6980392156862745, 0.7019607843137254, 0.7058823529411764, 0.7098039215686275, 0.7137254901960784, 0.7176470588235294, 0.7215686274509804, 0.7254901960784313, 0.7294117647058823, 0.7333333333333333, 0.7372549019607844, 0.7411764705882353, 0.7450980392156863, 0.7490196078431373, 0.7529411764705882, 0.7568627450980392, 0.7607843137254902, 0.7647058823529411, 0.7686274509803921, 0.7725490196078432, 0.7764705882352941, 0.7803921568627451, 0.7843137254901961, 0.788235294117647, 0.792156862745098, 0.796078431372549, 0.8, 0.803921568627451, 0.807843137254902, 0.8117647058823529, 0.8156862745098039, 0.8196078431372549, 0.8235294117647058, 0.8274509803921568, 0.8313725490196078, 0.8352941176470589, 0.8392156862745098, 0.8431372549019608, 0.8470588235294118, 0.8509803921568627, 0.8549019607843137, 0.8588235294117647, 0.8627450980392157, 0.8666666666666667, 0.8705882352941177, 0.8745098039215686, 0.8784313725490196, 0.8823529411764706, 0.8862745098039215, 0.8901960784313725, 0.8941176470588235, 0.8980392156862745, 0.9019607843137255, 0.9058823529411765, 0.9098039215686274, 0.9137254901960784, 0.9176470588235294, 0.9215686274509803, 0.9254901960784314, 0.9294117647058824, 0.9333333333333333, 0.9372549019607843, 0.9411764705882353, 0.9450980392156862, 0.9490196078431372, 0.9529411764705882, 0.9568627450980391, 0.9607843137254902, 0.9647058823529412, 0.9686274509803922, 0.9725490196078431, 0.9764705882352941, 0.9803921568627451, 0.984313725490196, 0.9882352941176471, 0.9921568627450981, 0.996078431372549, 1.0],\n  b: [0.0, 0.00392156862745098, 0.00784313725490196, 0.011764705882352941, 0.01568627450980392, 0.0196078431372549, 0.023529411764705882, 0.027450980392156862, 0.03137254901960784, 0.03529411764705882, 0.0392156862745098, 0.043137254901960784, 0.047058823529411764, 0.050980392156862744, 0.054901960784313725, 0.058823529411764705, 0.06274509803921569, 0.06666666666666667, 0.07058823529411765, 0.07450980392156863, 0.0784313725490196, 0.08235294117647059, 0.08627450980392157, 0.09019607843137255, 0.09411764705882353, 0.09803921568627451, 0.10196078431372549, 0.10588235294117647, 0.10980392156862745, 0.11372549019607843, 0.11764705882352941, 0.12156862745098039, 0.12549019607843137, 0.12941176470588234, 0.13333333333333333, 0.13725490196078433, 0.1411764705882353, 0.14509803921568626, 0.14901960784313725, 0.15294117647058825, 0.1568627450980392, 0.16078431372549018, 0.16470588235294117, 0.16862745098039217, 0.17254901960784313, 0.1764705882352941, 0.1803921568627451, 0.1843137254901961, 0.18823529411764706, 0.19215686274509802, 0.19607843137254902, 0.2, 0.20392156862745098, 0.20784313725490194, 0.21176470588235294, 0.21568627450980393, 0.2196078431372549, 0.22352941176470587, 0.22745098039215686, 0.23137254901960785, 0.23529411764705882, 0.2392156862745098, 0.24313725490196078, 0.24705882352941178, 0.25098039215686274, 0.2549019607843137, 0.2588235294117647, 0.2627450980392157, 0.26666666666666666, 0.27058823529411763, 0.27450980392156865, 0.2784313725490196, 0.2823529411764706, 0.28627450980392155, 0.2901960784313725, 0.29411764705882354, 0.2980392156862745, 0.30196078431372547, 0.3058823529411765, 0.30980392156862746, 0.3137254901960784, 0.3176470588235294, 0.32156862745098036, 0.3254901960784314, 0.32941176470588235, 0.3333333333333333, 0.33725490196078434, 0.3411764705882353, 0.34509803921568627, 0.34901960784313724, 0.3529411764705882, 0.3568627450980392, 0.3607843137254902, 0.36470588235294116, 0.3686274509803922, 0.37254901960784315, 0.3764705882352941, 0.3803921568627451, 0.38431372549019605, 0.38823529411764707, 0.39215686274509803, 0.396078431372549, 0.4, 0.403921568627451, 0.40784313725490196, 0.4117647058823529, 0.4156862745098039, 0.4196078431372549, 0.4235294117647059, 0.42745098039215684, 0.43137254901960786, 0.43529411764705883, 0.4392156862745098, 0.44313725490196076, 0.44705882352941173, 0.45098039215686275, 0.4549019607843137, 0.4588235294117647, 0.4627450980392157, 0.4666666666666667, 0.47058823529411764, 0.4745098039215686, 0.4784313725490196, 0.4823529411764706, 0.48627450980392156, 0.49019607843137253, 0.49411764705882355, 0.4980392156862745, 0.5019607843137255, 0.5058823529411764, 0.5098039215686274, 0.5137254901960784, 0.5176470588235293, 0.5215686274509804, 0.5254901960784314, 0.5294117647058824, 0.5333333333333333, 0.5372549019607843, 0.5411764705882353, 0.5450980392156862, 0.5490196078431373, 0.5529411764705883, 0.5568627450980392, 0.5607843137254902, 0.5647058823529412, 0.5686274509803921, 0.5725490196078431, 0.5764705882352941, 0.580392156862745, 0.5843137254901961, 0.5882352941176471, 0.592156862745098, 0.596078431372549, 0.6, 0.6039215686274509, 0.6078431372549019, 0.611764705882353, 0.615686274509804, 0.6196078431372549, 0.6235294117647059, 0.6274509803921569, 0.6313725490196078, 0.6352941176470588, 0.6392156862745098, 0.6431372549019607, 0.6470588235294118, 0.6509803921568628, 0.6549019607843137, 0.6588235294117647, 0.6627450980392157, 0.6666666666666666, 0.6705882352941176, 0.6745098039215687, 0.6784313725490196, 0.6823529411764706, 0.6862745098039216, 0.6901960784313725, 0.6941176470588235, 0.6980392156862745, 0.7019607843137254, 0.7058823529411764, 0.7098039215686275, 0.7137254901960784, 0.7176470588235294, 0.7215686274509804, 0.7254901960784313, 0.7294117647058823, 0.7333333333333333, 0.7372549019607844, 0.7411764705882353, 0.7450980392156863, 0.7490196078431373, 0.7529411764705882, 0.7568627450980392, 0.7607843137254902, 0.7647058823529411, 0.7686274509803921, 0.7725490196078432, 0.7764705882352941, 0.7803921568627451, 0.7843137254901961, 0.788235294117647, 0.792156862745098, 0.796078431372549, 0.8, 0.803921568627451, 0.807843137254902, 0.8117647058823529, 0.8156862745098039, 0.8196078431372549, 0.8235294117647058, 0.8274509803921568, 0.8313725490196078, 0.8352941176470589, 0.8392156862745098, 0.8431372549019608, 0.8470588235294118, 0.8509803921568627, 0.8549019607843137, 0.8588235294117647, 0.8627450980392157, 0.8666666666666667, 0.8705882352941177, 0.8745098039215686, 0.8784313725490196, 0.8823529411764706, 0.8862745098039215, 0.8901960784313725, 0.8941176470588235, 0.8980392156862745, 0.9019607843137255, 0.9058823529411765, 0.9098039215686274, 0.9137254901960784, 0.9176470588235294, 0.9215686274509803, 0.9254901960784314, 0.9294117647058824, 0.9333333333333333, 0.9372549019607843, 0.9411764705882353, 0.9450980392156862, 0.9490196078431372, 0.9529411764705882, 0.9568627450980391, 0.9607843137254902, 0.9647058823529412, 0.9686274509803922, 0.9725490196078431, 0.9764705882352941, 0.9803921568627451, 0.984313725490196, 0.9882352941176471, 0.9921568627450981, 0.996078431372549, 1.0]\n};\n","\nimport type { ColorMap } from \"./types\";\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport const svs_nitrogen_dioxide: ColorMap = {\n  r: [0.027451, 0.027451, 0.0313726, 0.0313726, 0.0313726, 0.0352941, 0.0392157, 0.0392157, 0.0431373, 0.0431373, 0.0470588, 0.0509804, 0.0509804, 0.054902, 0.054902, 0.0588235, 0.0627451, 0.0627451, 0.0666667, 0.0666667, 0.0705882, 0.0745098, 0.0745098, 0.0784314, 0.0823529, 0.0823529, 0.0862745, 0.0901961, 0.0901961, 0.0941176, 0.0941176, 0.0980392, 0.101961, 0.101961, 0.105882, 0.109804, 0.113725, 0.117647, 0.121569, 0.12549, 0.133333, 0.137255, 0.145098, 0.14902, 0.156863, 0.164706, 0.172549, 0.180392, 0.188235, 0.196078, 0.207843, 0.215686, 0.223529, 0.231373, 0.239216, 0.25098, 0.258824, 0.266667, 0.278431, 0.286275, 0.294118, 0.301961, 0.313726, 0.321569, 0.329412, 0.337255, 0.345098, 0.356863, 0.364706, 0.372549, 0.380392, 0.388235, 0.4, 0.407843, 0.415686, 0.427451, 0.435294, 0.443137, 0.45098, 0.462745, 0.470588, 0.478431, 0.490196, 0.501961, 0.509804, 0.521569, 0.529412, 0.541176, 0.552941, 0.564706, 0.576471, 0.584314, 0.6, 0.607843, 0.619608, 0.631373, 0.639216, 0.654902, 0.662745, 0.67451, 0.686275, 0.694118, 0.705882, 0.713726, 0.72549, 0.737255, 0.745098, 0.756863, 0.764706, 0.772549, 0.784314, 0.792157, 0.803922, 0.811765, 0.819608, 0.827451, 0.835294, 0.847059, 0.85098, 0.858824, 0.870588, 0.87451, 0.882353, 0.890196, 0.898039, 0.905882, 0.909804, 0.917647, 0.92549, 0.929412, 0.937255, 0.941176, 0.94902, 0.952941, 0.960784, 0.964706, 0.972549, 0.976471, 0.980392, 0.984314, 0.988235, 0.988235, 0.992157, 0.992157, 0.992157, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 0.996078, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.996078, 0.996078, 0.996078, 0.992157, 0.992157, 0.988235, 0.984314, 0.980392, 0.976471, 0.972549, 0.968627, 0.964706, 0.956863, 0.94902, 0.945098, 0.933333, 0.92549, 0.917647, 0.905882, 0.898039, 0.886275, 0.87451, 0.858824, 0.847059, 0.835294, 0.819608, 0.803922, 0.788235, 0.772549, 0.760784, 0.741176, 0.72549, 0.705882, 0.690196, 0.67451, 0.65098, 0.635294, 0.615686, 0.596078, 0.580392, 0.556863, 0.541176, 0.521569, 0.501961, 0.486275, 0.466667, 0.45098, 0.427451, 0.411765, 0.396078, 0.376471, 0.364706, 0.345098, 0.329412, 0.317647, 0.298039, 0.286275, 0.270588, 0.258824, 0.247059, 0.235294, 0.227451, 0.219608, 0.211765, 0.211765, 0.207843, 0.207843, 0.211765, 0.211765, 0.215686, 0.223529, 0.227451, 0.231373],\n  g: [0.0156863, 0.0156863, 0.0156863, 0.0196078, 0.0196078, 0.0196078, 0.0235294, 0.0235294, 0.0235294, 0.0235294, 0.027451, 0.027451, 0.027451, 0.0313726, 0.0313726, 0.0313726, 0.0352941, 0.0352941, 0.0352941, 0.0352941, 0.0392157, 0.0392157, 0.0392157, 0.0431373, 0.0431373, 0.0431373, 0.0470588, 0.0470588, 0.0470588, 0.0509804, 0.0509804, 0.0509804, 0.0509804, 0.054902, 0.054902, 0.054902, 0.0588235, 0.0588235, 0.0588235, 0.0588235, 0.0627451, 0.0627451, 0.0627451, 0.0627451, 0.0627451, 0.0627451, 0.0627451, 0.0627451, 0.0627451, 0.0627451, 0.0627451, 0.0627451, 0.0666667, 0.0666667, 0.0666667, 0.0666667, 0.0666667, 0.0666667, 0.0666667, 0.0666667, 0.0705882, 0.0705882, 0.0705882, 0.0745098, 0.0745098, 0.0784314, 0.0823529, 0.0823529, 0.0862745, 0.0901961, 0.0941176, 0.0980392, 0.101961, 0.105882, 0.105882, 0.109804, 0.113725, 0.117647, 0.121569, 0.12549, 0.129412, 0.133333, 0.137255, 0.141176, 0.141176, 0.145098, 0.14902, 0.152941, 0.156863, 0.160784, 0.164706, 0.168627, 0.172549, 0.176471, 0.180392, 0.184314, 0.188235, 0.192157, 0.196078, 0.2, 0.203922, 0.207843, 0.211765, 0.215686, 0.219608, 0.223529, 0.227451, 0.231373, 0.235294, 0.239216, 0.247059, 0.25098, 0.254902, 0.258824, 0.262745, 0.270588, 0.27451, 0.282353, 0.290196, 0.294118, 0.301961, 0.309804, 0.321569, 0.329412, 0.337255, 0.34902, 0.356863, 0.368627, 0.376471, 0.388235, 0.396078, 0.407843, 0.415686, 0.427451, 0.435294, 0.447059, 0.458824, 0.466667, 0.482353, 0.494118, 0.505882, 0.517647, 0.529412, 0.545098, 0.556863, 0.572549, 0.584314, 0.6, 0.615686, 0.627451, 0.643137, 0.654902, 0.670588, 0.686275, 0.698039, 0.709804, 0.721569, 0.733333, 0.74902, 0.756863, 0.772549, 0.780392, 0.792157, 0.803922, 0.811765, 0.823529, 0.831373, 0.843137, 0.85098, 0.862745, 0.870588, 0.878431, 0.890196, 0.898039, 0.905882, 0.913725, 0.921569, 0.929412, 0.937255, 0.941176, 0.94902, 0.952941, 0.960784, 0.964706, 0.968627, 0.972549, 0.976471, 0.976471, 0.980392, 0.980392, 0.980392, 0.980392, 0.976471, 0.976471, 0.972549, 0.968627, 0.964706, 0.960784, 0.956863, 0.952941, 0.945098, 0.941176, 0.937255, 0.929412, 0.92549, 0.917647, 0.913725, 0.905882, 0.901961, 0.894118, 0.886275, 0.882353, 0.878431, 0.870588, 0.866667, 0.858824, 0.854902, 0.847059, 0.839216, 0.835294, 0.827451, 0.823529, 0.815686, 0.807843, 0.8, 0.792157, 0.788235, 0.780392, 0.768627, 0.760784, 0.752941, 0.741176, 0.733333, 0.721569, 0.709804, 0.698039, 0.686275, 0.67451, 0.662745, 0.65098, 0.635294, 0.623529, 0.607843, 0.592157, 0.580392, 0.564706, 0.552941, 0.541176, 0.529412, 0.517647, 0.501961, 0.494118, 0.486275, 0.47451, 0.470588, 0.462745],\n  b: [0.0509804, 0.054902, 0.0588235, 0.0627451, 0.0666667, 0.0745098, 0.0784314, 0.0862745, 0.0901961, 0.0941176, 0.101961, 0.109804, 0.113725, 0.121569, 0.12549, 0.133333, 0.141176, 0.145098, 0.152941, 0.156863, 0.164706, 0.172549, 0.180392, 0.184314, 0.192157, 0.196078, 0.203922, 0.211765, 0.215686, 0.223529, 0.227451, 0.235294, 0.243137, 0.247059, 0.254902, 0.262745, 0.266667, 0.27451, 0.282353, 0.286275, 0.294118, 0.301961, 0.309804, 0.317647, 0.32549, 0.333333, 0.341176, 0.352941, 0.360784, 0.368627, 0.376471, 0.384314, 0.396078, 0.403922, 0.411765, 0.419608, 0.427451, 0.435294, 0.443137, 0.45098, 0.454902, 0.462745, 0.466667, 0.470588, 0.47451, 0.478431, 0.482353, 0.486275, 0.486275, 0.490196, 0.490196, 0.490196, 0.494118, 0.494118, 0.494118, 0.498039, 0.498039, 0.498039, 0.498039, 0.501961, 0.501961, 0.501961, 0.501961, 0.501961, 0.501961, 0.501961, 0.501961, 0.498039, 0.498039, 0.498039, 0.494118, 0.494118, 0.494118, 0.490196, 0.490196, 0.490196, 0.486275, 0.486275, 0.482353, 0.482353, 0.478431, 0.47451, 0.47451, 0.470588, 0.466667, 0.462745, 0.458824, 0.454902, 0.45098, 0.447059, 0.443137, 0.439216, 0.435294, 0.431373, 0.431373, 0.423529, 0.423529, 0.419608, 0.415686, 0.411765, 0.407843, 0.403922, 0.4, 0.4, 0.396078, 0.392157, 0.388235, 0.384314, 0.380392, 0.376471, 0.368627, 0.364706, 0.360784, 0.352941, 0.34902, 0.341176, 0.337255, 0.329412, 0.32549, 0.321569, 0.317647, 0.313726, 0.313726, 0.313726, 0.313726, 0.317647, 0.321569, 0.32549, 0.333333, 0.337255, 0.34902, 0.356863, 0.364706, 0.376471, 0.384314, 0.392157, 0.403922, 0.411765, 0.423529, 0.431373, 0.443137, 0.45098, 0.462745, 0.47451, 0.482353, 0.498039, 0.505882, 0.517647, 0.533333, 0.54902, 0.564706, 0.576471, 0.592157, 0.611765, 0.623529, 0.643137, 0.654902, 0.670588, 0.686275, 0.694118, 0.709804, 0.717647, 0.72549, 0.733333, 0.737255, 0.741176, 0.745098, 0.745098, 0.741176, 0.737255, 0.729412, 0.72549, 0.717647, 0.705882, 0.698039, 0.686275, 0.678431, 0.670588, 0.658824, 0.65098, 0.643137, 0.639216, 0.631373, 0.627451, 0.627451, 0.627451, 0.627451, 0.627451, 0.631373, 0.631373, 0.635294, 0.639216, 0.643137, 0.65098, 0.654902, 0.658824, 0.662745, 0.662745, 0.666667, 0.670588, 0.670588, 0.67451, 0.67451, 0.67451, 0.67451, 0.67451, 0.67451, 0.678431, 0.678431, 0.682353, 0.686275, 0.686275, 0.690196, 0.698039, 0.701961, 0.709804, 0.713726, 0.717647, 0.72549, 0.733333, 0.737255, 0.745098, 0.74902, 0.756863, 0.760784, 0.764706, 0.768627, 0.772549, 0.772549, 0.776471, 0.776471, 0.776471, 0.776471, 0.776471, 0.776471, 0.776471],\n};\n\n\nexport const svsColorRamp = {\n  \"type\": \"multipart\",\n  \"colorRamps\": [\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        7,\n        4,\n        13,\n        255\n      ],\n      \"toColor\": [\n        13,\n        7,\n        29,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.0,\n      \"stop\": 0.047619047619047616\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        13,\n        7,\n        29,\n        255\n      ],\n      \"toColor\": [\n        20,\n        11,\n        49,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.047619047619047616,\n      \"stop\": 0.09523809523809523\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        20,\n        11,\n        49,\n        255\n      ],\n      \"toColor\": [\n        29,\n        14,\n        68,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.09523809523809523,\n      \"stop\": 0.14285714285714285\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        29,\n        14,\n        68,\n        255\n      ],\n      \"toColor\": [\n        49,\n        16,\n        93,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.14285714285714285,\n      \"stop\": 0.19047619047619047\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        49,\n        16,\n        93,\n        255\n      ],\n      \"toColor\": [\n        76,\n        17,\n        117,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.19047619047619047,\n      \"stop\": 0.23809523809523808\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        76,\n        17,\n        117,\n        255\n      ],\n      \"toColor\": [\n        103,\n        26,\n        126,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.23809523809523808,\n      \"stop\": 0.2857142857142857\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        103,\n        26,\n        126,\n        255\n      ],\n      \"toColor\": [\n        133,\n        36,\n        128,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.2857142857142857,\n      \"stop\": 0.3333333333333333\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        133,\n        36,\n        128,\n        255\n      ],\n      \"toColor\": [\n        167,\n        49,\n        123,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.3333333333333333,\n      \"stop\": 0.38095238095238093\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        167,\n        49,\n        123,\n        255\n      ],\n      \"toColor\": [\n        197,\n        61,\n        113,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.38095238095238093,\n      \"stop\": 0.42857142857142855\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        197,\n        61,\n        113,\n        255\n      ],\n      \"toColor\": [\n        223,\n        80,\n        102,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.42857142857142855,\n      \"stop\": 0.47619047619047616\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        223,\n        80,\n        102,\n        255\n      ],\n      \"toColor\": [\n        244,\n        110,\n        89,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.47619047619047616,\n      \"stop\": 0.5238095238095237\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        244,\n        110,\n        89,\n        255\n      ],\n      \"toColor\": [\n        253,\n        148,\n        81,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.5238095238095237,\n      \"stop\": 0.5714285714285714\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        253,\n        148,\n        81,\n        255\n      ],\n      \"toColor\": [\n        253,\n        190,\n        107,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.5714285714285714,\n      \"stop\": 0.6190476190476191\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        253,\n        190,\n        107,\n        255\n      ],\n      \"toColor\": [\n        253,\n        221,\n        144,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.6190476190476191,\n      \"stop\": 0.6666666666666666\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        253,\n        221,\n        144,\n        255\n      ],\n      \"toColor\": [\n        254,\n        245,\n        185,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.6666666666666666,\n      \"stop\": 0.7142857142857142\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        254,\n        245,\n        185,\n        255\n      ],\n      \"toColor\": [\n        245,\n        247,\n        177,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.7142857142857142,\n      \"stop\": 0.7619047619047619\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        245,\n        247,\n        177,\n        255\n      ],\n      \"toColor\": [\n        214,\n        232,\n        160,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.7619047619047619,\n      \"stop\": 0.8095238095238095\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        214,\n        232,\n        160,\n        255\n      ],\n      \"toColor\": [\n        163,\n        213,\n        170,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.8095238095238095,\n      \"stop\": 0.8571428571428571\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        163,\n        213,\n        170,\n        255\n      ],\n      \"toColor\": [\n        106,\n        189,\n        175,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.8571428571428571,\n      \"stop\": 0.9047619047619047\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        106,\n        189,\n        175,\n        255\n      ],\n      \"toColor\": [\n        60,\n        151,\n        192,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.9047619047619047,\n      \"stop\": 0.9523809523809523\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        60,\n        151,\n        192,\n        255\n      ],\n      \"toColor\": [\n        59,\n        117,\n        198,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.9523809523809523,\n      \"stop\": 1.0\n    }\n  ]\n};\n","\nimport type { ColorMap } from \"./types\";\n\nexport const sargassum: ColorMap = {\n  r: [0.3843137254901961, 0.38823529411764707, 0.396078431372549, 0.4, 0.40784313725490196, 0.41568627450980394, 0.42745098039215684, 0.43529411764705883, 0.44313725490196076, 0.4549019607843137, 0.4666666666666667, 0.4745098039215686, 0.48627450980392156, 0.49411764705882355, 0.5058823529411764, 0.5137254901960784, 0.5254901960784314, 0.5333333333333333, 0.5450980392156862, 0.5529411764705883, 0.5647058823529412, 0.5725490196078431, 0.5843137254901961, 0.592156862745098, 0.6039215686274509, 0.615686274509804, 0.6235294117647059, 0.6352941176470588, 0.6431372549019608, 0.6549019607843137, 0.6627450980392157, 0.6745098039215687, 0.6823529411764706, 0.6901960784313725, 0.7019607843137254, 0.7098039215686275, 0.7215686274509804, 0.7294117647058823, 0.7372549019607844, 0.7490196078431373, 0.7568627450980392, 0.7686274509803922, 0.7764705882352941, 0.788235294117647, 0.796078431372549, 0.803921568627451, 0.8156862745098039, 0.8235294117647058, 0.8313725490196079, 0.8392156862745098, 0.8470588235294118, 0.8509803921568627, 0.8588235294117647, 0.8627450980392157, 0.8666666666666667, 0.8705882352941177, 0.8705882352941177, 0.8745098039215686, 0.8784313725490196, 0.8784313725490196, 0.8823529411764706, 0.8862745098039215, 0.8862745098039215, 0.8901960784313725, 0.8941176470588236, 0.8980392156862745, 0.8980392156862745, 0.9019607843137255, 0.9058823529411765, 0.9058823529411765, 0.9098039215686274, 0.9098039215686274, 0.9137254901960784, 0.9176470588235294, 0.9176470588235294, 0.9215686274509803, 0.9254901960784314, 0.9254901960784314, 0.9294117647058824, 0.9333333333333333, 0.9372549019607843, 0.9411764705882353, 0.9411764705882353, 0.9450980392156862, 0.9490196078431372, 0.9490196078431372, 0.9529411764705882, 0.9529411764705882, 0.9568627450980393, 0.9607843137254902, 0.9607843137254902, 0.9647058823529412, 0.9686274509803922, 0.9686274509803922, 0.9725490196078431, 0.9725490196078431, 0.9764705882352941, 0.9764705882352941, 0.9803921568627451, 0.984313725490196, 0.984313725490196, 0.9882352941176471, 0.9882352941176471, 0.9882352941176471, 0.9921568627450981, 0.9921568627450981, 0.9921568627450981, 0.9921568627450981, 0.9921568627450981, 0.9921568627450981, 0.9921568627450981, 0.9882352941176471, 0.9882352941176471, 0.9882352941176471, 0.9882352941176471, 0.9882352941176471, 0.9882352941176471, 0.9882352941176471, 0.9882352941176471, 0.9882352941176471, 0.9882352941176471, 0.9882352941176471, 0.9882352941176471, 0.984313725490196, 0.984313725490196, 0.984313725490196, 0.984313725490196, 0.9803921568627451, 0.9803921568627451, 0.9803921568627451, 0.9803921568627451, 0.9764705882352941, 0.9764705882352941, 0.9764705882352941, 0.9764705882352941, 0.9764705882352941, 0.9764705882352941, 0.9725490196078431, 0.9725490196078431, 0.9725490196078431, 0.9725490196078431, 0.9725490196078431, 0.9725490196078431, 0.9725490196078431, 0.9725490196078431, 0.9725490196078431, 0.9725490196078431, 0.9725490196078431, 0.9686274509803922, 0.9686274509803922, 0.9647058823529412, 0.9647058823529412, 0.9607843137254902, 0.9529411764705882, 0.9490196078431372, 0.9411764705882353, 0.9333333333333333, 0.9254901960784314, 0.9137254901960784, 0.9058823529411765, 0.8941176470588236, 0.8862745098039215, 0.8745098039215686, 0.8666666666666667, 0.8549019607843137, 0.8470588235294118, 0.8392156862745098, 0.8274509803921568, 0.8196078431372549, 0.807843137254902, 0.8, 0.788235294117647, 0.7803921568627451, 0.7686274509803922, 0.7568627450980392, 0.7450980392156863, 0.7372549019607844, 0.7254901960784313, 0.7137254901960784, 0.7058823529411765, 0.6941176470588235, 0.6823529411764706, 0.6745098039215687, 0.6627450980392157, 0.6509803921568628, 0.6392156862745098, 0.6313725490196078, 0.6196078431372549, 0.6078431372549019, 0.6, 0.5882352941176471, 0.5764705882352941, 0.5686274509803921, 0.5568627450980392, 0.5450980392156862, 0.5333333333333333, 0.5215686274509804, 0.5098039215686274, 0.5019607843137255, 0.49019607843137253, 0.4823529411764706, 0.4745098039215686, 0.47058823529411764, 0.47058823529411764, 0.47058823529411764, 0.4745098039215686, 0.47843137254901963, 0.48627450980392156, 0.49411764705882355, 0.5019607843137255, 0.5137254901960784, 0.5254901960784314, 0.5372549019607843, 0.5450980392156862, 0.5568627450980392, 0.5686274509803921, 0.5803921568627451, 0.592156862745098, 0.6039215686274509, 0.615686274509804, 0.6235294117647059, 0.6352941176470588, 0.6470588235294118, 0.6588235294117647, 0.6705882352941176, 0.6823529411764706, 0.6941176470588235, 0.7058823529411765, 0.7137254901960784, 0.7254901960784313, 0.7372549019607844, 0.7490196078431373, 0.7607843137254902, 0.7725490196078432, 0.7843137254901961, 0.792156862745098, 0.803921568627451, 0.8156862745098039, 0.8235294117647058, 0.8352941176470589, 0.8470588235294118, 0.8549019607843137, 0.8666666666666667, 0.8784313725490196, 0.8901960784313725, 0.8980392156862745, 0.9098039215686274, 0.9215686274509803, 0.9294117647058824, 0.9411764705882353, 0.9490196078431372, 0.9568627450980393, 0.9647058823529412, 0.9686274509803922, 0.9725490196078431, 0.9725490196078431],\n  g: [0.07058823529411765, 0.07058823529411765, 0.07450980392156863, 0.0784313725490196, 0.08235294117647059, 0.08627450980392157, 0.09019607843137255, 0.09411764705882353, 0.10196078431372549, 0.10588235294117647, 0.11372549019607843, 0.11764705882352941, 0.12549019607843137, 0.13333333333333333, 0.13725490196078433, 0.1450980392156863, 0.14901960784313725, 0.1568627450980392, 0.1607843137254902, 0.16470588235294117, 0.17254901960784313, 0.17647058823529413, 0.1843137254901961, 0.18823529411764706, 0.19607843137254902, 0.2, 0.20784313725490197, 0.21176470588235294, 0.21568627450980393, 0.2235294117647059, 0.22745098039215686, 0.23529411764705882, 0.23921568627450981, 0.24705882352941178, 0.25098039215686274, 0.25882352941176473, 0.2627450980392157, 0.26666666666666666, 0.27450980392156865, 0.2784313725490196, 0.2823529411764706, 0.28627450980392155, 0.29411764705882354, 0.2980392156862745, 0.30196078431372547, 0.30980392156862746, 0.3137254901960784, 0.3176470588235294, 0.3254901960784314, 0.32941176470588235, 0.33725490196078434, 0.3411764705882353, 0.34901960784313724, 0.35294117647058826, 0.3607843137254902, 0.36470588235294116, 0.3686274509803922, 0.3764705882352941, 0.3803921568627451, 0.38823529411764707, 0.39215686274509803, 0.4, 0.403921568627451, 0.4117647058823529, 0.41568627450980394, 0.4235294117647059, 0.42745098039215684, 0.43529411764705883, 0.4392156862745098, 0.4470588235294118, 0.45098039215686275, 0.4588235294117647, 0.4627450980392157, 0.47058823529411764, 0.4745098039215686, 0.47843137254901963, 0.48627450980392156, 0.49019607843137253, 0.49411764705882355, 0.5019607843137255, 0.5058823529411764, 0.5137254901960784, 0.5176470588235295, 0.5254901960784314, 0.5294117647058824, 0.5372549019607843, 0.5411764705882353, 0.5450980392156862, 0.5529411764705883, 0.5568627450980392, 0.5647058823529412, 0.5686274509803921, 0.5764705882352941, 0.5803921568627451, 0.5882352941176471, 0.592156862745098, 0.596078431372549, 0.6, 0.6078431372549019, 0.611764705882353, 0.615686274509804, 0.6196078431372549, 0.6235294117647059, 0.6274509803921569, 0.6313725490196078, 0.6352941176470588, 0.6392156862745098, 0.6392156862745098, 0.6431372549019608, 0.6470588235294118, 0.6470588235294118, 0.6509803921568628, 0.6509803921568628, 0.6509803921568628, 0.6549019607843137, 0.6549019607843137, 0.6588235294117647, 0.6588235294117647, 0.6627450980392157, 0.6627450980392157, 0.6666666666666666, 0.6666666666666666, 0.6705882352941176, 0.6705882352941176, 0.6745098039215687, 0.6784313725490196, 0.6784313725490196, 0.6823529411764706, 0.6862745098039216, 0.6862745098039216, 0.6901960784313725, 0.6901960784313725, 0.6941176470588235, 0.6941176470588235, 0.6980392156862745, 0.6980392156862745, 0.7019607843137254, 0.7019607843137254, 0.7019607843137254, 0.7058823529411765, 0.7058823529411765, 0.7098039215686275, 0.7098039215686275, 0.7137254901960784, 0.7137254901960784, 0.7176470588235294, 0.7215686274509804, 0.7215686274509804, 0.7254901960784313, 0.7254901960784313, 0.7294117647058823, 0.7294117647058823, 0.7333333333333333, 0.7333333333333333, 0.7333333333333333, 0.7333333333333333, 0.7333333333333333, 0.7294117647058823, 0.7294117647058823, 0.7294117647058823, 0.7294117647058823, 0.7294117647058823, 0.7294117647058823, 0.7254901960784313, 0.7254901960784313, 0.7254901960784313, 0.7254901960784313, 0.7215686274509804, 0.7215686274509804, 0.7215686274509804, 0.7215686274509804, 0.7176470588235294, 0.7176470588235294, 0.7176470588235294, 0.7176470588235294, 0.7176470588235294, 0.7176470588235294, 0.7176470588235294, 0.7137254901960784, 0.7137254901960784, 0.7137254901960784, 0.7137254901960784, 0.7137254901960784, 0.7137254901960784, 0.7098039215686275, 0.7098039215686275, 0.7098039215686275, 0.7058823529411765, 0.7058823529411765, 0.7058823529411765, 0.7058823529411765, 0.7058823529411765, 0.7019607843137254, 0.7019607843137254, 0.7019607843137254, 0.6980392156862745, 0.6980392156862745, 0.6980392156862745, 0.6980392156862745, 0.6980392156862745, 0.6980392156862745, 0.6980392156862745, 0.6980392156862745, 0.7019607843137254, 0.7019607843137254, 0.7058823529411765, 0.7098039215686275, 0.7137254901960784, 0.7176470588235294, 0.7215686274509804, 0.7294117647058823, 0.7372549019607844, 0.7411764705882353, 0.7490196078431373, 0.7529411764705882, 0.7607843137254902, 0.7647058823529411, 0.7725490196078432, 0.7803921568627451, 0.7843137254901961, 0.792156862745098, 0.8, 0.803921568627451, 0.8117647058823529, 0.8156862745098039, 0.8235294117647058, 0.8313725490196079, 0.8352941176470589, 0.8431372549019608, 0.8470588235294118, 0.8549019607843137, 0.8588235294117647, 0.8666666666666667, 0.8705882352941177, 0.8745098039215686, 0.8823529411764706, 0.8862745098039215, 0.8941176470588236, 0.8980392156862745, 0.9058823529411765, 0.9098039215686274, 0.9176470588235294, 0.9254901960784314, 0.9294117647058824, 0.9372549019607843, 0.9411764705882353, 0.9490196078431372, 0.9529411764705882, 0.9568627450980393, 0.9647058823529412, 0.9686274509803922, 0.9725490196078431, 0.9764705882352941, 0.9803921568627451, 0.9803921568627451, 0.9882352941176471],\n  b: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.00392156862745098, 0.0, 0.0, 0.0, 0.0, 0.00392156862745098, 0.00392156862745098, 0.00784313725490196, 0.00784313725490196, 0.011764705882352941, 0.01568627450980392, 0.023529411764705882, 0.027450980392156862, 0.03137254901960784, 0.0392156862745098, 0.043137254901960784, 0.047058823529411764, 0.050980392156862744, 0.058823529411764705, 0.06274509803921569, 0.06666666666666667, 0.07058823529411765, 0.0784313725490196, 0.08235294117647059, 0.08627450980392157, 0.09019607843137255, 0.09411764705882353, 0.09803921568627451, 0.10196078431372549, 0.10588235294117647, 0.10980392156862745, 0.11372549019607843, 0.11764705882352941, 0.11764705882352941, 0.12156862745098039, 0.12156862745098039, 0.12549019607843137, 0.12549019607843137, 0.12941176470588237, 0.12941176470588237, 0.13333333333333333, 0.13333333333333333, 0.13333333333333333, 0.13725490196078433, 0.13725490196078433, 0.13725490196078433, 0.1411764705882353, 0.1411764705882353, 0.1411764705882353, 0.1450980392156863, 0.1450980392156863, 0.1450980392156863, 0.1450980392156863, 0.14901960784313725, 0.14901960784313725, 0.14901960784313725, 0.14901960784313725, 0.14901960784313725, 0.15294117647058825, 0.15294117647058825, 0.15294117647058825, 0.15294117647058825, 0.15294117647058825, 0.15294117647058825, 0.15294117647058825, 0.1568627450980392, 0.1568627450980392, 0.1568627450980392, 0.1568627450980392, 0.1568627450980392, 0.1568627450980392, 0.1607843137254902, 0.1607843137254902, 0.1607843137254902, 0.1607843137254902, 0.16470588235294117, 0.16470588235294117, 0.16470588235294117, 0.16470588235294117, 0.16862745098039217, 0.16862745098039217, 0.17254901960784313, 0.17647058823529413, 0.1803921568627451, 0.18823529411764706, 0.19607843137254902, 0.20392156862745098, 0.21568627450980393, 0.23137254901960785, 0.24705882352941178, 0.2627450980392157, 0.2784313725490196, 0.29411764705882354, 0.30980392156862746, 0.3254901960784314, 0.3411764705882353, 0.35294117647058826, 0.3686274509803922, 0.3843137254901961, 0.396078431372549, 0.4117647058823529, 0.4235294117647059, 0.4392156862745098, 0.45098039215686275, 0.4666666666666667, 0.47843137254901963, 0.49019607843137253, 0.5019607843137255, 0.5137254901960784, 0.5254901960784314, 0.5411764705882353, 0.5529411764705883, 0.5647058823529412, 0.5764705882352941, 0.5882352941176471, 0.6, 0.611764705882353, 0.6235294117647059, 0.6352941176470588, 0.6470588235294118, 0.6549019607843137, 0.6666666666666666, 0.6784313725490196, 0.6901960784313725, 0.7019607843137254, 0.7137254901960784, 0.7254901960784313, 0.7372549019607844, 0.7490196078431373, 0.7568627450980392, 0.7686274509803922, 0.7803921568627451, 0.788235294117647, 0.8, 0.807843137254902, 0.8196078431372549, 0.8274509803921568, 0.8313725490196079, 0.8392156862745098, 0.8431372549019608, 0.8470588235294118, 0.8509803921568627, 0.8549019607843137, 0.8588235294117647, 0.8627450980392157, 0.8666666666666667, 0.8705882352941177, 0.8745098039215686, 0.8784313725490196, 0.8784313725490196, 0.8823529411764706, 0.8862745098039215, 0.8862745098039215, 0.8901960784313725, 0.8941176470588236, 0.8980392156862745, 0.9019607843137255, 0.9058823529411765, 0.9098039215686274, 0.9137254901960784, 0.9137254901960784, 0.9176470588235294, 0.9215686274509803, 0.9254901960784314, 0.9254901960784314, 0.9294117647058824, 0.9333333333333333, 0.9333333333333333, 0.9372549019607843, 0.9411764705882353, 0.9450980392156862, 0.9490196078431372, 0.9529411764705882, 0.9529411764705882, 0.9568627450980393, 0.9607843137254902, 0.9647058823529412, 0.9647058823529412, 0.9686274509803922, 0.9725490196078431, 0.9764705882352941, 0.9803921568627451, 0.9803921568627451, 0.984313725490196, 0.9882352941176471, 0.9882352941176471, 0.9882352941176471, 0.9921568627450981, 0.9921568627450981],\n};\n\n\nexport const sargassumColorRamp = {\n  \"type\": \"multipart\",\n  \"colorRamps\": [\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        98,\n        18,\n        0,\n        255\n      ],\n      \"toColor\": [\n        124,\n        32,\n        1,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.0,\n      \"stop\": 0.047619047619047616\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        124,\n        32,\n        1,\n        255\n      ],\n      \"toColor\": [\n        154,\n        50,\n        0,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.047619047619047616,\n      \"stop\": 0.09523809523809523\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        154,\n        50,\n        0,\n        255\n      ],\n      \"toColor\": [\n        184,\n        67,\n        0,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.09523809523809523,\n      \"stop\": 0.14285714285714285\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        184,\n        67,\n        0,\n        255\n      ],\n      \"toColor\": [\n        213,\n        83,\n        1,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.14285714285714285,\n      \"stop\": 0.19047619047619047\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        213,\n        83,\n        1,\n        255\n      ],\n      \"toColor\": [\n        225,\n        101,\n        1,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.19047619047619047,\n      \"stop\": 0.23809523809523808\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        225,\n        101,\n        1,\n        255\n      ],\n      \"toColor\": [\n        233,\n        119,\n        1,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.23809523809523808,\n      \"stop\": 0.2857142857142857\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        233,\n        119,\n        1,\n        255\n      ],\n      \"toColor\": [\n        242,\n        137,\n        15,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.2857142857142857,\n      \"stop\": 0.3333333333333333\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        242,\n        137,\n        15,\n        255\n      ],\n      \"toColor\": [\n        249,\n        153,\n        28,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.3333333333333333,\n      \"stop\": 0.38095238095238093\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        249,\n        153,\n        28,\n        255\n      ],\n      \"toColor\": [\n        253,\n        165,\n        34,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.38095238095238093,\n      \"stop\": 0.42857142857142855\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        253,\n        165,\n        34,\n        255\n      ],\n      \"toColor\": [\n        252,\n        170,\n        38,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.42857142857142855,\n      \"stop\": 0.47619047619047616\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        252,\n        170,\n        38,\n        255\n      ],\n      \"toColor\": [\n        249,\n        177,\n        40,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.47619047619047616,\n      \"stop\": 0.5238095238095237\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        249,\n        177,\n        40,\n        255\n      ],\n      \"toColor\": [\n        248,\n        183,\n        42,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.5238095238095237,\n      \"stop\": 0.5714285714285714\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        248,\n        183,\n        42,\n        255\n      ],\n      \"toColor\": [\n        233,\n        186,\n        70,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.5714285714285714,\n      \"stop\": 0.6190476190476191\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        233,\n        186,\n        70,\n        255\n      ],\n      \"toColor\": [\n        204,\n        184,\n        115,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.6190476190476191,\n      \"stop\": 0.6666666666666666\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        204,\n        184,\n        115,\n        255\n      ],\n      \"toColor\": [\n        171,\n        182,\n        153,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.6666666666666666,\n      \"stop\": 0.7142857142857142\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        171,\n        182,\n        153,\n        255\n      ],\n      \"toColor\": [\n        138,\n        178,\n        188,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.7142857142857142,\n      \"stop\": 0.7619047619047619\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        138,\n        178,\n        188,\n        255\n      ],\n      \"toColor\": [\n        122,\n        181,\n        215,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.7619047619047619,\n      \"stop\": 0.8095238095238095\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        122,\n        181,\n        215,\n        255\n      ],\n      \"toColor\": [\n        155,\n        199,\n        226,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.8095238095238095,\n      \"stop\": 0.8571428571428571\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        155,\n        199,\n        226,\n        255\n      ],\n      \"toColor\": [\n        190,\n        218,\n        236,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.8571428571428571,\n      \"stop\": 0.9047619047619047\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        190,\n        218,\n        236,\n        255\n      ],\n      \"toColor\": [\n        223,\n        236,\n        245,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.9047619047619047,\n      \"stop\": 0.9523809523809523\n    },\n    {\n      \"type\": \"algorithmic\",\n      \"fromColor\": [\n        223,\n        236,\n        245,\n        255\n      ],\n      \"toColor\": [\n        248,\n        252,\n        253,\n        255\n      ],\n      \"algorithm\": \"esriCIELabAlgorithm\",\n      \"start\": 0.9523809523809523,\n      \"stop\": 1.0\n    }\n  ]\n};\n","\nimport { magma } from \"./magma\";\nimport { inferno } from \"./inferno\";\nimport { plasma } from \"./plasma\";\nimport { viridis } from \"./viridis\";\nimport { cividis } from \"./cividis\";\nimport { gray } from \"./gray\";\nimport { svs_nitrogen_dioxide, svsColorRamp } from \"./svs_nitrogen_dioxide\";\nimport { sargassum, sargassumColorRamp } from \"./sargassum\";\n\nimport type { ColorMaps } from \"./types\";\n\nexport const colormaps: ColorMaps = {\n  \"magma\": magma,\n  \"inferno\": inferno,\n  \"plasma\": plasma,\n  \"viridis\": viridis,\n  \"cividis\": cividis,\n  \"svs\": svs_nitrogen_dioxide,\n  \"sargassum\": sargassum,\n  \"gray\": gray,\n};\n\n// add custom colormaps here\nexport const nonEsriColormaps = {\n  'svs': {rgb: svs_nitrogen_dioxide, esriColorRamp: svsColorRamp},\n  'sargassum': {rgb: sargassum, esriColorRamp: sargassumColorRamp},\n};\n\nexport type AvailableColorMaps = 'magma' | 'inferno' | 'plasma' | 'viridis' | 'cividis' | 'svs' | 'gray' | 'sargassum';\nexport type AvailableReverseColorMaps = `${AvailableColorMaps}_r`;\nexport type AllAvailableColorMaps = AvailableColorMaps | AvailableReverseColorMaps | 'None';\n","/* eslint-disable @typescript-eslint/naming-convention */\n\n\n// const earthdataRestSerivceURL = \"https://gis.earthdata.nasa.gov/image/rest/services/C2930763263-LARC_CLOUD/TEMPO_NO2_L3_V03_HOURLY_TROPOSPHERIC_VERTICAL_COLUMN/ImageServer\";\nimport { Variables } from './types';\n\nexport type ColorRamps = \"Magma\" | \"Inferno\" | \"Plasma\" | \"Viridis\" | \"Gray\" | \"Hillshade\" | \"Cividis\" | \"SVS\" | \"sargassum\";\n\ntype PixelType = \"C128\" | \"C64\" | \"F32\" | \"F64\" | \"S16\" | \"S32\" | \"S8\" | \"U1\" | \"U16\" | \"U2\" | \"U32\" | \"U4\" | \"U8\" | \"UNKNOWN\";\n\ninterface RasterFunctionObject {\n  rasterFunction: string;\n  variableName?: string; // Optional, as it might be implied or set by composition\n  rasterFunctionArguments?: {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any;\n    Raster?: RasterFunctionObject | { variableName: string }; // Input can be another function or the base 'Raster'\n  };\n  outputPixelType?: PixelType;\n}\n\n// https://developers.arcgis.com/rest/services-reference/enterprise/raster-function-objects/\n// https://developers.arcgis.com/rest/services-reference/enterprise/raster-function-objects/#resample\nexport function _stretchRule(min: number, max: number): RasterFunctionObject {\n  return {\n    'rasterFunction': 'Stretch',\n    'outputPixelType': 'U8' as PixelType,\n    'variableName': 'Raster',\n    'rasterFunctionArguments': {\n      'StretchType': 5,\n      'Statistics': [[\n        min, // max\n        max, // min\n        0, 0\n      ]],\n      'DRA': false,\n      'UseGamma': false,\n      'Gamma': [1],\n      'ComputeGamma': true,\n      'Min': 255,\n      'Max': 0\n    },\n  };\n}\n\nexport const stretches = {\n  'NO2_Troposphere': [0, 15000000000000000],\n  'Ozone_Column_Amount': [250, 430], // +- 2 sigma\n  'HCHO': [0, 50000000000000000],\n} as Record<Variables, [number, number]>;\nexport const colorramps = {\n  'NO2_Troposphere': 'Magma',\n  'Ozone_Column_Amount': 'Cividis', \n  'HCHO': 'Viridis',\n} as Record<Variables, ColorRamps>;\n\nexport const colorbarOptions = {\n  'no2': {stretch: stretches['NO2_Troposphere'], cbarScale: 1e14, colormap: colorramps['NO2_Troposphere'] + '_r', label:'NO<sub>2</sub>&nbsp;&nbsp;'},\n  'no2Monthly': {stretch: stretches['NO2_Troposphere'], cbarScale: 1e14, colormap: colorramps['NO2_Troposphere'] + '_r', label: 'NO<sub>2</sub>&nbsp;&nbsp;'},\n  'no2DailyMax': {stretch: stretches['NO2_Troposphere'], cbarScale: 1e14, colormap: colorramps['NO2_Troposphere'] + '_r', label: 'NO<sub>2</sub>&nbsp;&nbsp;'},\n  'o3': {stretch: stretches['Ozone_Column_Amount'], cbarScale: 1, colormap: colorramps['Ozone_Column_Amount'] + '_r', label: 'Ozone&nbsp;'},\n  'hcho': {stretch: stretches['HCHO'], cbarScale: 1e14, colormap: colorramps['HCHO'] + '_r', label: 'Formaldehyde&nbsp;&nbsp;'},\n  'hchoMonthly': {stretch: stretches['HCHO'], cbarScale: 1e14, colormap: colorramps['HCHO'] + '_r', label: 'Formaldehyde&nbsp;&nbsp;'},\n  'hchoDailyMax': {stretch: stretches['HCHO'], cbarScale: 1e14, colormap: colorramps['HCHO'] + '_r', label: 'Formaldehyde&nbsp;&nbsp;'},\n};\n\nimport { nonEsriColormaps } from '@/colormaps';\n\n\nexport function _colorMapRule(colorRamp: ColorRamps): RasterFunctionObject {\n  if (Object.keys(nonEsriColormaps).includes((colorRamp as string).toLowerCase())) {\n    return {\n      'rasterFunction': 'Colormap',\n      'variableName': 'Raster',\n      'rasterFunctionArguments': {\n        'colorramp': nonEsriColormaps[colorRamp.toLowerCase()].esriColorRamp,\n      },\n    };\n  }\n  return {\n    'rasterFunction': 'Colormap',\n    'variableName': 'Raster',\n    'rasterFunctionArguments': {\n      'ColormapName': colorRamp,\n    },\n  };\n}\n\nexport type ResamplingType = '0' | '1' | '2' | '3' | '4' | '5' | '6' | '7' | '8' | '9' ; \n//0=NearestNeighbor, 1=Bilinear, 2=Cubic, 3=Majority, 4=BilinearInterpolationPlus, 5=BilinearGaussBlur, 6=BilinearGaussBlurPlus, 7=Average, 8=Minimum, 9=Maximum\n\nexport enum ResamplingTypeEnum {\n  NearestNeighbor = '0',\n  Bilinear = '1',\n  Cubic = '2',\n  Majority = '3',\n  BilinearInterpolationPlus = '4',\n  BilinearGaussBlur = '5',\n  BilinearGaussBlurPlus = '6',\n  Average = '7',\n  Minimum = '8',\n  Maximum = '9'\n}\n\n\n// Generated by Copilot\nexport function _resampleRule(resamplingType: keyof typeof ResamplingTypeEnum): RasterFunctionObject {\n  return {\n    'rasterFunction': 'Resample',\n    'variableName': 'Raster',\n    'rasterFunctionArguments': {\n      'ResamplingType': ResamplingTypeEnum[resamplingType], // Convert string to enum value\n    },\n  };\n}\n\n\nexport function composeRasterRules(\n  baseRule: RasterFunctionObject,\n  additionalRules: RasterFunctionObject[]\n): RasterFunctionObject {\n  let currentRule: RasterFunctionObject = { ...baseRule };\n\n\n  for (let i = 0; i < additionalRules.length; i++) {\n    const nextOuterRule = { ...additionalRules[i] }; // Copy to avoid modifying original rule objects\n\n    // Ensure rasterFunctionArguments exists\n    if (!nextOuterRule.rasterFunctionArguments) {\n      nextOuterRule.rasterFunctionArguments = {};\n    }\n\n    // Assign the current (inner) rule as the 'Raster' input to the next outer rule.\n    nextOuterRule.rasterFunctionArguments.Raster = currentRule;\n\n    currentRule = nextOuterRule; // The newly composed rule becomes the current one for the next iteration\n  }\n\n  return currentRule;\n}\n\nexport const renderingRule = (range: [number, number], colormap: ColorRamps, resamplineRule: keyof typeof ResamplingTypeEnum = 'NearestNeighbor') => \n  composeRasterRules(_stretchRule(Math.min(...range), Math.max(...range)), [_colorMapRule(colormap), _resampleRule(resamplineRule)]);\n\nexport interface RenderingRuleOptions {\n  range: [number, number];\n  colormap: ColorRamps;\n}\n\ninterface MultidimensionalDefinition {\n  variableName: string;\n  dimensionName: string;\n  values: number[] | Array<number[]>;\n}\n\n\n\nexport interface EsriSlice {\n  sliceId: number;\n  multidimensionalDefinition: MultidimensionalDefinition[];\n}\n\nexport interface EsriSliceResponse {\n  slices: EsriSlice[];\n}\n\n\nexport type VariableNames = 'NO2_Troposphere' | 'Ozone_Column_Amount' | 'HCHO';\n\nexport async function fetchEsriTimeSteps(esriUrl: string, variableName: VariableNames, dimensionName = \"StdTime\"): Promise<EsriSliceResponse> {\n  const url = esriUrl + '/slices';\n  const format = \"json\";\n  const multidimensionalDefinition = { variableName: variableName, dimensionName: dimensionName };\n  const params = { f: format, multidimensionalDefinition: JSON.stringify(multidimensionalDefinition) };\n  const fetchURL = new URL(url);\n  fetchURL.search = new URLSearchParams(params).toString();\n  return fetch(fetchURL).then(res => {\n    return res.json();\n  });\n}\n\nexport function extractTimeSteps(data: EsriSliceResponse): number[] {\n  const slices = data.slices;\n  const timesteps = slices.map(slice => slice.multidimensionalDefinition[0].values[0]);\n  // check if timesteps are arrays or numbers. if arrays take first element of each\n\n\n  return timesteps.reduce((acc: number[], val) => {\n    if (Array.isArray(val)) {\n      return acc.concat(val[0]);\n    } else {\n      acc.push(val);\n      return acc;\n    }\n  }, []);\n}\n","import { extractTimeSteps, fetchEsriTimeSteps, VariableNames } from \"./ImageLayerConfig\";\n\nexport const ESRI_URLS = {\n  'no2': {\n    url: \"https://gis.earthdata.nasa.gov/image/rest/services/C2930763263-LARC_CLOUD/TEMPO_NO2_L3_V03_HOURLY_TROPOSPHERIC_VERTICAL_COLUMN/ImageServer\",\n    variable: \"NO2_Troposphere\",\n  },\n  'no2Monthly': {\n    url: \"https://gis.earthdata.nasa.gov/gp/rest/services/Hosted/TEMPO_NO2_L3_V03_Monthly_Mean/ImageServer\",\n    variable: \"NO2_Troposphere\",\n  },\n  'no2DailyMax' : {\n    url: \"https://gis.earthdata.nasa.gov/gp/rest/services/Hosted/TEMPO_NO2_L3_V03_Daily_Maximum/ImageServer\",\n    variable: \"NO2_Troposphere\",\n  },\n  'o3': {\n    url: \"https://gis.earthdata.nasa.gov/image/rest/services/C2930764281-LARC_CLOUD/TEMPO_O3TOT_L3_V03_HOURLY_OZONE_COLUMN_AMOUNT/ImageServer\",\n    variable: \"Ozone_Column_Amount\",\n  },\n  'hcho': {\n    url: \"https://gis.earthdata.nasa.gov/image/rest/services/C2930761273-LARC_CLOUD/TEMPO_HCHO_L3_V03_HOURLY_VERTICAL_COLUMN/ImageServer\",\n    variable: \"HCHO\",\n  },\n  'hchoMonthly': {\n    url: \"https://gis.earthdata.nasa.gov/gp/rest/services/Hosted/TEMPO_HCHO_L3_V03_Monthly_Mean/ImageServer\",\n    variable: \"HCHO\",\n  },\n  'hchoDailyMax': {\n    url: \"https://gis.earthdata.nasa.gov/gp/rest/services/Hosted/TEMPO_HCHO_L3_V03_Daily_Maximum/ImageServer\",\n    variable: \"HCHO\",\n  },\n} as Record<string, { url: string; variable: VariableNames }>;\n\nexport const MOLECULE_OPTIONS = [\n  { title: 'NO', value: 'no2' },\n  { title: 'Monthly Mean NO', value: 'no2Monthly' },\n  { title: 'Daily Max NO', value: 'no2DailyMax' },\n  { title: 'O', value: 'o3' },\n  { title: 'HCHO', value: 'hcho' },\n  { title: 'Monthly Mean HCHO', value: 'hchoMonthly' },\n  { title: 'Daily Max HCHO', value: 'hchoDailyMax' },\n] as const;\n\nexport type MoleculeType = keyof typeof ESRI_URLS;\n\nexport function moleculeName(molecule: MoleculeType): string {\n  return MOLECULE_OPTIONS.find(m => m.value == molecule)?.title ?? \"\";\n}\n\nexport async function getEsriTimesteps(url: string, variable: VariableNames): Promise<number[]> {\n  return fetchEsriTimeSteps(url, variable).then(extractTimeSteps);\n}\n","export type EsriGeometryType = 'esriGeometryPoint' | 'esriGeometryMultipoint' | 'esriGeometryPolyline' | 'esriGeometryPolygon' | 'esriGeometryEnvelope';\n\nexport type RectBounds = {\n  xmin: number;\n  ymin: number;\n  xmax: number;\n  ymax: number;\n};\n\nexport type PointBounds = {\n  x: number;\n  y: number;\n};\nexport function rectangleToGeometry(rect: RectBounds) {\n  const { xmin, ymin, xmax, ymax } = rect;\n  return {\n    rings: [[\n      [xmin, ymin],\n      [xmin, ymax],\n      [xmax, ymax],\n      [xmax, ymin],\n      [xmin, ymin]\n    ]],\n    spatialReference: { wkid: 4326 } // Assuming WGS 84\n    // spatialReference: { wkid: 3857 } // Web Mercator. idk if this really matters for points\n  };\n}\n\nexport function pointToGeometry(point: PointBounds) {\n  const { x, y } = point;\n  return {\n    x: x,\n    y: y,\n    spatialReference: { wkid: 4326 } // Assuming WGS 84\n    // spatialReference: { wkid: 3857 } // Web Mercator. idk if this really matters for points\n  };\n}","export function isBad(v: number | null | undefined): v is null | undefined {\n  return v === null || v === undefined || isNaN(v);\n}\n\nexport function nan2null(v: number | null): number | null {\n  return isBad(v) ? null : v;\n}\n\n// typeof NaN is 'number'. Just included here \ntype DirtyNumberArray = Array<number | null | typeof NaN | undefined>;\n\nfunction _getValidData(arr: DirtyNumberArray) {\n  const validArr: number[] = [];\n  let sum = 0;\n  for (const v of arr) {\n    if (!isBad(v)) {\n      validArr.push(v);\n      sum += v;\n    }\n  }\n  return { validArr, sum, length: validArr.length };\n}\n\nfunction _length(arr: DirtyNumberArray): number {\n  return arr.length;\n}\n\nfunction _nanLength(arr: DirtyNumberArray): number {\n  return arr.filter(v => !isBad(v)).length;\n}\n\nexport function sum(arr: DirtyNumberArray): number | null {\n  if (arr.length === 0 || arr.some(v => isBad(v))) {\n    return null;\n  }\n  return (arr as number[]).reduce((a, b) => a + b, 0);\n}\n\nexport function nansum(arr: DirtyNumberArray): number {\n  const { sum } = _getValidData(arr);\n  return sum;\n}\n\nexport function mean(arr: DirtyNumberArray): number | null {\n  // filter nan, null, undefined\n  if (arr.length === 0 || arr.some(v => isBad(v))) {\n    return null;\n  }\n  const sum = (arr as number[]).reduce((a, b) => a + b, 0);\n  return sum / arr.length;\n}\n\nexport function nanmean(_arr: DirtyNumberArray): number | null {\n  const { sum, length } = _getValidData(_arr);\n  if (length === 0) return null;\n  return sum / length;\n}\n\nexport function difference(a: number | null | undefined, b: number | null | undefined): number | null {\n  if (isBad(a) || isBad(b)) return null;\n  return a - b;\n}\n\nexport function diff(arr: DirtyNumberArray): (number | null)[] {\n  const result: (number | null)[] = [];\n  for (let i = 1; i < arr.length; i++) {\n    result.push(difference(arr[i],arr[i - 1]));\n  }\n  return result;\n}\n\n\nexport function variance(arr: DirtyNumberArray): number | null {\n  if (arr.length < 2 || arr.some(v => isBad(v))) {\n    return null;\n  }\n  const m = mean(arr);\n  if (m === null) return null;\n  const diffs = (arr as number[]).map(v => (v - m) * (v - m));\n  return mean(diffs); // mean = sum(diffs) / n\n}\n\nexport function stdev(arr: DirtyNumberArray): number | null {\n  const v = variance(arr);\n  if (v === null) return null;\n  return v;\n}\n\nexport function standardError(arr: DirtyNumberArray): number | null {\n  const s = stdev(arr);\n  return s ? s / Math.sqrt(arr.length) : null;\n}\n\nexport function nanvariance(arr: DirtyNumberArray): number | null {\n  const { validArr, length } = _getValidData(arr);\n  if (length < 2) {\n    return null;\n  }\n  const m = nanmean(validArr);\n  if (m === null) return null;\n  const diffs = validArr.map(v => (v - m) * (v - m));\n  const result = nanmean(diffs);\n  return result;\n}\n\n\nexport function nanstdev(arr: DirtyNumberArray): number | null {\n  const v = nanvariance(arr);\n  if (v === null) return null;\n  return Math.sqrt(v);\n}\n\nexport function nanstandardError(arr: DirtyNumberArray): number | null {\n  const stdev = nanstdev(arr);\n  const length = _nanLength(arr);\n  if (stdev === null || length === 0) return null;\n  return stdev / Math.sqrt(length);\n}\n\nexport function nanmedian(arr: DirtyNumberArray): number | null {\n  const { validArr } = _getValidData(arr);\n  if (validArr.length === 0) return null;\n  \n  const sorted = [...validArr].sort((a, b) => a - b);\n  const mid = Math.floor(sorted.length / 2);\n  \n  if (sorted.length % 2 === 0) {\n    return (sorted[mid - 1] + sorted[mid]) / 2;\n  } else {\n    return sorted[mid];\n  }\n}\n\nexport function nanmin(arr: DirtyNumberArray): number | null {\n  const { validArr } = _getValidData(arr);\n  if (validArr.length === 0) return null;\n  return Math.min(...validArr);\n}\n\nexport function nanmax(arr: DirtyNumberArray): number | null {\n  const { validArr } = _getValidData(arr);\n  if (validArr.length === 0) return null;\n  return Math.max(...validArr);\n}\n\n\n\n// Combining errors in quadrature\nexport function sumOfSquares(arr: number[]): number {\n  return arr.reduce((acc, val) => acc + val * val, 0);\n}\n\nexport function nanSumOfSquares(arr: DirtyNumberArray): number {\n  const { validArr } = _getValidData(arr);\n  return sumOfSquares(validArr);\n}\n\nexport function meanOfSquares(arr: DirtyNumberArray): number | null {\n  const { validArr, length } = _getValidData(arr);\n  if (length === 0) return null;\n  return sumOfSquares(validArr) / length;\n}\nexport function nanMeanOfSquares(arr: DirtyNumberArray): number | null {\n  const { validArr, length } = _getValidData(arr);\n  if (length === 0) return null;\n  return sumOfSquares(validArr) / length;\n}\n\nexport function rootMeanSquare(arr: DirtyNumberArray): number | null{\n  const ms = meanOfSquares(arr);\n  if (ms === null) return null;\n  return Math.sqrt(ms);\n}\n\nexport function nanRootMeanSquare(arr: DirtyNumberArray): number | null {\n  const ms = nanMeanOfSquares(arr);\n  if (ms === null) return null;\n  return Math.sqrt(ms);\n}\n\nexport function weightedMean(values: DirtyNumberArray, errors: DirtyNumberArray): {mean: number | null, error: number | null} {\n  if (values.length === 0 || values.length !== errors.length) {\n    return {mean: null, error: null};\n  }\n  let weightedSum = 0;\n  let weightTotal = 0;\n  for (let i = 0; i < values.length; i++) {\n    const v = values[i];\n    const e = errors[i];\n    if (isBad(v) || isBad(e) || e === 0) {\n      continue; // skip bad values or zero error\n    }\n    const weight = 1 / (e * e);\n    weightedSum += v * weight;\n    weightTotal += weight;\n  }\n  if (weightTotal === 0) return {mean: null, error: null};\n  return {mean: weightedSum / weightTotal, error: Math.sqrt(1 / weightTotal)};\n} \n","// algorithm to predict how esri will sample the region\nimport { RectBounds } from \"../geometry\";\nimport { EsriImageServiceSpec } from \"../types\";\n\nexport class EsriSampler {\n  public metadata: EsriImageServiceSpec | undefined;\n  public geometry: RectBounds | undefined;\n  public serviceBounds: RectBounds;\n  public pixelXSize: number;\n  public pixelYSize: number;\n  private serviceXsize: number;\n  private serviceYsize: number;\n  \n    \n  constructor(\n    serviceMetaData: EsriImageServiceSpec, \n    geometry?: RectBounds\n  ) {\n    this.metadata = serviceMetaData;\n    this.geometry = geometry;\n    \n    this.serviceBounds = {\n      xmin: serviceMetaData.fullExtent.xmin,\n      ymin: serviceMetaData.fullExtent.ymin,\n      xmax: serviceMetaData.fullExtent.xmax,\n      ymax: serviceMetaData.fullExtent.ymax\n    };\n    \n    this.pixelXSize = serviceMetaData.pixelSizeX;\n    this.pixelYSize = serviceMetaData.pixelSizeY;\n    this.serviceXsize = this.serviceBounds.xmax - this.serviceBounds.xmin;\n    this.serviceYsize = this.serviceBounds.ymax - this.serviceBounds.ymin;\n  }\n  \n  setGeometry(geometry: RectBounds) {\n    // this.geometry = {\n    //   xmin: Math.min(geometry.xmin, geometry.xmax),\n    //   ymin: Math.min(geometry.ymin, geometry.ymax),\n    //   xmax: Math.max(geometry.xmin, geometry.xmax),\n    //   ymax: Math.max(geometry.ymin, geometry.ymax)\n    // };\n    this.geometry = geometry; // we need to maintain the orientation\n    // the orientation affects the sampling locations.\n  }\n  \n  // not the geometry X and Y size are signed. \n  // It is not garunteed that xmax > xmin or ymax > ymin\n  // The Esri Image ser\n  get geometryXsize(): number {\n    if (!this.geometry) {\n      throw new Error('Geometry not set');\n    }\n    return (this.geometry.xmax - this.geometry.xmin);\n  }\n  \n  get geometryYsize(): number {\n    if (!this.geometry) {\n      throw new Error('Geometry not set');\n    }\n    return (this.geometry.ymax - this.geometry.ymin);\n  }\n  \n  setMetadata(serviceMetaData: EsriImageServiceSpec) {\n    this.metadata = serviceMetaData;\n    this.serviceBounds = {\n      xmin: serviceMetaData.fullExtent.xmin,\n      ymin: serviceMetaData.fullExtent.ymin,\n      xmax: serviceMetaData.fullExtent.xmax,\n      ymax: serviceMetaData.fullExtent.ymax\n    }  ;\n    this.pixelXSize = serviceMetaData.pixelSizeX;\n    this.pixelYSize = serviceMetaData.pixelSizeY;\n    this.serviceXsize = this.serviceBounds.xmax - this.serviceBounds.xmin;\n    this.serviceYsize = this.serviceBounds.ymax - this.serviceBounds.ymin;\n  }  \n  \n  get geometryAspectRatio(): number {\n    if (!this.geometry) {\n      throw new Error('Geometry not set');\n    }\n    const latSize = Math.abs(this.geometry.ymax - this.geometry.ymin);\n    const lonSize = Math.abs(this.geometry.xmax - this.geometry.xmin);\n    return lonSize / latSize;\n  }\n  \n  get geometryArea(): number {\n    if (!this.geometry) {\n      throw new Error('Geometry not set');\n    }\n    const latSize = Math.abs(this.geometry.ymax - this.geometry.ymin);\n    const lonSize = Math.abs(this.geometry.xmax - this.geometry.xmin);\n    return latSize * lonSize;\n  }\n  \n  getSampleDistance(sampleCount: number): number {\n    return Math.sqrt(this.geometryArea) / Math.sqrt(sampleCount);\n  }\n  \n  getSampleCount(sampleDistance: number): number {\n    return this.geometryArea / (sampleDistance * sampleDistance);\n  }\n  \n  get pixelSize(): number {\n    return Math.sqrt(this.pixelXSize * this.pixelYSize);\n  }\n  \n  calculateActualSampleCount(initialSampleCount: number): number {\n    let sampleDistance = this.getSampleDistance(initialSampleCount);\n    \n    if (sampleDistance < this.pixelSize) {\n      console.log(`Requested sample distance (${sampleDistance}) is smaller than pixel size, adjusting to pixel size`);\n      sampleDistance = this.pixelSize;\n      console.log('Adjusted sample distance:', sampleDistance);\n    }\n\n    const nx = Math.round(Math.abs(this.geometryXsize) / sampleDistance);\n    const ny = Math.round(Math.abs(this.geometryYsize) / sampleDistance);\n    const actualSampleCount = nx * ny;\n    return actualSampleCount;\n  }\n  \n  getSamplingSpecificationFromSamplingDistance(sampleDistance: number) {\n    const nx = Math.round(Math.abs(this.geometryXsize) / sampleDistance);\n    const ny = Math.round(Math.abs(this.geometryYsize) / sampleDistance);\n    const count = nx * ny;\n    return {\n      count,\n      distance: sampleDistance,\n      lats: ny,\n      lons: nx\n    };\n  }\n  \n  getSamplingSpecificationFromSampleCount(initialSampleCount: number, permitOversampling: boolean = false) {\n    let sampleDistance = this.getSampleDistance(initialSampleCount);\n    \n    if ((sampleDistance < this.pixelSize) && !permitOversampling) {\n      console.log(`Requested sample distance (${sampleDistance}) is smaller than pixel size, adjusting to pixel size`);\n      const adjustedSampleCount = this.getSamplingSpecificationFromSamplingDistance(this.pixelSize).count;\n      console.log('Adjusted sample count:', adjustedSampleCount);\n      sampleDistance = this.getSampleDistance(adjustedSampleCount);\n    }\n\n    return this.getSamplingSpecificationFromSamplingDistance(sampleDistance);\n    \n  }\n  \n  \n  /** \n  Predict the sampling locations based on the geometry and metadata\n  Returns an object with x and y arrays of sampling locations\n  \n  Esri seems to always sample starting from the upper-left corner.\n  **/\n  getSampleLocations(sampleCount: number) {\n    if (!this.geometry) {\n      throw new Error('Geometry not set');\n    }\n\n    const spec = this.getSamplingSpecificationFromSampleCount(sampleCount);\n    console.log('Sampling spec:', spec);\n    const lats: number[] = [];\n    const lons: number[] = [];\n    const _ysign = Math.sign(this.geometryXsize);\n    const _xsign = Math.sign(this.geometryXsize);\n    \n    // spacing function for each sample\n    const delta = (i: number) => i * spec.distance + spec.distance / 2;\n\n    for (let i = 0; i < spec.lats; i++) {\n      lats.push(Math.max(this.geometry.ymin, this.geometry.ymax) - delta(i));\n    }\n    for (let j = 0; j < spec.lons; j++) {\n      lons.push(Math.min(this.geometry.xmin, this.geometry.xmax) + delta(j));\n    }\n    return {x: lons, y: lats, spec: spec};\n    \n  }\n  \n  getSampleLocationsGrid(sampleCount: number) {\n    const locations = this.getSampleLocations(sampleCount);\n    console.log(this.getSamplingSpecificationFromSampleCount(locations.spec.count));\n    const points: {x: number, y: number}[] = [];\n    for (let i = 0; i < locations.x.length; i++) {\n      for (let j = 0; j < locations.y.length; j++) {\n        points.push({x: locations.x[i], y: locations.y[j]});\n      }\n    }\n    return points;\n  }\n  \n}","/* eslint-disable @typescript-eslint/naming-convention */\nimport { rectangleToGeometry, pointToGeometry } from '../geometry';\nimport type { RectBounds, PointBounds, EsriGeometryType } from '../geometry';\nimport type { \n  EsriGetSamplesReturn, \n  EsriGetSamplesReturnError, \n  EsriGetSamplesSample, \n  Variables, \n  EsriInterpolationMethod, \n  CEsriTimeseries, \n  EsriImageServiceSpec,\n} from '../types';\nimport type { AggValue, DataPointError, MillisecondRange } from \"../../types\";\nimport {nanmean, diff} from './array_math';\nimport { EsriSampler } from './sampling';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface FetchOptions {\n  sampleCount?: number;\n  interpolation?: EsriInterpolationMethod;\n  returnFirstValueOnly?: boolean;\n  outFields?: string | string[];\n  sliceID?: string | number;\n}\n\n\nexport type TimeRanges = MillisecondRange | MillisecondRange[];\n\nexport interface RawSampleData {\n  samples: CEsriTimeseries[];\n  metadata: {\n    totalSamples: number;\n    timeRange: MillisecondRange | MillisecondRange[];\n    geometry: RectBounds | PointBounds;\n    geometryType: 'rectangle' | 'point';\n  };\n}\n\nexport interface TimeSeriesData {\n  values: Record<number, AggValue>;\n  errors: Record<number, DataPointError>;\n  locations: Array<{ x: number; y: number }>;\n  geometryType: 'rectangle' | 'point';\n}\n\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n\nfunction safeParseNumber(value: string | null | undefined): number | null {\n  if (value === null || value === '' || value === undefined) return null;\n  const parsed = parseFloat(value);\n  return isNaN(parsed) ? null : parsed;\n}\n\nfunction stringifyEsriGetSamplesParameters(params: {\n  geometry: ReturnType<typeof rectangleToGeometry> | ReturnType<typeof pointToGeometry>;\n  geometryType: EsriGeometryType;\n  sampleDistance?: number;\n  sampleCount?: number;\n  mosaicRule?: string | Record<string, unknown>;\n  pixelSize?: number;\n  returnFirstValueOnly?: boolean;\n  interpolation: EsriInterpolationMethod;\n  outFields?: string | string[];\n  sliceID?: string | number;\n  time?: string | [number, number] | [Date, Date];\n  f: 'pjson';\n}): URLSearchParams {\n  const {\n    geometry,\n    geometryType,\n    sampleDistance,\n    sampleCount,\n    mosaicRule,\n    pixelSize,\n    returnFirstValueOnly,\n    interpolation,\n    outFields,\n    sliceID,\n    time,\n  } = params;\n  \n  const options: Record<string, string> = {\n    f: 'pjson',\n    geometry: JSON.stringify(geometry),\n    geometryType: geometryType,\n    interpolation: interpolation,\n  };\n\n  if (sampleDistance) options.sampleDistance = sampleDistance.toString();\n  if (sampleCount) options.sampleCount = sampleCount.toString();\n  if (mosaicRule) options.mosaicRule = JSON.stringify(mosaicRule);\n  if (pixelSize) options.pixelSize = pixelSize.toString();\n  if (returnFirstValueOnly !== undefined) options.returnFirstValueOnly = returnFirstValueOnly.toString();\n  if (outFields) options.outFields = Array.isArray(outFields) ? outFields.join(',') : outFields;\n  if (sliceID !== undefined) options.sliceID = sliceID.toString();\n  if (time) {\n    const timeStr = Array.isArray(time)\n      ? time.map((t) => (t instanceof Date ? t.getTime() : t)).join(',')\n      : time;\n    options.time = timeStr;\n  }\n\n  return new URLSearchParams(options);\n}\n\n// ============================================================================\n// TEMPO DATA SERVICE\n// ============================================================================\n\nexport class TempoDataService {\n  private baseUrl: string;\n  private variable: Variables;\n  private metadataCache: EsriImageServiceSpec | null = null;\n  private _loadingMetadata: boolean = false;\n  \n  constructor(baseUrl: string, variable: Variables = \"NO2_Troposphere\") {\n    this.baseUrl = baseUrl;\n    this.variable = variable;\n    this.updateMetadataCache();\n  }\n\n  // ============================================================================\n  // CONFIGURATION\n  // ============================================================================\n\n  setVariable(variable: Variables): void {\n    this.variable = variable;\n  }\n\n  getVariable(): Variables {\n    return this.variable;\n  }\n\n  setBaseUrl(baseUrl: string): void {\n    if (this.baseUrl === baseUrl) return;\n    this.baseUrl = baseUrl;\n    this.updateMetadataCache();\n  }\n\n  getBaseUrl(): string {\n    return this.baseUrl;\n  }\n\n  private async _getServiceMetadata(): Promise<EsriImageServiceSpec> {\n    const url = `${this.baseUrl}?f=json`;\n    return fetch(url)\n      .then((response) => {\n        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n        return response.json();\n      })\n      .catch((error) => {\n        console.error('Error fetching service metadata:', error);\n        throw error;\n      });\n  }\n  \n  async updateMetadataCache() {\n    // in general we really should invalidate the cache when the URL changes\n    // however, we know that for this purpose, the grid is identical for all\n    // the various services we may access, so ease of use, we will always have a metaDataCache\n    // available. \n    // this.metadataCache = null; // Invalidate cache\n    this._loadingMetadata = true;\n    this.metadataCache = await this._getServiceMetadata();\n    this._loadingMetadata = false;\n    console.log('Service metadata updated:', this.metadataCache);\n    return this.metadataCache;\n  }\n  \n  getMetadata(): EsriImageServiceSpec {\n    if (!this.metadataCache) {\n      if (this._loadingMetadata) {\n        throw new Error('Metadata is currently loading. Please wait and try again.');\n      }\n      throw new Error('Metadata not loaded yet. Call updateMetadataCache() first.');\n    }\n    return this.metadataCache;\n  }\n  \n  get meta(): EsriImageServiceSpec | null {\n    return this.metadataCache;\n  }\n  \n  async withMetadataCache(): Promise<EsriImageServiceSpec> {\n    if (this.metadataCache) {\n      return this.metadataCache;\n    }\n    if (this._loadingMetadata) {\n      // Wait until loading is done. Check eveery 100ms\n      while (this._loadingMetadata) {\n        await new Promise((resolve) => setTimeout(resolve, 100));\n      }\n      if (this.metadataCache) {\n        return this.metadataCache;\n      } else {\n        throw new Error('Failed to load metadata.');\n      }\n    }\n    return this.updateMetadataCache();\n  }\n  \n\n  // ============================================================================\n  // CORE DATA FETCHING\n  // ============================================================================\n  /**\n   * Fetch raw samples from the ESRI Image Server\n   */\n  async fetchSample(\n    geometry: RectBounds | PointBounds,\n    timeRange: MillisecondRange,\n    options: FetchOptions = {}\n  ): Promise<RawSampleData> {\n    const esriGeometry = this.isRectBounds(geometry) \n      ? rectangleToGeometry(geometry as RectBounds)\n      : pointToGeometry(geometry as PointBounds);\n\n    const geometryType: EsriGeometryType = this.isRectBounds(geometry)\n      ? 'esriGeometryPolygon'\n      : 'esriGeometryPoint';\n\n    // Handle multiple time ranges by combining them\n    const timeString = `${timeRange.start},${timeRange.end}`;\n    \n    // log sample geometry type and time range\n    console.log(`Fetching samples for geometry type: ${geometryType}, time range: ${timeString}`);\n\n\n    const params = {\n      f: 'pjson' as const,\n      interpolation: 'RSP_NearestNeighbor' as EsriInterpolationMethod,\n      returnFirstValueOnly: false,\n      geometry: esriGeometry,\n      geometryType: geometryType,\n      time: timeString,\n      sampleCount: options.sampleCount || 30, // 100 is the Esri default. 30 has been our default\n      ...options\n    };\n\n    const urlWithParams = `${this.baseUrl}/getSamples/?${stringifyEsriGetSamplesParameters(params).toString()}`;\n    \n    try {\n      const response = await fetch(urlWithParams);\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n      \n      const data: EsriGetSamplesReturn | EsriGetSamplesReturnError = await response.json();\n      \n      if ('error' in data) {\n        throw new Error(`Error fetching samples (${data.error.code}): ${data.error.message} ${data.error.details}`);\n      }\n\n      const processedSamples = data.samples.map((sample: EsriGetSamplesSample) => ({\n        x: sample.location.x,\n        y: sample.location.y,\n        time: sample.attributes.StdTime,\n        date: new Date(sample.attributes.StdTime),\n        variable: safeParseNumber(sample.attributes[this.variable] ?? ''),\n        value: safeParseNumber(sample.value),\n        locationId: sample.locationId,\n        geometryType: this.isRectBounds(geometry) ? 'rectangle' : 'point' as 'rectangle' | 'point'\n      })); // this is a CEsriTimeseries[]\n      console.log(`Fetched ${processedSamples.length} samples for time range ${timeRange.start}-${timeRange.end}`);\n      return {\n        samples: processedSamples,\n        metadata: {\n          totalSamples: processedSamples.length,\n          timeRange: timeRange,\n          geometry,\n          geometryType: this.isRectBounds(geometry) ? 'rectangle' : 'point'\n        }\n      };\n    } catch (error) {\n      console.error('Error in TempoDataService.fetchSamples:', params);\n      throw error;\n    }\n  }\n  \n  /**\n   * Fetch raw samples from the ESRI Image Server\n   */\n  async fetchSamples(\n    geometry: RectBounds | PointBounds,\n    timeRanges: TimeRanges,\n    options: FetchOptions = {}\n  ): Promise<RawSampleData> {\n    \n    if (!Array.isArray(timeRanges)) {\n      return this.fetchSample(geometry, timeRanges, options);\n    }\n    \n    const promises = timeRanges.map(async (tr) => {\n      try {\n        return await this.fetchSample(geometry, tr, options);\n      } catch (error) {\n        console.error(`Error fetching sample for time range ${tr.start}-${tr.end}:`, error);\n        return null;\n      }\n    });\n\n    return Promise.all(promises).then((results) => {\n      const validResults = results.filter((result): result is RawSampleData => result !== null);\n      const samples = validResults.map((result) => result.samples).flat();\n      console.log(`Total samples fetched across all time ranges: ${samples.length}`);\n      console.log(samples);\n      return {\n        samples,\n        metadata: {\n          totalSamples: samples.length,\n          timeRange: timeRanges,\n          geometry: geometry,\n          geometryType: this.isRectBounds(geometry) ? 'rectangle' : 'point',\n        }\n      } as RawSampleData;\n    });\n  }\n\n  // ============================================================================\n  // AGGREGATION METHODS\n  // ============================================================================\n\n  /**\n   * Aggregate samples by time (for rectangle areas)\n   */\n  aggregateByTime(samples: CEsriTimeseries[]): TimeSeriesData {\n    // Group samples by time\n    const grouped = new Map<number, CEsriTimeseries[]>();\n    samples.forEach((sample) => {\n      if (!grouped.has(sample.time)) {\n        grouped.set(sample.time, []);\n      }\n      grouped.get(sample.time)?.push(sample);\n    });\n\n    // Calculate aggregated values\n    const values: Record<number, AggValue> = {};\n    const errors: Record<number, DataPointError> = {};\n    \n    grouped.forEach((samples, time) => {\n      const sampleValues = samples.map(s => s.value);\n      values[time] = this.calculateMean(sampleValues, time);\n      errors[time] = this.calculateError(sampleValues);\n    });\n\n    // Collect unique locations\n    const seen = new Set<string>();\n    const locations: Array<{ x: number; y: number }> = [];\n    for (const sample of samples) {\n      const key = `${sample.x},${sample.y}`;\n      if (!seen.has(key)) {\n        seen.add(key);\n        locations.push({ x: sample.x, y: sample.y });\n      }\n    }\n\n    return { values, errors, locations, geometryType: samples[0].geometryType };\n  }\n\n  /**\n   * Get single point data (for center points or individual points)\n   */\n  // aggregatePoint(samples: CEsriTimeseries[]): TimeSeriesData | null {\n  //   if (samples.length === 0) return null;\n    \n  //   // For point data, we typically expect one sample per time\n  //   // Group by time and aggregate\n  //   const grouped = new Map<number, CEsriTimeseries[]>();\n  //   samples.forEach((sample) => {\n  //     if (!grouped.has(sample.time)) {\n  //       grouped.set(sample.time, []);\n  //     }\n  //     grouped.get(sample.time)?.push(sample);\n  //   });\n\n  //   // Calculate aggregated values\n  //   const values: Record<number, AggValue> = {};\n  //   const errors: Record<number, DataPointError> = {};\n    \n  //   grouped.forEach((samples, time) => {\n  //     const sampleValues = samples.map(s => s.value);\n  //     values[time] = this.calculateMean(sampleValues, time);\n  //     errors[time] = this.calculateError(sampleValues);\n  //   });\n\n  //   // For point data, we expect only one location\n  //   const locations: Array<{ x: number; y: number }> = [];\n  //   if (samples.length > 0) {\n  //     const sample = samples[0];\n  //     locations.push({ x: sample.x, y: sample.y });\n  //   }\n\n  //   return { values, errors, locations };\n  // }\n\n  // ============================================================================\n  // CONVENIENCE METHODS\n  // ============================================================================\n  \n  getTimeSeriesStatistics(jsonData: RawSampleData) {\n    const samples = jsonData.samples || [];\n    \n    const uniqueLocations = new Set();\n    const uniqueLatitudes = new Set<number>();\n    const uniqueLongitudes = new Set<number>();\n    const valuesPerLocation = {};\n    \n    for (const sample of samples) {\n      const location = {x: sample.x, y: sample.y};\n      const locString = `${location.x},${location.y}`;\n      if (location) {\n        // Use a string representation for unique locations in the Set\n        uniqueLocations.add(locString);\n        uniqueLatitudes.add(location.y);\n        uniqueLongitudes.add(location.x);\n      }\n      \n      valuesPerLocation[locString] = (valuesPerLocation[locString] || 0) + 1;\n\n    }\n    \n    const totalValues = samples.length;\n    const numUniqueLocations = uniqueLocations.size;\n    \n    const latitudeSpacing = diff([...uniqueLatitudes].sort());\n    const longitudeSpacing = diff([...uniqueLongitudes].sort());\n    \n    \n    \n    return {\n      numUniqueLocations,\n      totalValues,\n      valuesPerLocation,\n      latitudeSpacing: nanmean(latitudeSpacing),\n      longitudeSpacing: nanmean(longitudeSpacing),\n    };\n  }\n  \n  /**\n   * Fetch and aggragate any valid geometry data (rectangle or point)\n   */\n  async fetchTimeseriesData(\n    geometry: RectBounds | PointBounds,\n    timeRanges: TimeRanges,\n    options: FetchOptions = {}\n  ): Promise<TimeSeriesData> {\n    if (this.isRectBounds(geometry) && this.meta) {\n      const sampler = new EsriSampler(this.meta, geometry);\n      const sampleCount = options.sampleCount || 30;\n      console.log(`Requested sample count: ${sampleCount}`);\n      options.sampleCount = sampler.getSamplingSpecificationFromSampleCount(sampleCount).count;\n      console.log(`Using sample count: ${options.sampleCount}`);\n    }\n    const rawData = await this.fetchSamples(geometry, timeRanges, options);\n    const stats = this.getTimeSeriesStatistics(rawData);\n    console.log(`Data is sampled from ${stats.numUniqueLocations} unique locations with a total of ${stats.totalValues} values.`);\n    \n    console.log(`Approximate spacing between unique locations: ${stats.latitudeSpacing?.toFixed(4)} latitude, ${stats.longitudeSpacing?.toFixed(4)} longitude`);\n    return this.aggregateByTime(rawData.samples);\n  }\n  \n  /**\n   * Fetch and aggregate rectangle data (current fetchRectangleSamples equivalent)\n   */\n  // async fetchRectangleTimeseries(\n  //   rectangle: RectBounds,\n  //   timeRanges: TimeRanges,\n  //   options: FetchOptions = {}\n  // ): Promise<TimeSeriesData> {\n  //   const rawData = await this.fetchSamples(rectangle, timeRanges, options);\n  //   return this.aggregateByTime(rawData.samples);\n  // }\n\n  /**\n   * Fetch and aggregate point data (current fetchCenterPointSample equivalent)\n   */\n  // async fetchPointTimeseries(\n  //   point: PointBounds,\n  //   timeRanges: TimeRanges,\n  //   options: FetchOptions = {}\n  // ): Promise<TimeSeriesData | null> {\n  //   const rawData = await this.fetchSamples(point, timeRanges, options);\n  //   return this.aggregatePoint(rawData.samples);\n  // }\n\n  /**\n   * Get center point of rectangle and fetch data for it\n   */\n  async fetchCenterPointData(\n    rectangle: RectBounds,\n    timeRanges: TimeRanges,\n    options: FetchOptions = {}\n  ): Promise<TimeSeriesData | null> {\n    const center: PointBounds = {\n      x: (rectangle.xmin + rectangle.xmax) / 2,\n      y: (rectangle.ymin + rectangle.ymax) / 2\n    };\n    \n    return this.fetchTimeseriesData(center, timeRanges, options);\n  }\n\n  // ============================================================================\n  // UTILITY METHODS\n  // ============================================================================\n\n  private isRectBounds(geometry: RectBounds | PointBounds): geometry is RectBounds {\n    return 'xmin' in geometry && 'xmax' in geometry && 'ymin' in geometry && 'ymax' in geometry;\n  }\n\n  private calculateMean(samples: (number | null)[], time: number): AggValue {\n    const validSamples = samples.filter((sample) => sample !== null);\n    if (validSamples.length === 0) return { value: null, date: new Date(time) };\n    const sum = validSamples.reduce((acc, val) => acc + (val ?? 0), 0);\n    return { value: sum / validSamples.length, date: new Date(time) };\n  }\n\n  private calculateError(samples: (number | null)[]): DataPointError {\n    const validSamples = samples.filter((sample) => sample !== null);\n    if (validSamples.length === 0) return { lower: null, upper: null };\n    \n    const mean = validSamples.reduce((acc, val) => acc + (val ?? 0), 0) / validSamples.length;\n    const squaredDiffs = validSamples.map((sample) => {\n      if (sample === null) return 0;\n      return Math.pow(sample - mean, 2);\n    });\n    // squared standard error of the mean = variance / n\n    const squaredSEM = squaredDiffs.reduce((acc, val) => acc + val, 0) / Math.pow(validSamples.length, 2);\n    \n    return { lower: Math.sqrt(squaredSEM), upper: Math.sqrt(squaredSEM) };\n  }\n} ","import { ref, computed, watch, Ref } from 'vue';\nimport { getTimezoneOffset } from 'date-fns-tz';\n\nconst ONEDAYMS = 1000 * 60 * 60 * 24;\n\nfunction isBad(value: unknown): value is null | undefined {\n  return value === null || value === undefined;\n}\n\nexport const useUniqueTimeSelection = (timestamps: Ref<number[]>) => {\n  const timeIndex = ref(0);\n  const singleDateSelected = ref<Date>(new Date());\n  const minIndex = ref<number>(0);\n  const maxIndex = ref<number>(0);\n  \n  const mode = ref<'single' | 'all'>('single');\n  const initialTimeSelection = ref<'first' | 'last'>('first');\n\n  function getOneDaysTimestamps(date: Date) {\n    if (isBad(date)) {\n      return [];\n    }\n    const mod = [] as {ts:number, idx: number}[];\n    timestamps.value.forEach((ts, idx) => {\n      if ((ts - date.getTime()) < ONEDAYMS && (ts - date.getTime()) > 0) {\n        mod.push({ ts, idx });\n      }\n    });\n    return mod;\n  }\n  \n  function getAllDaysTimestamps(date: Date) {\n    if (isBad(date)) {\n      return [];\n    }\n    // const mod = [] as {ts:number, idx: number}[];\n    // timestamps.value.forEach((ts, idx) => {\n    //   mod.push({ ts, idx });\n    // });\n    return timestamps.value.map((ts, idx) => ({ ts, idx }));\n  }\n\n  function setNearestDate(date: number | null) {\n    if (date == null) {\n      return;\n    }\n\n    const mod = mode.value === 'single' ? getOneDaysTimestamps(new Date(date)) : getAllDaysTimestamps(new Date(date));\n    if (mod.length > 0) {\n      minIndex.value = mod[0].idx;\n      maxIndex.value = mod[mod.length - 1].idx;\n      timeIndex.value = initialTimeSelection.value === 'first' ? minIndex.value : maxIndex.value;\n    } else {\n      console.warn(\"No timestamps found for the given date.\");\n    }\n  }\n\n  const timestamp = computed(() => {\n    if (timestamps.value.length === 0) {\n      return null;\n    }\n    const val = timestamps.value[timeIndex.value];\n    return val;\n  });\n\n  const date = computed(() => {\n    return timestamp.value ? new Date(timestamp.value) : null;\n  });\n\n  const offset = (date: Date) => getTimezoneOffset(\"US/Eastern\", date);\n\n  const uniqueDays = computed(() => {\n    const easternDates = timestamps.value.map(ts => new Date(ts + offset(new Date(ts))));\n    const days = easternDates.map(date => (new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate())).getTime());\n    const unique = Array.from(new Set(days));\n    return unique.map(ts => new Date(ts));\n  });\n\n  const uniqueDaysIndex = (ts: number) => {\n    let date = new Date(ts + offset(new Date(ts)));\n    date = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate());\n    return uniqueDays.value.map(e => e.getTime()).indexOf(date.getTime());\n  };\n\n  function getUniqueDayIndex(date: Date | null | undefined): number {\n    if (isBad(date)) {\n      return 0;\n    }\n    return uniqueDays.value.findIndex(day => day.getTime() === date.getTime());\n  }\n\n  function moveBackwardOneDay() {\n    const currentIndex = getUniqueDayIndex(singleDateSelected.value);\n    if (currentIndex > 0) {\n      singleDateSelected.value = uniqueDays.value[currentIndex - 1];\n    }\n  }\n\n  function moveForwardOneDay() {\n    const nextIndex = getUniqueDayIndex(singleDateSelected.value) + 1;\n    if (nextIndex < uniqueDays.value.length) {\n      singleDateSelected.value = uniqueDays.value[nextIndex];\n    }\n  }\n\n  function nearestDate(date: Date): number {\n    const time = date.getTime();\n    const timestamp = timestamps.value.find(ts => ((ts - time) < ONEDAYMS) && (ts - time) >= 0);\n    if (timestamp !== undefined) {\n      return timestamp;\n    } else {\n      console.warn(\"No matching timestamp found, returning default value.\");\n      return timestamps.value[0];\n    }\n  }\n\n  function nearestDateIndex(date: Date): number {\n    const timestamp = date.getTime();\n    const index = timestamps.value.findIndex(ts => ((ts - timestamp) < ONEDAYMS) && (ts - timestamp) >= 0);\n    if (index < 0) {\n      console.log(\"No matching timestamp found, returning default index.\");\n      return 0;\n    }\n    return index;\n  }\n\n  watch(singleDateSelected, (value) => {\n    if (value) { \n      setNearestDate(value.getTime());\n    }\n  });\n  \n  watch(mode, () => {\n    setNearestDate(singleDateSelected.value.getTime());\n  });\n\n  watch(timestamps, (newTimestamps) => {\n    if (newTimestamps.length === 0) {\n      timeIndex.value = 0;\n      minIndex.value = 0;\n      maxIndex.value = 0;\n      return;\n    }\n    // Reset to first date if current date is out of range\n    if (timeIndex.value == null || timeIndex.value >= newTimestamps.length) {\n      timeIndex.value = 0;\n      singleDateSelected.value = new Date(newTimestamps[0]);\n    } else {\n      setNearestDate(singleDateSelected.value.getTime());\n      console.log(minIndex.value, maxIndex.value);\n    }\n  }, { immediate: true });\n\n  return {\n    timeIndex,\n    timestamp,\n    date,\n    singleDateSelected,\n    maxIndex,\n    minIndex,\n    uniqueDays,\n    mode,\n    initialTimeSelection,\n    uniqueDaysIndex,\n    setNearestDate,\n    getUniqueDayIndex,\n    moveBackwardOneDay,\n    moveForwardOneDay,\n    nearestDate,\n    nearestDateIndex\n  };\n};\n","import { computed, type Ref } from 'vue';\nimport { toZonedTime, fromZonedTime, format as formatTz, getTimezoneOffset } from 'date-fns-tz';\nimport type { MillisecondRange } from '../types/datetime';\n\nexport type Timezone = \n  \"US/Eastern\" |\n  \"US/Central\" |\n  \"US/Mountain\" |\n  \"US/Arizona\" |\n  \"US/Pacific\" |\n  \"US/Alaska\" |\n  \"UTC\";\n\ntype TimezoneOption = { tz: Timezone, name: string };\n\n/**\n * Composable for centralized timezone handling and formatting\n */\nexport function useTimezone(selectedTimezone: Ref<string>) {\n  \n  /**\n   * Convert UTC timestamp to timezone-aware date\n   */\n  function toTimezone(timestamp: number): Date {\n    const utcDate = new Date(timestamp);\n    return toZonedTime(utcDate, selectedTimezone.value);\n  }\n\n  /**\n   * Convert timezone-aware date to UTC timestamp\n   */\n  function fromTimezone(date: Date): number {\n    return fromZonedTime(date, selectedTimezone.value).getTime();\n  }\n\n  /**\n   * Set date to local midnight in selected timezone\n   */\n  function setToMidnight(date: Date): number {\n    const zonedDate = toZonedTime(date, selectedTimezone.value);\n    zonedDate.setHours(0, 0, 0, 0);\n    return fromZonedTime(zonedDate, selectedTimezone.value).getTime();\n  }\n\n  /**\n   * Set date to end of day in selected timezone\n   */\n  function setToEndOfDay(date: Date): number {\n    const zonedDate = toZonedTime(date, selectedTimezone.value);\n    zonedDate.setHours(23, 59, 59, 999);\n    return fromZonedTime(zonedDate, selectedTimezone.value).getTime();\n  }\n\n  /**\n   * Format timestamp with full date and time\n   */\n  function formatTimeLong(timestamp: number): string {\n    const utcDate = new Date(timestamp);\n    const zonedDate = toZonedTime(utcDate, selectedTimezone.value);\n    return formatTz(zonedDate, 'EEE, MMM d, yyyy \\'at\\' h:mm a', { timeZone: selectedTimezone.value });\n  }\n\n  /**\n   * Format duration with timezone prefix\n   */\n  function formatDuration(range: MillisecondRange): string {\n    const startUtc = new Date(range.start);\n    const endUtc = new Date(range.end);\n    const startZoned = toZonedTime(startUtc, selectedTimezone.value);\n    const endZoned = toZonedTime(endUtc, selectedTimezone.value);\n    \n    const startTime = startZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    const endTime = endZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    \n    return `${selectedTimezone.value}: ${startTime} - ${endTime}`;\n  }\n\n  /**\n   * Format timezone range with date and time\n   */\n  function formatTimezoneRange(range: MillisecondRange): string {\n    const startUtc = new Date(range.start);\n    const endUtc = new Date(range.end);\n    const startZoned = toZonedTime(startUtc, selectedTimezone.value);\n    const endZoned = toZonedTime(endUtc, selectedTimezone.value);\n    \n    const startDate = startZoned.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric' \n    });\n    const startTime = startZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    const endTime = endZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    \n    return `${startDate} ${startTime} - ${endTime}`;\n  }\n\n  /**\n   * Format UTC range\n   */\n  function formatUTCRange(range: MillisecondRange): string {\n    const startUtc = new Date(range.start);\n    const endUtc = new Date(range.end);\n    \n    const startDate = startUtc.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric',\n      timeZone: 'UTC'\n    });\n    const startTime = startUtc.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n      timeZone: 'UTC'\n    });\n    const endTime = endUtc.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n      timeZone: 'UTC'\n    });\n    \n    return `${startDate} ${startTime} - ${endTime}`;\n  }\n\n  /**\n   * Format time string for display\n   */\n  function formatTime(timeString: string): string {\n    const [hour, minute] = timeString.split(':').map(Number);\n    const date = new Date();\n    date.setHours(hour, minute, 0, 0);\n    return date.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n  }\n\n  /**\n   * Format date for display\n   */\n  function formatDateDisplay(date: Date | null): string {\n    return date?.toDateString() || '';\n  }\n\n  // Computed properties for reactive timezone info\n  const timezoneInfo = computed(() => ({\n    name: selectedTimezone.value,\n    offset: new Date().toLocaleString('en', {\n      timeZone: selectedTimezone.value,\n      timeZoneName: 'short'\n    }).split(' ').pop() || ''\n  }));\n\n  function isDST(date: Date): boolean {\n    const standardOffset = getTimezoneOffset(selectedTimezone.value, new Date(date.getUTCFullYear(), 0, 1));\n    const currentOffset = getTimezoneOffset(selectedTimezone.value, date);\n    if (standardOffset === currentOffset) {\n      return false;\n    }\n    return true;\n  }\n\n  function timezoneOptions(date: Date): TimezoneOption[] {\n    const dateIsDST = isDST(date);\n    return [\n      { tz: 'US/Eastern', name: dateIsDST ? 'Eastern Daylight' : 'Eastern Standard' },\n      { tz: 'US/Central', name: dateIsDST ? 'Central Daylight' : 'Central Standard' },\n      { tz: 'US/Mountain', name: dateIsDST ? 'Mountain Daylight' : 'Mountain Standard' },\n      { tz: 'US/Arizona', name: 'Mountain Standard' },\n      { tz: 'US/Pacific', name: dateIsDST ? 'Pacific Daylight' : 'Pacific Standard' },\n      { tz: 'US/Alaska', name: dateIsDST ? 'Alaska Daylight' : 'Alaska Standard' },\n      { tz: 'UTC', name: 'UTC' },\n    ];\n  }\n\n  return {\n    // Core timezone operations\n    toTimezone,\n    fromTimezone,\n    setToMidnight,\n    setToEndOfDay,\n    \n    // Formatting functions\n    formatTimeLong,\n    formatDuration,\n    formatTimezoneRange,\n    formatUTCRange,\n    formatTime,\n    formatDateDisplay,\n\n    // Utility functions\n    isDST,\n    timezoneOptions,\n    \n    // Computed properties\n    timezoneInfo,\n  };\n}\n","\n\n/**\n * @function atleast1d\n * Ensures that the input is at least 1-dimensional. If the input is a single value, it wraps it in an array.\n * If the input is already an array, it returns the array as is.\n * If the input is undefined, it returns undefined.\n * If the input is null, it returns an array with a single null element.\n */\n// The complicated typing ensures that if T is undefined, the return type is also undefined.\nexport function atleast1d<T>(value: T | T[]): T[] {\n  return (Array.isArray(value) ? value : [value]);\n}","import { getTimezoneOffset } from \"date-fns-tz\";\nimport type { MillisecondRange, TimeRange, UserDataset } from \"../types\";\n\nexport function formatSingleRange(range: MillisecondRange): string {\n  const startString = new Date(range.start).toLocaleDateString();\n  const endString = new Date(range.end).toLocaleDateString();\n  if (startString === endString) {\n    return startString;\n  }\n  return `${startString} - ${endString}`;\n}\n\nexport function formatTimeRange(ranges: MillisecondRange | MillisecondRange[]): string {\n  if (Array.isArray(ranges)) {\n    if (ranges.length === 0) {\n      return 'No time range set';\n    }\n    \n    if (ranges.length === 1) {\n      return formatSingleRange(ranges[0]); \n    } else {\n      // For multiple ranges, show the full span\n      const allStarts = ranges.map(r => r.start);\n      const allEnds = ranges.map(r => r.end);\n      const minStart = Math.min(...allStarts);\n      const maxEnd = Math.max(...allEnds);\n      return `${new Date(minStart).toLocaleDateString()} - ${new Date(maxEnd).toLocaleDateString()} (${ranges.length} ranges)`;\n    }\n  } else {\n    return formatSingleRange(ranges);\n  }\n}\n\nexport function getTimeRangeDisplay(sel: UserDataset): string {\n  if (!sel.timeRange || !sel.timeRange.range) {\n    return `No time range set for selection ${sel.id}`;\n  }\n  return formatTimeRange(sel.timeRange.range);\n}\n\nexport function rangeForSingleDay(day: Date, timezone: string): MillisecondRange {\n  const offset = getTimezoneOffset(timezone, day);\n  const dayUTC = day.getTime() - offset;\n  const start = dayUTC - (dayUTC % 86400000) - offset; // Start of the day in milliseconds\n  const end = start + (86400000 - 1); // End of the day in milliseconds\n  return { start, end };\n}\n\nexport function areEquivalentMsRanges(first: MillisecondRange, second: MillisecondRange): boolean {\n  return first.start === second.start && first.end === second.end;\n}\n\nexport function areEquivalentTimeRanges(first: TimeRange, second: TimeRange): boolean {\n  if (first.id === second.id) {\n    return true;\n  }\n\n  const array = Array.isArray(first.range);\n  if (array !== Array.isArray(second.range)) {\n    return false;\n  }\n\n  if (array) {\n    const firstRange = first.range as MillisecondRange[];\n    const secondRange = second.range as MillisecondRange[];\n    return firstRange.length === secondRange.length &&\n      firstRange.every((rg, idx) => areEquivalentMsRanges(rg, secondRange[idx]));\n  } else {\n    return areEquivalentMsRanges(first.range as MillisecondRange, second.range as MillisecondRange);\n  }\n}\n","import { defineStore } from \"pinia\";\nimport { computed, ref, watch } from \"vue\";\nimport { v4 } from \"uuid\";\n\nimport type { InitMapOptions, LatLngPair, MappingBackends, SelectionType, TimeRange, UnifiedRegion, UserDataset } from \"@/types\";\nimport { ESRI_URLS, MoleculeType } from \"@/esri/utils\";\nimport { TempoDataService } from \"@/esri/services/TempoDataService\";\nimport { useUniqueTimeSelection } from \"@/composables/useUniqueTimeSelection\";\nimport { useTimezone, type Timezone } from \"@/composables/useTimezone\";\nimport { atleast1d } from \"@/utils/atleast1d\";\nimport { formatSingleRange, rangeForSingleDay } from \"@/utils/timeRange\";\nimport { colorbarOptions } from \"@/esri/ImageLayerConfig\";\n\n\nconst createTempoStore = <T extends MappingBackends>(backend: MappingBackends) => defineStore(\"tempods\", () => {\n  type UnifiedRegionType = UnifiedRegion<T>;\n\n  const timeRanges = ref<TimeRange[]>([]);\n  const regions = ref<UnifiedRegionType[]>([]);\n  const datasets = ref<UserDataset[]>([]);\n  const timestamps = ref<number[]>([]);\n  const timestampsLoaded = ref(false);\n  const tempoDataServices: Record<MoleculeType, TempoDataService> = {};\n  const backendRef = ref<MappingBackends>(backend);\n  const maxSampleCount = ref(50);\n  const sampleErrors = ref<Record<string, string | null>>({});\n  const molecule = ref<MoleculeType>('no2');\n  const regionsCreatedCount = ref(0);\n  const userSelectedCalendarDates: number[] = [];\n  const userSelectedTimezones: string[] = [];\n  const userSelectedLocations: string[] = [];\n  const userSelectedNotableEvents: [string, string][] = [];\n  const shareButtonClickedCount = ref(0);\n  const playButtonClickedCount = ref(0);\n  const timeSliderUsedCount = ref(0);\n  const opacitySliderUsedCount = ref(0);\n\n  const selectionActive = ref<SelectionType>(null);\n  const lastFocusedRegion = ref<UnifiedRegionType | null>(null);\n\n  const colorMap = computed(() => colorbarOptions[molecule.value].colormap.toLowerCase());\n\n  const selectedTimezone = ref<Timezone>(\"US/Eastern\");\n  const { isDST, timezoneOptions: tzOptions } = useTimezone(selectedTimezone);\n\n  const dateIsDST = computed(() => isDST(singleDateSelected.value));\n  const timezoneOptions = computed(() => tzOptions(singleDateSelected.value));\n     \n  // This part is still assuming that multiple maps will be temporally linked\n  // If/when we want to make that not the case, we'll need to rethink this\n  // and some of the consuming components\n  const {\n    timeIndex,\n    timestamp,\n    date,\n    singleDateSelected,\n    maxIndex,\n    minIndex,\n    uniqueDays,\n    uniqueDaysIndex,\n    setNearestDate,\n    moveBackwardOneDay,\n    moveForwardOneDay,\n    nearestDateIndex\n  } = useUniqueTimeSelection(timestamps);\n\n  const displayedDayTimeRange = computed<TimeRange>(() => {\n    const range = rangeForSingleDay(singleDateSelected.value, selectedTimezone.value);\n    return {\n      id: 'displayed-day',\n      name: 'Displayed Day',\n      description: `Displayed Day (${new Date(range.start).toLocaleDateString()})`,\n      range,\n      type: 'singledate'\n    };\n  });\n\n  const accentColor = ref(\"#068ede\");\n  const accentColor2 = ref(\"#ffcc33\");\n\n\n  function getTempoDataService(molecule: MoleculeType) {\n    if (molecule in tempoDataServices) {\n      return tempoDataServices[molecule];\n    }\n    const url = ESRI_URLS[molecule];\n    const service = new TempoDataService(url.url, url.variable);\n    tempoDataServices[molecule] = service;\n    return service;\n  }\n\n  const currentTempoDataService = computed(() => getTempoDataService(molecule.value));\n\n  function addTimeRange(range: TimeRange) {\n    timeRanges.value.push(range);\n  }\n\n  function deleteTimeRange(range: TimeRange) {\n    const index = timeRanges.value.findIndex(r => r.id === range.id);\n    if (index < 0) {\n      return;\n    }\n    timeRanges.value.splice(index, 1);\n  }\n\n  watch(singleDateSelected, (_newDate, oldDate) => {\n    const oldRange = rangeForSingleDay(oldDate, selectedTimezone.value);\n    const displayedDateSelections = datasets.value.filter(sel => {\n      const range = sel.timeRange.range;\n      return !Array.isArray(range) &&\n             range.start === oldRange.start &&\n             range.end === oldRange.end;\n    });\n    if (displayedDateSelections.length === 0) {\n      return;\n    }\n  \n    const index = timeRanges.value.findIndex(timeRange => {\n      const range = timeRange.range;\n      return !Array.isArray(range) &&\n             range.start === oldRange.start &&\n             range.end === oldRange.end &&\n             timeRange.id !== \"displayed-day\";\n    });\n    if (index < 0) {\n      const formatted = formatSingleRange(oldRange);\n      const oldTimeRange: TimeRange = {\n        id: v4(),\n        name: formatted,\n        description: formatted,\n        range: oldRange,\n        type: 'singledate'\n      };\n      timeRanges.value.push(oldTimeRange);\n    }\n  });\n\n  watch(displayedDayTimeRange, (val) => {\n    if (!timeRanges.value.length) {\n      timeRanges.value.push(val);\n    } else {\n      timeRanges.value[0] = val;\n    }\n  }, { immediate: true });\n\n  const zoomScale = 0.5; // for matplibre-gl\n  const urlParams = new URLSearchParams(window.location.search);\n  const initLat = parseFloat(urlParams.get(\"lat\") || '40.044');\n  const initLon = parseFloat(urlParams.get(\"lon\") || '-98.789');\n  const initZoom = parseFloat(urlParams.get(\"zoom\") || `${4 * zoomScale}`); // 4 is the default zoom level for the map, multiplied by zoomScale for maplibre\n  const initTime = urlParams.get(\"t\");\n  const initState = ref<InitMapOptions>({\n    loc: [initLat, initLon] as LatLngPair,\n    zoom: initZoom,\n    t: initTime ? +initTime : null\n  });\n  \n  const homeLat = 40.044;\n  const homeLon = -98.789;\n  const homeZoom = 4 * zoomScale; // 4 is the default zoom level for the map, multiplied by zoomScale for maplibre\n  const homeState = ref({\n    loc: [homeLat, homeLon] as LatLngPair,\n    zoom: homeZoom,\n    t: null as number | null\n  });\n\n  watch(timestampsLoaded, (loaded: boolean) => {\n    if (loaded) {\n      console.log('timestamps loaded');\n      if (initState.value.t) {\n        let index = uniqueDaysIndex(initState.value.t);\n        if (index == -1) {\n          return;\n        }\n        console.log('set the date');\n        singleDateSelected.value = uniqueDays.value[index];\n        index = nearestDateIndex(new Date(initState.value.t));\n        if (index == -1) {\n          return;\n        }\n        timeIndex.value = index;\n        // FIXME if needed. if we find the time is not being set, use nextTick\n        // this.$nextTick(() => { this.timeIndex = index;});\n      }\n    }\n  });\n\n  watch(timestamps, () => {\n    if (uniqueDays.value.length === 0) {\n      return;\n    }\n    singleDateSelected.value = uniqueDays.value[uniqueDays.value.length - 1];\n  });\n\n  function addRegion(region: UnifiedRegionType) {\n    // TODO: Fix the typing here\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore\n    regions.value.push(region);\n  }\n\n  function deleteDataset(dataset: UserDataset) {\n    const index = datasets.value.findIndex(s => s.id == dataset.id);\n    if (index < 0) {\n      return;\n    }\n    datasets.value.splice(index, 1);\n  }\n\n  function addDataset(dataset: UserDataset, fetch=true) {\n    datasets.value.push(dataset);\n    if (fetch) {\n      fetchDataForDataset(dataset);\n    }\n    return dataset;\n  }\n\n  function markDatasetUpdated(dataset: UserDataset) {\n    const index = datasets.value.findIndex(ds => ds.id === dataset.id);\n    if (index >= 0) {\n      datasets.value[index] = { ...dataset };\n    }\n  }\n\n  function setRegionName(region: UnifiedRegionType, newName: string) {\n    if (newName.trim() === '') {\n      console.error(\"Region name cannot be empty.\");\n      return;\n    }\n    // eslint-disable-next-line\n    // @ts-ignore it is not actually deep\n    const existing = (regions.value as UnifiedRegionType[]).find(r => r.name === newName && r.id !== region.id);\n    if (existing) {\n      console.error(`A region with the name \"${newName}\" already exists.`);\n      return;\n    }\n    region.name = newName;\n    console.log(`Renamed ${region.geometryType} region to: ${newName}`);\n  }\n\n  async function fetchDataForDataset(dataset: UserDataset) {\n    dataset.loading = true;\n\n    // loadingSamples.value = sel.id;\n    // sampleErrors.value[sel.id] = null;\n    \n    const timeRanges = atleast1d(dataset.timeRange.range);\n    \n    try {\n      const service = getTempoDataService(dataset.molecule);\n      const data = await service.fetchTimeseriesData(dataset.region.geometryInfo, timeRanges);\n      dataset.samples = data.values;\n      dataset.errors = data.errors;\n      // loadingSamples.value = \"finished\";\n      console.log(`Fetched data for ${timeRanges.length} time range(s)`);\n    } catch (error) {\n      sampleErrors.value[dataset.id] = error instanceof Error ? error.message : String(error);\n      // loadingSamples.value = \"error\";\n    }\n  \n    dataset.loading = false;\n  \n    markDatasetUpdated(dataset);\n  }\n\n  async function fetchCenterPointDataForDataset(dataset: UserDataset) {\n    sampleErrors.value[dataset.id] = null;\n\n    const service = getTempoDataService(dataset.molecule);\n    const timeRanges = atleast1d(dataset.timeRange.range);\n\n    \n    try {\n      service.setBaseUrl(ESRI_URLS[dataset.molecule].url);\n      const data = await service.fetchCenterPointData(\n        dataset.region.geometryInfo,\n        timeRanges,\n        { sampleCount: maxSampleCount.value },\n      );\n      if (data) {\n        dataset.samples = data.values;\n        dataset.locations = data.locations;\n        console.log(`Fetched center point data for ${timeRanges.length} time range(s)`);\n      }\n    } catch (error) {\n      sampleErrors.value[dataset.id] = error instanceof Error ? error.message : String(error);\n    }\n  }\n\n  function datasetHasSamples(dataset: UserDataset): boolean {\n    return (dataset.samples !== undefined) && Object.keys(dataset.samples).length > 0;\n  }\n\n  function regionHasDatasets(region: UnifiedRegionType): boolean {\n    const sel = datasets.value.find(ds => ds.region.id === region.id);\n    return sel !== undefined;\n  }\n\n  function deleteRegion(region: UnifiedRegionType) {\n    const index = regions.value.findIndex(r => r.id === region.id);\n    if (index < 0) {\n      return;\n    }\n    // if (map.value && region.layer) {\n    //   if (isRectangleSelection(region)) {\n    //     removeRectangleLayer(map.value as Map, region.layer as unknown as StyleLayer);\n    //   } else if (isPointSelection(region)) {\n    //     removePointLayer(map.value as Map, region.layer as unknown as StyleLayer);\n    //   }\n    // }\n  }\n\n  return {\n    accentColor,\n    accentColor2,\n\n    selectedTimezone,\n    dateIsDST,\n    timezoneOptions,\n\n    selectionActive,\n    lastFocusedRegion,\n\n    homeState,\n    initState,\n\n    regions,\n    regionsCreatedCount,\n    timeRanges,\n    backend: backendRef,\n    maxSampleCount,\n    getTempoDataService,\n    tempoDataServices,\n    datasets,\n    timestamps,\n    timestampsLoaded,\n    molecule,\n    displayedDayTimeRange,\n    currentTempoDataService,\n    colorMap,\n\n    addTimeRange,\n    addRegion,\n    addDataset,\n    fetchDataForDataset,\n    fetchCenterPointDataForDataset,\n    markDatasetUpdated,\n    datasetHasSamples,\n    regionHasDatasets,\n    setRegionName,\n\n    deleteTimeRange,\n    deleteRegion,\n    deleteDataset,\n\n    userSelectedLocations,\n    userSelectedTimezones,\n    userSelectedCalendarDates,\n    userSelectedNotableEvents,\n    shareButtonClickedCount,\n    playButtonClickedCount,\n    timeSliderUsedCount,\n    opacitySliderUsedCount,\n\n    timeIndex,\n    timestamp,\n    date,\n    singleDateSelected,\n    maxIndex,\n    minIndex,\n    uniqueDays,\n    uniqueDaysIndex,\n    setNearestDate,\n    moveBackwardOneDay,\n    moveForwardOneDay,\n    nearestDateIndex,\n  };\n});\n\nexport const useTempoStore = createTempoStore(\"maplibre\");\n","<template>\n  <v-app\n    id=\"app\"\n    :style=\"cssVars\"\n  >\n    <header-bar />\n    <div ref=\"root\" class=\"layout-root\"></div>\n\n    <teleport\n      v-if=\"mapTarget\"\n      :to=\"mapTarget\"\n    >\n      <map-with-controls />\n    </teleport>\n\n    <teleport\n      v-if=\"sidePanelTarget\"\n      :to=\"sidePanelTarget\">\n      <dataset-controls />\n    </teleport>\n  </v-app>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref, useTemplateRef, type Ref } from \"vue\";\nimport { storeToRefs } from \"pinia\";\nimport { GoldenLayout, LayoutConfig } from \"golden-layout\";\n\nimport { useTempoStore } from \"@/stores/app\";\n\nconst root = useTemplateRef(\"root\");\nconst mapTarget = ref<HTMLElement | null>(null);\nconst sidePanelTarget = ref<HTMLElement | null>(null);\n\nconst store = useTempoStore();\nconst {\n  accentColor,\n  accentColor2,\n} = storeToRefs(store);\n\nconst infoColor = \"#092088\";\nconst cssVars = computed(() => {\n  return {\n    '--accent-color': accentColor.value,\n    '--accent-color-2': accentColor2.value,\n    '--info-background': infoColor,\n  };\n});\n\nonMounted(() => {\n  const rootEl = root.value as HTMLElement;\n  if (!rootEl) {\n    return;\n  }\n  const layout = new GoldenLayout(rootEl);\n  const components: [string, Ref<HTMLElement | null>][] = [\n    [\"map-panel\", mapTarget],\n    [\"side-panel\", sidePanelTarget]\n  ];\n\n  components.forEach(([tag, elementRef]) => {\n    layout.registerComponentFactoryFunction(tag, container => {\n      container.element.id = tag;\n      elementRef.value = container.element;\n    });\n  });\n\n  const config: LayoutConfig = {\n    settings: {\n      hasHeaders: false,\n      responsiveMode: \"always\",\n    },\n    root: {\n      type: 'row',\n      content: [\n        {\n          type: 'component',\n          componentType: 'map-panel',\n          title: 'Map',\n          draggable: false,\n          width: 70,\n        },\n        {\n          type: 'component',\n          componentType: 'side-panel',\n          title: 'Controls',\n          draggable: false,\n          width: 30,\n        },\n      ],\n    },\n  };\n  layout.resizeWithContainerAutomatically = true;\n  layout.loadLayout(config);\n});\n</script>\n\n<style lang=\"less\">\n// NB: The styles here are NOT scoped - these are intended to apply to the overall application,\n// as this component is really just a layout container.\n// If we do want component-only styles, just add a <style scoped> block below this one\n\n@font-face {\n  font-family: \"Highway Gothic Narrow\";\n  src: url(\"./assets/HighwayGothicNarrow.ttf\");\n}\n\n// JC: This was commented out, but I put it back in because my browser (Chrome on Ubuntu) didn't already have Lexend\n@import url('https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap');\n\nhtml, body .layout-root {\n  width: 100%;\n  height: 100%;\n}\n\nhtml, body {\n  padding: 0;\n  margin: 0;\n}\n\nbody {\n  font-family: Verdana, Arial, Helvetica, sans-serif;\n}\n\n#app {\n  h1, h2, h3, h4, h5, h6, p, div {\n    user-select: none;\n    -webkit-user-select: none;\n  }\n  font-family: \"Lexend\", sans-serif;\n}\n\n#side-panel {\n  overflow-y: scroll;\n}\n\n:root {\n  // font-size: clamp(14px, 1.7vw, 16px);\n  // --default-font-size: 1rem; // we don't use this\n  font-size: 16px; // this is the standard browser default\n  --default-line-height: clamp(1rem, min(2.2vh, 2.2vw), 1.6rem); // we don't use this\n  --smithsonian-blue: #009ade;\n  --smithsonian-yellow: #ffcc33;\n  --info-background: #092088;\n  --map-height: 500px;\n  --tempo-red: #b60e32;\n}\n\n@media (max-width: 750px) {\n  :root {\n    --map-height: 60vh;\n    --map-height: 60dvh;\n    --map-height: 60svh;\n    font-size: 14px;\n  }\n}\n\n// Some Golden Layout adjustments\n.lm_content {\n  background: rgb(var(--v-theme-background));\n}\n\n.lm_splitter {\n  background-color: #333333;\n  opacity: 0.7;\n\n  &.lm_dragging {\n    background-color: var(--smithsonian-blue);\n  }\n}\n\n</style>\n","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, Teleport as _Teleport, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, normalizeStyle as _normalizeStyle, withCtx as _withCtx } from \"vue\"\n\nimport { computed, onMounted, ref, useTemplateRef, type Ref } from \"vue\";\nimport { storeToRefs } from \"pinia\";\nimport { GoldenLayout, LayoutConfig } from \"golden-layout\";\n\nimport { useTempoStore } from \"@/stores/app\";\n\nconst infoColor = \"#092088\";\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TempoLite',\n  setup(__props) {\n\nconst root = useTemplateRef(\"root\");\nconst mapTarget = ref<HTMLElement | null>(null);\nconst sidePanelTarget = ref<HTMLElement | null>(null);\n\nconst store = useTempoStore();\nconst {\n  accentColor,\n  accentColor2,\n} = storeToRefs(store);\n\nconst cssVars = computed(() => {\n  return {\n    '--accent-color': accentColor.value,\n    '--accent-color-2': accentColor2.value,\n    '--info-background': infoColor,\n  };\n});\n\nonMounted(() => {\n  const rootEl = root.value as HTMLElement;\n  if (!rootEl) {\n    return;\n  }\n  const layout = new GoldenLayout(rootEl);\n  const components: [string, Ref<HTMLElement | null>][] = [\n    [\"map-panel\", mapTarget],\n    [\"side-panel\", sidePanelTarget]\n  ];\n\n  components.forEach(([tag, elementRef]) => {\n    layout.registerComponentFactoryFunction(tag, container => {\n      container.element.id = tag;\n      elementRef.value = container.element;\n    });\n  });\n\n  const config: LayoutConfig = {\n    settings: {\n      hasHeaders: false,\n      responsiveMode: \"always\",\n    },\n    root: {\n      type: 'row',\n      content: [\n        {\n          type: 'component',\n          componentType: 'map-panel',\n          title: 'Map',\n          draggable: false,\n          width: 70,\n        },\n        {\n          type: 'component',\n          componentType: 'side-panel',\n          title: 'Controls',\n          draggable: false,\n          width: 30,\n        },\n      ],\n    },\n  };\n  layout.resizeWithContainerAutomatically = true;\n  layout.loadLayout(config);\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_header_bar = _resolveComponent(\"header-bar\")!\n  const _component_map_with_controls = _resolveComponent(\"map-with-controls\")!\n  const _component_dataset_controls = _resolveComponent(\"dataset-controls\")!\n  const _component_v_app = _resolveComponent(\"v-app\")!\n\n  return (_openBlock(), _createBlock(_component_v_app, {\n    id: \"app\",\n    style: _normalizeStyle(cssVars.value)\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_header_bar),\n      _createElementVNode(\"div\", {\n        ref_key: \"root\",\n        ref: root,\n        class: \"layout-root\"\n      }, null, 512),\n      (mapTarget.value)\n        ? (_openBlock(), _createBlock(_Teleport, {\n            key: 0,\n            to: mapTarget.value\n          }, [\n            _createVNode(_component_map_with_controls)\n          ], 8, [\"to\"]))\n        : _createCommentVNode(\"\", true),\n      (sidePanelTarget.value)\n        ? (_openBlock(), _createBlock(_Teleport, {\n            key: 1,\n            to: sidePanelTarget.value\n          }, [\n            _createVNode(_component_dataset_controls)\n          ], 8, [\"to\"]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _: 1\n  }, 8, [\"style\"]))\n}\n}\n\n})","import script from \"./TempoLite.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TempoLite.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TempoLite.vue?vue&type=style&index=0&id=62c7dba1&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, renderSlot as _renderSlot, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"id\"]\nconst _hoisted_2 = { class: \"colorbar-labels\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    id: _ctx.id,\n    class: \"colorbar-container\"\n  }, [\n    _createElementVNode(\"div\", {\n      style: _normalizeStyle({'--background-color': _ctx.backgroundColor}),\n      class: \"colorbar\"\n    }, null, 4),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", null, [\n        _renderSlot(_ctx.$slots, \"start\", {}, () => [\n          _createTextVNode(_toDisplayString(_ctx.startValue), 1)\n        ], true)\n      ]),\n      _createElementVNode(\"div\", null, [\n        _renderSlot(_ctx.$slots, \"label\", {}, () => [\n          _createTextVNode(_toDisplayString(_ctx.label), 1)\n        ], true)\n      ]),\n      _createElementVNode(\"div\", null, [\n        _renderSlot(_ctx.$slots, \"end\", {}, () => [\n          _createTextVNode(_toDisplayString(_ctx.endValue), 1)\n        ], true)\n      ])\n    ])\n  ], 8, _hoisted_1))\n}","\n<template>\n<div :id=\"id\" class=\"colorbar-container\">\n  <div \n    :style=\"{'--background-color': backgroundColor}\"\n    class=\"colorbar\">\n  </div>\n  <div class=\"colorbar-labels\"> \n    <div><slot name=\"start\">{{ startValue }}</slot></div>\n    <div>\n      <slot name=\"label\">{{ label }}</slot>\n    </div>\n    <div><slot name=\"end\">{{ endValue }}</slot></div>\n  </div>\n</div>\n</template>\n\n\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\n\n// type for a function that maps to either a  (color, opacity) pair or just a color\ntype ColorFunction = (x: number) => string;\ntype ExtendType = boolean | 'start' | 'end' | 'both';\n\nexport default defineComponent({\n  name: 'ColorBar',\n  props: {\n    \n    name: {\n      type: String,\n      default: null\n    },\n    \n    cmapName: {\n      type: String,\n      default: 'none'\n    },\n    nsteps: {\n      type: Number,\n      default: 20\n    },\n    label: {\n      type: String,\n      default: 'Colorbar'\n    },\n    \n    cmap: {\n      type: Function as PropType<ColorFunction>,\n      default: (x: number) => `rgb(255,0,${x * 255})`\n    },\n    \n    backgroundColor: {\n      type: String,\n      default: '#5c5229'\n    },\n    \n    startValue: {\n      type: String,\n      default: '0%'\n    },\n    \n    endValue: {\n      type: String,\n      default: '100%'\n    },\n    \n    extend: {\n      type: (Boolean || String) as PropType<ExtendType>,\n      default: () => 'both'\n    }\n    \n  },\n  \n  \n  mounted() {\n    this.colorbarGradient();\n  },\n  \n  computed: {\n    id() {\n      return this.name ? `colorbar-${this.name}` : `colorbar-${Math.random().toString(36).slice(2)}`;\n    },\n    \n    triangles() {\n      return this.extend !== false;\n    },\n    \n    showStartTriangle() {\n      return this.extend === 'both' || this.extend === 'start' || this.extend;\n    },\n    \n    showEndTriangle() {\n      return this.extend === 'both' || this.extend === 'end' || this.extend;\n    }\n  },\n  \n  \n  \n  methods: {\n    \n    cssLinearGradientFromCmap() {\n      const n = this.nsteps;\n      const colors = Array.from({length: n+1}, (_, i) => {\n        const co = this.cmap(i/n);\n        const [color, _opacity] = Array.isArray(co) ? co : [co,1];\n        return `${color} ${i*100/n}%`;\n      });\n      return `linear-gradient(to top, ${colors.join(', ')})`;\n    },\n    \n    colorbarGradient() {\n      const colorbar = document.querySelector('#' + this.id + '> .colorbar');\n      if (!colorbar) {\n        return;\n      }\n      // remove all the children of the colorbar\n      while (colorbar.firstChild) {\n        colorbar.removeChild(colorbar.firstChild);\n      }\n      const div = document.createElement('div');\n      div.className = 'colorbar-chunk';\n      div.style.background = this.cssLinearGradientFromCmap();\n      div.style.height = '100%';\n      \n      \n      // add the start and end triangles\n      if (this.triangles) {\n        const start = document.createElement('div');\n        start.className = 'colorbar-start';\n        const end = document.createElement('div');\n        end.className = 'colorbar-end';\n        colorbar.appendChild(end);\n        colorbar.appendChild(div);\n        colorbar.appendChild(start);\n      \n        if (start && this.showStartTriangle) {\n          start.style.backgroundColor = this.cmap(0);\n          this.styleDownTriangle(start as HTMLDivElement);\n        }\n        if (end && this.showEndTriangle) {\n          end.style.backgroundColor = this.cmap(1);\n          this.styleUpTriangle(end as HTMLDivElement);\n        }\n      } else {\n        colorbar.appendChild(div);\n      }\n    },\n    \n    styleUpTriangle(div: HTMLDivElement) {\n      const width = div.offsetWidth;\n      let height = div.offsetHeight;\n      const color = div.style.backgroundColor;\n      height = Math.min(Math.max(height, 15), 0.86 * width);\n      div.style.backgroundColor = 'transparent';\n      div.style.borderLeft = `${width/2}px solid transparent`;\n      div.style.borderRight = `${width/2}px solid transparent`;\n      div.style.borderBottom = `${height}px solid ${color}`;\n    },\n    \n    styleDownTriangle(div: HTMLDivElement) {\n      const width = div.offsetWidth;\n      let height = div.offsetHeight;\n      const color = div.style.backgroundColor;\n      height = Math.min(Math.max(height, 15), 0.86 * width);\n      div.style.backgroundColor = 'transparent';\n      div.style.borderLeft = `${width/2}px solid transparent`;\n      div.style.borderRight = `${width/2}px solid transparent`;\n      div.style.borderTop = `${height}px solid ${color}`;\n    }\n  },\n  \n  watch: {\n    nsteps() {\n      this.colorbarGradient();\n    },\n    cmap() {\n      this.colorbarGradient();\n    },\n    cmapName() {\n      this.colorbarGradient();\n    },\n  }\n  \n});\n</script>\n\n<style scoped>\n/*\n* Prefixed by https://autoprefixer.github.io\n* PostCSS: v8.4.14,\n* Autoprefixer: v10.4.7\n* Browsers: last 5 version\n*/\n\n.colorbar-container {\n  position: relative;\n  display: inline-block;\n  --width: 1.25em;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  margin-left: 5px;\n  margin-right: 1em;\n  background: var(--background-color);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.colorbar {\n  height: 100%;\n  width: var(--width);\n  margin-left: 5px;\n  margin-right: 1em;\n  background: var(--background-color);\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-filter: drop-shadow(0 0 0.1rem white);\n          filter: drop-shadow(0 0 0.1rem white);\n}\n\n/* make .colorbar-start and .colorbar-end triangles */\n.colorbar-chunk {\n  \n  -ms-flex-negative: 1;\n  \n      flex-shrink: 1;\n  -webkit-box-flex:1;\n      -ms-flex-positive:1;\n          flex-grow:1;\n}\n\n.colorbar-start {\n  -ms-flex-preferred-size: min-content;\n      flex-basis: min-content;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  -webkit-box-flex:1;\n      -ms-flex-positive:1;\n          flex-grow:1;\n}\n\n.colorbar-end {\n  -ms-flex-preferred-size: min-content;\n      flex-basis: min-content;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  -webkit-box-flex: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n}\n\n\n\n.colorbar-labels {\n  position: absolute;\n  width: -webkit-max-content;\n  width: -moz-max-content;\n  width: max-content;\n  height: 100%;\n  top: 50%;\n  line-height: 1.75;\n  /* right: -1.5ch; */\n  -webkit-transform-origin: top center;\n      -ms-transform-origin: top center;\n          transform-origin: top center;\n  -webkit-transform: rotate(180deg) translate(-100%,-50%);\n      -ms-transform: rotate(180deg) translate(-100%,-50%);\n          transform: rotate(180deg) translate(-100%,-50%);\n  -webkit-writing-mode: vertical-rl;\n      -ms-writing-mode: tb-rl;\n          writing-mode: vertical-rl;\n  \n  display: -webkit-box;\n  \n  display: -ms-flexbox;\n  \n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  }\n</style>\n","import { render } from \"./ColorBar.vue?vue&type=template&id=4b188667&scoped=true&ts=true\"\nimport script from \"./ColorBar.vue?vue&type=script&lang=ts\"\nexport * from \"./ColorBar.vue?vue&type=script&lang=ts\"\n\nimport \"./ColorBar.vue?vue&type=style&index=0&id=4b188667&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4b188667\"]])\n\nexport default __exports__","import { renderSlot as _renderSlot, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"id\"]\nconst _hoisted_2 = { class: \"colorbar-labels\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    id: _ctx.id,\n    class: \"colorbar-container-horizontal\"\n  }, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", null, [\n        _renderSlot(_ctx.$slots, \"start\", {}, () => [\n          _createTextVNode(_toDisplayString(_ctx.startValue), 1)\n        ], true)\n      ]),\n      _createElementVNode(\"div\", null, [\n        _renderSlot(_ctx.$slots, \"label\", {}, () => [\n          _createTextVNode(_toDisplayString(_ctx.label), 1)\n        ], true)\n      ]),\n      _createElementVNode(\"div\", null, [\n        _renderSlot(_ctx.$slots, \"end\", {}, () => [\n          _createTextVNode(_toDisplayString(_ctx.endValue), 1)\n        ], true)\n      ])\n    ]),\n    _createElementVNode(\"div\", {\n      style: _normalizeStyle({'--background-color': _ctx.backgroundColor}),\n      class: \"colorbar\"\n    }, null, 4)\n  ], 8, _hoisted_1))\n}","\n<template>\n<div :id=\"id\" class=\"colorbar-container-horizontal\">\n  <div class=\"colorbar-labels\"> \n    <div><slot name=\"start\">{{ startValue }}</slot></div>\n    <div>\n      <slot name=\"label\">{{ label }}</slot>\n    </div>\n    <div><slot name=\"end\">{{ endValue }}</slot></div>\n  </div>\n  <div \n    :style=\"{'--background-color': backgroundColor}\"\n    class=\"colorbar\">\n  </div>\n  \n</div>\n</template>\n\n\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\n\n// type for a function that maps to either a  (color, opacity) pair or just a color\ntype ColorFunction = (x: number) => string;\ntype ExtendType = boolean | 'start' | 'end' | 'both';\n\nexport default defineComponent({\n  name: 'ColorBar',\n  props: {\n    \n    name: {\n      type: String,\n      default: null\n    },\n    \n    cmapName: {\n      type: String,\n      default: 'none'\n    },\n    \n    nsteps: {\n      type: Number,\n      default: 20\n    },\n    label: {\n      type: String,\n      default: 'Colorbar'\n    },\n    \n    cmap: {\n      type: Function as PropType<ColorFunction>,\n      default: (x: number) => `rgb(255,0,${x * 255})`\n    },\n    \n    backgroundColor: {\n      type: String,\n      default: '#5c5229'\n    },\n    \n    startValue: {\n      type: String,\n      default: '0%'\n    },\n    \n    endValue: {\n      type: String,\n      default: '100%'\n    },\n    \n    extend: {\n      type: (Boolean || String) as PropType<ExtendType>,\n      default: () => 'both'\n    }\n    \n  },\n  \n  \n  mounted() {\n    this.colorbarGradient();\n    // console.log(this.$el);\n  },\n  \n  computed: {\n    id() {\n      return this.name ? `colorbar-${this.name}` : `colorbar-${Math.random().toString(36).slice(2)}`;\n    },\n    \n    triangles() {\n      return this.extend !== false;\n    },\n    \n    showStartTriangle() {\n      return this.extend === 'both' || this.extend === 'start' || this.extend;\n    },\n    \n    showEndTriangle() {\n      return this.extend === 'both' || this.extend === 'end' || this.extend;\n    }\n  },\n  \n  \n  \n  methods: {\n    \n    cssLinearGradientFromCmap() {\n      const n = this.nsteps;\n      const colors = Array.from({length: n+1}, (_, i) => {\n        const co = this.cmap(i/n);\n        const [color, _opacity] = Array.isArray(co) ? co : [co,1];\n        return `${color} ${i*100/n}%`;\n      });\n      return `linear-gradient(to right, ${colors.join(', ')})`;\n    },\n    \n    colorbarGradient() {\n      const colorbar = document.querySelector('#' + this.id + '> .colorbar');\n      if (!colorbar) {\n        return;\n      }\n      // remove all the children of the colorbar\n      while (colorbar.firstChild) {\n        colorbar.removeChild(colorbar.firstChild);\n      }\n      const div = document.createElement('div');\n      // const div = this.$el.querySelector('.colorbar-chunk');\n      div.className = 'colorbar-chunk';\n      div.style.background = this.cssLinearGradientFromCmap();\n      div.style.height = 'var(--height)';\n      div.style.width = '100%';\n      \n      \n      // add the start and end triangles\n      if (this.triangles) {\n        const start = document.createElement('div');\n        start.className = 'colorbar-start';\n        const end = document.createElement('div');\n        end.className = 'colorbar-end';\n        colorbar.appendChild(start);\n        colorbar.appendChild(div);\n        colorbar.appendChild(end);\n        end && this.showEndTriangle;\n        if (start && this.showStartTriangle) {\n          start.style.backgroundColor = this.cmap(0);\n          this.styleLeftTriangle(start as HTMLDivElement);\n        }\n        if (end && this.showEndTriangle) {\n          end.style.backgroundColor = this.cmap(1);\n          this.styleRightTriangle(end as HTMLDivElement);\n        }\n      } else {\n        colorbar.appendChild(div);\n      }\n    },\n    \n    styleColorbarChunk(div: HTMLDivElement) {\n      div.style.background = this.cssLinearGradientFromCmap();\n      div.style.height = 'var(--height)';\n      div.style.flexGrow = '1';\n      div.style.flexShrink = '1';\n      \n    },\n    \n    styleUpTriangle(div: HTMLDivElement) {\n      const width = div.offsetWidth;\n      let height = div.offsetHeight;\n      const color = div.style.backgroundColor;\n      height = Math.min(Math.max(height, 15), 0.86 * width);\n      div.style.backgroundColor = 'transparent';\n      div.style.borderLeft = `${width/2}px solid transparent`;\n      div.style.borderRight = `${width/2}px solid transparent`;\n      div.style.borderBottom = `${height}px solid ${color}`;\n    },\n    \n    styleDownTriangle(div: HTMLDivElement) {\n      const width = div.offsetWidth;\n      let height = div.offsetHeight;\n      const color = div.style.backgroundColor;\n      height = Math.min(Math.max(height, 15), 0.86 * width);\n      div.style.backgroundColor = 'transparent';\n      div.style.borderLeft = `${width/2}px solid transparent`;\n      div.style.borderRight = `${width/2}px solid transparent`;\n      div.style.borderTop = `${height}px solid ${color}`;\n      div.style.flexShrink = '0';\n      div.style.flexGrow = '1';\n    },\n    \n    styleLeftTriangle(div: HTMLDivElement) {\n      div.style.width=\"var(--height)\";\n      div.style.height=\"var(--height)\";\n      const height = div.offsetHeight;\n      const color = div.style.backgroundColor;\n      div.style.backgroundColor = 'transparent';\n      \n      div.style.borderTop = `${height/2}px solid transparent`;\n      div.style.borderBottom = `${height/2}px solid transparent`;\n      div.style.borderRight = `${height}px solid ${color}`;\n    },\n    \n    styleRightTriangle(div: HTMLDivElement) {\n      div.style.width=\"var(--height)\";\n      div.style.height=\"var(--height)\";\n      const height = div.offsetHeight;\n      const color = div.style.backgroundColor;\n      div.style.backgroundColor = 'transparent';\n      \n      div.style.borderTop = `${height/2}px solid transparent`;\n      div.style.borderBottom = `${height/2}px solid transparent`;\n      div.style.borderLeft = `${height}px solid ${color}`;\n    }\n  },\n  \n  watch: {\n    nsteps() {\n      this.colorbarGradient();\n    },\n    cmap() {\n      this.colorbarGradient();\n    },\n    cmapName() {\n      this.colorbarGradient();\n    }\n  }\n  \n});\n</script>\n\n<style scoped>\n/*\n* Prefixed by https://autoprefixer.github.io\n* PostCSS: v8.4.14,\n* Autoprefixer: v10.4.7\n* Browsers: last 5 version\n*/\n\n.colorbar-container-horizontal {\n  position: relative;\n  display: block;\n  --height: 1.25em;\n  width: 100%;\n}\n.colorbar {\n  width: 100%;\n  height: var(--height);\n  background: var(--background-color);\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-filter: drop-shadow(0 0 0.1rem white);\n          filter: drop-shadow(0 0 0.1rem white);\n}\n\n\n.colorbar-labels {\n  \n  width: calc(100% - 2*var(--height));\n  height: -webkit-max-content;\n  height: -moz-max-content;\n  height: max-content;\n  /* left: 50%; */\n  -webkit-transform-origin: top center;\n      -ms-transform-origin: top center;\n          transform-origin: top center;\n  -webkit-transform: translate(var(--height), 0);\n      -ms-transform: translate(var(--height), 0);\n          transform: translate(var(--height), 0);\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n</style>\n","import { render } from \"./ColorBarHorizontal.vue?vue&type=template&id=7e971f46&scoped=true&ts=true\"\nimport script from \"./ColorBarHorizontal.vue?vue&type=script&lang=ts\"\nexport * from \"./ColorBarHorizontal.vue?vue&type=script&lang=ts\"\n\nimport \"./ColorBarHorizontal.vue?vue&type=style&index=0&id=7e971f46&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7e971f46\"]])\n\nexport default __exports__","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, mergeProps as _mergeProps, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, renderSlot as _renderSlot, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"info-button-close-icon\" }\nconst _hoisted_2 = { class: \"v-card-info-text ma-3\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_tooltip = _resolveComponent(\"v-tooltip\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_v_dialog, {\n    modelValue: _ctx.dialogVisible,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.dialogVisible) = $event)),\n    \"max-width\": \"500\"\n  }, {\n    activator: _withCtx(({ props: activatorProps }) => [\n      _createVNode(_component_v_tooltip, {\n        text: _ctx.tooltipTextValue,\n        disabled: !_ctx.showTooltip\n      }, {\n        activator: _withCtx(( { props} ) => [\n          _createVNode(_component_v_icon, _mergeProps({...activatorProps, ...props}, {\n            style: {\"margin-left\":\"1em\",\"font-size\":\"1.3em\",\"color\":\"var(--accent-color)\"},\n            elevation: \"1\",\n            onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.dialogVisible = true)),\n            onKeydown: _ctx.handleKeydown\n          }), {\n            default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n              _createTextVNode(\" mdi-information-variant-circle-outline \", -1)\n            ]))]),\n            _: 1\n          }, 16, [\"onKeydown\"])\n        ]),\n        _: 2\n      }, 1032, [\"text\", \"disabled\"])\n    ]),\n    default: _withCtx(() => [\n      _createVNode(_component_v_card, { class: \"gradient-background\" }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_1, [\n            _createVNode(_component_v_icon, {\n              class: \"info-button-close-icon__icon\",\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.dialogVisible = false)),\n              onKeydown: _ctx.handleKeydown\n            }, {\n              default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n                _createTextVNode(\" mdi-close \", -1)\n              ]))]),\n              _: 1\n            }, 8, [\"onKeydown\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_2, [\n            _renderSlot(_ctx.$slots, \"default\", {}, () => [\n              _createTextVNode(_toDisplayString(_ctx.helpText), 1)\n            ])\n          ])\n        ]),\n        _: 3\n      })\n    ]),\n    _: 3\n  }, 8, [\"modelValue\"]))\n}","<template>\n  <v-dialog v-model=\"dialogVisible\" max-width=\"500\">\n    <template v-slot:activator=\"{ props: activatorProps }\">\n      <v-tooltip :text=\"tooltipTextValue\" :disabled=\"!showTooltip\">\n        <template v-slot:activator=\" { props} \">\n        <v-icon \n          v-bind=\"{...activatorProps, ...props}\" \n          style=\"margin-left: 1em;font-size: 1.3em; color: var(--accent-color);\" elevation=\"1\"\n          @click=\"dialogVisible = true\"\n          @keydown=\"handleKeydown\"\n          >\n          mdi-information-variant-circle-outline\n        </v-icon>\n        </template>\n      </v-tooltip>\n    </template>\n    <v-card class=\"gradient-background\">\n      <div class=\"info-button-close-icon\">\n        <v-icon \n          class=\"info-button-close-icon__icon\"\n          @click=\"dialogVisible = false\"\n          @keydown=\"handleKeydown\"\n        >\n          mdi-close\n        </v-icon>\n      </div>\n      <div class=\"v-card-info-text ma-3\">\n        <slot>{{ helpText }}</slot>\n      </div>\n    </v-card>\n  </v-dialog>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  name: 'InfoButton',\n  props: {\n    helpText: {\n      type: String,\n      required: false\n    },\n    showTooltip: {\n      type: Boolean,\n      required: false,\n      default: true\n    },\n    tooltipText: {\n      type: String,\n      required: false,\n      default: undefined\n    }\n  },\n  \n\n  \n  data() {\n    return {\n      dialogVisible: false,\n      tooltipTextValue: this.tooltipText ?? (this.showTooltip ? 'Learn More' : undefined),\n    };\n  },\n\n  methods: {\n    handleKeydown(event: KeyboardEvent) {\n      if (event.key === 'Enter') {\n        this.dialogVisible = !this.dialogVisible;\n      }\n    },\n  },\n});\n</script>\n\n<style>\n.v-card-info-text {\n  font-size: 1em;\n  line-height: 1.5em;\n  padding-block: 1em;\n  padding-inline: 1.5em;\n  \n  p {\n    margin-block: 0.5em;\n  }\n\n}\n\n.v-card-info-text > p {\n  margin-bottom: 1em;\n}\n\n.info-button-close-icon {\n  position: relative;\n  height: 1em;\n}\n\n.info-button-close-icon__icon {\n  /* position:absolute !important;\n  right:0 !important; */\n  float:right;\n  right: 1em;\n  top: 1em;\n\n  cursor:pointer;\n  \n  padding:1em !important;\n  margin:-1em !important;\n}\n\n.info-button-close-icon__icon:hover {\n  background-color: #f0f0f0;\n  color: black;\n  border-radius: 50%;\n  padding: 0.5em;\n  margin: -0.5em;\n  transition: background-color 0.3s;\n}\n\n</style>","import { render } from \"./InfoButton.vue?vue&type=template&id=5c8d795f&ts=true\"\nimport script from \"./InfoButton.vue?vue&type=script&lang=ts\"\nexport * from \"./InfoButton.vue?vue&type=script&lang=ts\"\n\nimport \"./InfoButton.vue?vue&type=style&index=0&id=5c8d795f&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { aliases, mdi } from 'vuetify/iconsets/mdi';\nimport { createVuetify } from 'vuetify';\n\n// For test use. Do not include createVuetify()\n// see https://next.vuetifyjs.com/en/features/treeshaking/\n//import * as components from 'vuetify/components';\n//import * as directives from 'vuetify/directives';\n\n// Translations provided by Vuetify\nimport { en } from 'vuetify/locale';\n\n// Styles\nimport 'vuetify/styles';\nimport '@mdi/font/css/materialdesignicons.css';\n\nexport default createVuetify({\n  // Icon Fonts\n  icons: {\n    defaultSet: 'mdi',\n    aliases,\n    sets: {\n      mdi,\n    },\n  },\n  locale: {\n    locale: 'en',\n    fallback: 'en',\n    messages: { en },\n  },\n  theme: {\n    defaultTheme: 'dark',\n  },\n});\n\n// Export for test.\n//export { components, directives };\n","import { renderSlot as _renderSlot, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createCommentVNode as _createCommentVNode, withKeys as _withKeys, createElementVNode as _createElementVNode, mergeProps as _mergeProps, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"cds-snackbar-alert ma-2\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_snackbar = _resolveComponent(\"v-snackbar\")!\n\n  return (!_ctx.hide)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        (!_ctx.hideButton)\n          ? _renderSlot(_ctx.$slots, \"activator\", {\n              key: 0,\n              onClick: _ctx.openDialog,\n              id: \"snackbar-activator-slot\"\n            }, () => [\n              _createVNode(_component_v_btn, {\n                onClick: _ctx.openDialog,\n                color: \"#333\",\n                id: \"snackbar-activator\",\n                size: \"small\"\n              }, {\n                prepend: _withCtx(() => [\n                  _createVNode(_component_v_icon, {\n                    color: \"red\",\n                    icon: \"mdi-alert-octagram\"\n                  })\n                ]),\n                default: _withCtx(() => [\n                  _createTextVNode(\" \" + _toDisplayString(_ctx.label), 1)\n                ]),\n                _: 1\n              }, 8, [\"onClick\"])\n            ])\n          : _createCommentVNode(\"\", true),\n        _createVNode(_component_v_snackbar, _mergeProps({\n          modelValue: _ctx.snackbar,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.snackbar) = $event)),\n          location: \"top center\"\n        }, _ctx.$attrs, {\n          \"close-on-back\": \"\",\n          role: \"alert\",\n          \"aria-live\": \"assertive\",\n          timeout: \"-1\"\n        }), {\n          actions: _withCtx(() => [\n            _createVNode(_component_v_btn, {\n              tabindex: \"0\",\n              color: \"red\",\n              variant: \"text\",\n              onClick: _ctx.closeDialog\n            }, {\n              default: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n                _createTextVNode(\" Close \", -1)\n              ]))]),\n              _: 1\n            }, 8, [\"onClick\"])\n          ]),\n          default: _withCtx(() => [\n            _createElementVNode(\"span\", {\n              ref: \"snackbarMessage\",\n              tabindex: \"0\",\n              onKeydown: _cache[0] || (_cache[0] = _withKeys(\n//@ts-ignore\n(...args) => (_ctx.closeDialog && _ctx.closeDialog(...args)), [\"esc\"]))\n            }, [\n              _renderSlot(_ctx.$slots, \"default\", {}, () => [\n                _createTextVNode(_toDisplayString(_ctx.msg), 1)\n              ])\n            ], 544)\n          ]),\n          _: 3\n        }, 16, [\"modelValue\"])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","<script lang=\"ts\">\n/**\n * v-snackbar wrapper component. The message can be passed\n * as a prop or as as the default slot. Props are passed\n * through to v-snackbar.\n * \n * Example Usage\n * \n * <SnackbarAlert msg=\"Hello there\" />\n * \n * <SnackbarAlert msg=\"Hello there\">\n *  <template v-slot:activator=\"{ onClick, id }\">\n *   <v-btn :id=\"id\" @click=\"onClick\" color=\"primary\">\n *    Custom Activator\n *   </v-btn>\n *  </template>\n * </SnackbarAlert>\n * \n */\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  name: \"SnackbarAlert\",\n  \n  emits: ['update:modelValue'],\n\n  props: {\n    msg: {\n      type: String || undefined || null,\n      required: false,\n      default: undefined,\n    },\n    hide: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    label: {\n      type: String,\n      required: false,\n      default: \"Recent changes\"\n    },\n    modelValue: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    hideButton: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      snackbar: false,\n    };\n  },\n  \n  methods: {\n    openDialog() {\n      if (this.snackbar) return;\n      \n      this.snackbar = true;\n      this.$emit('update:modelValue', true);\n      this.$nextTick(() => {\n        (this.$refs.snackbarMessage as HTMLElement).focus();\n      });\n    },\n    closeDialog() {\n      this.snackbar = false;\n      this.$emit('update:modelValue', false);\n      // make sure the focus goes back to the right place\n      this.$nextTick(() => {\n        this.$el.querySelector('#snackbar-activator')?.focus();\n        this.$el.querySelector('#snackbar-activator-slot')?.focus();\n      });\n    },\n  },\n  \n  watch: {\n    modelValue(val: boolean) {\n      if (val) {\n        this.openDialog();\n      } else {\n        this.closeDialog();\n      }\n    }\n  }\n\n\n});\n</script>\n\n<template>\n  <div class=\"cds-snackbar-alert ma-2\" v-if=\"!hide\">\n    \n    <slot v-if=\"!hideButton\" name=\"activator\" :onClick=\"openDialog\" id=\"snackbar-activator-slot\">\n      <v-btn @click=\"openDialog\" color=\"#333\" id=\"snackbar-activator\" size=\"small\">\n        <template v-slot:prepend>\n          <v-icon color=\"red\" icon=\"mdi-alert-octagram\"></v-icon>\n        </template>\n        {{ label }}\n      </v-btn>\n    </slot>\n    \n    <v-snackbar \n      v-model=\"snackbar\" \n      location=\"top center\" \n      v-bind=\"$attrs\"\n      close-on-back\n      role=\"alert\"\n      aria-live=\"assertive\"\n      timeout=\"-1\"\n      >\n      <span ref=\"snackbarMessage\" tabindex=\"0\" @keydown.esc=\"closeDialog\">\n      <slot> {{ msg }} </slot>\n      </span>\n\n\n      <template v-slot:actions>\n        <v-btn tabindex=\"0\" color=\"red\" variant=\"text\" @click=\"closeDialog\">\n          Close\n        </v-btn>\n      </template>\n    </v-snackbar>\n  </div>\n</template>\n","import { render } from \"./SnackbarAlert.vue?vue&type=template&id=034a6a3c&ts=true\"\nimport script from \"./SnackbarAlert.vue?vue&type=script&lang=ts\"\nexport * from \"./SnackbarAlert.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, withKeys as _withKeys, mergeProps as _mergeProps } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_v_snackbar = _resolveComponent(\"v-snackbar\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_tooltip = _resolveComponent(\"v-tooltip\")!\n  const _component_use_clipboard = _resolveComponent(\"use-clipboard\")!\n\n  return (_openBlock(), _createBlock(_component_use_clipboard, { source: _ctx.source }, {\n    default: _withCtx(({ copy }) => [\n      (_ctx.tooltipDisabled || _ctx.alert)\n        ? (_openBlock(), _createBlock(_component_v_snackbar, {\n            key: 0,\n            class: \"share-button-snackbar\",\n            timeout: \"3500\",\n            location: \"top\",\n            activator: \"#share-button\",\n            text: \"Share link copied to clipboard. Paste to share this view!\",\n            color: \"success\",\n            variant: \"flat\",\n            \"min-height\": \"0px\",\n            \"min-width\": \"0px\",\n            transition: \"slide-y-transition\",\n            \"close-on-content-click\": \"\"\n          }))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_v_tooltip, {\n        disabled: _ctx.tooltipDisabled,\n        text: \"Share selected view\"\n      }, {\n        activator: _withCtx(({ props }) => [\n          _createVNode(_component_v_btn, _mergeProps({\n            id: \"share-button\",\n            \"aria-label\": \"Get link to share selected view\",\n            class: \"share-button\",\n            icon: \"\",\n            onClick: () => {\n            copy(_ctx.source);\n            _ctx.$emit('share');\n          }\n          ,\n            onKeyup: _withKeys(() => {\n            copy(_ctx.source);\n            _ctx.$emit('share');\n          }, [\"enter\"])\n          }, props, {\n            color: _ctx.buttonColor,\n            elevation: _ctx.elevation,\n            size: _ctx.size,\n            rounded: _ctx.rounded\n          }), {\n            default: _withCtx(() => [\n              _createVNode(_component_v_icon, { color: _ctx.iconColor }, {\n                default: _withCtx(() => [...(_cache[0] || (_cache[0] = [\n                  _createTextVNode(\"mdi-share-variant\", -1)\n                ]))]),\n                _: 1\n              }, 8, [\"color\"])\n            ]),\n            _: 1\n          }, 16, [\"onClick\", \"onKeyup\", \"color\", \"elevation\", \"size\", \"rounded\"])\n        ]),\n        _: 2\n      }, 1032, [\"disabled\"])\n    ]),\n    _: 1\n  }, 8, [\"source\"]))\n}","\n<template>\n  <use-clipboard v-slot=\"{ copy }\" :source=\"source\">\n    <v-snackbar \n      v-if=\"tooltipDisabled || alert\"\n      class=\"share-button-snackbar\"   \n      timeout=\"3500\" \n      location=\"top\" \n      activator=\"#share-button\"\n      text=\"Share link copied to clipboard. Paste to share this view!\"\n      color=\"success\"\n      variant=\"flat\"\n      min-height=\"0px\"\n      min-width=\"0px\"\n      transition=\"slide-y-transition\"\n      close-on-content-click\n      >\n    </v-snackbar>\n    <v-tooltip :disabled=\"tooltipDisabled\" text=\"Share selected view\">\n      <template v-slot:activator=\"{ props }\">\n        <v-btn\n          id=\"share-button\"\n          aria-label=\"Get link to share selected view\"\n          class=\"share-button\"\n          icon\n          @click=\"() => {\n            copy(source);\n            $emit('share');\n          }\n          \"\n          @keyup.enter=\"() => {\n            copy(source);\n            $emit('share');\n          }\"\n          v-bind=\"props\"\n          :color=\"buttonColor\"\n          :elevation=\"elevation\"\n          :size=\"size\"\n          :rounded=\"rounded\"\n        > \n          <v-icon :color=\"iconColor\">mdi-share-variant</v-icon>\n        </v-btn>\n      </template>\n    </v-tooltip>\n  </use-clipboard>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  props: {\n    source: {\n      type: String,\n      required: true,\n    },\n    buttonColor: {\n      type: String,\n      default: \"#ffffff66\",\n    },\n    iconColor: {\n      type: String,\n      default: \"#333\",\n    },\n    elevation: {\n      type: [String, Number],\n      default: \"0\",\n    },\n    size: {\n      type: String,\n      default: \"small\",\n    },\n    rounded: {\n      type: [String, Number],\n      default: \"1\",\n    },\n    tooltipDisabled: {\n      type: Boolean,\n      default: false,\n    },\n    alert: {\n      type: Boolean,\n      default: false,\n    },\n    \n  },\n  \n  data() {\n    return {\n      snackbar: false,\n    };\n  },\n\n  emits: [\"share\"],\n});\n</script>\n\n<style>\n.share-button {\n  z-index: 1000;\n  padding-inline: 5px;\n  border-radius: 8px !important;\n  border: thin solid var(--accent-color-2) !important;\n}\n\n.share-button-snackbar .v-snackbar__wrapper > .v-snackbar__content {\n  padding: 0.75em 1em;\n}\n\n</style>\n","import { render } from \"./ShareButton.vue?vue&type=template&id=1a0de751&ts=true\"\nimport script from \"./ShareButton.vue?vue&type=script&lang=ts\"\nexport * from \"./ShareButton.vue?vue&type=script&lang=ts\"\n\nimport \"./ShareButton.vue?vue&type=style&index=0&id=1a0de751&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export async function getElementRect(element: Element): Promise<DOMRectReadOnly> {\n  let rect: DOMRectReadOnly | null = null;\n  let resolveRectPromise: (value: DOMRectReadOnly | PromiseLike<DOMRectReadOnly>) => void;\n  const rectPromise = new Promise<DOMRectReadOnly>((resolve, _reject) => {\n    resolveRectPromise = resolve;\n  });\n  const observer = new IntersectionObserver(entries => {\n    rect = entries[0].boundingClientRect;\n    resolveRectPromise(rect);\n\n    observer.disconnect();\n  });\n  observer.observe(element);\n\n  return rectPromise;\n}\n","import { onBeforeUnmount, Ref, watch } from \"vue\";\nimport { getElementRect } from \"../utils/dom\";\n\nimport { DragInfo } from \"../types\";\n\nexport interface UseDraggableDialogOptions {\n  root: Ref<HTMLElement | null>;\n  dragPredicate?: (element: HTMLElement) => boolean;\n  dialogSelector?: string;\n  scrimSelector?: string;\n}\n\nexport function useDraggableDialog(options: UseDraggableDialogOptions) {\n\n  const root = options.root;\n  const dialogSelector = options.dialogSelector ?? \".v-dialog.v-overlay--active\";\n  const scrimSelector = options.scrimSelector ?? \".v-overlay__scrim\";\n\n  let dragInfo: DragInfo | null = null;\n  type MouseEventHandler = (event: MouseEvent) => void;\n  let mousedown: MouseEventHandler | null = null;\n  let mouseup: MouseEventHandler | null = null;\n  let mousemove: MouseEventHandler | null = null;\n\n  function removeListeners(element: HTMLElement) {\n    if (mousedown) {\n      element.removeEventListener(\"mousedown\", mousedown);\n    }\n    if (mouseup) {\n      element.removeEventListener(\"mouseup\", mouseup);\n    }\n    if (mousemove) {\n      element.removeEventListener(\"mousemove\", mousemove);\n    }\n  }\n\n  function setupDraggable(element: HTMLElement) {\n    removeListeners(element);\n\n    let dragging = false;\n\n    mousedown = async (event: MouseEvent) => {\n      if (options.dragPredicate && !options.dragPredicate(event.target as HTMLElement)) {\n        element.style.cursor = \"\";\n        return;\n      }\n      dragging = true;\n\n      element.style.cursor = \"grabbing\";\n      const closestDialog = element.closest(dialogSelector);\n      if (event.button === 0 && closestDialog != null) {\n        const boundingRect = await getElementRect(closestDialog);\n        const d: DragInfo = {\n          el: closestDialog as HTMLElement,\n          title: element,\n          mouseStartX: event.clientX,\n          mouseStartY: event.clientY,\n          elStartX: boundingRect.left,\n          elStartY: boundingRect.top,\n          overlays: document.querySelectorAll(scrimSelector),\n        };\n        if (dragInfo && dragInfo.el) {\n          d.oldTransition = dragInfo.el.style.transition;\n        }\n        if (d.el) {\n          d.el.style.margin = \"0\";\n          d.el.style.transition = \"none\";\n          if (d.el.style.position !== \"fixed\") {\n            d.el.style.position = \"fixed\";\n            d.el.style.left = Math.min(\n              Math.max(d.elStartX + event.clientX - d.mouseStartX, 0),\n              window.innerWidth - boundingRect.width\n            ) + \"px\";\n            d.el.style.top = Math.min(\n              Math.max(d.elStartY + event.clientY - d.mouseStartY , 0),\n              window.innerHeight - boundingRect.height\n            ) - 0.5 * window.innerHeight + \"px\";\n          }\n        }\n        d.title.classList.add(\"dragging\");\n        d.overlays.forEach(overlay => (overlay as HTMLElement).style.display = \"none\");\n\n        dragInfo = d;\n      }\n    };\n    element.addEventListener(\"mousedown\", mousedown);\n\n    mousemove = async (event: MouseEvent) => {\n      if (options.dragPredicate && !options.dragPredicate(event.target as HTMLElement)) {\n        element.style.cursor = \"\";\n        return;\n      }\n      element.style.cursor = dragging ? \"grabbing\" : \"grab\";\n      if (dragInfo === null || dragInfo.el == null) {\n        return;\n      }\n      const boundingRect = await getElementRect(dragInfo.el);\n      dragInfo.el.style.left = Math.min(\n        Math.max(dragInfo.elStartX + event.clientX - dragInfo.mouseStartX, 0),\n        window.innerWidth - boundingRect.width\n      ) + \"px\";\n      dragInfo.el.style.top = Math.min(\n        Math.max(dragInfo.elStartY + event.clientY - dragInfo.mouseStartY , 0),\n        window.innerHeight - boundingRect.height\n      ) - 0.5 * window.innerHeight + \"px\";\n    };\n    document.addEventListener(\"mousemove\", mousemove);\n\n    mouseup = (event: MouseEvent) => {\n      if (options.dragPredicate && !options.dragPredicate(event.target as HTMLElement)) {\n        element.style.cursor = \"\";\n        return;\n      }\n\n      dragging = false;\n\n      element.style.cursor = \"grab\";\n      if (dragInfo === null) {\n        return;\n      }\n      if (dragInfo.oldTransition && dragInfo.el) {\n        dragInfo.el.style.transition = dragInfo.oldTransition;\n      }\n      dragInfo.el = undefined;\n      dragInfo.title.classList.remove(\"dragging\");\n      dragInfo.overlays.forEach(overlay => (overlay as HTMLElement).style.display = '');\n    };\n    document.addEventListener(\"mouseup\", mouseup);\n    \n    // If the window changes size, the dialog may be partially/completely out of bounds\n    // We fix that here\n    const resizeObserver = new ResizeObserver(async (entries) => {\n      for (const entry of entries) {\n        const dialogs = entry.target.querySelectorAll(dialogSelector);\n        for (const d of dialogs) {\n          const dialog = d as HTMLElement;\n          const boundingRect = await getElementRect(dialog);\n          dialog.style.left = Math.min(parseInt(dialog.style.left), window.innerWidth - boundingRect.width) + \"px\";\n          dialog.style.top = Math.min(parseInt(dialog.style.top), window.innerHeight - boundingRect.height) + \"px\";\n        }\n      }\n    });\n    resizeObserver.observe(document.body);\n  }\n\n  if (root.value) {\n    setupDraggable(root.value);\n  }\n\n  watch(root, newRoot => {\n    if (newRoot !== null) {\n      setupDraggable(newRoot);\n    }\n  });\n\n  onBeforeUnmount(() => {\n    const element = root.value;\n    if (element) {\n      removeListeners(element);\n      element.style.cursor = \"\";\n    }\n  });\n\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { normalizeProps as _normalizeProps, guardReactiveProps as _guardReactiveProps, renderSlot as _renderSlot, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withKeys as _withKeys, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, unref as _unref, normalizeClass as _normalizeClass } from \"vue\"\n\nimport { computed, ref, onMounted, nextTick, watch, useAttrs, useTemplateRef } from \"vue\";\nimport { VCard } from \"vuetify/components\";\nimport { UseDraggableDialogOptions, useDraggableDialog } from \"../composables/useDraggableDialog\";\n\ninterface CDSDialogProps {\n  title: string;\n  modelValue?: boolean;\n  color?: string;\n  titleColor?: string;\n  shortTitle?: string;\n  draggable?: boolean;\n  button?: boolean;\n  scrim?: boolean;\n  persistent?: boolean;\n  modal?: boolean;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CDSDialog',\n  props: {\n    title: {},\n    modelValue: { type: Boolean, default: false },\n    color: { default: \"red\" },\n    titleColor: { default: \"primary\" },\n    shortTitle: { default: \"\" },\n    draggable: { type: Boolean, default: false },\n    button: { type: Boolean, default: false },\n    scrim: { type: Boolean, default: true },\n    persistent: { type: Boolean, default: false },\n    modal: { type: Boolean, default: true }\n  },\n  emits: [\"update:modelValue\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\nconst card = useTemplateRef<InstanceType<typeof VCard>>(\"card\");\nconst showDialog = ref(props.modelValue);\nconst displayedShortTitle = computed(() => props.shortTitle || props.title);\nconst cardRoot = ref<HTMLElement | null>(null);\n\nconst attrs = useAttrs();\n\nif (props.draggable) {\n  const options: UseDraggableDialogOptions = {\n    root: cardRoot,\n    dialogSelector: \".cds-dialog-card\",\n  };\n  if (attrs[\"drag-predicate\"]) {\n    options.dragPredicate = attrs[\"drag-predicate\"] as (element: HTMLElement) => boolean;\n  }\n  useDraggableDialog(options);\n}\n\nfunction updateRoot() {\n  nextTick(() => {\n    if (card.value) {\n      cardRoot.value = card.value.$el;\n    }\n  });\n}\n\nfunction close(event: PointerEvent) {\n  showDialog.value = false;\n  event.stopPropagation();\n}\n\nonMounted(() => {\n  if (props.draggable && props.modelValue) {\n    updateRoot();\n  }\n});\n\nwatch(showDialog, value => {\n  emit(\"update:modelValue\", value);\n});\n\nwatch(() => props.modelValue, value => {\n  showDialog.value = value;\n  if (value && props.draggable) {\n    updateRoot();\n  }\n});\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_toolbar_title = _resolveComponent(\"v-toolbar-title\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_toolbar = _resolveComponent(\"v-toolbar\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_v_dialog, {\n    class: _normalizeClass(['cds-dialog', `${displayedShortTitle.value.toLowerCase().replace(/ /g, '-')}-cds-dialog`, !_ctx.modal ? 'nonmodal' : '']),\n    modelValue: showDialog.value,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((showDialog).value = $event)),\n    scrim: _ctx.scrim,\n    persistent: _ctx.persistent,\n    \"no-click-animation\": !_ctx.modal\n  }, {\n    activator: _withCtx(($attrs) => [\n      _renderSlot(_ctx.$slots, \"activator\", _normalizeProps(_guardReactiveProps($attrs)), () => [\n        (_ctx.button)\n          ? (_openBlock(), _createBlock(_component_v_btn, {\n              key: 0,\n              color: _ctx.color,\n              title: displayedShortTitle.value,\n              class: \"cds-dialog-button\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (showDialog.value = true)),\n              onKeyup: _cache[1] || (_cache[1] = _withKeys(($event: any) => (showDialog.value = true), [\"enter\"])),\n              tabindex: \"0\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" Open \" + _toDisplayString(displayedShortTitle.value), 1)\n              ]),\n              _: 1\n            }, 8, [\"color\", \"title\"]))\n          : _createCommentVNode(\"\", true)\n      ])\n    ]),\n    default: _withCtx(() => [\n      _createVNode(_unref(VCard), {\n        ref_key: \"card\",\n        ref: card,\n        class: \"cds-dialog-card\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_toolbar, {\n            density: \"compact\",\n            color: _ctx.titleColor\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_toolbar_title, { text: _ctx.title }, null, 8, [\"text\"]),\n              _createVNode(_component_v_spacer),\n              _createVNode(_component_v_btn, {\n                class: \"cds-dialog-close-icon\",\n                icon: \"mdi-close\",\n                onClick: close,\n                \"onKeyup:enter\": close\n              })\n            ]),\n            _: 1\n          }, 8, [\"color\"]),\n          _createVNode(_component_v_card_text, null, {\n            default: _withCtx(() => [\n              _renderSlot(_ctx.$slots, \"default\", {}, () => [\n                _cache[3] || (_cache[3] = _createTextVNode(\" Add content to the default slot \", -1))\n              ])\n            ]),\n            _: 3\n          })\n        ]),\n        _: 3\n      }, 512)\n    ]),\n    _: 3\n  }, 8, [\"class\", \"modelValue\", \"scrim\", \"persistent\", \"no-click-animation\"]))\n}\n}\n\n})","<template>\n  <v-dialog \n    :class=\"['cds-dialog', `${displayedShortTitle.toLowerCase().replace(/ /g, '-')}-cds-dialog`, !modal ? 'nonmodal' : '']\" \n    v-model=\"showDialog\" \n    :scrim=\"scrim\"\n    :persistent=\"persistent\"\n    :no-click-animation=\"!modal\"\n    >\n    <!-- add the activator slot, but only use it if the appropriate value is given for activator -->\n     <template v-slot:activator=\"$attrs\">\n      <slot name=\"activator\" v-bind=\"$attrs\">\n        <v-btn\n          v-if=\"button\"\n          :color=\"color\"\n          :title=\"displayedShortTitle\"\n          class=\"cds-dialog-button\"\n          @click=\"showDialog = true\"\n          @keyup.enter=\"showDialog = true\"\n          tabindex=\"0\"\n          >\n          Open {{ displayedShortTitle }}\n        </v-btn>\n      </slot>\n    </template>\n     \n    <v-card\n      ref=\"card\"\n      class=\"cds-dialog-card\"\n    >\n        <v-toolbar\n          density=\"compact\"\n          :color=\"titleColor\"\n        >\n          <v-toolbar-title :text=\"title\"></v-toolbar-title>\n          <v-spacer></v-spacer>\n          <v-btn\n            class=\"cds-dialog-close-icon\"\n            icon=\"mdi-close\"\n            @click=\"close\"\n            @keyup:enter=\"close\"\n          >\n          </v-btn>\n        </v-toolbar>\n      \n      <v-card-text>\n        \n        <slot>\n          Add content to the default slot\n        </slot>\n        \n      </v-card-text>\n    </v-card>\n  </v-dialog>\n\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, onMounted, nextTick, watch, useAttrs, useTemplateRef } from \"vue\";\nimport { VCard } from \"vuetify/components\";\nimport { UseDraggableDialogOptions, useDraggableDialog } from \"../composables/useDraggableDialog\";\n\ninterface CDSDialogProps {\n  title: string;\n  modelValue?: boolean;\n  color?: string;\n  titleColor?: string;\n  shortTitle?: string;\n  draggable?: boolean;\n  button?: boolean;\n  scrim?: boolean;\n  persistent?: boolean;\n  modal?: boolean;\n}\n\nconst props = withDefaults(defineProps<CDSDialogProps>(), {\n  modelValue: false,\n  color: \"red\",\n  shortTitle: \"\",\n  draggable: false,\n  button: false,\n  titleColor: \"primary\",\n  scrim: true,\n  persistent: false,\n  modal: true,\n});\n\nconst emit = defineEmits<{\n  (event: \"update:modelValue\", value: boolean): void;\n}>();\n\nconst card = useTemplateRef<InstanceType<typeof VCard>>(\"card\");\nconst showDialog = ref(props.modelValue);\nconst displayedShortTitle = computed(() => props.shortTitle || props.title);\nconst cardRoot = ref<HTMLElement | null>(null);\n\nconst attrs = useAttrs();\n\nif (props.draggable) {\n  const options: UseDraggableDialogOptions = {\n    root: cardRoot,\n    dialogSelector: \".cds-dialog-card\",\n  };\n  if (attrs[\"drag-predicate\"]) {\n    options.dragPredicate = attrs[\"drag-predicate\"] as (element: HTMLElement) => boolean;\n  }\n  useDraggableDialog(options);\n}\n\nfunction updateRoot() {\n  nextTick(() => {\n    if (card.value) {\n      cardRoot.value = card.value.$el;\n    }\n  });\n}\n\nfunction close(event: PointerEvent) {\n  showDialog.value = false;\n  event.stopPropagation();\n}\n\nonMounted(() => {\n  if (props.draggable && props.modelValue) {\n    updateRoot();\n  }\n});\n\nwatch(showDialog, value => {\n  emit(\"update:modelValue\", value);\n});\n\nwatch(() => props.modelValue, value => {\n  showDialog.value = value;\n  if (value && props.draggable) {\n    updateRoot();\n  }\n});\n\n</script>\n\n<style>\n\n.cds-dialog {\n  display: flex;\n  width: calc(100% - 1rem);\n}\n.cds-dialog-card {\n  align-self: center;\n  max-width: 80%;\n}\n\n.cds-dialog-close-icon {\n  cursor: pointer;\n}\n\n.v-dialog.cds-dialog > .v-overlay__content {\n  align-self: center;\n  margin: unset;\n}\n\n.cds-dialog .v-card-text {\n  height: fit-content;\n  max-height: 60vh;\n}\n\n.cds-dialog.nonmodal {\n\n  .v-overlay__content {\n    visibility: hidden;\n\n    .v-card {\n      visibility: visible;\n    }\n  }\n\n}\n</style>\n","import script from \"./CDSDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CDSDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CDSDialog.vue?vue&type=style&index=0&id=47468c07&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderSlot as _renderSlot, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"cds-marquee-alert elevation-3 sucess\"\n}\nconst _hoisted_2 = { class: \"cds-marquee-alert__content\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_v_avatar = _resolveComponent(\"v-avatar\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n\n  return (_ctx.isVisible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createVNode(_component_v_avatar, {\n          variant: \"flat\",\n          color: \"info\",\n          icon: \"mdi-exclamation-thick\"\n        }),\n        _createElementVNode(\"div\", _hoisted_2, [\n          _renderSlot(_ctx.$slots, \"default\", {}, () => [\n            _createElementVNode(\"span\", null, _toDisplayString(_ctx.message), 1)\n          ])\n        ]),\n        _createVNode(_component_v_btn, {\n          onClick: _ctx.close,\n          class: \"cds-marquee-alert__close-button\",\n          \"aria-label\": \"Close alert\",\n          variant: \"tonal\"\n        }, {\n          default: _withCtx(() => [...(_cache[0] || (_cache[0] = [\n            _createTextVNode(\" Close \", -1)\n          ]))]),\n          _: 1\n        }, 8, [\"onClick\"])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","<style>\n.cds-marquee-alert\n{\n  position: sticky;\n  top: 0;\n  left: 0;\n  /* width: 100vw; */\n  padding-inline: 1rem;\n  padding-block: 5px;\n  margin-bottom: 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  background-color: rgb(var(--v-theme-success));\n  color: white;\n  z-index: 9999;\n}\n\n.cds-marquee-alert__content\n{\n  line-height: 1.5;\n  flex-grow: 1;\n}\n\n.cds-marquee-alert__close-button\n{\n  padding: 5px;\n}\n</style>\n\n<template>\n  <div v-if=\"isVisible\" class=\"cds-marquee-alert elevation-3 sucess\">\n    <v-avatar variant=\"flat\" color=\"info\" icon=\"mdi-exclamation-thick\" />\n    <div class=\"cds-marquee-alert__content\">\n      <slot>\n        <span>{{ message }}</span>\n      </slot>\n    </div>\n    <v-btn @click=\"close\" class=\"cds-marquee-alert__close-button\" aria-label=\"Close alert\" variant=\"tonal\">\n      Close\n    </v-btn>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n\n\nexport default defineComponent({\n  name: 'MarqueeAlert',\n\n  props: {\n    message: {\n      type: String,\n      default: 'hello'\n    },\n    modelValue: {\n      type: Boolean,\n      required: false,\n      default: true\n    },\n    timeout: {\n      type: Number,\n      default: 5000\n    }\n  },\n  \n  mounted() {\n    setTimeout(() => {\n      this.isVisible = false;\n    }, this.timeout);\n  },\n\n  data() {\n    return {\n      isVisible: true,\n    };\n  },\n\n  methods: {\n    close() {\n      this.isVisible = false;\n    }\n  },\n\n  watch: {\n    isVisible(value) {\n      this.$emit('update:modelValue', value);\n    },\n\n    modelValue(value) {\n      this.isVisible = value;\n    }\n  }\n\n\n});\n</script>\n","import { render } from \"./MarqeeAlert.vue?vue&type=template&id=185155c3&ts=true\"\nimport script from \"./MarqeeAlert.vue?vue&type=script&lang=ts\"\nexport * from \"./MarqeeAlert.vue?vue&type=script&lang=ts\"\n\nimport \"./MarqeeAlert.vue?vue&type=style&index=0&id=185155c3&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { onMounted, computed, ref, watch, nextTick } from \"vue\";\nimport { v4 } from \"uuid\";\nimport { PlotlyHTMLElement, newPlot, restyle, type Data, type Datum, type PlotMouseEvent } from \"plotly.js-dist-min\";\n\nimport { AggValue, UserDataset } from \"../types\";\n\n\ninterface TimeseriesProps {\n  data: UserDataset[]; // composed selections\n  showErrors?: boolean;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TimeseriesGraph',\n  props: {\n    data: {},\n    showErrors: { type: Boolean }\n  },\n  emits: [\"click\"],\n  setup(__props: any, { emit: __emit }) {\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nconst props = __props;\nconst sampleKeyCounts = computed(() => props.data.map(sel => Object.keys(sel.samples ?? {}).length));\n\nconst id = `timeseries-${v4()}`;\n\nconst plot = ref<PlotlyHTMLElement | null>(null);\nconst graph = ref<HTMLDivElement | null>(null);\n\nconst emit = __emit;\n\nfunction datumToDate(datum: Datum): Date | null {\n  if (datum === null) { return null; }\n  if (datum instanceof Date) { return datum; }\n  return new Date(datum);\n}\n\nconst legendGroups: Record<string, string> = {};\nlet errorTraces: number[] = [];\nconst traceVisible = ref<Map<string, boolean>>(new Map());\n\nfunction renderPlot() {\n\n  errorTraces = [];\n  \n  const plotlyData: Data[] = [];\n  if (props.data.length === 0) {\n    console.log(\"No data provided for timeseries graph\");\n    return;\n  }\n  \n  if (props.data.map(sel => Object.keys(sel.samples ?? {}).length).every(len => len === 0)) {\n    console.log(\"No samples provided for timeseries graph\");\n    return;\n  }\n\n  let max = 0;\n  props.data.forEach(data => {\n    const samples = data.samples;\n    if (!samples) { return; }\n    // derive color from region if present\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any\n    const regionColor = (data as any).region?.color;\n    const ts = Object.keys(samples).sort();\n    const dataT: Date[] = [];\n    const dataV: (number | null)[] = [];\n    ts.forEach(t => {\n      const point: AggValue = samples[t];\n      if (point.value !== null) {\n        dataT.push(point.date);\n        dataV.push(point.value);\n      }\n    });\n    max = Math.max(max, Math.max(...dataV.filter((v): v is number => v !== null)));\n\n    const legendGroup = v4();\n    if (!traceVisible.value.has(data.id)) {\n      traceVisible.value.set(data.id, true);\n    }\n    legendGroups[data.id] = legendGroup;\n    plotlyData.push({\n      x: dataT,\n      y: dataV,\n      mode: \"lines+markers\",\n      legendgroup: legendGroup,\n      showlegend: true,\n      name: data.region.name,\n      marker: { color: regionColor },\n      visible: traceVisible.value.get(data.id) ? true : \"legendonly\",\n    });\n\n    const errors = data.errors;\n    if (errors != null) {\n      const upperY: (number | null)[] = [];\n      const lowerY: (number | null)[] = [];\n\n      ts.forEach(t => {\n        const point: AggValue = samples[t];\n        const value = point.value;\n        const errs = errors[t];\n        if (value === null || errs == null) {\n          // lowerY.push(null);\n          // upperY.push(null);\n          return;\n        }\n        const { lower, upper } = errs;\n        const valueLower = value - lower;\n        const valueHigher = value + upper;\n        const low = Math.min(valueLower, valueHigher);\n        const high = Math.max(valueLower, valueHigher);\n        max = Math.max(max, high);\n        lowerY.push(low);\n        upperY.push(high);\n      });\n\n      plotlyData.push({\n        x: dataT,\n        y: lowerY,\n        mode: \"lines\",\n        line: { width: 0 },\n        showlegend: false,\n        legendgroup: legendGroup,\n        name: data.region.name,\n        marker: { color: regionColor },\n        visible: props.showErrors && traceVisible.value.get(data.id),\n      });\n      errorTraces.push(plotlyData.length - 1);\n\n      plotlyData.push({\n        x: dataT,\n        y: upperY,\n        mode: \"lines\",\n        line: { width: 0 },\n        fill: \"tonexty\",\n        showlegend: false,\n        legendgroup: legendGroup,\n        name: data.region.name,\n        marker: { color: regionColor },\n        visible: props.showErrors && traceVisible.value.get(data.id),\n      });\n      errorTraces.push(plotlyData.length - 1);\n    }\n  });\n\n  const paddingFactor = 1.1;\n  const axisMax = Math.max(1, paddingFactor * max);\n  const layout = {\n    width: 600,\n    height: 400,\n    yaxis: {\n      title: { text: \"Molecules / cm<sup>2</sup>\" },\n      range: [0, axisMax],\n    }\n  };\n\n  newPlot(graph.value ?? id, plotlyData, layout).then((el: PlotlyHTMLElement) => {\n    plot.value = el;\n    el.on(\"plotly_click\", (data: PlotMouseEvent) => {\n      data.points.forEach(point => {\n        const traceIndex = point.curveNumber;\n        if (traceIndex !== 0 || point.x == null || point.y == null) {\n          return;\n        }\n        const date = datumToDate(point.x);\n        if (date !== null) {\n          emit(\"click\", { date, value: point.y as number });\n        }\n      });\n    });\n    el.on('plotly_legendclick', (data) => {\n      const trace = plotlyData[data.curveNumber];\n      if (!trace) { \n        console.error(\"No trace for legend click\", data);\n        return true; \n      }\n      // eslint-disable-next-line \n      // @ts-ignore legend group should exist. but guard anyway\n      const group = trace.legendgroup as string;\n      if (!group) { \n        console.error(\"No legend group for trace\", trace);\n        return true; \n      }\n      const dataId = Object.keys(legendGroups).find(key => legendGroups[key] === group);\n      if (!dataId) { \n        console.error(\"Could not find data ID for legend group\", group);\n        return true; \n      }\n      const currentlyVisible = traceVisible.value.get(dataId);\n      traceVisible.value.set(dataId, !currentlyVisible);\n      // if currently visible and errors are visible set stlye the error traces too\n      nextTick(() => { // next tick so that updated traceVisible is available\n        if (currentlyVisible && props.showErrors) {\n          updateErrorDisplay(true);\n        }\n      });\n      return true;\n    });\n  });\n}\n\nfunction updateErrorDisplay(visible: boolean) {\n  if (graph.value) {\n    errorTraces.forEach((traceIndex) => {\n      const trace = plot.value?.data[traceIndex];\n      if (!trace) return;\n      if (!graph.value) return;\n      // eslint-disable-next-line \n      // @ts-ignore legend group should exist. but guard anyway\n      const group = trace.legendgroup as string;\n      const dataId = Object.keys(legendGroups).find(key => legendGroups[key] === group);\n      if (dataId && traceVisible.value.get(dataId)) {\n        restyle(graph.value, { visible }, [traceIndex]);\n      } \n    });\n  }\n}\n\n\nonMounted(() => {\n  renderPlot();\n});\n\n\nwatch(() => props.showErrors, updateErrorDisplay);\n\nwatch(sampleKeyCounts, (newCounts: number[], oldCounts: number[]) => {\n  const different = (newCounts.length != oldCounts.length) && \n                    newCounts.some((value, index) => value !== oldCounts[index]);\n  if (!different) {\n    return;\n  }\n  if (newCounts.length === 0) {\n    console.log(\"No data provided for timeseries graph\");\n    return;\n  }\n  console.log(\"Data changed, re-rendering plot\");\n  renderPlot();\n});\n\nwatch(() => props.data, (newData, oldData) => {\n  console.log(\"Data prop changed, re-rendering plot\");\n  renderPlot();\n});\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    ref_key: \"graph\",\n    ref: graph,\n    id: id,\n    class: \"timeseries\"\n  }, null, 512))\n}\n}\n\n})","<!-- eslint-disable @typescript-eslint/no-unused-vars -->\n<template>\n  <div\n    ref=\"graph\"\n    :id=\"id\"\n    class=\"timeseries\"\n  >\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { onMounted, computed, ref, watch, nextTick } from \"vue\";\nimport { v4 } from \"uuid\";\nimport { PlotlyHTMLElement, newPlot, restyle, type Data, type Datum, type PlotMouseEvent } from \"plotly.js-dist-min\";\n\nimport { AggValue, UserDataset } from \"../types\";\n\n\ninterface TimeseriesProps {\n  data: UserDataset[]; // composed selections\n  showErrors?: boolean;\n}\n\nconst props = defineProps<TimeseriesProps>();\nconst sampleKeyCounts = computed(() => props.data.map(sel => Object.keys(sel.samples ?? {}).length));\n\nconst id = `timeseries-${v4()}`;\n\nconst plot = ref<PlotlyHTMLElement | null>(null);\nconst graph = ref<HTMLDivElement | null>(null);\n\nconst emit = defineEmits<{\n  (event: \"click\", value: AggValue): void;\n}>();\n\nfunction datumToDate(datum: Datum): Date | null {\n  if (datum === null) { return null; }\n  if (datum instanceof Date) { return datum; }\n  return new Date(datum);\n}\n\nconst legendGroups: Record<string, string> = {};\nlet errorTraces: number[] = [];\nconst traceVisible = ref<Map<string, boolean>>(new Map());\n\nfunction renderPlot() {\n\n  errorTraces = [];\n  \n  const plotlyData: Data[] = [];\n  if (props.data.length === 0) {\n    console.log(\"No data provided for timeseries graph\");\n    return;\n  }\n  \n  if (props.data.map(sel => Object.keys(sel.samples ?? {}).length).every(len => len === 0)) {\n    console.log(\"No samples provided for timeseries graph\");\n    return;\n  }\n\n  let max = 0;\n  props.data.forEach(data => {\n    const samples = data.samples;\n    if (!samples) { return; }\n    // derive color from region if present\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any\n    const regionColor = (data as any).region?.color;\n    const ts = Object.keys(samples).sort();\n    const dataT: Date[] = [];\n    const dataV: (number | null)[] = [];\n    ts.forEach(t => {\n      const point: AggValue = samples[t];\n      if (point.value !== null) {\n        dataT.push(point.date);\n        dataV.push(point.value);\n      }\n    });\n    max = Math.max(max, Math.max(...dataV.filter((v): v is number => v !== null)));\n\n    const legendGroup = v4();\n    if (!traceVisible.value.has(data.id)) {\n      traceVisible.value.set(data.id, true);\n    }\n    legendGroups[data.id] = legendGroup;\n    plotlyData.push({\n      x: dataT,\n      y: dataV,\n      mode: \"lines+markers\",\n      legendgroup: legendGroup,\n      showlegend: true,\n      name: data.region.name,\n      marker: { color: regionColor },\n      visible: traceVisible.value.get(data.id) ? true : \"legendonly\",\n    });\n\n    const errors = data.errors;\n    if (errors != null) {\n      const upperY: (number | null)[] = [];\n      const lowerY: (number | null)[] = [];\n\n      ts.forEach(t => {\n        const point: AggValue = samples[t];\n        const value = point.value;\n        const errs = errors[t];\n        if (value === null || errs == null) {\n          // lowerY.push(null);\n          // upperY.push(null);\n          return;\n        }\n        const { lower, upper } = errs;\n        const valueLower = value - lower;\n        const valueHigher = value + upper;\n        const low = Math.min(valueLower, valueHigher);\n        const high = Math.max(valueLower, valueHigher);\n        max = Math.max(max, high);\n        lowerY.push(low);\n        upperY.push(high);\n      });\n\n      plotlyData.push({\n        x: dataT,\n        y: lowerY,\n        mode: \"lines\",\n        line: { width: 0 },\n        showlegend: false,\n        legendgroup: legendGroup,\n        name: data.region.name,\n        marker: { color: regionColor },\n        visible: props.showErrors && traceVisible.value.get(data.id),\n      });\n      errorTraces.push(plotlyData.length - 1);\n\n      plotlyData.push({\n        x: dataT,\n        y: upperY,\n        mode: \"lines\",\n        line: { width: 0 },\n        fill: \"tonexty\",\n        showlegend: false,\n        legendgroup: legendGroup,\n        name: data.region.name,\n        marker: { color: regionColor },\n        visible: props.showErrors && traceVisible.value.get(data.id),\n      });\n      errorTraces.push(plotlyData.length - 1);\n    }\n  });\n\n  const paddingFactor = 1.1;\n  const axisMax = Math.max(1, paddingFactor * max);\n  const layout = {\n    width: 600,\n    height: 400,\n    yaxis: {\n      title: { text: \"Molecules / cm<sup>2</sup>\" },\n      range: [0, axisMax],\n    }\n  };\n\n  newPlot(graph.value ?? id, plotlyData, layout).then((el: PlotlyHTMLElement) => {\n    plot.value = el;\n    el.on(\"plotly_click\", (data: PlotMouseEvent) => {\n      data.points.forEach(point => {\n        const traceIndex = point.curveNumber;\n        if (traceIndex !== 0 || point.x == null || point.y == null) {\n          return;\n        }\n        const date = datumToDate(point.x);\n        if (date !== null) {\n          emit(\"click\", { date, value: point.y as number });\n        }\n      });\n    });\n    el.on('plotly_legendclick', (data) => {\n      const trace = plotlyData[data.curveNumber];\n      if (!trace) { \n        console.error(\"No trace for legend click\", data);\n        return true; \n      }\n      // eslint-disable-next-line \n      // @ts-ignore legend group should exist. but guard anyway\n      const group = trace.legendgroup as string;\n      if (!group) { \n        console.error(\"No legend group for trace\", trace);\n        return true; \n      }\n      const dataId = Object.keys(legendGroups).find(key => legendGroups[key] === group);\n      if (!dataId) { \n        console.error(\"Could not find data ID for legend group\", group);\n        return true; \n      }\n      const currentlyVisible = traceVisible.value.get(dataId);\n      traceVisible.value.set(dataId, !currentlyVisible);\n      // if currently visible and errors are visible set stlye the error traces too\n      nextTick(() => { // next tick so that updated traceVisible is available\n        if (currentlyVisible && props.showErrors) {\n          updateErrorDisplay(true);\n        }\n      });\n      return true;\n    });\n  });\n}\n\nfunction updateErrorDisplay(visible: boolean) {\n  if (graph.value) {\n    errorTraces.forEach((traceIndex) => {\n      const trace = plot.value?.data[traceIndex];\n      if (!trace) return;\n      if (!graph.value) return;\n      // eslint-disable-next-line \n      // @ts-ignore legend group should exist. but guard anyway\n      const group = trace.legendgroup as string;\n      const dataId = Object.keys(legendGroups).find(key => legendGroups[key] === group);\n      if (dataId && traceVisible.value.get(dataId)) {\n        restyle(graph.value, { visible }, [traceIndex]);\n      } \n    });\n  }\n}\n\n\nonMounted(() => {\n  renderPlot();\n});\n\n\nwatch(() => props.showErrors, updateErrorDisplay);\n\nwatch(sampleKeyCounts, (newCounts: number[], oldCounts: number[]) => {\n  const different = (newCounts.length != oldCounts.length) && \n                    newCounts.some((value, index) => value !== oldCounts[index]);\n  if (!different) {\n    return;\n  }\n  if (newCounts.length === 0) {\n    console.log(\"No data provided for timeseries graph\");\n    return;\n  }\n  console.log(\"Data changed, re-rendering plot\");\n  renderPlot();\n});\n\nwatch(() => props.data, (newData, oldData) => {\n  console.log(\"Data prop changed, re-rendering plot\");\n  renderPlot();\n});\n\n</script>\n\n<style scoped>\n.timeseries:not(:empty) {\n  width: 600px;\n  height: 400px;\n}\n</style>\n","import script from \"./TimeseriesGraph.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TimeseriesGraph.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TimeseriesGraph.vue?vue&type=style&index=0&id=bdb40e34&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-bdb40e34\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, normalizeProps as _normalizeProps, guardReactiveProps as _guardReactiveProps, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"d-flex ga-2\" }\n\nimport { computed, ref, watch } from \"vue\";\nimport { v4 } from \"uuid\";\n\nimport type { MappingBackends, RectangleSelection, TimeRange, UserDataset } from \"../types\";\nimport type { MillisecondRange } from \"../types/datetime\";\nimport { type MoleculeType, MOLECULE_OPTIONS } from \"../esri/utils\";\nimport { atleast1d } from \"../utils/atleast1d\";\nimport { formatTimeRange } from \"../utils/timeRange\";\n\ninterface SelectionComposerProps {\n  backend: MappingBackends;\n  timeRanges: TimeRange[];\n  regions: RectangleSelectionType[];\n  disabled?: { region?: boolean; timeRange?: boolean; molecule?: boolean };\n}\n\ntype RectangleSelectionType = RectangleSelection<typeof props.backend>;\n\ninterface DraftUserDataset {\n  region?: RectangleSelectionType | null;\n  timeRange?: MillisecondRange | MillisecondRange[] | null;\n  molecule?: MoleculeType | null;\n}\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SelectionComposer',\n  props: {\n    backend: {},\n    timeRanges: {},\n    regions: {},\n    disabled: {}\n  },\n  emits: [\"create\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst selectedTimeRange = ref<TimeRange | null>(null);\n\nconst props = __props;\n\nconst emit = __emit;\n\nconst loading = ref(false);\n\nconst draftUserDataset = ref<DraftUserDataset>({ region: null, timeRange: null, molecule: null });\nconst availableMolecules = computed(() => MOLECULE_OPTIONS.map(o => ({ key: o.value as MoleculeType, title: o.title })));\n\n// Public composition progress\nconst creationProgress = computed(() => {\n  let count = 0;\n  if (draftUserDataset.value.region) count += 1;\n  if (draftUserDataset.value.timeRange) count += 1;\n  if (draftUserDataset.value.molecule) count += 1;\n  return { count, percent: (count / 3) * 100 };\n});\n\nfunction setDraftSelectionRegion(region: RectangleSelectionType | null) {\n  (draftUserDataset.value.region as RectangleSelectionType | null) = region || null;\n}\n\nfunction setDraftSelectionMolecule(molecule: MoleculeType | null) {\n  draftUserDataset.value.molecule = molecule || null;\n}\n\nfunction setDraftSelectionTimeRange(range: MillisecondRange | MillisecondRange[] | null) {\n  draftUserDataset.value.timeRange = range || null;\n}\n\nasync function composeSelection(): Promise<UserDataset | null> {\n  // const color = COLORS[selectionCount % COLORS.length]; // we will use the color from the region\n  \n  const draft = draftUserDataset.value;\n  if (!draft.region || !draft.timeRange || !draft.molecule) {\n    console.error('Draft selection incomplete');\n    return null;\n  }\n  \n  const timeRanges = atleast1d(draft.timeRange);\n  // Add to available list if new custom\n  const timeRange: TimeRange = { \n    id: v4(), \n    name: 'Selection Range', \n    description: formatTimeRange(timeRanges), \n    range: timeRanges.length === 1 ? timeRanges[0] : timeRanges,\n    type: selectedTimeRange.value?.type || 'custom'\n  };\n  const sel: UserDataset = {\n    id: v4(),\n    region: draft.region, // as { id: string; name: string; rectangle: RectangleSelectionInfo; color: string; layer?: unknown },\n    timeRange,\n    molecule: draft.molecule as MoleculeType,\n  };\n  emit(\"create\", sel);\n  return sel;\n}\n\n\nfunction reset() {\n  draftUserDataset.value = { region: null, timeRange: null, molecule: null };\n  selectedTimeRange.value = null;\n}\n\nwatch(selectedTimeRange, (timeRange: TimeRange | null) => {\n  setDraftSelectionTimeRange(timeRange?.range ?? null);\n});\n\n// just watch the id's. using a 'deep' watch caused a significant performance hit\nwatch(() => props.regions.map(r => r.id), (newRegions) => {\n  if (draftUserDataset.value.region) {\n    const exists = newRegions.find(rid => rid === draftUserDataset.value.region?.id);\n    if (!exists) {\n      draftUserDataset.value.region = null;\n    }\n  }\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_chip = _resolveComponent(\"v-chip\")!\n  const _component_v_card_title = _resolveComponent(\"v-card-title\")!\n  const _component_v_list_item_title = _resolveComponent(\"v-list-item-title\")!\n  const _component_v_list_item_subtitle = _resolveComponent(\"v-list-item-subtitle\")!\n  const _component_v_list_item = _resolveComponent(\"v-list-item\")!\n  const _component_v_select = _resolveComponent(\"v-select\")!\n  const _component_v_progress_linear = _resolveComponent(\"v-progress-linear\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n\n  return (_openBlock(), _createBlock(_component_v_card, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_card_title, { class: \"d-flex justify-space-between\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_chip, {\n            size: \"x-small\",\n            color: \"primary\",\n            variant: \"tonal\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(_toDisplayString(creationProgress.value.count) + \"/3\", 1)\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_v_card_text, { class: \"d-flex flex-column ga-3\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_select, {\n            items: _ctx.timeRanges,\n            modelValue: selectedTimeRange.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((selectedTimeRange).value = $event)),\n            label: \"Time Range\",\n            disabled: _ctx.disabled?.timeRange,\n            density: \"compact\",\n            \"hide-details\": \"\",\n            variant: \"outlined\",\n            \"return-object\": \"\"\n          }, {\n            item: _withCtx(({ index, props }) => [\n              _createVNode(_component_v_list_item, _normalizeProps(_guardReactiveProps(props)), {\n                title: _withCtx(() => [...(_cache[3] || (_cache[3] = []))]),\n                default: _withCtx(() => [\n                  _createVNode(_component_v_list_item_title, null, {\n                    default: _withCtx(() => [\n                      _createTextVNode(_toDisplayString(_ctx.timeRanges[index].name), 1)\n                    ]),\n                    _: 2\n                  }, 1024),\n                  (_ctx.timeRanges[index].name === 'Displayed Day')\n                    ? (_openBlock(), _createBlock(_component_v_list_item_subtitle, { key: 0 }, {\n                        default: _withCtx(() => [\n                          _createTextVNode(_toDisplayString(new Date((_ctx.timeRanges[index].range as MillisecondRange).start).toDateString()), 1)\n                        ]),\n                        _: 2\n                      }, 1024))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                _: 2\n              }, 1040)\n            ]),\n            selection: _withCtx(({ index }) => [\n              _createTextVNode(_toDisplayString(_ctx.timeRanges[index].name), 1)\n            ]),\n            _: 1\n          }, 8, [\"items\", \"modelValue\", \"disabled\"]),\n          _createVNode(_component_v_select, {\n            items: _ctx.regions.map(r => ({ title: r.name, value: r })),\n            \"model-value\": draftUserDataset.value.region,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => (setDraftSelectionRegion($event as RectangleSelectionType))),\n            label: \"Region\",\n            disabled: _ctx.disabled?.region,\n            \"item-title\": \"title\",\n            \"item-value\": \"value\",\n            density: \"compact\",\n            \"hide-details\": \"\",\n            variant: \"outlined\"\n          }, null, 8, [\"items\", \"model-value\", \"disabled\"]),\n          _createVNode(_component_v_select, {\n            items: availableMolecules.value.map(m => ({ title: m.title, value: m.key })),\n            \"model-value\": draftUserDataset.value.molecule,\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => (setDraftSelectionMolecule($event))),\n            label: \"Molecule\",\n            disabled: _ctx.disabled?.molecule,\n            \"item-title\": \"title\",\n            \"item-value\": \"value\",\n            density: \"compact\",\n            \"hide-details\": \"\",\n            variant: \"outlined\"\n          }, null, 8, [\"items\", \"model-value\", \"disabled\"]),\n          _createVNode(_component_v_progress_linear, {\n            \"model-value\": creationProgress.value.percent,\n            height: \"6\",\n            color: \"primary\",\n            rounded: \"\"\n          }, null, 8, [\"model-value\"]),\n          _createElementVNode(\"div\", _hoisted_1, [\n            _createVNode(_component_v_btn, {\n              color: \"primary\",\n              disabled: creationProgress.value.count < 3,\n              onClick: composeSelection,\n              size: \"small\",\n              loading: loading.value\n            }, {\n              loader: _withCtx(() => [\n                _createVNode(_component_v_progress_linear, { indeterminate: \"\" })\n              ]),\n              default: _withCtx(() => [\n                _cache[4] || (_cache[4] = _createTextVNode(\" Access Data \", -1))\n              ]),\n              _: 1\n            }, 8, [\"disabled\", \"loading\"]),\n            _createVNode(_component_v_btn, {\n              color: \"secondary\",\n              variant: \"tonal\",\n              size: \"small\",\n              onClick: reset\n            }, {\n              default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n                _createTextVNode(\" Reset \", -1)\n              ]))]),\n              _: 1\n            })\n          ])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n  <v-card>\n    <v-card-title class=\"d-flex justify-space-between\">\n      <v-chip size=\"x-small\" color=\"primary\" variant=\"tonal\">{{ creationProgress.count }}/3</v-chip>\n    </v-card-title>\n    <v-card-text class=\"d-flex flex-column ga-3\">\n      <!-- Time Range Picker: offer Effective (current day/custom) and any active custom ranges -->\n      <v-select\n        :items=\"timeRanges\"\n        v-model=\"selectedTimeRange\"\n        label=\"Time Range\"\n        :disabled=\"disabled?.timeRange\"\n        density=\"compact\"\n        hide-details\n        variant=\"outlined\"\n        return-object\n      >\n        <template #item=\"{ index, props }\">\n          <v-list-item v-bind=\"props\">\n            <template #title></template>\n            <template #default>\n              <v-list-item-title>{{ timeRanges[index].name }}</v-list-item-title>\n              <v-list-item-subtitle\n                v-if=\"timeRanges[index].name === 'Displayed Day'\"\n              >\n                {{ new Date((timeRanges[index].range as MillisecondRange).start).toDateString() }}\n              </v-list-item-subtitle>\n            </template>\n          </v-list-item>\n        </template>\n        <template #selection=\"{ index }\">\n          {{ timeRanges[index].name }}\n        </template>\n      </v-select>\n\n      <!-- Region Picker -->\n      <v-select\n        :items=\"regions.map(r => ({ title: r.name, value: r }))\"\n        :model-value=\"draftUserDataset.region\"\n        @update:model-value=\"setDraftSelectionRegion($event as RectangleSelectionType)\"\n        label=\"Region\"\n        :disabled=\"disabled?.region\"\n        item-title=\"title\"\n        item-value=\"value\"\n        density=\"compact\"\n        hide-details\n        variant=\"outlined\"\n      />\n\n      <!-- Molecule Picker -->\n      <v-select\n        :items=\"availableMolecules.map(m => ({ title: m.title, value: m.key }))\"\n        :model-value=\"draftUserDataset.molecule\"\n        @update:model-value=\"setDraftSelectionMolecule($event)\"\n        label=\"Molecule\"\n        :disabled=\"disabled?.molecule\"\n        item-title=\"title\"\n        item-value=\"value\"\n        density=\"compact\"\n        hide-details\n        variant=\"outlined\"\n      />\n\n      <v-progress-linear :model-value=\"creationProgress.percent\" height=\"6\" color=\"primary\" rounded></v-progress-linear>\n\n      <div class=\"d-flex ga-2\">\n        <v-btn\n          color=\"primary\"\n          :disabled=\"creationProgress.count < 3\"\n          @click=\"composeSelection\"\n          size=\"small\"\n          :loading=\"loading\"\n        >\n          <template #loader>\n            <v-progress-linear\n              indeterminate\n            ></v-progress-linear>\n          </template>\n          Access Data\n        </v-btn>\n        <v-btn\n          color=\"secondary\"\n          variant=\"tonal\"\n          size=\"small\"\n          @click=\"reset\"\n        >\n          Reset\n        </v-btn>\n      </div>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, watch } from \"vue\";\nimport { v4 } from \"uuid\";\n\nimport type { MappingBackends, RectangleSelection, TimeRange, UserDataset } from \"../types\";\nimport type { MillisecondRange } from \"../types/datetime\";\nimport { type MoleculeType, MOLECULE_OPTIONS } from \"../esri/utils\";\nimport { atleast1d } from \"../utils/atleast1d\";\nimport { formatTimeRange } from \"../utils/timeRange\";\n\nconst selectedTimeRange = ref<TimeRange | null>(null);\n\ninterface SelectionComposerProps {\n  backend: MappingBackends;\n  timeRanges: TimeRange[];\n  regions: RectangleSelectionType[];\n  disabled?: { region?: boolean; timeRange?: boolean; molecule?: boolean };\n}\n\nconst props = defineProps<SelectionComposerProps>();\n\nconst emit = defineEmits<{\n  (event: \"create\", selection: UserDataset): void;\n}>();\n\nconst loading = ref(false);\n\ntype RectangleSelectionType = RectangleSelection<typeof props.backend>;\n\ninterface DraftUserDataset {\n  region?: RectangleSelectionType | null;\n  timeRange?: MillisecondRange | MillisecondRange[] | null;\n  molecule?: MoleculeType | null;\n}\nconst draftUserDataset = ref<DraftUserDataset>({ region: null, timeRange: null, molecule: null });\nconst availableMolecules = computed(() => MOLECULE_OPTIONS.map(o => ({ key: o.value as MoleculeType, title: o.title })));\n\n// Public composition progress\nconst creationProgress = computed(() => {\n  let count = 0;\n  if (draftUserDataset.value.region) count += 1;\n  if (draftUserDataset.value.timeRange) count += 1;\n  if (draftUserDataset.value.molecule) count += 1;\n  return { count, percent: (count / 3) * 100 };\n});\n\nfunction setDraftSelectionRegion(region: RectangleSelectionType | null) {\n  (draftUserDataset.value.region as RectangleSelectionType | null) = region || null;\n}\n\nfunction setDraftSelectionMolecule(molecule: MoleculeType | null) {\n  draftUserDataset.value.molecule = molecule || null;\n}\n\nfunction setDraftSelectionTimeRange(range: MillisecondRange | MillisecondRange[] | null) {\n  draftUserDataset.value.timeRange = range || null;\n}\n\nasync function composeSelection(): Promise<UserDataset | null> {\n  // const color = COLORS[selectionCount % COLORS.length]; // we will use the color from the region\n  \n  const draft = draftUserDataset.value;\n  if (!draft.region || !draft.timeRange || !draft.molecule) {\n    console.error('Draft selection incomplete');\n    return null;\n  }\n  \n  const timeRanges = atleast1d(draft.timeRange);\n  // Add to available list if new custom\n  const timeRange: TimeRange = { \n    id: v4(), \n    name: 'Selection Range', \n    description: formatTimeRange(timeRanges), \n    range: timeRanges.length === 1 ? timeRanges[0] : timeRanges,\n    type: selectedTimeRange.value?.type || 'custom'\n  };\n  const sel: UserDataset = {\n    id: v4(),\n    region: draft.region, // as { id: string; name: string; rectangle: RectangleSelectionInfo; color: string; layer?: unknown },\n    timeRange,\n    molecule: draft.molecule as MoleculeType,\n  };\n  emit(\"create\", sel);\n  return sel;\n}\n\n\nfunction reset() {\n  draftUserDataset.value = { region: null, timeRange: null, molecule: null };\n  selectedTimeRange.value = null;\n}\n\nwatch(selectedTimeRange, (timeRange: TimeRange | null) => {\n  setDraftSelectionTimeRange(timeRange?.range ?? null);\n});\n\n// just watch the id's. using a 'deep' watch caused a significant performance hit\nwatch(() => props.regions.map(r => r.id), (newRegions) => {\n  if (draftUserDataset.value.region) {\n    const exists = newRegions.find(rid => rid === draftUserDataset.value.region?.id);\n    if (!exists) {\n      draftUserDataset.value.region = null;\n    }\n  }\n});\n</script>\n\n<style scoped>\n.v-progress-linear {\n  width: 80%;\n}\n</style>\n","import script from \"./SelectionComposer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SelectionComposer.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SelectionComposer.vue?vue&type=style&index=0&id=2fc33030&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2fc33030\"]])\n\nexport default __exports__","export default [\n  {\n    date: \"2025-04-24\",\n    html: 'Educational resources designed for for informal educators (e.g., in museums, public outreach) are now available on the Cosmic Data Stories website at <a style=\"font-weight: normal;\" tabindex=\"0\"  href=\"https://www.cosmicds.cfa.harvard.edu/resources/tempo\" target=\"_blank\" rel=\"noopener\">Educator Resources</a>. You can also find the link the menu.',\n    highlight: new Date() < new Date('2025-05-7 00:00:00') ,\n    \n  },\n  {\n    date: \"2025-02-02\",\n    html:\n      'During the LA fires that began on Jan 7th, NO<sub>2</sub> levels far exceeded the default range displayed on our maps. For Jan 7 - Feb 2, 2025, we added an option to use an extended range of NO<sub>2</sub> values. For those dates, a button appears on the map to toggle between the standard and extended range.',\n      \n  },\n  {\n    date: \"2025-01-21\",\n    text:\n      \"Enable viewing the full resolution data. By default this is always off, displaying data at 1/2 the native Level 3 resolution for better performance\"\n  },\n  {\n    date: \"2025-01-09\",\n    text:\n      \"We have added a new sharable url feature! Click the share icon to copy a link for the current view (location, zoom level, date, and time) to your clipboard.\",\n  },\n  {\n    date: \"2024-11-29\",\n    text:\n      \"We are in the process of updating our data processing routines and images to use averaging rather than the nearest-neighbor pixel value when reprojecting. TEMPO images for dates after Nov 29th use the new pipeline, and past images will be updated over time\",\n  },\n];\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withKeys as _withKeys, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\"\nimport _imports_0 from '@/assets/TEMPO-Logo-Small.png'\n\n\nconst _hoisted_1 = { class: \"header\" }\nconst _hoisted_2 = { class: \"snackbar-alert-ul\" }\nconst _hoisted_3 = [\"data-date\"]\nconst _hoisted_4 = [\"innerHTML\"]\nconst _hoisted_5 = { id: \"menu-area\" }\nconst _hoisted_6 = {\n  style: {\"font-weight\":\"normal\"},\n  tabindex: \"0\",\n  href: \"https://www.cosmicds.cfa.harvard.edu/resources/tempo\",\n  target: \"_blank\",\n  rel: \"noopener\"\n}\n\nimport { computed, ref } from \"vue\";\nimport { storeToRefs } from \"pinia\";\nimport { useDisplay } from \"vuetify\";\nimport { supportsTouchscreen } from \"@cosmicds/vue-toolkit\";\n\nimport { useTempoStore } from \"@/stores/app\";\nimport changes from \"@/changes\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'HeaderBar',\n  emits: [\"intro-slide\"],\n  setup(__props, { emit: __emit }) {\n\nconst emit = __emit;\n\nconst store = useTempoStore();\nconst {\n  accentColor2,\n  shareButtonClickedCount,\n} = storeToRefs(store);\n\nconst display = useDisplay();\n\nconst currentUrl = ref(window.location.href);\nconst showChanges = ref(false);\nconst showAboutData = ref(false);\nconst showCredits = ref(false);\n\nconst touchscreen = supportsTouchscreen();\n\nconst smallSize = computed(() => {\n  return display.smAndDown.value;\n});\n\n\nconst mobile = computed(() => {\n  return smallSize.value && touchscreen;\n});\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_cds_dialog = _resolveComponent(\"cds-dialog\")!\n  const _component_v_tooltip = _resolveComponent(\"v-tooltip\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_share_button = _resolveComponent(\"share-button\")!\n  const _component_v_list_item = _resolveComponent(\"v-list-item\")!\n  const _component_v_list = _resolveComponent(\"v-list\")!\n  const _component_v_menu = _resolveComponent(\"v-menu\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[25] || (_cache[25] = _createElementVNode(\"div\", { id: \"logo-title\" }, [\n      _createElementVNode(\"a\", {\n        href: \"https://tempo.si.edu\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\"\n      }, [\n        _createElementVNode(\"img\", {\n          src: _imports_0,\n          alt: \"TEMPO Logo\",\n          style: {\"width\":\"100px\",\"height\":\"100px\"}\n        })\n      ])\n    ], -1)),\n    _cache[26] || (_cache[26] = _createElementVNode(\"h1\", { id: \"title\" }, \"What is in the Air You Breathe?\", -1)),\n    _createVNode(_component_cds_dialog, {\n      title: \"What's new\",\n      modelValue: showChanges.value,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((showChanges).value = $event)),\n      color: _unref(accentColor2)\n    }, {\n      default: _withCtx(() => [\n        _createElementVNode(\"ul\", _hoisted_2, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(changes), (change) => {\n            return (_openBlock(), _createElementBlock(\"li\", {\n              class: \"change-item mb-5\",\n              key: change.date,\n              \"data-date\": change.date\n            }, [\n              _createElementVNode(\"span\", {\n                style: _normalizeStyle({\"font-weight\":\"bold\", \"color\": `${change.highlight ? \"var(--smithsonian-yellow)\" : \"currentColor\"}` })\n              }, _toDisplayString(change.date), 5),\n              _cache[14] || (_cache[14] = _createElementVNode(\"br\", null, null, -1)),\n              _cache[15] || (_cache[15] = _createTextVNode()),\n              _createElementVNode(\"span\", {\n                innerHTML: change.html\n              }, null, 8, _hoisted_4),\n              _createTextVNode(_toDisplayString(change.text), 1)\n            ], 8, _hoisted_3))\n          }), 128))\n        ])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\", \"color\"]),\n    _createElementVNode(\"div\", _hoisted_5, [\n      ((new Date('2025-05-7 00:00:00') > new Date()))\n        ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 0,\n            class: \"whats-new-button pulse\",\n            \"aria-label\": \"What's new\",\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (showChanges.value = true)),\n            onKeyup: _cache[2] || (_cache[2] = _withKeys(($event: any) => (showChanges.value = true), [\"enter\"])),\n            variant: \"outlined\",\n            rounded: \"lg\",\n            color: _unref(accentColor2),\n            elevation: \"0\",\n            size: \"lg\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_tooltip, {\n                location: \"bottom\",\n                activator: \"parent\",\n                disabled: mobile.value,\n                text: \"What's new\"\n              }, null, 8, [\"disabled\"]),\n              _createVNode(_component_v_icon, null, {\n                default: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n                  _createTextVNode(\"mdi-creation\", -1)\n                ]))]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }, 8, [\"color\"]))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_share_button, {\n        source: currentUrl.value,\n        buttonColor: \"black\",\n        iconColor: _unref(accentColor2),\n        elevation: \"0\",\n        size: \"small\",\n        rounded: \"1\",\n        \"tooltip-disabled\": mobile.value,\n        onClick: _cache[3] || (_cache[3] = ($event: any) => (shareButtonClickedCount.value += 1)),\n        alert: \"\"\n      }, null, 8, [\"source\", \"iconColor\", \"tooltip-disabled\"]),\n      _createVNode(_component_v_btn, {\n        \"aria-role\": \"menu\",\n        \"aria-label\": \"Show menu\",\n        class: \"menu-button\",\n        variant: \"outlined\",\n        rounded: \"lg\",\n        color: _unref(accentColor2),\n        elevation: \"5\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_icon, { size: \"x-large\" }, {\n            default: _withCtx(() => [...(_cache[17] || (_cache[17] = [\n              _createTextVNode(\"mdi-menu\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_v_menu, { activator: \"parent\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_list, null, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_list_item, {\n                    tabindex: \"0\",\n                    \"aria-label\": \"See recent changes\",\n                    onClick: _cache[4] || (_cache[4] = ($event: any) => (showChanges.value = true)),\n                    onKeyup: _cache[5] || (_cache[5] = _withKeys(($event: any) => (showChanges.value = true), [\"enter\"]))\n                  }, {\n                    default: _withCtx(() => [...(_cache[18] || (_cache[18] = [\n                      _createTextVNode(\" What's New \", -1)\n                    ]))]),\n                    _: 1\n                  }),\n                  _createVNode(_component_v_list_item, {\n                    tabindex: \"0\",\n                    \"aria-label\": \"Show introduction\",\n                    onClick: _cache[6] || (_cache[6] = () => emit('intro-slide', 1)),\n                    onKeyup: _cache[7] || (_cache[7] = _withKeys(() => emit('intro-slide', 1), [\"enter\"]))\n                  }, {\n                    default: _withCtx(() => [...(_cache[19] || (_cache[19] = [\n                      _createTextVNode(\" Introduction \", -1)\n                    ]))]),\n                    _: 1\n                  }),\n                  _createVNode(_component_v_list_item, {\n                    tabindex: \"0\",\n                    \"aria-label\": \"Show user guide\",\n                    onClick: _cache[8] || (_cache[8] = () => emit('intro-slide', 4)),\n                    onKeyup: _cache[9] || (_cache[9] = _withKeys(() => emit('intro-slide', 4), [\"enter\"]))\n                  }, {\n                    default: _withCtx(() => [...(_cache[20] || (_cache[20] = [\n                      _createTextVNode(\" User Guide \", -1)\n                    ]))]),\n                    _: 1\n                  }),\n                  _createVNode(_component_v_list_item, {\n                    tabindex: \"0\",\n                    \"aria-label\": \"Show dialog telling about the data\",\n                    onClick: _cache[10] || (_cache[10] = ($event: any) => (showAboutData.value = true)),\n                    onKeyup: _cache[11] || (_cache[11] = _withKeys(($event: any) => (showAboutData.value = true), [\"enter\"]))\n                  }, {\n                    default: _withCtx(() => [...(_cache[21] || (_cache[21] = [\n                      _createTextVNode(\" About the Data \", -1)\n                    ]))]),\n                    _: 1\n                  }),\n                  _createVNode(_component_v_list_item, { \"aria-label\": \"Leave Page to Educator Resources\" }, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"a\", _hoisted_6, [\n                        _cache[23] || (_cache[23] = _createTextVNode(\"Educator Resources\", -1)),\n                        _createVNode(_component_v_icon, null, {\n                          default: _withCtx(() => [...(_cache[22] || (_cache[22] = [\n                            _createTextVNode(\"mdi-open-in-new\", -1)\n                          ]))]),\n                          _: 1\n                        })\n                      ])\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_v_list_item, {\n                    tabindex: \"0\",\n                    \"aria-label\": \"Show credits\",\n                    onClick: _cache[12] || (_cache[12] = ($event: any) => (showCredits.value = true)),\n                    onKeyup: _cache[13] || (_cache[13] = _withKeys(($event: any) => (showCredits.value = true), [\"enter\"]))\n                  }, {\n                    default: _withCtx(() => [...(_cache[24] || (_cache[24] = [\n                      _createTextVNode(\" Credits \", -1)\n                    ]))]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"color\"])\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"header\">\n    <!-- tempo logo -->\n    <div id=\"logo-title\">\n    <a href=\"https://tempo.si.edu\" target=\"_blank\" rel=\"noopener noreferrer\" >\n      <img \n        src=\"@/assets/TEMPO-Logo-Small.png\"\n        alt=\"TEMPO Logo\"\n        style=\"width: 100px; height: 100px;\"\n      >\n    </a>\n    </div>\n\n    <h1 id=\"title\">What is in the Air You Breathe?</h1>\n    <!-- <cds-dialog\n      title=\"Time Series\"\n      v-model=\"samplesGraph\"\n      :color=\"accentColor2\"\n      draggable\n      :scrim=\"false\"\n      :drag-predicate=\"(element: HTMLElement) => element.closest('.plotly') == null\"\n    >\n      <timeseries-graph\n        v-if=\"userSelections.length > 0\"\n        :data=\"userSelections\"\n      />\n    </cds-dialog> -->\n\n    <!-- </div> -->\n    <cds-dialog title=\"What's new\" v-model=\"showChanges\" :color=\"accentColor2\">\n      <ul class=\"snackbar-alert-ul\">\n        <li class=\"change-item mb-5\" v-for=\"change in changes\" :key=\"change.date\" :data-date=\"change.date\">\n          <span :style='{\"font-weight\":\"bold\", \"color\": `${change.highlight ? \"var(--smithsonian-yellow)\" : \"currentColor\"}` }'>{{ change.date }}</span><br> <span v-html=\"change.html\">  </span>{{ change.text }}\n        </li>\n      </ul>\n      <!-- <template v-slot:activator=\"{ onClick, id }\">\n        <v-btn :id=\"id\" @click=\"onClick\" color=\"primary\">\n          Custom Activator\n        </v-btn>\n      </template>  -->\n    </cds-dialog>\n\n    <div id=\"menu-area\">\n      <v-btn \n        v-if=\"(new Date('2025-05-7 00:00:00') > new Date())\"\n        class='whats-new-button pulse' \n        aria-label=\"What's new\" \n        @click=\"showChanges = true\" \n        @keyup.enter=\"showChanges = true\" \n        variant=\"outlined\" \n        rounded=\"lg\" \n        :color=\"accentColor2\" \n        elevation=\"0\"\n        size=\"lg\"\n        >\n        <v-tooltip location=\"bottom\" activator=\"parent\" :disabled=\"mobile\" text=\"What's new\"></v-tooltip>\n        <v-icon>mdi-creation</v-icon>\n      </v-btn>\n      <share-button\n          :source=\"currentUrl\"\n          buttonColor=\"black\"\n          :iconColor=\"accentColor2\"\n          elevation=\"0\"\n          size=\"small\"\n          rounded=\"1\"\n          :tooltip-disabled=\"mobile\"\n          @click=\"shareButtonClickedCount += 1\"\n          alert\n        />\n      <v-btn aria-role=\"menu\" aria-label=\"Show menu\" class=\"menu-button\" variant=\"outlined\" rounded=\"lg\" :color=\"accentColor2\" elevation=\"5\">\n        <v-icon size=\"x-large\">mdi-menu</v-icon>\n        <v-menu\n          activator=\"parent\"\n          >\n          <v-list>\n            <v-list-item \n              tabindex=\"0\"\n              aria-label=\"See recent changes\"\n              @click=\"showChanges = true\"\n              @keyup.enter=\"showChanges = true\"\n              >\n              What's New\n            </v-list-item>\n\n            <v-list-item \n              tabindex=\"0\" \n              aria-label=\"Show introduction\"\n              @click=\"() => emit('intro-slide', 1)\"\n              @keyup.enter=\"() => emit('intro-slide', 1)\"\n              >\n                Introduction\n            </v-list-item>\n            \n            <v-list-item \n              tabindex=\"0\"\n              aria-label=\"Show user guide\"\n              @click=\"() => emit('intro-slide', 4)\"\n              @keyup.enter=\"() => emit('intro-slide', 4)\"\n              >\n              User Guide\n            </v-list-item>\n            \n            <v-list-item \n              tabindex=\"0\"\n              aria-label=\"Show dialog telling about the data\"\n              @click=\"showAboutData = true\"\n              @keyup.enter=\"showAboutData = true\"\n              >\n              About the Data\n            </v-list-item>\n            \n            <v-list-item \n              \n              aria-label=\"Leave Page to Educator Resources\"\n              >\n              <a style=\"font-weight: normal;\" tabindex=\"0\"  href=\"https://www.cosmicds.cfa.harvard.edu/resources/tempo\" target=\"_blank\" rel=\"noopener\">Educator Resources<v-icon>mdi-open-in-new</v-icon></a>\n            </v-list-item>\n            \n            <v-list-item \n              tabindex=\"0\" \n              aria-label=\"Show credits\"\n              @click=\"showCredits = true\"\n              @keyup.enter=\"showCredits = true\"\n              >\n                Credits\n            </v-list-item>\n            \n          </v-list>\n        </v-menu>\n      </v-btn>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from \"vue\";\nimport { storeToRefs } from \"pinia\";\nimport { useDisplay } from \"vuetify\";\nimport { supportsTouchscreen } from \"@cosmicds/vue-toolkit\";\n\nimport { useTempoStore } from \"@/stores/app\";\nimport changes from \"@/changes\";\n\nconst emit = defineEmits<{\n  (event: \"intro-slide\", value: number): void;\n}>();\n\nconst store = useTempoStore();\nconst {\n  accentColor2,\n  shareButtonClickedCount,\n} = storeToRefs(store);\n\nconst display = useDisplay();\n\nconst currentUrl = ref(window.location.href);\nconst showChanges = ref(false);\nconst showAboutData = ref(false);\nconst showCredits = ref(false);\n\nconst touchscreen = supportsTouchscreen();\n\nconst smallSize = computed(() => {\n  return display.smAndDown.value;\n});\n\n\nconst mobile = computed(() => {\n  return smallSize.value && touchscreen;\n});\n\n</script>\n\n<style scoped lang=\"less\">\n#title {\n  color: var(--smithsonian-yellow);\n  font-weight: 600;\n  font-size: 2.5rem;\n  text-align: center;\n  text-wrap: nowrap;\n  flex-grow: 1;\n}\n\na[href=\"https://tempo.si.edu\"]>img {\n  // display: inline;\n  height: 70px !important;\n  width: auto !important;\n}\n\n.header {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  padding: 10px;\n\n  >* {\n    background-color: transparent;\n  }\n\n  >div {\n    outline: 1px solid transparent;\n  }\n\n  #menu-area {\n    display: flex;\n    justify-self: end;\n    gap: 1rem;\n    align-items: center;\n  }\n}\n</style>\n","import script from \"./HeaderBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HeaderBar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HeaderBar.vue?vue&type=style&index=0&id=6ea6b2d8&scoped=true&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6ea6b2d8\"]])\n\nexport default __exports__","import { computed, type Ref } from 'vue';\nimport { toZonedTime, fromZonedTime, format as formatTz, getTimezoneOffset } from 'date-fns-tz';\nimport type { MillisecondRange } from '../types/datetime';\n\nexport type Timezone = \n  \"US/Eastern\" |\n  \"US/Central\" |\n  \"US/Mountain\" |\n  \"US/Arizona\" |\n  \"US/Pacific\" |\n  \"US/Alaska\" |\n  \"UTC\";\n\ntype TimezoneOption = { tz: Timezone, name: string };\n\n/**\n * Composable for centralized timezone handling and formatting\n */\nexport function useTimezone(selectedTimezone: Ref<string>) {\n  \n  /**\n   * Convert UTC timestamp to timezone-aware date\n   */\n  function toTimezone(timestamp: number): Date {\n    const utcDate = new Date(timestamp);\n    return toZonedTime(utcDate, selectedTimezone.value);\n  }\n\n  /**\n   * Convert timezone-aware date to UTC timestamp\n   */\n  function fromTimezone(date: Date): number {\n    return fromZonedTime(date, selectedTimezone.value).getTime();\n  }\n\n  /**\n   * Set date to local midnight in selected timezone\n   */\n  function setToMidnight(date: Date): number {\n    const zonedDate = toZonedTime(date, selectedTimezone.value);\n    zonedDate.setHours(0, 0, 0, 0);\n    return fromZonedTime(zonedDate, selectedTimezone.value).getTime();\n  }\n\n  /**\n   * Set date to end of day in selected timezone\n   */\n  function setToEndOfDay(date: Date): number {\n    const zonedDate = toZonedTime(date, selectedTimezone.value);\n    zonedDate.setHours(23, 59, 59, 999);\n    return fromZonedTime(zonedDate, selectedTimezone.value).getTime();\n  }\n\n  /**\n   * Format timestamp with full date and time\n   */\n  function formatTimeLong(timestamp: number): string {\n    const utcDate = new Date(timestamp);\n    const zonedDate = toZonedTime(utcDate, selectedTimezone.value);\n    return formatTz(zonedDate, 'EEE, MMM d, yyyy \\'at\\' h:mm a', { timeZone: selectedTimezone.value });\n  }\n\n  /**\n   * Format duration with timezone prefix\n   */\n  function formatDuration(range: MillisecondRange): string {\n    const startUtc = new Date(range.start);\n    const endUtc = new Date(range.end);\n    const startZoned = toZonedTime(startUtc, selectedTimezone.value);\n    const endZoned = toZonedTime(endUtc, selectedTimezone.value);\n    \n    const startTime = startZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    const endTime = endZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    \n    return `${selectedTimezone.value}: ${startTime} - ${endTime}`;\n  }\n\n  /**\n   * Format timezone range with date and time\n   */\n  function formatTimezoneRange(range: MillisecondRange): string {\n    const startUtc = new Date(range.start);\n    const endUtc = new Date(range.end);\n    const startZoned = toZonedTime(startUtc, selectedTimezone.value);\n    const endZoned = toZonedTime(endUtc, selectedTimezone.value);\n    \n    const startDate = startZoned.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric' \n    });\n    const startTime = startZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    const endTime = endZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    \n    return `${startDate} ${startTime} - ${endTime}`;\n  }\n\n  /**\n   * Format UTC range\n   */\n  function formatUTCRange(range: MillisecondRange): string {\n    const startUtc = new Date(range.start);\n    const endUtc = new Date(range.end);\n    \n    const startDate = startUtc.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric',\n      timeZone: 'UTC'\n    });\n    const startTime = startUtc.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n      timeZone: 'UTC'\n    });\n    const endTime = endUtc.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n      timeZone: 'UTC'\n    });\n    \n    return `${startDate} ${startTime} - ${endTime}`;\n  }\n\n  /**\n   * Format time string for display\n   */\n  function formatTime(timeString: string): string {\n    const [hour, minute] = timeString.split(':').map(Number);\n    const date = new Date();\n    date.setHours(hour, minute, 0, 0);\n    return date.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n  }\n\n  /**\n   * Format date for display\n   */\n  function formatDateDisplay(date: Date | null): string {\n    return date?.toDateString() || '';\n  }\n\n  // Computed properties for reactive timezone info\n  const timezoneInfo = computed(() => ({\n    name: selectedTimezone.value,\n    offset: new Date().toLocaleString('en', {\n      timeZone: selectedTimezone.value,\n      timeZoneName: 'short'\n    }).split(' ').pop() || ''\n  }));\n\n  function isDST(date: Date): boolean {\n    const standardOffset = getTimezoneOffset(selectedTimezone.value, new Date(date.getUTCFullYear(), 0, 1));\n    const currentOffset = getTimezoneOffset(selectedTimezone.value, date);\n    if (standardOffset === currentOffset) {\n      return false;\n    }\n    return true;\n  }\n\n  function timezoneOptions(date: Date): TimezoneOption[] {\n    const dateIsDST = isDST(date);\n    return [\n      { tz: 'US/Eastern', name: dateIsDST ? 'Eastern Daylight' : 'Eastern Standard' },\n      { tz: 'US/Central', name: dateIsDST ? 'Central Daylight' : 'Central Standard' },\n      { tz: 'US/Mountain', name: dateIsDST ? 'Mountain Daylight' : 'Mountain Standard' },\n      { tz: 'US/Arizona', name: 'Mountain Standard' },\n      { tz: 'US/Pacific', name: dateIsDST ? 'Pacific Daylight' : 'Pacific Standard' },\n      { tz: 'US/Alaska', name: dateIsDST ? 'Alaska Daylight' : 'Alaska Standard' },\n      { tz: 'UTC', name: 'UTC' },\n    ];\n  }\n\n  return {\n    // Core timezone operations\n    toTimezone,\n    fromTimezone,\n    setToMidnight,\n    setToEndOfDay,\n    \n    // Formatting functions\n    formatTimeLong,\n    formatDuration,\n    formatTimezoneRange,\n    formatUTCRange,\n    formatTime,\n    formatDateDisplay,\n\n    // Utility functions\n    isDST,\n    timezoneOptions,\n    \n    // Computed properties\n    timezoneInfo,\n  };\n}\n","import { ref, computed, watch } from 'vue';\nimport type { Ref } from 'vue';\nimport { useTimezone } from './useTimezone';\nimport type { \n  MillisecondRange,\n  TimeRangeSelectionType \n} from '@/types/datetime';\n\ninterface UseDateTimeSelectorOptions {\n  currentDate?: Ref<Date>;\n  selectedTimezone?: Ref<string>;\n}\n\n/**\n * Custom hook for date/time selection with optional configuration\n * @param options - Optional configuration object with currentDate and selectedTimezone refs\n */\nexport function useDateTimeSelector(\n  options: UseDateTimeSelectorOptions = {}\n) {\n  const { currentDate, selectedTimezone: initialTimezone } = options;\n  \n  // Initialize timezone handling\n  const selectedTimezone = initialTimezone || ref<string>(\n    Intl.DateTimeFormat().resolvedOptions().timeZone\n  );\n  \n  const { \n    toTimezone, \n    fromTimezone, \n    setToMidnight, \n    setToEndOfDay,\n    formatTime \n  } = useTimezone(selectedTimezone);\n  \n  // Extend selection type locally to include 'singledate' and 'pattern' without altering global type\n  const selectionType = ref<TimeRangeSelectionType>('weekday');\n  \n  // Weekday selection state\n  const selectedDayOfWeek = ref<number>(1); // Default to Monday\n  const selectedTime = ref<string>('09:00');\n  const instancesBack = ref<number>(4);\n  const timePlusMinus = ref<number>(1); // +/- 1 hour for hour selection\n  // Pattern selection state (multi-day and multi-time)\n  const selectedDays = ref<number[]>([1, 2, 3, 4, 5]); // Default Mon-Fri\n  const selectedTimes = ref<string[]>(['12:00']); // Default 9 AM\n  \n  // Track if user has manually set the weekday start date\n  const hasManualWeekdayStartDate = ref<boolean>(false);\n\n  // Initialize weekdayStartDateTimestamp from currentDate option if provided\n  const weekdayStartDateTimestamp = ref<number>(\n    currentDate?.value?.getTime() || new Date().getTime()\n  );\n  const startDate = ref<number>(0);\n  const endDate = ref<number>(0);\n  \n  // Computed properties for date picker integration (convert timestamps to/from date objects)\n  const weekdayStartDate = computed({\n    get: () => {\n      if (hasManualWeekdayStartDate.value && weekdayStartDateTimestamp.value > 0) {\n        return new Date(weekdayStartDateTimestamp.value).toISOString().split('T')[0];\n      }\n      return new Date(weekdayStartDateTimestamp.value).toISOString().split('T')[0];\n    },\n    set: (value: string) => {\n      const date = new Date(value + 'T00:00:00');\n      setWeekdayStartTimestamp(date.getTime());\n    }\n  });\n  \n  const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n  \n  // New methods for direct timestamp manipulation\n  function setWeekdayStartTimestamp(timestamp: number): void {\n    weekdayStartDateTimestamp.value = timestamp;\n    hasManualWeekdayStartDate.value = timestamp > 0;\n  }\n  \n  // Generate millisecond ranges\n  function generateMillisecondRanges(): MillisecondRange[] {\n    if (selectionType.value === 'weekday') {\n      return generateWeekdayRanges();\n    } else if (selectionType.value === 'pattern') {\n      return generatePatternRanges();\n    } else if (selectionType.value === 'singledate') {\n      return generateSingleDateRange();\n    } else {\n      return generateDateRangeRanges();\n    }\n  }\n  \n  // Parse time string into hour and minute\n  const parsedTime = computed(() => {\n    const [hour, minute] = selectedTime.value.split(':').map(Number);\n    return { hour, minute };\n  });\n  \n  function generateWeekdayRanges(): MillisecondRange[] {\n    // Determine base timestamp: use manual timestamp if set, otherwise current date\n    const baseTimestamp = hasManualWeekdayStartDate.value && weekdayStartDateTimestamp.value > 0\n      ? weekdayStartDateTimestamp.value\n      : weekdayStartDateTimestamp.value;\n    \n    // Create timezone-aware date for calculations  \n    const baseDate = toTimezone(baseTimestamp);\n    \n    const targetDayOfWeek = selectedDayOfWeek.value;\n    \n    // Find the target day occurrence - use baseDate if it already matches, otherwise find the most recent occurrence\n    const currentDate = new Date(baseDate);\n    \n    const currentDay= currentDate.getDay();\n    const daysDifference = (currentDay - targetDayOfWeek + 7) % 7;\n    if (daysDifference !== 0) {\n      currentDate.setDate(currentDate.getDate() - daysDifference);\n    }\n    \n    // Generate ranges for the specified number of instances back\n    const ranges = Array.from({ length: instancesBack.value }, (_, i) => {\n      const rangeDate = new Date(currentDate);\n      rangeDate.setDate(currentDate.getDate() - (i * 7)); // Go back by weeks\n      \n      // Set the specific time\n      rangeDate.setHours(parsedTime.value.hour, parsedTime.value.minute, 0, 0);\n      \n      // Convert to UTC timestamp for the API\n      const startTime = fromTimezone(rangeDate);\n      const endTime = startTime + (timePlusMinus.value * 60 * 60 * 1000); // Add offset\n      \n      return {\n        start: startTime - (timePlusMinus.value * 60 * 60 * 1000), // Subtract offsetr\n        end: endTime\n      };\n    });\n    \n    return ranges.sort((a, b) => - (a.start - b.start));\n  }\n\n  // Generate ranges for pattern mode (multi-day, multi-time) by reusing weekday generator\n  function generatePatternRanges(): MillisecondRange[] {\n    if (selectedDays.value.length === 0 || selectedTimes.value.length === 0) {\n      return [];\n    }\n\n    const originalDay = selectedDayOfWeek.value;\n    const originalTime = selectedTime.value;\n\n    const results: MillisecondRange[] = [];\n    try {\n      for (const day of selectedDays.value) {\n        for (const time of selectedTimes.value) {\n          selectedDayOfWeek.value = day;\n          selectedTime.value = time;\n          results.push(...generateWeekdayRanges());\n        }\n      }\n    } finally {\n      // Restore original selection to avoid side effects\n      selectedDayOfWeek.value = originalDay;\n      selectedTime.value = originalTime;\n    }\n\n    // Sort newest-first and dedupe identical start/end pairs\n    results.sort((a, b) => b.start - a.start);\n    const seen = new Set<string>();\n    const deduped: MillisecondRange[] = [];\n    for (const r of results) {\n      const key = `${r.start}-${r.end}`;\n      if (!seen.has(key)) {\n        seen.add(key);\n        deduped.push(r);\n      }\n    }\n    return deduped;\n  }\n  \n  function generateDateRangeRanges(): MillisecondRange[] {\n    if (startDate.value === 0 || endDate.value === 0) return [];\n    \n    // Use timestamps directly - they should already be set to appropriate times (midnight, end of day, etc.)\n    const startMs = startDate.value;\n    const endMs = endDate.value;\n    \n    return [{\n      start: startMs,\n      end: endMs\n    }];\n  }\n  \n  // Single date (timestamp at timezone-local midnight) state\n  const singleDate = ref<number>(0);\n  \n  function setSingleDateTimestamp(ts: number) {\n    // Normalize to midnight in the selected timezone\n    const midnightTs = setToMidnight(new Date(ts));\n    singleDate.value = midnightTs;\n  }\n  \n  // Initialize singleDate from parent currentDate if not already set\n  if (singleDate.value === 0) {\n    const initialParentTs = currentDate?.value?.getTime();\n    if (initialParentTs) {\n      setSingleDateTimestamp(initialParentTs);\n    }\n  }\n  \n  function generateSingleDateRange(): MillisecondRange[] {\n    if (singleDate.value === 0) return [];\n    const start = singleDate.value;\n    const end = setToEndOfDay(new Date(singleDate.value));\n    return [{ start, end }];\n  }\n\n  // Watch for currentDate changes and update weekdayStartDateTimestamp if not manually set\n  if (currentDate) {\n    watch(currentDate, (newCurrentDate) => {\n      if (!hasManualWeekdayStartDate.value) {\n        weekdayStartDateTimestamp.value = newCurrentDate.getTime();\n      }\n      // If singleDate not manually set yet (still 0), default it from parent\n      if (singleDate.value === 0) {\n        setSingleDateTimestamp(newCurrentDate.getTime());\n      }\n    });\n  }\n  \n  return {\n    // State\n    selectionType,\n    selectedDayOfWeek,\n    selectedTime,\n    instancesBack,\n    dayNames,\n    timePlusMinus,\n    singleDate,\n    selectedDays,\n    selectedTimes,\n    \n    // Computed properties for date picker integration\n    weekdayStartDate,\n    startDate,\n    endDate,\n    \n    // New timestamp methods\n    setWeekdayStartTimestamp,\n    setStartTimestamp: (timestamp: number) => { startDate.value = timestamp; },\n    setEndTimestamp: (timestamp: number) => { endDate.value = timestamp; },\n    setSingleDateTimestamp,\n    \n    // Timezone utilities\n    setToMidnight,\n    setToEndOfDay,\n    \n    // Utilities\n    generateMillisecondRanges,\n    formatTime,\n    generateSingleDateRange,\n    generatePatternRanges\n  };\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, isRef as _isRef, withCtx as _withCtx, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, vModelCheckbox as _vModelCheckbox, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"weekday-pattern-section\"\n}\nconst _hoisted_2 = { class: \"mb-4\" }\nconst _hoisted_3 = { class: \"mb-4\" }\nconst _hoisted_4 = { class: \"mb-4\" }\nconst _hoisted_5 = { class: \"d-flex align-center ga-2\" }\nconst _hoisted_6 = { class: \"mb-4\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"date-range-section\"\n}\nconst _hoisted_8 = { class: \"mb-4\" }\nconst _hoisted_9 = { class: \"mb-4\" }\nconst _hoisted_10 = {\n  key: 0,\n  class: \"pattern-section\"\n}\nconst _hoisted_11 = { class: \"mb-4\" }\nconst _hoisted_12 = [\"value\"]\nconst _hoisted_13 = { class: \"ml-1\" }\nconst _hoisted_14 = { class: \"mb-4\" }\nconst _hoisted_15 = { class: \"mt-2\" }\nconst _hoisted_16 = { class: \"mb-4\" }\nconst _hoisted_17 = {\n  key: 0,\n  class: \"single-date-section\"\n}\nconst _hoisted_18 = { class: \"mb-4\" }\n\nimport { watch, computed, ref, onMounted } from 'vue';\nimport DatePicker from '@vuepic/vue-datepicker';\nimport '@vuepic/vue-datepicker/dist/main.css';\nimport { useTimezone } from '../composables/useTimezone';\nimport { useDateTimeSelector } from './useDateTimeSelector';\nimport type { MillisecondRange, TimeRangeSelectionType } from '../types/datetime';\n\n// === INTERFACES === \n// === PROPS ===\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'DateTimeRangeSelection',\n  props: {\n    currentDate: {},\n    selectedTimezone: {},\n    defaultStartDate: {},\n    defaultEndDate: {},\n    allowedDates: {},\n    validTimes: {}\n  },\n  emits: [\"ranges-change\"],\n  setup(__props: any, { emit: __emit }) {\n\n// === IMPORTS ===\nconst props = __props;\n\n// === EMITS ===\nconst emit = __emit;\n\n// === COMPOSABLE SETUP ===\n// Create refs for the current date and timezone to pass to the composable\nconst currentDateRef = ref(props.currentDate);\nconst timezoneRef = ref(props.selectedTimezone);\n\n// Initialize timezone handling\nconst { setToMidnight, setToEndOfDay, formatDateDisplay } = useTimezone(timezoneRef);\n\n// Initialize the datetime selector composable with optional parameters\nconst {\n  selectionType,\n  selectedDayOfWeek,\n  selectedTime,\n  instancesBack,\n  timePlusMinus,\n  weekdayStartDate,\n  startDate,\n  endDate,\n  setWeekdayStartTimestamp,\n  setStartTimestamp: setStartTimestampInternal,\n  setEndTimestamp: setEndTimestampInternal,\n  dayNames,\n  generateMillisecondRanges,\n  // single date additions\n  singleDate,\n  setSingleDateTimestamp,\n  generateSingleDateRange,\n  // pattern additions\n  selectedDays,\n  selectedTimes,\n  generatePatternRanges\n} = useDateTimeSelector({\n  currentDate: currentDateRef,\n  selectedTimezone: timezoneRef\n});\n\n// === REFS ===\nconst weekdayCalendar = ref();\nconst startDateCalendar = ref();\nconst endDateCalendar = ref();\nconst singleDateCalendar = ref();\n\n// === PICKER STATE ===\n// Direct date objects for date pickers - no unnecessary timestamp conversion\nconst weekdayStartDateObj = ref<Date | null>(null);\nconst startDateObj = ref<Date | null>(null);\nconst endDateObj = ref<Date | null>(null);\nconst singleDateObj = ref<Date | null>(null);\n\n// Pre-populated time options (every hour from 6am-9pm; user can add custom HH:MM)\nconst timeOptions = ref<string[]>(Array.from({ length: 15 }, (_, h) => `${String(h+6).padStart(2, '0')}:00`));\n// // Compute available time options based on min/max hour in allowedDates in the selected timezone\n// causes a bit a performance degredation and offers 6-9pm for all data, so hard cord it. \n// a better range would be from 9am - 5pm\n// const minMaxHours = computed(() => {\n//   const dates = props.validTimes ?? [];\n//   if (dates.length === 0) return { min: 0, max: 23 };\n//   const hours = dates.map(d => {\n//     return toTimezone(d).getHours();\n//   });\n//   const min = Math.min(...hours);\n//   const max = Math.max(...hours);\n//   return { min, max };\n// });\n\n// const timeOptions = computed<string[]>(() => {\n//   const { min, max } = minMaxHours.value;\n//   const count = max - min + 1;\n//   const hours = count > 0 ? Array.from({ length: count }, (_, i) => min + i) : Array.from({ length: 24 }, (_, i) => i);\n//   return hours.map(h => `${String(h).padStart(2, '0')}:00`);\n// });\n\n// Day options for v-select\nconst dayOptions = computed(() => \n  dayNames.map((day, index) => ({ title: day, value: index }))\n);\n\n// Generate ranges for visualization\n// const ranges = computed(() => {\n//   return generateMillisecondRanges();\n// });\n\n// Validation rules\nconst instanceRules = computed(() => [\n  (v: number) => v >= 1 && v <= 104 || 'Must be between 1 and 104 (2 years)'\n]);\n\n// === METHODS ===\n// Update custom range button handler\nfunction updateCustomRange() {\n  let currentRanges: MillisecondRange[] = [];\n  if (selectionType.value === 'singledate') {\n    currentRanges = generateSingleDateRange();\n  } else if (selectionType.value === 'pattern') {\n    currentRanges = generatePatternRanges();\n  } else {\n    currentRanges = generateMillisecondRanges();\n  }\n  emit('ranges-change', currentRanges, selectionType.value);\n}\n\n// Date change handlers\nfunction handleWeekdayDateChange(value: Date) {\n  if (value != null) {\n    if (value.getTime() !== weekdayStartDateObj.value?.getTime()) {\n      weekdayStartDateObj.value = value;\n      // Update composable state directly\n      setWeekdayStartTimestamp(value.getTime());\n      weekdayCalendar.value?.closeMenu();\n    }\n  }\n}\n\nfunction handleStartDateChange(value: Date) {\n  if (value != null) {\n    if (value.getTime() !== startDateObj.value?.getTime()) {\n      startDateObj.value = value;\n      // Convert to timestamp and update composable\n      const timestamp = setToMidnight(value);\n      setStartTimestampInternal(timestamp);\n      startDateCalendar.value?.closeMenu();\n    }\n  }\n}\n\nfunction handleEndDateChange(value: Date) {\n  if (value != null) {\n    if (value.getTime() !== endDateObj.value?.getTime()) {\n      endDateObj.value = value;\n      // Convert to timestamp and update composable\n      const timestamp = setToEndOfDay(value);\n      setEndTimestampInternal(timestamp);\n      endDateCalendar.value?.closeMenu();\n    }\n  }\n}\n\nfunction handleSingleDateChange(value: Date) {\n  if (value && value.getTime() !== singleDateObj.value?.getTime()) {\n    singleDateObj.value = value;\n    setSingleDateTimestamp(value.getTime());\n    singleDateCalendar.value?.closeMenu();\n  }\n}\n\n// Normalize entered times to HH:MM 24h (flexible entry via copilot)\nfunction normalizeTimes(values: string[]) {\n  const normalized = values\n    .map(v => String(v).trim())\n    .map(v => {\n      // Accept HH, H, HH:MM, H:MM, also allow am/pm inputs like 9am, 2:30 PM\n      const lower = v.toLowerCase().replace(/\\s+/g, '');\n      const ampmMatch = lower.match(/^(\\d{1,2})(?::(\\d{1,2}))?(am|pm)$/);\n      if (ampmMatch) {\n        let hour = parseInt(ampmMatch[1], 10);\n        const minute = ampmMatch[2] ? parseInt(ampmMatch[2], 10) : 0;\n        const suffix = ampmMatch[3];\n        if (suffix === 'pm' && hour < 12) hour += 12;\n        if (suffix === 'am' && hour === 12) hour = 0;\n        return `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;\n      }\n      const m = lower.match(/^(\\d{1,2})(?::(\\d{1,2}))?$/);\n      if (!m) return null;\n      const h = parseInt(m[1], 10);\n      const mm = m[2] ? parseInt(m[2], 10) : 0;\n      if (isNaN(h) || h < 0 || h > 23) return null;\n      if (isNaN(mm) || mm < 0 || mm > 59) return null;\n      return `${String(h).padStart(2, '0')}:${String(mm).padStart(2, '0')}`;\n    })\n    .filter((v): v is string => !!v);\n  // Deduplicate\n  const unique = Array.from(new Set(normalized));\n  selectedTimes.value = unique;\n}\n\n// Formatting functions\n// Formatting functions moved to useTimezone composable\n\n// === LIFECYCLE HOOKS ===\nonMounted(() => {\n  // Initialize default dates\n  if (props.defaultStartDate) {\n    startDateObj.value = props.defaultStartDate;\n    const timestamp = setToMidnight(props.defaultStartDate);\n    setStartTimestampInternal(timestamp);\n  }\n  if (props.defaultEndDate) {\n    endDateObj.value = props.defaultEndDate;\n    const timestamp = setToEndOfDay(props.defaultEndDate);\n    setEndTimestampInternal(timestamp);\n  } else {\n    // Default end date to today\n    const today = new Date();\n    endDateObj.value = today;\n    const timestamp = setToEndOfDay(today);\n    setEndTimestampInternal(timestamp);\n  }\n  \n  // Initialize weekday start date\n  if (weekdayStartDate.value) {\n    weekdayStartDateObj.value = new Date(weekdayStartDate.value + 'T00:00:00');\n  }\n\n  if (singleDate.value > 0 && !singleDateObj.value) {\n    singleDateObj.value = new Date(singleDate.value);\n  }\n});\n\n// === WATCHERS ===\n// Watch for prop changes and update refs\nwatch(() => props.currentDate, (newDate) => {\n  currentDateRef.value = newDate;\n});\n\nwatch(() => props.selectedTimezone, (newTimezone) => {\n  timezoneRef.value = newTimezone;\n});\n\n// Keep weekdayStartDateObj in sync with the composable's weekdayStartDate\nwatch(() => weekdayStartDate.value, (newDateString) => {\n  const newDate = newDateString ? new Date(newDateString + 'T00:00:00') : null;\n  if (newDate?.getTime() !== weekdayStartDateObj.value?.getTime()) {\n    weekdayStartDateObj.value = newDate;\n  }\n});\n\n// Keep singleDateObj in sync with the composable's singleDate\nwatch(() => singleDate.value, (newTs) => {\n  if (newTs > 0) {\n    const newDate = new Date(newTs);\n    if (newDate.getTime() !== singleDateObj.value?.getTime()) {\n      singleDateObj.value = newDate;\n    }\n  } else {\n    singleDateObj.value = null;\n  }\n});\n\n// Sync date objects with composable timestamps (one-way: composable  UI)\nwatch(() => startDate.value, (newTimestamp) => {\n  const newDate = newTimestamp > 0 ? new Date(newTimestamp) : null;\n  if (newDate?.getTime() !== startDateObj.value?.getTime()) {\n    startDateObj.value = newDate;\n  }\n});\n\nwatch(() => endDate.value, (newTimestamp) => {\n  const newDate = newTimestamp > 0 ? new Date(newTimestamp) : null;\n  if (newDate?.getTime() !== endDateObj.value?.getTime()) {\n    endDateObj.value = newDate;\n  }\n});\n\n// Ranges are now only emitted when the Update Custom Range button is clicked\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_radio = _resolveComponent(\"v-radio\")!\n  const _component_v_radio_group = _resolveComponent(\"v-radio-group\")!\n  const _component_v_select = _resolveComponent(\"v-select\")!\n  const _component_v_chip = _resolveComponent(\"v-chip\")!\n  const _component_v_number_input = _resolveComponent(\"v-number-input\")!\n  const _component_v_expand_transition = _resolveComponent(\"v-expand-transition\")!\n  const _component_v_combobox = _resolveComponent(\"v-combobox\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n\n  return (_openBlock(), _createBlock(_component_v_card, {\n    class: \"datetime-range-selector\",\n    elevation: \"2\"\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_card_text, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_radio_group, {\n            modelValue: _unref(selectionType),\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(selectionType) ? (selectionType).value = $event : null)),\n            row: \"\",\n            density: \"compact\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_radio, {\n                label: \"Single Date\",\n                value: \"singledate\",\n                density: \"compact\"\n              }),\n              _createVNode(_component_v_radio, {\n                label: \"Date Range\",\n                value: \"daterange\",\n                density: \"compact\"\n              }),\n              _createVNode(_component_v_radio, {\n                label: \"Weekday Pattern\",\n                value: \"weekday\",\n                density: \"compact\"\n              }),\n              _createVNode(_component_v_radio, {\n                label: \"Pattern (Days  Times)\",\n                value: \"pattern\",\n                density: \"compact\"\n              })\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"]),\n          _createVNode(_component_v_expand_transition, null, {\n            default: _withCtx(() => [\n              (_unref(selectionType) === 'weekday')\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", _hoisted_2, [\n                      _cache[9] || (_cache[9] = _createElementVNode(\"label\", { class: \"text-subtitle-2 mb-2 d-block\" }, \"Reference Date\", -1)),\n                      _createVNode(_unref(DatePicker), {\n                        ref_key: \"weekdayCalendar\",\n                        ref: weekdayCalendar,\n                        \"model-value\": weekdayStartDateObj.value,\n                        onInternalModelChange: handleWeekdayDateChange,\n                        \"allowed-dates\": _ctx.allowedDates,\n                        format: _unref(formatDateDisplay),\n                        \"preview-format\": _unref(formatDateDisplay),\n                        clearable: false,\n                        \"text-input\": \"\",\n                        teleport: true,\n                        dark: \"\",\n                        \"year-range\": [_ctx.allowedDates ? _ctx.allowedDates[0].getFullYear() : 2023, _ctx.allowedDates ? _ctx.allowedDates[_ctx.allowedDates.length - 1].getFullYear() : new Date().getFullYear()]\n                      }, null, 8, [\"model-value\", \"allowed-dates\", \"format\", \"preview-format\", \"year-range\"])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                      _createVNode(_component_v_select, {\n                        modelValue: _unref(selectedDayOfWeek),\n                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => (_isRef(selectedDayOfWeek) ? (selectedDayOfWeek).value = $event : null)),\n                        items: dayOptions.value,\n                        label: \"Day of Week\",\n                        \"prepend-inner-icon\": \"mdi-calendar-week\",\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"hide-details\": \"\"\n                      }, null, 8, [\"modelValue\", \"items\"])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                      _cache[10] || (_cache[10] = _createElementVNode(\"label\", { class: \"text-subtitle-2 mb-2 d-block\" }, \"Time\", -1)),\n                      _createElementVNode(\"div\", _hoisted_5, [\n                        _withDirectives(_createElementVNode(\"input\", {\n                          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => (_isRef(selectedTime) ? (selectedTime).value = $event : null)),\n                          type: \"time\",\n                          class: \"time-input\"\n                        }, null, 512), [\n                          [_vModelText, _unref(selectedTime)]\n                        ]),\n                        _createVNode(_component_v_chip, {\n                          size: \"small\",\n                          color: \"primary\",\n                          variant: \"tonal\"\n                        }, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(_ctx.selectedTimezone), 1)\n                          ]),\n                          _: 1\n                        }),\n                        _withDirectives(_createElementVNode(\"input\", {\n                          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => (_isRef(timePlusMinus) ? (timePlusMinus).value = $event : null)),\n                          type: \"number\",\n                          min: \"-12\",\n                          max: \"12\",\n                          step: \"0.5\",\n                          class: \"time-input\",\n                          style: {\"width\":\"80px\"},\n                          placeholder: \" hours\"\n                        }, null, 512), [\n                          [_vModelText, _unref(timePlusMinus)]\n                        ])\n                      ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                      _createVNode(_component_v_number_input, {\n                        modelValue: _unref(instancesBack),\n                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => (_isRef(instancesBack) ? (instancesBack).value = $event : null)),\n                        label: \"Number of Instances\",\n                        rules: instanceRules.value,\n                        min: 1,\n                        max: 104,\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"control-variant\": \"split\"\n                      }, null, 8, [\"modelValue\", \"rules\"])\n                    ])\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_expand_transition, null, {\n            default: _withCtx(() => [\n              (_unref(selectionType) === 'daterange')\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                    _createElementVNode(\"div\", _hoisted_8, [\n                      _cache[11] || (_cache[11] = _createElementVNode(\"label\", { class: \"text-subtitle-2 mb-2 d-block\" }, \"Start Date\", -1)),\n                      _createVNode(_unref(DatePicker), {\n                        ref_key: \"startDateCalendar\",\n                        ref: startDateCalendar,\n                        \"model-value\": startDateObj.value,\n                        onInternalModelChange: handleStartDateChange,\n                        \"allowed-dates\": _ctx.allowedDates,\n                        \"max-date\": endDateObj.value ?? new Date(),\n                        format: _unref(formatDateDisplay),\n                        \"preview-format\": _unref(formatDateDisplay),\n                        \"text-input\": \"\",\n                        teleport: true,\n                        dark: \"\",\n                        \"year-range\": [_ctx.allowedDates ? _ctx.allowedDates[0].getFullYear() : 2023, _ctx.allowedDates ? _ctx.allowedDates[_ctx.allowedDates.length - 1].getFullYear() : new Date().getFullYear()]\n                      }, null, 8, [\"model-value\", \"allowed-dates\", \"max-date\", \"format\", \"preview-format\", \"year-range\"])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_9, [\n                      _cache[12] || (_cache[12] = _createElementVNode(\"label\", { class: \"text-subtitle-2 mb-2 d-block\" }, \"End Date\", -1)),\n                      _createVNode(_unref(DatePicker), {\n                        ref_key: \"endDateCalendar\",\n                        ref: endDateCalendar,\n                        \"model-value\": endDateObj.value,\n                        onInternalModelChange: handleEndDateChange,\n                        \"allowed-dates\": _ctx.allowedDates,\n                        \"min-date\": startDateObj.value ?? new Date(0),\n                        format: _unref(formatDateDisplay),\n                        \"preview-format\": _unref(formatDateDisplay),\n                        \"text-input\": \"\",\n                        teleport: true,\n                        dark: \"\",\n                        \"year-range\": [_ctx.allowedDates ? _ctx.allowedDates[0].getFullYear() : 2023, _ctx.allowedDates ? _ctx.allowedDates[_ctx.allowedDates.length - 1].getFullYear() : new Date().getFullYear()]\n                      }, null, 8, [\"model-value\", \"allowed-dates\", \"min-date\", \"format\", \"preview-format\", \"year-range\"])\n                    ])\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_expand_transition, null, {\n            default: _withCtx(() => [\n              (_unref(selectionType) === 'pattern')\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                    _createElementVNode(\"div\", _hoisted_11, [\n                      _cache[13] || (_cache[13] = _createElementVNode(\"label\", { class: \"text-subtitle-2 mb-2 d-block\" }, \"Days of Week\", -1)),\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(dayOptions.value, (day, idx) => {\n                        return (_openBlock(), _createElementBlock(\"label\", {\n                          key: idx,\n                          class: \"mr-3\",\n                          style: {\"text-wrap\":\"nowrap\"}\n                        }, [\n                          _withDirectives(_createElementVNode(\"input\", {\n                            type: \"checkbox\",\n                            value: day.value,\n                            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => (_isRef(selectedDays) ? (selectedDays).value = $event : null))\n                          }, null, 8, _hoisted_12), [\n                            [_vModelCheckbox, _unref(selectedDays)]\n                          ]),\n                          _createElementVNode(\"span\", _hoisted_13, _toDisplayString(day.title.slice(0,3)), 1)\n                        ]))\n                      }), 128))\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_14, [\n                      _cache[15] || (_cache[15] = _createElementVNode(\"label\", { class: \"text-subtitle-2 mb-2 d-block\" }, \"Times\", -1)),\n                      _createVNode(_component_v_combobox, {\n                        modelValue: _unref(selectedTimes),\n                        \"onUpdate:modelValue\": [\n                          _cache[6] || (_cache[6] = ($event: any) => (_isRef(selectedTimes) ? (selectedTimes).value = $event : null)),\n                          normalizeTimes\n                        ],\n                        items: timeOptions.value,\n                        label: \"Add/select times\",\n                        multiple: \"\",\n                        chips: \"\",\n                        \"closable-chips\": \"\",\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"hide-details\": \"\",\n                        hint: \"24h format HH:MM (e.g., 09:00, 14:30)\",\n                        \"persistent-hint\": \"\"\n                      }, null, 8, [\"modelValue\", \"items\"]),\n                      _createElementVNode(\"div\", _hoisted_15, [\n                        _createVNode(_component_v_chip, {\n                          size: \"small\",\n                          color: \"primary\",\n                          variant: \"tonal\"\n                        }, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(_ctx.selectedTimezone), 1)\n                          ]),\n                          _: 1\n                        }),\n                        _cache[14] || (_cache[14] = _createElementVNode(\"span\", { class: \"ml-2 text-caption\" }, \" hours\", -1)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                          \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => (_isRef(timePlusMinus) ? (timePlusMinus).value = $event : null)),\n                          type: \"number\",\n                          min: \"-12\",\n                          max: \"12\",\n                          step: \"0.5\",\n                          class: \"time-input\",\n                          style: {\"width\":\"80px\"},\n                          placeholder: \" hours\"\n                        }, null, 512), [\n                          [_vModelText, _unref(timePlusMinus)]\n                        ])\n                      ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_16, [\n                      _createVNode(_component_v_number_input, {\n                        modelValue: _unref(instancesBack),\n                        \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => (_isRef(instancesBack) ? (instancesBack).value = $event : null)),\n                        label: \"Number of Instances\",\n                        rules: instanceRules.value,\n                        min: 1,\n                        max: 104,\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"control-variant\": \"split\"\n                      }, null, 8, [\"modelValue\", \"rules\"])\n                    ])\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_expand_transition, null, {\n            default: _withCtx(() => [\n              (_unref(selectionType) === 'singledate')\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [\n                    _createElementVNode(\"div\", _hoisted_18, [\n                      _cache[16] || (_cache[16] = _createElementVNode(\"label\", { class: \"text-subtitle-2 mb-2 d-block\" }, \"Date\", -1)),\n                      _createVNode(_unref(DatePicker), {\n                        ref_key: \"singleDateCalendar\",\n                        ref: singleDateCalendar,\n                        \"model-value\": singleDateObj.value,\n                        onInternalModelChange: handleSingleDateChange,\n                        \"allowed-dates\": _ctx.allowedDates,\n                        format: _unref(formatDateDisplay),\n                        \"preview-format\": _unref(formatDateDisplay),\n                        clearable: false,\n                        \"text-input\": \"\",\n                        teleport: true,\n                        dark: \"\",\n                        \"year-range\": [_ctx.allowedDates ? _ctx.allowedDates[0].getFullYear() : 2023, _ctx.allowedDates ? _ctx.allowedDates[_ctx.allowedDates.length - 1].getFullYear() : new Date().getFullYear()]\n                      }, null, 8, [\"model-value\", \"allowed-dates\", \"format\", \"preview-format\", \"year-range\"])\n                    ])\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_btn, {\n            color: \"primary\",\n            variant: \"elevated\",\n            class: \"mb-4\",\n            onClick: updateCustomRange\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_icon, { class: \"mr-2\" }, {\n                default: _withCtx(() => [...(_cache[17] || (_cache[17] = [\n                  _createTextVNode(\"mdi-update\", -1)\n                ]))]),\n                _: 1\n              }),\n              _cache[18] || (_cache[18] = _createTextVNode(\" Confirm Selection \", -1))\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n  <v-card class=\"datetime-range-selector\" elevation=\"2\">\n\n    <v-card-text>\n      <!-- Selection Type Radio Buttons -->\n      <v-radio-group \n        v-model=\"selectionType\" \n        row \n        density=\"compact\"\n      >\n        <v-radio \n          label=\"Single Date\" \n            value=\"singledate\"\n          density=\"compact\"\n        />    \n        <v-radio \n          label=\"Date Range\" \n          value=\"daterange\"\n          density=\"compact\"\n        />\n        <v-radio \n          label=\"Weekday Pattern\" \n          value=\"weekday\"\n          density=\"compact\"\n        />\n        <v-radio \n          label=\"Pattern (Days  Times)\" \n          value=\"pattern\"\n          density=\"compact\"\n        />\n      </v-radio-group>\n\n      <!-- Weekday Pattern Section -->\n      <v-expand-transition>\n        <div v-if=\"selectionType === 'weekday'\" class=\"weekday-pattern-section\">\n          <!-- Reference Date -->\n          <div class=\"mb-4\">\n            <label class=\"text-subtitle-2 mb-2 d-block\">Reference Date</label>\n            <date-picker\n              ref=\"weekdayCalendar\"\n              :model-value=\"weekdayStartDateObj\"\n              @internal-model-change=\"handleWeekdayDateChange\"\n              :allowed-dates=\"allowedDates\"\n              :format=\"formatDateDisplay\"\n              :preview-format=\"formatDateDisplay\"\n              :clearable=\"false\"\n              text-input\n              :teleport=\"true\"\n              dark\n              :year-range=\"[allowedDates ? allowedDates[0].getFullYear() : 2023, allowedDates ? allowedDates[allowedDates.length - 1].getFullYear() : new Date().getFullYear()]\"\n            />\n          </div>\n\n          <!-- Day of Week Selection -->\n          <div class=\"mb-4\">\n            <v-select\n              v-model=\"selectedDayOfWeek\"\n              :items=\"dayOptions\"\n              label=\"Day of Week\"\n              prepend-inner-icon=\"mdi-calendar-week\"\n              density=\"compact\"\n              variant=\"outlined\"\n              hide-details\n            />\n          </div>\n\n          <!-- Time Selection -->\n          <div class=\"mb-4\">\n            <label class=\"text-subtitle-2 mb-2 d-block\">Time</label>\n            <div class=\"d-flex align-center ga-2\">\n              <input\n                v-model=\"selectedTime\"\n                type=\"time\"\n                class=\"time-input\"\n              />\n              <v-chip size=\"small\" color=\"primary\" variant=\"tonal\">\n                {{ selectedTimezone }}\n              </v-chip>\n              <!-- add time plus minus number input. use +- icon and should step in .5 hour increments -->\n              \n              <input \n                v-model=\"timePlusMinus\"\n                type=\"number\"\n                min=\"-12\"\n                max=\"12\"\n                step=\"0.5\"\n                class=\"time-input\"\n                style=\"width: 80px;\"\n                placeholder=\" hours\"\n              />\n            </div>\n          </div>\n\n          <!-- Number of Instances -->\n          <div class=\"mb-4\">\n            <v-number-input\n              v-model=\"instancesBack\"\n              label=\"Number of Instances\"\n              :rules=\"instanceRules\"\n              :min=\"1\"\n              :max=\"104\"\n              density=\"compact\"\n              variant=\"outlined\"\n              control-variant=\"split\"\n            />\n          </div>\n        </div>\n      </v-expand-transition>\n\n      <!-- Date Range Section -->\n      <v-expand-transition>\n        <div v-if=\"selectionType === 'daterange'\" class=\"date-range-section\">\n          <!-- Start Date -->\n          <div class=\"mb-4\">\n            <label class=\"text-subtitle-2 mb-2 d-block\">Start Date</label>\n            <date-picker\n              ref=\"startDateCalendar\"\n              :model-value=\"startDateObj\"\n              @internal-model-change=\"handleStartDateChange\"\n              :allowed-dates=\"allowedDates\"\n              :max-date=\"endDateObj ?? new Date()\"\n              :format=\"formatDateDisplay\"\n              :preview-format=\"formatDateDisplay\"\n              text-input\n              :teleport=\"true\"\n              dark\n              :year-range=\"[allowedDates ? allowedDates[0].getFullYear() : 2023, allowedDates ? allowedDates[allowedDates.length - 1].getFullYear() : new Date().getFullYear()]\"\n            />\n          </div>\n\n          <!-- End Date -->\n          <div class=\"mb-4\">\n            <label class=\"text-subtitle-2 mb-2 d-block\">End Date</label>\n            <date-picker\n              ref=\"endDateCalendar\"\n              :model-value=\"endDateObj\"\n              @internal-model-change=\"handleEndDateChange\"\n              :allowed-dates=\"allowedDates\"\n              :min-date=\"startDateObj ?? new Date(0)\"\n              :format=\"formatDateDisplay\"\n              :preview-format=\"formatDateDisplay\"\n              text-input\n              :teleport=\"true\"\n              dark\n              :year-range=\"[allowedDates ? allowedDates[0].getFullYear() : 2023, allowedDates ? allowedDates[allowedDates.length - 1].getFullYear() : new Date().getFullYear()]\"\n            />\n          </div>\n        </div>\n      </v-expand-transition>\n\n      <!-- Pattern Section (Multi-day, Multi-time) -->\n      <v-expand-transition>\n        <div v-if=\"selectionType === 'pattern'\" class=\"pattern-section\">\n          <!-- Days of Week Multi-toggle -->\n          <div class=\"mb-4\">\n            <label class=\"text-subtitle-2 mb-2 d-block\">Days of Week</label>\n            <!-- <v-btn-toggle\n              v-model=\"selectedDays\"\n              multiple\n              density=\"compact\"\n              class=\"\"\n            >\n              <v-btn\n                v-for=\"(day, idx) in dayOptions\"\n                :key=\"idx\"\n                :value=\"day.value\"\n                variant=\"tonal\"\n                size=\"small\"\n              >{{ day.title.slice(0,1) }}</v-btn>\n            </v-btn-toggle> -->\n            <!-- just do labeled checkboxes -->\n            <label v-for=\"(day, idx) in dayOptions\" :key=\"idx\" class=\"mr-3\" style=\"text-wrap: nowrap;\">\n              <input \n                type=\"checkbox\" \n                :value=\"day.value\" \n                v-model=\"selectedDays\" \n              />\n              <span class=\"ml-1\">{{ day.title.slice(0,3) }}</span>\n            </label>\n          </div>\n\n          <!-- Times Multi-select -->\n          <div class=\"mb-4\">\n            <label class=\"text-subtitle-2 mb-2 d-block\">Times</label>\n            <v-combobox\n              v-model=\"selectedTimes\"\n              :items=\"timeOptions\"\n              label=\"Add/select times\"\n              multiple\n              chips\n              closable-chips\n              density=\"compact\"\n              variant=\"outlined\"\n              hide-details\n              hint=\"24h format HH:MM (e.g., 09:00, 14:30)\"\n              persistent-hint\n              @update:model-value=\"normalizeTimes\"\n            />\n            <div class=\"mt-2\">\n              <v-chip size=\"small\" color=\"primary\" variant=\"tonal\">\n                {{ selectedTimezone }}\n              </v-chip>\n              <span class=\"ml-2 text-caption\"> hours</span>\n              <input \n                v-model=\"timePlusMinus\"\n                type=\"number\"\n                min=\"-12\"\n                max=\"12\"\n                step=\"0.5\"\n                class=\"time-input\"\n                style=\"width: 80px;\"\n                placeholder=\" hours\"\n              />\n            </div>\n          </div>\n\n          <!-- Instances -->\n          <div class=\"mb-4\">\n            <v-number-input\n              v-model=\"instancesBack\"\n              label=\"Number of Instances\"\n              :rules=\"instanceRules\"\n              :min=\"1\"\n              :max=\"104\"\n              density=\"compact\"\n              variant=\"outlined\"\n              control-variant=\"split\"\n            />\n          </div>\n        </div>\n      </v-expand-transition>\n\n      <!-- Single Date Section -->\n      <v-expand-transition>\n        <div v-if=\"selectionType === 'singledate'\" class=\"single-date-section\">\n          <div class=\"mb-4\">\n            <label class=\"text-subtitle-2 mb-2 d-block\">Date</label>\n            <date-picker\n              ref=\"singleDateCalendar\"\n              :model-value=\"singleDateObj\"\n              @internal-model-change=\"handleSingleDateChange\"\n              :allowed-dates=\"allowedDates\"\n              :format=\"formatDateDisplay\"\n              :preview-format=\"formatDateDisplay\"\n              :clearable=\"false\"\n              text-input\n              :teleport=\"true\"\n              dark\n              :year-range=\"[allowedDates ? allowedDates[0].getFullYear() : 2023, allowedDates ? allowedDates[allowedDates.length - 1].getFullYear() : new Date().getFullYear()]\"\n            />\n          </div>\n        </div>\n      </v-expand-transition>\n\n      <!-- Update Custom Range Button -->\n      <v-btn\n        color=\"primary\"\n        variant=\"elevated\"\n        class=\"mb-4\"\n        @click=\"updateCustomRange\"\n      >\n        <v-icon class=\"mr-2\">mdi-update</v-icon>\n        Confirm Selection \n      </v-btn>\n\n      <!-- Timeline Visualization -->\n      <!-- <v-divider class=\"my-4\" />\n      \n      <TimelineVisualization\n        :ranges=\"ranges\"\n        :selected-timezone=\"selectedTimezone\"\n        :mode=\"selectionType\"\n      /> -->\n    </v-card-text>\n  </v-card>\n</template>\n\n<script setup lang=\"ts\">\n// === IMPORTS ===\nimport { watch, computed, ref, onMounted } from 'vue';\nimport DatePicker from '@vuepic/vue-datepicker';\nimport '@vuepic/vue-datepicker/dist/main.css';\nimport { useTimezone } from '../composables/useTimezone';\nimport { useDateTimeSelector } from './useDateTimeSelector';\nimport type { MillisecondRange, TimeRangeSelectionType } from '../types/datetime';\n\n// === INTERFACES === \n// === PROPS ===\nconst props = defineProps<{\n  currentDate: Date;\n  selectedTimezone: string;\n  defaultStartDate?: Date;\n  defaultEndDate?: Date;\n  allowedDates?: Date[];\n  validTimes?: number[]; // timestamps\n}>();\n\n// === EMITS ===\nconst emit = defineEmits<{\n  'ranges-change': [ranges: MillisecondRange[], selectionType: TimeRangeSelectionType]\n}>();\n\n// === COMPOSABLE SETUP ===\n// Create refs for the current date and timezone to pass to the composable\nconst currentDateRef = ref(props.currentDate);\nconst timezoneRef = ref(props.selectedTimezone);\n\n// Initialize timezone handling\nconst { setToMidnight, setToEndOfDay, formatDateDisplay } = useTimezone(timezoneRef);\n\n// Initialize the datetime selector composable with optional parameters\nconst {\n  selectionType,\n  selectedDayOfWeek,\n  selectedTime,\n  instancesBack,\n  timePlusMinus,\n  weekdayStartDate,\n  startDate,\n  endDate,\n  setWeekdayStartTimestamp,\n  setStartTimestamp: setStartTimestampInternal,\n  setEndTimestamp: setEndTimestampInternal,\n  dayNames,\n  generateMillisecondRanges,\n  // single date additions\n  singleDate,\n  setSingleDateTimestamp,\n  generateSingleDateRange,\n  // pattern additions\n  selectedDays,\n  selectedTimes,\n  generatePatternRanges\n} = useDateTimeSelector({\n  currentDate: currentDateRef,\n  selectedTimezone: timezoneRef\n});\n\n// === REFS ===\nconst weekdayCalendar = ref();\nconst startDateCalendar = ref();\nconst endDateCalendar = ref();\nconst singleDateCalendar = ref();\n\n// === PICKER STATE ===\n// Direct date objects for date pickers - no unnecessary timestamp conversion\nconst weekdayStartDateObj = ref<Date | null>(null);\nconst startDateObj = ref<Date | null>(null);\nconst endDateObj = ref<Date | null>(null);\nconst singleDateObj = ref<Date | null>(null);\n\n// Pre-populated time options (every hour from 6am-9pm; user can add custom HH:MM)\nconst timeOptions = ref<string[]>(Array.from({ length: 15 }, (_, h) => `${String(h+6).padStart(2, '0')}:00`));\n// // Compute available time options based on min/max hour in allowedDates in the selected timezone\n// causes a bit a performance degredation and offers 6-9pm for all data, so hard cord it. \n// a better range would be from 9am - 5pm\n// const minMaxHours = computed(() => {\n//   const dates = props.validTimes ?? [];\n//   if (dates.length === 0) return { min: 0, max: 23 };\n//   const hours = dates.map(d => {\n//     return toTimezone(d).getHours();\n//   });\n//   const min = Math.min(...hours);\n//   const max = Math.max(...hours);\n//   return { min, max };\n// });\n\n// const timeOptions = computed<string[]>(() => {\n//   const { min, max } = minMaxHours.value;\n//   const count = max - min + 1;\n//   const hours = count > 0 ? Array.from({ length: count }, (_, i) => min + i) : Array.from({ length: 24 }, (_, i) => i);\n//   return hours.map(h => `${String(h).padStart(2, '0')}:00`);\n// });\n\n// Day options for v-select\nconst dayOptions = computed(() => \n  dayNames.map((day, index) => ({ title: day, value: index }))\n);\n\n// Generate ranges for visualization\n// const ranges = computed(() => {\n//   return generateMillisecondRanges();\n// });\n\n// Validation rules\nconst instanceRules = computed(() => [\n  (v: number) => v >= 1 && v <= 104 || 'Must be between 1 and 104 (2 years)'\n]);\n\n// === METHODS ===\n// Update custom range button handler\nfunction updateCustomRange() {\n  let currentRanges: MillisecondRange[] = [];\n  if (selectionType.value === 'singledate') {\n    currentRanges = generateSingleDateRange();\n  } else if (selectionType.value === 'pattern') {\n    currentRanges = generatePatternRanges();\n  } else {\n    currentRanges = generateMillisecondRanges();\n  }\n  emit('ranges-change', currentRanges, selectionType.value);\n}\n\n// Date change handlers\nfunction handleWeekdayDateChange(value: Date) {\n  if (value != null) {\n    if (value.getTime() !== weekdayStartDateObj.value?.getTime()) {\n      weekdayStartDateObj.value = value;\n      // Update composable state directly\n      setWeekdayStartTimestamp(value.getTime());\n      weekdayCalendar.value?.closeMenu();\n    }\n  }\n}\n\nfunction handleStartDateChange(value: Date) {\n  if (value != null) {\n    if (value.getTime() !== startDateObj.value?.getTime()) {\n      startDateObj.value = value;\n      // Convert to timestamp and update composable\n      const timestamp = setToMidnight(value);\n      setStartTimestampInternal(timestamp);\n      startDateCalendar.value?.closeMenu();\n    }\n  }\n}\n\nfunction handleEndDateChange(value: Date) {\n  if (value != null) {\n    if (value.getTime() !== endDateObj.value?.getTime()) {\n      endDateObj.value = value;\n      // Convert to timestamp and update composable\n      const timestamp = setToEndOfDay(value);\n      setEndTimestampInternal(timestamp);\n      endDateCalendar.value?.closeMenu();\n    }\n  }\n}\n\nfunction handleSingleDateChange(value: Date) {\n  if (value && value.getTime() !== singleDateObj.value?.getTime()) {\n    singleDateObj.value = value;\n    setSingleDateTimestamp(value.getTime());\n    singleDateCalendar.value?.closeMenu();\n  }\n}\n\n// Normalize entered times to HH:MM 24h (flexible entry via copilot)\nfunction normalizeTimes(values: string[]) {\n  const normalized = values\n    .map(v => String(v).trim())\n    .map(v => {\n      // Accept HH, H, HH:MM, H:MM, also allow am/pm inputs like 9am, 2:30 PM\n      const lower = v.toLowerCase().replace(/\\s+/g, '');\n      const ampmMatch = lower.match(/^(\\d{1,2})(?::(\\d{1,2}))?(am|pm)$/);\n      if (ampmMatch) {\n        let hour = parseInt(ampmMatch[1], 10);\n        const minute = ampmMatch[2] ? parseInt(ampmMatch[2], 10) : 0;\n        const suffix = ampmMatch[3];\n        if (suffix === 'pm' && hour < 12) hour += 12;\n        if (suffix === 'am' && hour === 12) hour = 0;\n        return `${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;\n      }\n      const m = lower.match(/^(\\d{1,2})(?::(\\d{1,2}))?$/);\n      if (!m) return null;\n      const h = parseInt(m[1], 10);\n      const mm = m[2] ? parseInt(m[2], 10) : 0;\n      if (isNaN(h) || h < 0 || h > 23) return null;\n      if (isNaN(mm) || mm < 0 || mm > 59) return null;\n      return `${String(h).padStart(2, '0')}:${String(mm).padStart(2, '0')}`;\n    })\n    .filter((v): v is string => !!v);\n  // Deduplicate\n  const unique = Array.from(new Set(normalized));\n  selectedTimes.value = unique;\n}\n\n// Formatting functions\n// Formatting functions moved to useTimezone composable\n\n// === LIFECYCLE HOOKS ===\nonMounted(() => {\n  // Initialize default dates\n  if (props.defaultStartDate) {\n    startDateObj.value = props.defaultStartDate;\n    const timestamp = setToMidnight(props.defaultStartDate);\n    setStartTimestampInternal(timestamp);\n  }\n  if (props.defaultEndDate) {\n    endDateObj.value = props.defaultEndDate;\n    const timestamp = setToEndOfDay(props.defaultEndDate);\n    setEndTimestampInternal(timestamp);\n  } else {\n    // Default end date to today\n    const today = new Date();\n    endDateObj.value = today;\n    const timestamp = setToEndOfDay(today);\n    setEndTimestampInternal(timestamp);\n  }\n  \n  // Initialize weekday start date\n  if (weekdayStartDate.value) {\n    weekdayStartDateObj.value = new Date(weekdayStartDate.value + 'T00:00:00');\n  }\n\n  if (singleDate.value > 0 && !singleDateObj.value) {\n    singleDateObj.value = new Date(singleDate.value);\n  }\n});\n\n// === WATCHERS ===\n// Watch for prop changes and update refs\nwatch(() => props.currentDate, (newDate) => {\n  currentDateRef.value = newDate;\n});\n\nwatch(() => props.selectedTimezone, (newTimezone) => {\n  timezoneRef.value = newTimezone;\n});\n\n// Keep weekdayStartDateObj in sync with the composable's weekdayStartDate\nwatch(() => weekdayStartDate.value, (newDateString) => {\n  const newDate = newDateString ? new Date(newDateString + 'T00:00:00') : null;\n  if (newDate?.getTime() !== weekdayStartDateObj.value?.getTime()) {\n    weekdayStartDateObj.value = newDate;\n  }\n});\n\n// Keep singleDateObj in sync with the composable's singleDate\nwatch(() => singleDate.value, (newTs) => {\n  if (newTs > 0) {\n    const newDate = new Date(newTs);\n    if (newDate.getTime() !== singleDateObj.value?.getTime()) {\n      singleDateObj.value = newDate;\n    }\n  } else {\n    singleDateObj.value = null;\n  }\n});\n\n// Sync date objects with composable timestamps (one-way: composable  UI)\nwatch(() => startDate.value, (newTimestamp) => {\n  const newDate = newTimestamp > 0 ? new Date(newTimestamp) : null;\n  if (newDate?.getTime() !== startDateObj.value?.getTime()) {\n    startDateObj.value = newDate;\n  }\n});\n\nwatch(() => endDate.value, (newTimestamp) => {\n  const newDate = newTimestamp > 0 ? new Date(newTimestamp) : null;\n  if (newDate?.getTime() !== endDateObj.value?.getTime()) {\n    endDateObj.value = newDate;\n  }\n});\n\n// Ranges are now only emitted when the Update Custom Range button is clicked\n</script>\n\n<style scoped>\n/* === INPUT STYLES === */\n.time-input {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid rgba(255, 255, 255, 0.23);\n  border-radius: 4px;\n  background: transparent;\n  color: inherit;\n  font-family: inherit;\n  font-size: 14px;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.time-input:focus {\n  outline: none;\n  border-color: rgb(var(--v-theme-primary));\n  box-shadow: 0 0 0 2px rgba(var(--v-theme-primary), 0.2);\n}\n</style>\n","import script from \"./DateTimeRangeSelection.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DateTimeRangeSelection.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./DateTimeRangeSelection.vue?vue&type=style&index=0&id=03771d27&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-03771d27\"]])\n\nexport default __exports__","/* eslint-disable indent */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/** A set of generic routines for aggregating data that comes from \n * our Tempo Data Serivce\n*/\n\nimport type { Prettify } from \"@/types\";\nimport type { RawSampleData } from \"./TempoDataService\";\nimport type { CEsriTimeseries } from \"../types\";\n// import type { TimeSeriesData } from \"./TempoDataService\";\nimport type { AggValue, DataPointError } from \"@/types\";\nimport { \n  toZonedTime, // returns a Date object where the time is ajusted\n  fromZonedTime, \n  format as formatTz,\n  formatInTimeZone\n} from 'date-fns-tz';\nimport {\n  nan2null,\n  nanmean,\n  nanstandardError,\n  nanstdev,\n  nansum,\n  nanmin,\n  nanmax,\n  nanRootMeanSquare,\n} from \"./array_math\";\nimport { Period } from \"vuetify/lib/components/VTimePicker/VTimePicker\";\n\n\nexport interface TimeSeriesData {\n  values: Record<number, AggValue>;\n  errors: Record<number, DataPointError>;\n  locations: Array<{ x: number; y: number }>;\n  geometryType: 'rectangle' | 'point';\n}\n\n// a flexible aggregation\n// aggregation options\n// daily, multi-day, weekly\n\n/** https://www.geeksforgeeks.org/javascript/calculate-current-week-number-in-javascript/\n* getWeekoOfYear for Date object\n* If you have a UTC/js timestamp, and want the day of week for a \n* specfic timezone\n*/\nfunction getWeekOfYear(date: Date) {\n  const currentDate = \n    (typeof date === 'object') ? date : new Date();\n  const januaryFirst = \n    new Date(currentDate.getFullYear(), 0, 1);\n  const daysToNextMonday = \n    (januaryFirst.getDay() === 1) ? 0 : \n      (7 - januaryFirst.getDay()) % 7;\n  const nextMonday = \n    new Date(currentDate.getFullYear(), 0, \n      januaryFirst.getDate() + daysToNextMonday);\n\n  return (currentDate < nextMonday) ? 52 : \n    (currentDate > nextMonday ? Math.ceil(\n      (currentDate.getTime() - nextMonday.getTime()) / (24 * 3600 * 1000) / 7) : 1);\n}\n\n\nfunction getBeginningOfWeek(date: Date, timezone?: string): Date {\n  const zonedDate = timezone ? toZonedTime(date, timezone) : date;\n  const day = zonedDate.getDay(); // 0 (Sun) to 6 (Sat)\n  const weekStart = new Date(zonedDate);\n  weekStart.setDate(zonedDate.getDate() - day); // move back to sunday\n  weekStart.setHours(0, 0, 0, 0);\n  // want this to return the UTC time (so we can use the timestamp if we want)\n  return timezone ? fromZonedTime(weekStart, timezone) : weekStart;\n}\n\nfunction getEndOfWeek(date: Date, timezone?: string): Date {\n  const zonedDate = timezone ? toZonedTime(date, timezone) : date;\n  const day = zonedDate.getDay();\n  const weekEnd = new Date(zonedDate);\n  // Move to Saturday (day 6) then set end of day\n  weekEnd.setDate(zonedDate.getDate() + (6 - day));\n  weekEnd.setHours(23, 59, 59, 999);\n  return timezone ? fromZonedTime(weekEnd, timezone) : weekEnd;\n}\n\n\ntype Window = string ; // e.g, '1d', '3d', '1w' , 'weekly'\n\nexport type AggregationMethod = 'mean' | 'median' | 'sum' | 'min' | 'max';\n\n\nexport class TimeSeriesResampler {\n  window: Window;\n  timezone?: string;\n  method: AggregationMethod;\n  errorMethod: 'std' | 'sem' = 'sem'; // standard deviation or standard error of the mean\n  includeCalibrationUncertainty = true; // whether to include calibration uncertainty in the error propagation\n\n  constructor(\n    window: Window, \n    timezone: string = 'UTC', \n    method: AggregationMethod = 'mean',\n    errorMethod: 'std' | 'sem' = 'sem',\n    includeCalibrationUncertainty = true\n  ) {\n    console.log(\"Creating Grouper with window:\", window, \"timezone:\", timezone, \"method:\", method);\n    this.window = window;\n    this.timezone = timezone;\n    this.method = method;\n    this.errorMethod = errorMethod;\n    this.includeCalibrationUncertainty = includeCalibrationUncertainty;\n    if (includeCalibrationUncertainty) {\n      console.error('This may not handle NaN values in the errors correctly which can lead to Zero values for errors');\n    }\n  }\n  \n  private _getZonedDate(date: Date): Date {\n    return this.timezone ? toZonedTime(date, this.timezone) : date;\n  }\n\n  getGroupId(date: Date): string {\n    const zonedDate = this._getZonedDate(date);\n    const groupDate = new Date(zonedDate);\n    \n    // handle daily or multi-day\n    if (this.window.endsWith('d')) {\n      const days = parseInt(this.window.slice(0, -1));\n      const day = zonedDate.getDate();\n      const groupDay = Math.floor((day - 1) / days) * days + 1;\n      groupDate.setDate(groupDay);\n      groupDate.setHours(0, 0, 0, 0);\n      \n      // handle weekly\n    } else if (this.window === '1w' || this.window === 'weekly') {\n      const weekStart = getBeginningOfWeek(date, this.timezone);\n      return String(weekStart.getTime());\n      \n      // handly monthly\n    } else if (this.window === '1m' || this.window === 'monthly') {\n      groupDate.setDate(1);\n      groupDate.setHours(0, 0, 0, 0);\n      \n      // default to daily\n    } else {\n      groupDate.setHours(0, 0, 0, 0);\n    }\n    const utcMidnight = this.timezone ? fromZonedTime(groupDate, this.timezone) : groupDate;\n    return String(utcMidnight.getTime());\n  }\n  \n  groupData(timeseries: Prettify<TimeSeriesData>): TimeSeriesData {\n    console.log(\"Grouping data with window:\", this.window, \"and method:\", this.method);\n    // the data and the error are in the same order\n    const data = Object.values(timeseries.values); // AggValue[]\n    const error = Object.values(timeseries.errors); // DataPointError[] | undefined\n    \n    // colate the data and errors into groups (bins)\n    const groups: { [key: string]: { values: AggValue[]; errors: DataPointError[] } } = {};\n    data.forEach((d, idx) => {\n      const groupId = this.getGroupId(d.date);\n      if (!groups[groupId]) {\n        groups[groupId] = { values: [], errors: [] };\n      }\n      groups[groupId].values.push(d);\n      if (error) {\n        groups[groupId].errors.push(error[idx]);\n      }\n    });\n\n    // these will be the time-aggregated values\n    const values: Record<number, AggValue> = {};\n    const errors: Record<number, DataPointError> = {};\n    \n    // loop over the groups\n    for (const groupId in groups) {\n      const groupData = groups[groupId];\n      const timestamp = parseInt(groupId); // this is the UTC for the start of the group\n\n      const groupValues = groupData.values.map(d => d.value);\n      let aggregatedValue: number | null;\n      \n      switch (this.method) {\n        case 'mean':\n          aggregatedValue = nanmean(groupValues);\n          break;\n        case 'min':\n          aggregatedValue = nanmin(groupValues);\n          break;\n        case 'max':\n          aggregatedValue = nanmax(groupValues);\n          break;\n        default:\n          aggregatedValue = nanmean(groupValues);\n      }\n      \n      values[timestamp] = { value: aggregatedValue, date: new Date(timestamp) };\n      \n      const standardError = this.errorMethod === 'sem' ? nanstandardError(groupValues) : (nanstdev(groupValues) || 0);\n      if (!standardError) {\n        console.error(\n          'Standard error is null for group', \n          formatInTimeZone(new Date(timestamp), this.timezone ?? 'UTC', \"yyyy-mm-dd\"), \n          'with values', groupValues);\n      }\n\n      if (this.includeCalibrationUncertainty && groupData.errors.length > 0) {\n        const lowers = groupData.errors.map(e => e.lower).filter(v => v !== null) as number[];\n        const uppers = groupData.errors.map(e => e.upper).filter(v => v !== null) as number[];\n        \n        const newLower = nanRootMeanSquare(lowers);\n        const newUpper = nanRootMeanSquare(uppers);\n        \n        errors[timestamp] = {\n          lower: nan2null(nanRootMeanSquare([standardError, newLower])),\n          upper: nan2null(nanRootMeanSquare([standardError, newUpper]))\n        };\n      } else {\n        errors[timestamp] = { lower: nan2null(standardError), upper: nan2null(standardError) };\n      }\n      // end of loop over groups\n    }\n    \n    // DEBUG ONLY: this loop should never have to do anything\n    for (const ts in errors) {\n      if (errors[ts].lower !== null && isNaN(errors[ts].lower!)) {\n        console.error('Error lower is NaN for timestamp. Setting to null.', ts, errors[ts]);\n        errors[ts].lower = null;\n      }\n      if (errors[ts].upper !== null && isNaN(errors[ts].upper!)) {\n        console.error('Error upper is NaN for timestamp. Setting to null.', ts, errors[ts]);\n        errors[ts].upper = null;\n      }\n    }\n    \n    return {\n      values,\n      errors,\n      locations: timeseries.locations,\n      geometryType: timeseries.geometryType\n    };\n  }\n}\n\n\n\n\n\nexport type FoldType = \n    'hourOfDay' | \n    'dayOfWeek' | \n    'hourOfWeek'|\n    'weekdayWeekend';\n\nexport interface FoldBinContent {\n  bin: number;\n  timestamps: number[];          // original UTC timestamps of samples contributing\n  binPhase: number[]\n  lowers: (number | null)[];    // original lower error values (may include nulls)\n  uppers: (number | null)[];    // original upper error values (may include nulls)\n  rawValues: (number | null)[];  // raw numeric values (may include nulls)\n}\n\n\n// functino to sort folded bin content by timestamps\nexport function sortfoldBinContent(bin: FoldBinContent): FoldBinContent {\n  const sorted = bin.binPhase\n    .map((bp, idx) => ({ bp, idx }))\n    .sort((a, b) =>a.bp - b.bp);\n  \n  const sortedIndices = sorted.map(item => item.idx);\n  function applySort<T>(arr: T[]): T[] {\n    return sortedIndices.map(i => arr[i]);\n  }\n  \n  return {\n    bin: bin.bin,\n    timestamps: applySort(bin.timestamps),\n    binPhase: sorted.map(item => item.bp),\n    rawValues: applySort(bin.rawValues),\n    lowers: applySort(bin.lowers),\n    uppers: applySort(bin.uppers)\n  };\n}\n\nexport type Seasons = 'DJF' | 'MAM' | 'JJA' | 'SON'; // meteorological seasons\n\nexport interface FoldedAggValue {\n  value: number | null;\n  bin: number; // 023, 06, or 0167 depending on fold\n}\n\ninterface InternalBin {\n      bin: number;\n      timestamps: number[];\n      rawValues: (number | null)[];\n      numericValues: number[];           // non-null numeric values\n      calibrationErrors: DataPointError[]; // original per-sample errors\n    }\n\nexport interface FoldedTimeSeriesData {\n  foldType: FoldType;\n  values: Record<number, FoldedAggValue>;         // binIndex -> aggregated value\n  errors: Record<number, DataPointError>;         // binIndex -> aggregated error\n  bins: Record<number, FoldBinContent>;           // binIndex -> full raw bin content\n  locations: Array<{ x: number; y: number }>;\n  geometryType: 'rectangle' | 'point';\n}\n\n/** Class for folding data periodically \n * We want to control the periodicity and resolution\n*/\nexport class TimeSeriesFolder {\n  foldType: FoldType;\n  timezone: string;\n  method: AggregationMethod;\n  errorMethod: 'std' | 'sem';\n  includeCalibrationUncertainty: boolean;\n\n  constructor(\n    foldType: FoldType,\n    timezone: string = 'UTC',\n    method: AggregationMethod = 'mean',\n    errorMethod: 'std' | 'sem' = 'sem',\n    includeCalibrationUncertainty = true\n  ) {\n    this.foldType = foldType;\n    this.timezone = timezone;\n    this.method = method;\n    this.errorMethod = errorMethod;\n    this.includeCalibrationUncertainty = includeCalibrationUncertainty;\n  }\n  \n  private _getZonedDate(date: Date): Date {\n    return this.timezone ? toZonedTime(date, this.timezone) : date;\n  }\n\n  // convenience to get the number of bins\n  private _binCount(): number {\n    switch (this.foldType) {\n      case 'hourOfDay': return 24;\n      case 'dayOfWeek': return 7;\n      case 'hourOfWeek': return 24*7;\n      case 'weekdayWeekend': return 2;\n    }\n  }\n  \n  // instead of a groupId we just need the bin index\n  private _binIndex(date: Date): number {\n    const z = this._getZonedDate(date);\n    switch (this.foldType) {\n      case 'hourOfDay': return z.getHours();                 // 023\n      case 'dayOfWeek': return z.getDay();                   // 06\n      case 'hourOfWeek': return z.getDay() * 24 + z.getHours(); // 0167\n      case 'weekdayWeekend': return (z.getDay() % 6 > 0) ? 1 : 0; // 1=weekday, 0=weekend\n    }\n  }\n  \n  private _binPhase(date: Date): number {\n    const z = this._getZonedDate(date);\n    switch (this.foldType) {\n      case 'hourOfDay': return z.getMinutes() / 60 + z.getSeconds() / 3600; // fraction of hour\n      case 'dayOfWeek': return (z.getHours() + z.getMinutes() / 60 + z.getSeconds() / 3600) / 24; // fraction of day\n      case 'hourOfWeek': return (z.getMinutes() / 60 + z.getSeconds() / 3600) ; // fraction of hour\n      case 'weekdayWeekend': return 0;  // this is a binary choice, no phase\n    }\n  }\n  \n  foldData(timeseries: Prettify<TimeSeriesData>): FoldedTimeSeriesData {\n    \n    // the data and the error are in the same order\n    const data = Object.values(timeseries.values) as Prettify<AggValue>[]; // AggValue[]\n    const error = Object.values(timeseries.errors); // DataPointError[] | undefined\n    \n    const binCount = this._binCount();\n    const binsRecord: Record<number, InternalBin> = {};\n    \n    Object.entries(timeseries.values).forEach(([ts,d]) => {\n      const binIndex = this._binIndex(d.date);\n      console.log('Folding date', d.date, 'to bin index', binIndex, 'with fold type', this.foldType);\n      if (binIndex == null || binIndex < 0 || binIndex >= binCount) {\n        console.error('Invalid bin index', binIndex, 'for date', d.date, 'with fold type', this.foldType);\n        return;\n      }\n      if (!binsRecord[binIndex]) {\n        binsRecord[binIndex] = {\n          bin: binIndex,\n          timestamps: [],\n          rawValues: [],\n          numericValues: [],\n          calibrationErrors: []\n        };\n      }\n      \n      const bin = binsRecord[binIndex];\n      bin.timestamps.push(d.date.getTime());\n      bin.rawValues.push(d.value);\n      // get clean values\n      if (d.value !== null && !isNaN(d.value)) {\n        bin.numericValues.push(d.value);\n      }\n      \n      const err = timeseries.errors[ts];\n      if (err) {\n        bin.calibrationErrors.push(err);\n      } else {\n        console.error('No error found for timestamp', ts);\n      }\n      \n    });\n\n    // these will be the time-aggregated values\n    const values: Record<number, FoldedAggValue> = {};\n    const errors: Record<number, DataPointError> = {};\n    const publicBins: Record<number, FoldBinContent> = {};\n    \n    // loop over the groups\n    Object.values(binsRecord).forEach(bin => {\n      // const bin = binsRecord[binKey];\n      const { bin: binIndex, numericValues, calibrationErrors, rawValues, timestamps } = bin;\n      const groupValues = numericValues;\n      \n      let aggregatedValue: number | null;\n      \n      switch (this.method) {\n        case 'mean':\n          aggregatedValue = nanmean(groupValues);\n          break;\n        case 'min':\n          aggregatedValue = nanmin(groupValues);\n          break;\n        case 'max':\n          aggregatedValue = nanmax(groupValues);\n          break;\n        default:\n          aggregatedValue = nanmean(groupValues);\n      }\n      \n      // we just want to keep the bin index as the \"timestamp\"\n      // so use obviously wrong date\n      values[binIndex] = { value: aggregatedValue, bin: binIndex };\n      \n      const dispersionMeasure = this.errorMethod === 'sem' \n        ? nanstandardError(groupValues) \n        : (nanstdev(groupValues) || 0);\n      \n      if (this.includeCalibrationUncertainty && calibrationErrors.length > 0) {\n        const lowers = calibrationErrors.map(e => e.lower).filter(v => v !== null) as number[];\n        const uppers = calibrationErrors.map(e => e.upper).filter(v => v !== null) as number[];\n        \n        const newLower = nanRootMeanSquare(lowers);\n        const newUpper = nanRootMeanSquare(uppers);\n        \n        errors[binIndex] = {\n          lower: nan2null(nanRootMeanSquare([dispersionMeasure, newLower])),\n          upper: nan2null(nanRootMeanSquare([dispersionMeasure, newUpper]))\n        };\n      } else {\n        errors[binIndex] = { lower: nan2null(dispersionMeasure), upper: nan2null(dispersionMeasure) };\n      }\n      \n      // DEBUG ONLY: this loop should never have to do anything\n      for (const ts in errors) {\n        if (errors[ts].lower !== null && isNaN(errors[ts].lower)) {\n          console.error('Error lower is NaN for timestamp. Setting to null.', ts, errors[ts]);\n          errors[ts].lower = null;\n        }\n        if (errors[ts].upper !== null && isNaN(errors[ts].upper)) {\n          console.error('Error upper is NaN for timestamp. Setting to null.', ts, errors[ts]);\n          errors[ts].upper = null;\n        }\n      }\n      \n      \n      \n      // expose the full bin contents\n      publicBins[binIndex] = {\n        bin: binIndex,\n        timestamps: [...timestamps],\n        binPhase: timestamps.map(t => this._binPhase(new Date(t))),\n        rawValues: [...rawValues].map(v => nan2null(v)),\n        lowers: calibrationErrors.map(e => e.lower).map(v => nan2null(v)),\n        uppers: calibrationErrors.map(e => e.upper).map(v => nan2null(v))\n      };\n      \n    });\n    \n    \n    return {\n      foldType: this.foldType,\n      values,\n      errors,\n      bins: publicBins,\n      locations: timeseries.locations,\n      geometryType: timeseries.geometryType\n    };\n  }\n}\n\n\nexport function hourOfWeekToDayHour(hourOfWeek: number): { day: number; hour: number } {\n  const day = Math.floor(hourOfWeek / 24);\n  const hour = hourOfWeek % 24;\n  return { day, hour };\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { onMounted, ref, watch, nextTick } from \"vue\";\nimport { v4 } from \"uuid\";\nimport Plotly, { PlotlyHTMLElement, newPlot, restyle, type Data, type Datum, type PlotMouseEvent } from \"plotly.js-dist-min\";\nimport type { DataSet } from '../types';\n\n// https://stackoverflow.com/a/7616484\ninterface TimeseriesProps {\n  datasets: DataSet[];\n  colors?: string[];\n  showErrors?: boolean;\n  dataOptions?: Partial<Data>[];\n  errorBarStyles?: (Partial<Plotly.ErrorOptions> | null)[];\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PlotlyGraph',\n  props: {\n    datasets: {},\n    colors: {},\n    showErrors: { type: Boolean },\n    dataOptions: {},\n    errorBarStyles: {}\n  },\n  emits: [\"click\"],\n  setup(__props: any, { emit: __emit }) {\n\n/* slint-disable @typescript-eslint/no-unused-vars */\nconst generateHash = (string) => {\n  let hash = 0;\n  for (const char of string) {\n    hash = (hash << 5) - hash + char.charCodeAt(0);\n    hash |= 0; // Constrain to 32bit integer\n  }\n  return hash;\n};\n\nconst hashDataset = (data: DataSet) => {\n  const hash = JSON.stringify(data.x) + JSON.stringify(data.y) +\n              JSON.stringify(data.lower) + JSON.stringify(data.upper) + JSON.stringify(data.errorType);\n  return generateHash(hash).toString();\n};\n\nconst props = __props;\n\nconst id = `timeseries-${v4()}`;\n\nconst plot = ref<PlotlyHTMLElement | null>(null);\nconst graph = ref<HTMLDivElement | null>(null);\n\nconst emit = __emit;\n\nfunction datumToDate(datum: Datum): Date | null {\n  if (datum === null) { return null; }\n  if (datum instanceof Date) { return datum; }\n  return new Date(datum);\n}\n\nconst legendGroups: Record<string, string> = {};\nlet errorTraces: number[] = [];\nconst traceVisible = ref<Map<string, boolean>>(new Map());\n\nfunction normalizeBadValue(v: number | null | undefined): number | null {\n  if (v === null || v === undefined || isNaN(v)) {\n    return null;\n  }\n  return v;\n}\n\nfunction nanMean(arr: (number | null)[]): number | null {\n  const validValues = arr.filter((v): v is number => v !== null && !isNaN(v));\n  if (validValues.length === 0) return null;\n  const sum = validValues.reduce((a, b) => a + b, 0);\n  return sum / validValues.length;\n}\n\nconst filterNulls = ref(true);\n\nfunction filterNullValues(data: DataSet): DataSet {\n  // filter out any place where\n  // data.x or data.y is null or undefined or NaN\n  const filteredX: Datum[] = [];\n  const filteredY: number[] = [];\n  const filteredLower: (number | null)[] = [];\n  const filteredUpper: (number | null)[] = [];\n  data.x.forEach((x, idx) => {\n    const y = data.y[idx];\n    if (x !== null && x !== undefined && y !== null && y !== undefined && !isNaN(y)) {\n      filteredX.push(x);\n      filteredY.push(y);\n      if (data.lower) {\n        filteredLower.push(data.lower[idx] ?? null); // keep length consistent \n      }\n      if (data.upper) {\n        filteredUpper.push(data.upper[idx] ?? null); // keep length consistent \n      }\n    }\n  });\n  const result: DataSet = {\n    x: filteredX,\n    y: filteredY,\n  };\n  if (data.lower) {\n    result.lower = filteredLower;\n  } \n  if (data.upper) {\n    result.upper = filteredUpper;\n  }\n  result.errorType = data.errorType;\n  \n  return result;\n}\n\nfunction renderPlot() {\n\n  errorTraces = [];\n  \n  const plotlyData: Data[] = [];\n  if (props.datasets.length === 0) {\n    console.log(\"No data provided for timeseries graph\");\n    return;\n  }\n  \n\n  let max = 0;\n  \n  props.datasets.forEach((data, index) => {\n    // create a hash from the data.x and data.y to be it's \"id\"\n    data = filterNulls.value ? filterNullValues(data) : data;\n    \n    // check x, and have same length y\n    if (!data.x || !data.y || data.x.length !== data.y.length) {\n      console.error(\"Invalid dataset, skipping\", data);\n      return;\n      // throw new Error(`Invalid dataset: x and y must be non-null and of same length. Lengths: x=${data.x?.length}, y=${data.y?.length}`);\n    }\n    \n    const id = hashDataset(data);\n    \n    max = Math.max(max, Math.max(...data.y.filter((v): v is number => v !== null)));\n\n    const legendGroup = v4();\n    if (!traceVisible.value.has(id)) {\n      traceVisible.value.set(id, true);\n    }\n    legendGroups[id] = legendGroup;\n    \n    \n    const errorOptions = {} as Record<'error_y',Plotly.ErrorBar>;\n    console.log(index, data.errorType);\n    // https://plotly.com/javascript/error-bars/\n    if (data.errorType === 'bar') {\n      const style = (props.errorBarStyles && props.errorBarStyles[index]) || {};\n      errorOptions['error_y'] = {\n        type: 'data',\n        symmetric: false,\n        array: data.upper as Datum[],\n        arrayminus: data.lower as Datum[] | undefined,\n        color: props.colors ? props.colors[index % props.colors.length] : 'red',\n        visible: true,\n        thickness: 1.5,\n        width: 3,\n        ...style,\n      };\n      \n    }\n    console.log(\"Error options\", errorOptions);\n    const dataTraceOptions = {\n      mode: \"lines+markers\",\n      legendgroup: legendGroup,\n      showlegend: true,\n      name: `Dataset ${index + 1}`,\n      marker: { color: props.colors ? props.colors[index % props.colors.length] : 'red' },\n      visible: traceVisible.value.get(id) ? true : \"legendonly\",\n      ...errorOptions,\n      ...props.dataOptions?.[index],\n    };\n    \n    plotlyData.push({\n      x: data.x,\n      y: data.y,\n      ...dataTraceOptions\n    } as Data);\n    \n    const hasErrors = data.lower && data.upper && data.lower.length === data.y.length && data.upper.length === data.y.length;\n    // double checking to have valid types\n    if (hasErrors && data.lower && data.upper && data.errorType !== 'bar') {\n      console.log(\"Adding error traces for dataset\", index);\n      const upperY: (number | null)[] = [];\n      const lowerY: (number | null)[] = [];\n      \n      data.y.forEach((y, idx) => {\n        if (y === null) {\n          lowerY.push(null);\n          upperY.push(null);\n          return;\n        }\n        \n        if (data.upper === undefined) {\n          upperY.push(null);\n        } else {\n          const high = y + (data.upper[idx] ?? nanMean(data.upper) ?? 0);\n          // console.log(y, data.upper[idx] ?? nanMean(data.upper) ?? 0);\n          upperY.push(high);\n          max = Math.max(max, high !== null ? high : 0);\n        }\n        \n        if (data.lower === undefined) {\n          lowerY.push(null);\n        } else {\n          const low = y - (data.lower[idx] ?? nanMean(data.lower) ?? 0);\n          // console.log(y, data.lower[idx] ?? nanMean(data.lower) ?? 0);\n          lowerY.push(low);\n          \n        }\n        \n        \n      });\n      // console.log({lowerY, upperY});\n      const traceErrorOptions = {\n        x: data.x,\n        mode: \"lines\",\n        line: { width: 0 },\n        showlegend: false,\n        legendgroup: legendGroup,\n        name: `Dataset ${index + 1}`,\n        marker: { color: props.colors ? props.colors[index % props.colors.length] : 'red' },\n        // visible: props.showErrors && traceVisible.value.get(id),\n      };\n\n\n      plotlyData.push({\n        y: lowerY.map(normalizeBadValue),\n        ...traceErrorOptions\n      });\n      errorTraces.push(plotlyData.length - 1);\n\n      plotlyData.push({\n        y: upperY.map(normalizeBadValue),\n        ...traceErrorOptions,\n        fill: \"tonexty\",\n      });\n      errorTraces.push(plotlyData.length - 1);\n    }\n  });\n\n  const paddingFactor = 1.1;\n  const axisMax = Math.max(1, paddingFactor * max);\n  // get width of parent element .plot-container.plotly\n  const width = document.querySelector('.plot-container.plotly')?.clientWidth ?? 600;\n  const layout: Partial<Plotly.Layout> = {\n    width: width,\n    height: 400,\n    yaxis: {\n      title: { text: \"Molecules / cm<sup>2</sup>\" },\n      range: [0, axisMax],\n    },\n  };\n\n  newPlot(graph.value ?? id, plotlyData, layout).then((el: PlotlyHTMLElement) => {\n    plot.value = el;\n    el.on(\"plotly_click\", (data: PlotMouseEvent) => {\n      data.points.forEach(point => {\n        const traceIndex = point.curveNumber;\n        if (traceIndex !== 0 || point.x == null || point.y == null) {\n          return;\n        }\n        const date = datumToDate(point.x);\n        if (date !== null) {\n          emit(\"click\", {x: point.x, y: point.y as number} );\n        }\n      });\n    });\n    el.on('plotly_legendclick', (data) => {\n      const trace = plotlyData[data.curveNumber];\n      if (!trace) { \n        console.error(\"No trace for legend click\", data);\n        return true; \n      }\n      // eslint-disable-next-line \n      // @ts-ignore legend group should exist. but guard anyway\n      const group = trace.legendgroup as string;\n      if (!group) { \n        console.error(\"No legend group for trace\", trace);\n        return true; \n      }\n      const dataId = Object.keys(legendGroups).find(key => legendGroups[key] === group);\n      if (!dataId) { \n        console.error(\"Could not find data ID for legend group\", group);\n        return true; \n      }\n      const currentlyVisible = traceVisible.value.get(dataId);\n      traceVisible.value.set(dataId, !currentlyVisible);\n      // if currently visible and errors are visible set stlye the error traces too\n      nextTick(() => { // next tick so that updated traceVisible is available\n        if (currentlyVisible && props.showErrors) {\n          updateErrorDisplay(true);\n        }\n      });\n      return true;\n    });\n  });\n}\n\nfunction updateErrorDisplay(visible: boolean) {\n  if (graph.value) {\n    errorTraces.forEach((traceIndex) => {\n      const trace = plot.value?.data[traceIndex];\n      if (!trace) return;\n      if (!graph.value) return;\n      // eslint-disable-next-line \n      // @ts-ignore legend group should exist. but guard anyway\n      const group = trace.legendgroup as string;\n      const dataId = Object.keys(legendGroups).find(key => legendGroups[key] === group);\n      if (dataId && traceVisible.value.get(dataId)) {\n        restyle(graph.value, { visible }, [traceIndex]);\n      } \n    });\n  }\n}\n\n\nonMounted(() => {\n  renderPlot();\n});\n\n\nwatch(() => props.showErrors, updateErrorDisplay);\n\nwatch(() => props.datasets, (_newData, _oldData) => {\n  console.log(\"Data prop changed, re-rendering plot\");\n  renderPlot();\n}, { deep: true });\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    ref_key: \"graph\",\n    ref: graph,\n    id: id,\n    class: \"timeseries\"\n  }, null, 512))\n}\n}\n\n})","<!-- eslint-disable @typescript-eslint/no-unused-vars -->\n<template>\n  <div\n    ref=\"graph\"\n    :id=\"id\"\n    class=\"timeseries\"\n  >\n  </div>\n</template>\n\n\n<script setup lang=\"ts\">\n/* slint-disable @typescript-eslint/no-unused-vars */\nimport { onMounted, ref, watch, nextTick } from \"vue\";\nimport { v4 } from \"uuid\";\nimport Plotly, { PlotlyHTMLElement, newPlot, restyle, type Data, type Datum, type PlotMouseEvent } from \"plotly.js-dist-min\";\nimport type { DataSet } from '../types';\n\n// https://stackoverflow.com/a/7616484\nconst generateHash = (string) => {\n  let hash = 0;\n  for (const char of string) {\n    hash = (hash << 5) - hash + char.charCodeAt(0);\n    hash |= 0; // Constrain to 32bit integer\n  }\n  return hash;\n};\n\nconst hashDataset = (data: DataSet) => {\n  const hash = JSON.stringify(data.x) + JSON.stringify(data.y) +\n              JSON.stringify(data.lower) + JSON.stringify(data.upper) + JSON.stringify(data.errorType);\n  return generateHash(hash).toString();\n};\n\ninterface TimeseriesProps {\n  datasets: DataSet[];\n  colors?: string[];\n  showErrors?: boolean;\n  dataOptions?: Partial<Data>[];\n  errorBarStyles?: (Partial<Plotly.ErrorOptions> | null)[];\n}\n\nconst props = defineProps<TimeseriesProps>();\n\nconst id = `timeseries-${v4()}`;\n\nconst plot = ref<PlotlyHTMLElement | null>(null);\nconst graph = ref<HTMLDivElement | null>(null);\n\nconst emit = defineEmits<{\n  // Datum is from type of x in DataSet\n  (event: \"click\", value: {x: Datum, y: number}): void;\n}>();\n\nfunction datumToDate(datum: Datum): Date | null {\n  if (datum === null) { return null; }\n  if (datum instanceof Date) { return datum; }\n  return new Date(datum);\n}\n\nconst legendGroups: Record<string, string> = {};\nlet errorTraces: number[] = [];\nconst traceVisible = ref<Map<string, boolean>>(new Map());\n\nfunction normalizeBadValue(v: number | null | undefined): number | null {\n  if (v === null || v === undefined || isNaN(v)) {\n    return null;\n  }\n  return v;\n}\n\nfunction nanMean(arr: (number | null)[]): number | null {\n  const validValues = arr.filter((v): v is number => v !== null && !isNaN(v));\n  if (validValues.length === 0) return null;\n  const sum = validValues.reduce((a, b) => a + b, 0);\n  return sum / validValues.length;\n}\n\nconst filterNulls = ref(true);\n\nfunction filterNullValues(data: DataSet): DataSet {\n  // filter out any place where\n  // data.x or data.y is null or undefined or NaN\n  const filteredX: Datum[] = [];\n  const filteredY: number[] = [];\n  const filteredLower: (number | null)[] = [];\n  const filteredUpper: (number | null)[] = [];\n  data.x.forEach((x, idx) => {\n    const y = data.y[idx];\n    if (x !== null && x !== undefined && y !== null && y !== undefined && !isNaN(y)) {\n      filteredX.push(x);\n      filteredY.push(y);\n      if (data.lower) {\n        filteredLower.push(data.lower[idx] ?? null); // keep length consistent \n      }\n      if (data.upper) {\n        filteredUpper.push(data.upper[idx] ?? null); // keep length consistent \n      }\n    }\n  });\n  const result: DataSet = {\n    x: filteredX,\n    y: filteredY,\n  };\n  if (data.lower) {\n    result.lower = filteredLower;\n  } \n  if (data.upper) {\n    result.upper = filteredUpper;\n  }\n  result.errorType = data.errorType;\n  \n  return result;\n}\n\nfunction renderPlot() {\n\n  errorTraces = [];\n  \n  const plotlyData: Data[] = [];\n  if (props.datasets.length === 0) {\n    console.log(\"No data provided for timeseries graph\");\n    return;\n  }\n  \n\n  let max = 0;\n  \n  props.datasets.forEach((data, index) => {\n    // create a hash from the data.x and data.y to be it's \"id\"\n    data = filterNulls.value ? filterNullValues(data) : data;\n    \n    // check x, and have same length y\n    if (!data.x || !data.y || data.x.length !== data.y.length) {\n      console.error(\"Invalid dataset, skipping\", data);\n      return;\n      // throw new Error(`Invalid dataset: x and y must be non-null and of same length. Lengths: x=${data.x?.length}, y=${data.y?.length}`);\n    }\n    \n    const id = hashDataset(data);\n    \n    max = Math.max(max, Math.max(...data.y.filter((v): v is number => v !== null)));\n\n    const legendGroup = v4();\n    if (!traceVisible.value.has(id)) {\n      traceVisible.value.set(id, true);\n    }\n    legendGroups[id] = legendGroup;\n    \n    \n    const errorOptions = {} as Record<'error_y',Plotly.ErrorBar>;\n    console.log(index, data.errorType);\n    // https://plotly.com/javascript/error-bars/\n    if (data.errorType === 'bar') {\n      const style = (props.errorBarStyles && props.errorBarStyles[index]) || {};\n      errorOptions['error_y'] = {\n        type: 'data',\n        symmetric: false,\n        array: data.upper as Datum[],\n        arrayminus: data.lower as Datum[] | undefined,\n        color: props.colors ? props.colors[index % props.colors.length] : 'red',\n        visible: true,\n        thickness: 1.5,\n        width: 3,\n        ...style,\n      };\n      \n    }\n    console.log(\"Error options\", errorOptions);\n    const dataTraceOptions = {\n      mode: \"lines+markers\",\n      legendgroup: legendGroup,\n      showlegend: true,\n      name: `Dataset ${index + 1}`,\n      marker: { color: props.colors ? props.colors[index % props.colors.length] : 'red' },\n      visible: traceVisible.value.get(id) ? true : \"legendonly\",\n      ...errorOptions,\n      ...props.dataOptions?.[index],\n    };\n    \n    plotlyData.push({\n      x: data.x,\n      y: data.y,\n      ...dataTraceOptions\n    } as Data);\n    \n    const hasErrors = data.lower && data.upper && data.lower.length === data.y.length && data.upper.length === data.y.length;\n    // double checking to have valid types\n    if (hasErrors && data.lower && data.upper && data.errorType !== 'bar') {\n      console.log(\"Adding error traces for dataset\", index);\n      const upperY: (number | null)[] = [];\n      const lowerY: (number | null)[] = [];\n      \n      data.y.forEach((y, idx) => {\n        if (y === null) {\n          lowerY.push(null);\n          upperY.push(null);\n          return;\n        }\n        \n        if (data.upper === undefined) {\n          upperY.push(null);\n        } else {\n          const high = y + (data.upper[idx] ?? nanMean(data.upper) ?? 0);\n          // console.log(y, data.upper[idx] ?? nanMean(data.upper) ?? 0);\n          upperY.push(high);\n          max = Math.max(max, high !== null ? high : 0);\n        }\n        \n        if (data.lower === undefined) {\n          lowerY.push(null);\n        } else {\n          const low = y - (data.lower[idx] ?? nanMean(data.lower) ?? 0);\n          // console.log(y, data.lower[idx] ?? nanMean(data.lower) ?? 0);\n          lowerY.push(low);\n          \n        }\n        \n        \n      });\n      // console.log({lowerY, upperY});\n      const traceErrorOptions = {\n        x: data.x,\n        mode: \"lines\",\n        line: { width: 0 },\n        showlegend: false,\n        legendgroup: legendGroup,\n        name: `Dataset ${index + 1}`,\n        marker: { color: props.colors ? props.colors[index % props.colors.length] : 'red' },\n        // visible: props.showErrors && traceVisible.value.get(id),\n      };\n\n\n      plotlyData.push({\n        y: lowerY.map(normalizeBadValue),\n        ...traceErrorOptions\n      });\n      errorTraces.push(plotlyData.length - 1);\n\n      plotlyData.push({\n        y: upperY.map(normalizeBadValue),\n        ...traceErrorOptions,\n        fill: \"tonexty\",\n      });\n      errorTraces.push(plotlyData.length - 1);\n    }\n  });\n\n  const paddingFactor = 1.1;\n  const axisMax = Math.max(1, paddingFactor * max);\n  // get width of parent element .plot-container.plotly\n  const width = document.querySelector('.plot-container.plotly')?.clientWidth ?? 600;\n  const layout: Partial<Plotly.Layout> = {\n    width: width,\n    height: 400,\n    yaxis: {\n      title: { text: \"Molecules / cm<sup>2</sup>\" },\n      range: [0, axisMax],\n    },\n  };\n\n  newPlot(graph.value ?? id, plotlyData, layout).then((el: PlotlyHTMLElement) => {\n    plot.value = el;\n    el.on(\"plotly_click\", (data: PlotMouseEvent) => {\n      data.points.forEach(point => {\n        const traceIndex = point.curveNumber;\n        if (traceIndex !== 0 || point.x == null || point.y == null) {\n          return;\n        }\n        const date = datumToDate(point.x);\n        if (date !== null) {\n          emit(\"click\", {x: point.x, y: point.y as number} );\n        }\n      });\n    });\n    el.on('plotly_legendclick', (data) => {\n      const trace = plotlyData[data.curveNumber];\n      if (!trace) { \n        console.error(\"No trace for legend click\", data);\n        return true; \n      }\n      // eslint-disable-next-line \n      // @ts-ignore legend group should exist. but guard anyway\n      const group = trace.legendgroup as string;\n      if (!group) { \n        console.error(\"No legend group for trace\", trace);\n        return true; \n      }\n      const dataId = Object.keys(legendGroups).find(key => legendGroups[key] === group);\n      if (!dataId) { \n        console.error(\"Could not find data ID for legend group\", group);\n        return true; \n      }\n      const currentlyVisible = traceVisible.value.get(dataId);\n      traceVisible.value.set(dataId, !currentlyVisible);\n      // if currently visible and errors are visible set stlye the error traces too\n      nextTick(() => { // next tick so that updated traceVisible is available\n        if (currentlyVisible && props.showErrors) {\n          updateErrorDisplay(true);\n        }\n      });\n      return true;\n    });\n  });\n}\n\nfunction updateErrorDisplay(visible: boolean) {\n  if (graph.value) {\n    errorTraces.forEach((traceIndex) => {\n      const trace = plot.value?.data[traceIndex];\n      if (!trace) return;\n      if (!graph.value) return;\n      // eslint-disable-next-line \n      // @ts-ignore legend group should exist. but guard anyway\n      const group = trace.legendgroup as string;\n      const dataId = Object.keys(legendGroups).find(key => legendGroups[key] === group);\n      if (dataId && traceVisible.value.get(dataId)) {\n        restyle(graph.value, { visible }, [traceIndex]);\n      } \n    });\n  }\n}\n\n\nonMounted(() => {\n  renderPlot();\n});\n\n\nwatch(() => props.showErrors, updateErrorDisplay);\n\nwatch(() => props.datasets, (_newData, _oldData) => {\n  console.log(\"Data prop changed, re-rendering plot\");\n  renderPlot();\n}, { deep: true });\n\n</script>\n\n<style scoped>\n.timeseries:not(:empty) {\n  width: 600px;\n  height: 400px;\n}\n</style>\n","import script from \"./PlotlyGraph.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PlotlyGraph.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PlotlyGraph.vue?vue&type=style&index=0&id=2f4fced3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2f4fced3\"]])\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"text-caption\" }\nconst _hoisted_2 = { style: {\"height\":\"calc(100% - 40px)\"} }\nconst _hoisted_3 = { class: \"d-flex ga-2\" }\n\nimport { ref, computed, watch, nextTick } from 'vue';\nimport { v4 } from 'uuid';\nimport { TimeSeriesResampler } from '../esri/services/aggregation';\nimport PlotlyGraph from './PlotlyGraph.vue';\nimport type { UserDataset, TimeRange } from '../types';\nimport type { AggregationMethod, TimeSeriesData } from '../esri/services/aggregation';\nimport type { DataSet } from '../types';\nimport type { Data } from 'plotly.js-dist-min';\n\ninterface DataAggregationProps {\n  selection: UserDataset | null;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'DataAggregation',\n  props: /*@__PURE__*/_mergeModels({\n    selection: {}\n  }, {\n    \"modelValue\": { type: Boolean, ...{ type: Boolean, required: true } },\n    \"modelModifiers\": {},\n  }),\n  emits: /*@__PURE__*/_mergeModels([\"save\"], [\"update:modelValue\"]),\n  setup(__props: any, { emit: __emit }) {\n\n// Generated by Copilot\nconst props = __props;\n\nconst emit = __emit;\n\n// Dialog state\nconst dialogOpen = _useModel<boolean>(__props, 'modelValue');\n\n// Aggregation options\nconst windowOptions = [\n  { title: 'Daily', value: '1d' },\n  { title: 'Weekly', value: '1w' },\n  { title: 'Monthly', value: '1m' }\n];\n\nconst methodOptions = [\n  { title: 'Mean', value: 'mean' },\n  { title: 'Min', value: 'min' },\n  { title: 'Max', value: 'max' }\n];\n\nconst timezoneOptions = [\n  { title: 'US/Eastern', value: 'US/Eastern' },\n  { title: 'US/Central', value: 'US/Central' },\n  { title: 'US/Mountain', value: 'US/Mountain' },\n  { title: 'US/Pacific', value: 'US/Pacific' },\n  { title: 'UTC', value: 'UTC' }\n];\n\n// Reactive state\nconst selectedWindow = ref('1d');\nconst selectedMethod = ref<AggregationMethod>('mean');\nconst selectedTimezone = ref('US/Eastern');\nconst showErrors = ref(true);\nconst useSEM = ref(true);\nconst originalErrorType = ref<'band' | 'bar'>('bar');\nconst aggregatedErrorType = ref<'band' | 'bar'>('bar');\nconst errorTypeItems = [\n  { title: 'Error Band', value: 'band' },\n  { title: 'Error Bars', value: 'bar' }\n];\n\n// Computed properties\nconst originalDataPointCount = computed(() => {\n  if (!props.selection?.samples) return 0;\n  return Object.keys(props.selection.samples).length;\n});\n\nconst aggregatedDataPointCount = computed(() => {\n  if (!aggregatedData.value) return 0;\n  return Object.keys(aggregatedData.value.values).length;\n});\n\nconst canSave = computed(() => {\n  return props.selection && aggregatedData.value && aggregatedDataPointCount.value > 0;\n});\n\n// Aggregated data\nconst aggregatedData = ref<TimeSeriesData | null>(null);\nconst aggregatedSelection = ref<UserDataset | null>(null);\n// Graph data for display - now a ref that gets manually updated\nconst graphData = ref<DataSet[]>([]);\n\n// Per-dataset visual overrides (match length of graphData)\nconst dataOptions = computed<Partial<Data>[]>(() => {\n  const opts: Partial<Data>[] = [];\n  if (graphData.value.length > 0) {\n    opts.push({ mode: 'markers' }); // Original selection (markers only)\n  }\n  // keep lines for aggregated data\n  if (graphData.value.length > 1) {\n    opts.push({ mode: 'lines+markers' }); \n  }\n  return opts;\n});\n\n\nfunction selectionSamplesToDataSet(selection: UserDataset, errorType: 'band' | 'bar'): DataSet {\n  return timeSeriesDataToDataSet(selectionToTimeseries(selection), errorType);\n}\n\nfunction timeSeriesDataToDataSet(timeseries: TimeSeriesData, errorType: 'band' | 'bar'): DataSet {\n  const x: DataSet['x'] = [];\n  const y: DataSet['y'] = [];\n  const lower: DataSet['lower'] = [];\n  const upper: DataSet['upper'] = [];\n\n  // tsa, tsb are the timestamps as strings\n  const sortedEntries = Object.entries(timeseries.values).sort(([tsa, _a], [tsb, _b]) => parseInt(tsa) - parseInt(tsb));\n  // get the first timestamp\n  sortedEntries.forEach(([timestamp, aggValue]) => {\n    y.push(aggValue.value);\n    x.push(new Date(parseInt(timestamp)));\n    const error = timeseries.errors[timestamp];\n    lower.push(error?.lower ?? null);\n    upper.push(error?.upper ?? null);\n  });\n  return { x, y, lower, upper, errorType };\n}\n\n// Function to update graph data\nfunction updateGraphData() {\n  console.log(\"Updating graph data\");\n  if (!props.selection) {\n    graphData.value = [];\n    return;\n  }\n  const data = [selectionSamplesToDataSet(props.selection, originalErrorType.value)];\n  \n  if (aggregatedData.value) {\n    data.push(timeSeriesDataToDataSet(aggregatedData.value, aggregatedErrorType.value));\n  }\n  \n  graphData.value = data;\n  console.log(\"Graph data updated with\", data.length, \"datasets\");\n}\n\n// Create a time range for the aggregated data\nfunction createAggregatedTimeRange(): TimeRange {\n  if (!props.selection) {\n    throw new Error('No selection available');\n  }\n  \n  const originalRange = props.selection.timeRange.range;\n  const ranges = Array.isArray(originalRange) ? originalRange : [originalRange];\n  \n  return {\n    id: v4(),\n    name: `Aggregated (${selectedWindow.value})`,\n    description: `Aggregated data with ${selectedWindow.value} window`,\n    range: ranges,\n    type: 'aggregated'\n  };\n}\n\n// Watch for changes in aggregation parameters\nwatch([selectedWindow, selectedMethod, selectedTimezone, useSEM], () => {\n  updateAggregatedData();\n}, { immediate: true });\n\nfunction selectionToTimeseries(selection: UserDataset): TimeSeriesData {\n  return {\n    values: selection.samples || {},\n    errors: selection.errors || {},\n    locations: selection.locations || [],\n    geometryType: selection.region.geometryType || 'rectangle'\n  };\n}\n\n// Update aggregated data when parameters change\nfunction updateAggregatedData() {\n  console.log(\"Updating aggregated data with window:\", selectedWindow.value, \"method:\", selectedMethod.value, \"timezone:\", selectedTimezone.value);\n  if (!props.selection?.samples) {\n    aggregatedData.value = null;\n    aggregatedSelection.value = null;\n    graphData.value = [];\n    return;\n  }\n  \n  \n  \n  try {\n    \n    // Convert the selection data to TimeSeriesData format\n    const timeSeriesData = selectionToTimeseries(props.selection);\n    \n    \n    const grouper = new TimeSeriesResampler(\n      selectedWindow.value,\n      selectedTimezone.value,\n      selectedMethod.value,\n      useSEM.value ? 'sem' : 'std', true);\n    aggregatedData.value = grouper.groupData(timeSeriesData);\n      \n    \n    \n    \n    \n    aggregatedSelection.value = {\n      id: v4(),\n      region: {...props.selection.region, color: '#444', name: 'Aggregated'  } as typeof props.selection.region, // Different color for aggregated\n      timeRange: createAggregatedTimeRange(),\n      molecule: props.selection.molecule,\n      samples: aggregatedData.value.values,\n      errors: aggregatedData.value.errors,\n      locations: aggregatedData.value.locations\n    };\n    \n  } catch (error) {\n    console.error('Error aggregating data:', error);\n    aggregatedData.value = null;\n    aggregatedSelection.value = null;\n  }\n  \n  // Update graph data after aggregation\n  updateGraphData();\n}\n\n// Save the aggregation\nfunction saveAggregation() {\n  if (!canSave.value || !props.selection) return;\n  \n  const aggregatedSelection: UserDataset = {\n    id: v4(),\n    region: props.selection.region,\n    timeRange: createAggregatedTimeRange(),\n    molecule: props.selection.molecule,\n    samples: aggregatedData.value!.values,\n    errors: aggregatedData.value!.errors,\n    locations: aggregatedData.value!.locations\n  };\n  \n  emit('save', aggregatedSelection);\n  closeDialog();\n}\n\n// Close dialog\nfunction closeDialog() {\n  dialogOpen.value = false;\n  // Reset state\n  nextTick(() => {\n    aggregatedData.value = null;\n  });\n}\n\n// Watch for selection changes\nwatch(() => props.selection, () => {\n  if (props.selection) {\n    updateAggregatedData();\n  }\n}, { immediate: true });\n\n// Watch error type selects\nwatch([originalErrorType, aggregatedErrorType], () => updateGraphData());\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_toolbar_title = _resolveComponent(\"v-toolbar-title\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_toolbar = _resolveComponent(\"v-toolbar\")!\n  const _component_v_card_title = _resolveComponent(\"v-card-title\")!\n  const _component_v_select = _resolveComponent(\"v-select\")!\n  const _component_v_checkbox = _resolveComponent(\"v-checkbox\")!\n  const _component_v_card_subtitle = _resolveComponent(\"v-card-subtitle\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_col = _resolveComponent(\"v-col\")!\n  const _component_v_row = _resolveComponent(\"v-row\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\")!\n\n  return (_openBlock(), _createBlock(_component_v_card, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_toolbar, {\n        density: \"compact\",\n        color: \"var(--info-background)\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_toolbar_title, null, {\n            default: _withCtx(() => [...(_cache[7] || (_cache[7] = [\n              _createTextVNode(\"Data Aggregation\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_v_spacer),\n          _createVNode(_component_v_btn, {\n            icon: \"mdi-close\",\n            onClick: closeDialog\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_v_card_text, { class: \"pa-4\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_row, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_col, {\n                cols: \"12\",\n                md: \"4\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_card, {\n                    variant: \"outlined\",\n                    class: \"pa-3\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_v_card_title, { class: \"text-h6 pa-0 mb-3\" }, {\n                        default: _withCtx(() => [...(_cache[8] || (_cache[8] = [\n                          _createTextVNode(\"Aggregation Options\", -1)\n                        ]))]),\n                        _: 1\n                      }),\n                      _createVNode(_component_v_select, {\n                        modelValue: selectedWindow.value,\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((selectedWindow).value = $event)),\n                        items: windowOptions,\n                        label: \"Time Window\",\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"hide-details\": \"\",\n                        class: \"mb-3\"\n                      }, null, 8, [\"modelValue\"]),\n                      _createVNode(_component_v_select, {\n                        modelValue: selectedTimezone.value,\n                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((selectedTimezone).value = $event)),\n                        items: timezoneOptions,\n                        label: \"Timezone\",\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"hide-details\": \"\",\n                        class: \"mb-3\"\n                      }, null, 8, [\"modelValue\"]),\n                      _createVNode(_component_v_select, {\n                        modelValue: selectedMethod.value,\n                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((selectedMethod).value = $event)),\n                        items: methodOptions,\n                        label: \"Aggregation Method\",\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"hide-details\": \"\",\n                        class: \"mb-3\"\n                      }, null, 8, [\"modelValue\"]),\n                      _createVNode(_component_v_checkbox, {\n                        modelValue: showErrors.value,\n                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((showErrors).value = $event)),\n                        label: \"Show Error Bands\",\n                        density: \"compact\",\n                        \"hide-details\": \"\",\n                        class: \"mb-3\"\n                      }, null, 8, [\"modelValue\"]),\n                      _createVNode(_component_v_select, {\n                        modelValue: originalErrorType.value,\n                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((originalErrorType).value = $event)),\n                        items: errorTypeItems,\n                        label: \"Original Error Display\",\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"hide-details\": \"\",\n                        class: \"mb-3\"\n                      }, null, 8, [\"modelValue\"]),\n                      _createVNode(_component_v_select, {\n                        modelValue: aggregatedErrorType.value,\n                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((aggregatedErrorType).value = $event)),\n                        items: errorTypeItems,\n                        label: \"Aggregated Error Display\",\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"hide-details\": \"\",\n                        class: \"mb-3\"\n                      }, null, 8, [\"modelValue\"]),\n                      _createVNode(_component_v_checkbox, {\n                        modelValue: useSEM.value,\n                        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((useSEM).value = $event)),\n                        label: \"Use SEM\",\n                        density: \"compact\",\n                        \"hide-details\": \"\",\n                        class: \"mb-3\"\n                      }, null, 8, [\"modelValue\"]),\n                      _createVNode(_component_v_card, {\n                        height: \"fit-content\",\n                        variant: \"tonal\",\n                        class: \"pa-2 mb-3\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_v_card_subtitle, { class: \"pa-0\" }, {\n                            default: _withCtx(() => [...(_cache[9] || (_cache[9] = [\n                              _createTextVNode(\"Preview\", -1)\n                            ]))]),\n                            _: 1\n                          }),\n                          _createElementVNode(\"div\", _hoisted_1, [\n                            _createElementVNode(\"div\", null, \"Original points: \" + _toDisplayString(originalDataPointCount.value), 1),\n                            _createElementVNode(\"div\", null, \"Aggregated points: \" + _toDisplayString(aggregatedDataPointCount.value), 1),\n                            _createElementVNode(\"div\", null, \"Window: \" + _toDisplayString(selectedWindow.value), 1)\n                          ])\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_v_col, {\n                cols: \"12\",\n                md: \"8\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_card, {\n                    variant: \"outlined\",\n                    class: \"pa-3\",\n                    style: {\"height\":\"500px\"}\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_v_card_title, null, {\n                        default: _withCtx(() => [...(_cache[10] || (_cache[10] = [\n                          _createTextVNode(\" Time Series Comparison \", -1)\n                        ]))]),\n                        _: 1\n                      }),\n                      _createElementVNode(\"div\", _hoisted_2, [\n                        _createVNode(PlotlyGraph, {\n                          datasets: graphData.value,\n                          \"show-errors\": showErrors.value,\n                          colors: [_ctx.selection?.region.color ?? 'blue', '#444'],\n                          \"data-options\": dataOptions.value,\n                          \"error-bar-styles\": [\n                    originalErrorType.value === 'bar' ? { thickness: 1, width: 0} : null,\n                    aggregatedErrorType.value === 'bar' ? { thickness: 3, width: 5 } : null\n                  ]\n                        }, null, 8, [\"datasets\", \"show-errors\", \"colors\", \"data-options\", \"error-bar-styles\"])\n                      ])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_v_card_actions, null, {\n        default: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createVNode(_component_v_btn, {\n              color: \"primary\",\n              onClick: saveAggregation,\n              disabled: !canSave.value,\n              size: \"small\"\n            }, {\n              default: _withCtx(() => [...(_cache[11] || (_cache[11] = [\n                _createTextVNode(\" Save Aggregation \", -1)\n              ]))]),\n              _: 1\n            }, 8, [\"disabled\"]),\n            _createVNode(_component_v_btn, {\n              color: \"secondary\",\n              variant: \"outlined\",\n              onClick: closeDialog,\n              size: \"small\"\n            }, {\n              default: _withCtx(() => [...(_cache[12] || (_cache[12] = [\n                _createTextVNode(\" Cancel \", -1)\n              ]))]),\n              _: 1\n            })\n          ])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n    <v-card>\n      <v-toolbar\n        density=\"compact\"\n        color=\"var(--info-background)\"\n      >\n        <v-toolbar-title>Data Aggregation</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-btn\n          icon=\"mdi-close\"\n          @click=\"closeDialog\"\n        ></v-btn>\n      </v-toolbar>\n      \n      <v-card-text class=\"pa-4\">\n        <v-row>\n          <!-- Left Panel: Aggregation Options -->\n          <v-col cols=\"12\" md=\"4\">\n            <v-card variant=\"outlined\" class=\"pa-3\">\n              <v-card-title class=\"text-h6 pa-0 mb-3\">Aggregation Options</v-card-title>\n              \n              <!-- Time Window Selection -->\n              <v-select\n                v-model=\"selectedWindow\"\n                :items=\"windowOptions\"\n                label=\"Time Window\"\n                density=\"compact\"\n                variant=\"outlined\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <!-- Timezone Selection -->\n              <v-select\n                v-model=\"selectedTimezone\"\n                :items=\"timezoneOptions\"\n                label=\"Timezone\"\n                density=\"compact\"\n                variant=\"outlined\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <!-- Aggregation Method -->\n              <v-select\n                v-model=\"selectedMethod\"\n                :items=\"methodOptions\"\n                label=\"Aggregation Method\"\n                density=\"compact\"\n                variant=\"outlined\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <!-- Show Errors Toggle -->\n              <v-checkbox\n                v-model=\"showErrors\"\n                label=\"Show Error Bands\"\n                density=\"compact\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <!-- Original Error Display -->\n              <v-select\n                v-model=\"originalErrorType\"\n                :items=\"errorTypeItems\"\n                label=\"Original Error Display\"\n                density=\"compact\"\n                variant=\"outlined\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <!-- Aggregated Error Display -->\n              <v-select\n                v-model=\"aggregatedErrorType\"\n                :items=\"errorTypeItems\"\n                label=\"Aggregated Error Display\"\n                density=\"compact\"\n                variant=\"outlined\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <!-- Use Standard Errors Toggle -->\n              <v-checkbox\n                v-model=\"useSEM\"\n                label=\"Use SEM\"\n                density=\"compact\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <!-- Preview Info -->\n              <v-card height=\"fit-content\" variant=\"tonal\" class=\"pa-2 mb-3\">\n                <v-card-subtitle class=\"pa-0\">Preview</v-card-subtitle>\n                <div class=\"text-caption\">\n                  <div>Original points: {{ originalDataPointCount }}</div>\n                  <div>Aggregated points: {{ aggregatedDataPointCount }}</div>\n                  <div>Window: {{ selectedWindow }}</div>\n                </div>\n              </v-card>\n            </v-card>\n          </v-col>\n          \n          <!-- Right Panel: Timeseries Graph -->\n          <v-col cols=\"12\" md=\"8\">\n            <v-card variant=\"outlined\" class=\"pa-3\" style=\"height: 500px;\">\n              <v-card-title>\n                Time Series Comparison\n              </v-card-title>\n              <div style=\"height: calc(100% - 40px);\">\n                <plotly-graph\n                  :datasets=\"graphData\"\n                  :show-errors=\"showErrors\"\n                  :colors=\"[selection?.region.color ?? 'blue', '#444']\"\n                  :data-options=\"dataOptions\"\n                  :error-bar-styles=\"[\n                    originalErrorType === 'bar' ? { thickness: 1, width: 0} : null,\n                    aggregatedErrorType === 'bar' ? { thickness: 3, width: 5 } : null\n                  ]\"\n                />\n              </div>\n            </v-card>\n          </v-col>\n        </v-row>\n      </v-card-text>\n      <v-card-actions>\n        <div class=\"d-flex ga-2\">\n          <v-btn\n            color=\"primary\"\n            @click=\"saveAggregation\"\n            :disabled=\"!canSave\"\n            size=\"small\"\n          >\n            Save Aggregation\n          </v-btn>\n          <v-btn\n            color=\"secondary\"\n            variant=\"outlined\"\n            @click=\"closeDialog\"\n            size=\"small\"\n          >\n            Cancel\n          </v-btn>\n          \n        </div>\n      </v-card-actions>\n    </v-card>\n\n\n  \n</template>\n\n<script setup lang=\"ts\">\n// Generated by Copilot\nimport { ref, computed, watch, nextTick } from 'vue';\nimport { v4 } from 'uuid';\nimport { TimeSeriesResampler } from '../esri/services/aggregation';\nimport PlotlyGraph from './PlotlyGraph.vue';\nimport type { UserDataset, TimeRange } from '../types';\nimport type { AggregationMethod, TimeSeriesData } from '../esri/services/aggregation';\nimport type { DataSet } from '../types';\nimport type { Data } from 'plotly.js-dist-min';\n\ninterface DataAggregationProps {\n  selection: UserDataset | null;\n}\n\nconst props = defineProps<DataAggregationProps>();\n\nconst emit = defineEmits<{\n  (event: 'save', aggregatedSelection: UserDataset): void;\n}>();\n\n// Dialog state\nconst dialogOpen = defineModel<boolean>('modelValue', { type: Boolean, required: true });\n\n// Aggregation options\nconst windowOptions = [\n  { title: 'Daily', value: '1d' },\n  { title: 'Weekly', value: '1w' },\n  { title: 'Monthly', value: '1m' }\n];\n\nconst methodOptions = [\n  { title: 'Mean', value: 'mean' },\n  { title: 'Min', value: 'min' },\n  { title: 'Max', value: 'max' }\n];\n\nconst timezoneOptions = [\n  { title: 'US/Eastern', value: 'US/Eastern' },\n  { title: 'US/Central', value: 'US/Central' },\n  { title: 'US/Mountain', value: 'US/Mountain' },\n  { title: 'US/Pacific', value: 'US/Pacific' },\n  { title: 'UTC', value: 'UTC' }\n];\n\n// Reactive state\nconst selectedWindow = ref('1d');\nconst selectedMethod = ref<AggregationMethod>('mean');\nconst selectedTimezone = ref('US/Eastern');\nconst showErrors = ref(true);\nconst useSEM = ref(true);\nconst originalErrorType = ref<'band' | 'bar'>('bar');\nconst aggregatedErrorType = ref<'band' | 'bar'>('bar');\nconst errorTypeItems = [\n  { title: 'Error Band', value: 'band' },\n  { title: 'Error Bars', value: 'bar' }\n];\n\n// Computed properties\nconst originalDataPointCount = computed(() => {\n  if (!props.selection?.samples) return 0;\n  return Object.keys(props.selection.samples).length;\n});\n\nconst aggregatedDataPointCount = computed(() => {\n  if (!aggregatedData.value) return 0;\n  return Object.keys(aggregatedData.value.values).length;\n});\n\nconst canSave = computed(() => {\n  return props.selection && aggregatedData.value && aggregatedDataPointCount.value > 0;\n});\n\n// Aggregated data\nconst aggregatedData = ref<TimeSeriesData | null>(null);\nconst aggregatedSelection = ref<UserDataset | null>(null);\n// Graph data for display - now a ref that gets manually updated\nconst graphData = ref<DataSet[]>([]);\n\n// Per-dataset visual overrides (match length of graphData)\nconst dataOptions = computed<Partial<Data>[]>(() => {\n  const opts: Partial<Data>[] = [];\n  if (graphData.value.length > 0) {\n    opts.push({ mode: 'markers' }); // Original selection (markers only)\n  }\n  // keep lines for aggregated data\n  if (graphData.value.length > 1) {\n    opts.push({ mode: 'lines+markers' }); \n  }\n  return opts;\n});\n\n\nfunction selectionSamplesToDataSet(selection: UserDataset, errorType: 'band' | 'bar'): DataSet {\n  return timeSeriesDataToDataSet(selectionToTimeseries(selection), errorType);\n}\n\nfunction timeSeriesDataToDataSet(timeseries: TimeSeriesData, errorType: 'band' | 'bar'): DataSet {\n  const x: DataSet['x'] = [];\n  const y: DataSet['y'] = [];\n  const lower: DataSet['lower'] = [];\n  const upper: DataSet['upper'] = [];\n\n  // tsa, tsb are the timestamps as strings\n  const sortedEntries = Object.entries(timeseries.values).sort(([tsa, _a], [tsb, _b]) => parseInt(tsa) - parseInt(tsb));\n  // get the first timestamp\n  sortedEntries.forEach(([timestamp, aggValue]) => {\n    y.push(aggValue.value);\n    x.push(new Date(parseInt(timestamp)));\n    const error = timeseries.errors[timestamp];\n    lower.push(error?.lower ?? null);\n    upper.push(error?.upper ?? null);\n  });\n  return { x, y, lower, upper, errorType };\n}\n\n// Function to update graph data\nfunction updateGraphData() {\n  console.log(\"Updating graph data\");\n  if (!props.selection) {\n    graphData.value = [];\n    return;\n  }\n  const data = [selectionSamplesToDataSet(props.selection, originalErrorType.value)];\n  \n  if (aggregatedData.value) {\n    data.push(timeSeriesDataToDataSet(aggregatedData.value, aggregatedErrorType.value));\n  }\n  \n  graphData.value = data;\n  console.log(\"Graph data updated with\", data.length, \"datasets\");\n}\n\n// Create a time range for the aggregated data\nfunction createAggregatedTimeRange(): TimeRange {\n  if (!props.selection) {\n    throw new Error('No selection available');\n  }\n  \n  const originalRange = props.selection.timeRange.range;\n  const ranges = Array.isArray(originalRange) ? originalRange : [originalRange];\n  \n  return {\n    id: v4(),\n    name: `Aggregated (${selectedWindow.value})`,\n    description: `Aggregated data with ${selectedWindow.value} window`,\n    range: ranges,\n    type: 'aggregated'\n  };\n}\n\n// Watch for changes in aggregation parameters\nwatch([selectedWindow, selectedMethod, selectedTimezone, useSEM], () => {\n  updateAggregatedData();\n}, { immediate: true });\n\nfunction selectionToTimeseries(selection: UserDataset): TimeSeriesData {\n  return {\n    values: selection.samples || {},\n    errors: selection.errors || {},\n    locations: selection.locations || [],\n    geometryType: selection.region.geometryType || 'rectangle'\n  };\n}\n\n// Update aggregated data when parameters change\nfunction updateAggregatedData() {\n  console.log(\"Updating aggregated data with window:\", selectedWindow.value, \"method:\", selectedMethod.value, \"timezone:\", selectedTimezone.value);\n  if (!props.selection?.samples) {\n    aggregatedData.value = null;\n    aggregatedSelection.value = null;\n    graphData.value = [];\n    return;\n  }\n  \n  \n  \n  try {\n    \n    // Convert the selection data to TimeSeriesData format\n    const timeSeriesData = selectionToTimeseries(props.selection);\n    \n    \n    const grouper = new TimeSeriesResampler(\n      selectedWindow.value,\n      selectedTimezone.value,\n      selectedMethod.value,\n      useSEM.value ? 'sem' : 'std', true);\n    aggregatedData.value = grouper.groupData(timeSeriesData);\n      \n    \n    \n    \n    \n    aggregatedSelection.value = {\n      id: v4(),\n      region: {...props.selection.region, color: '#444', name: 'Aggregated'  } as typeof props.selection.region, // Different color for aggregated\n      timeRange: createAggregatedTimeRange(),\n      molecule: props.selection.molecule,\n      samples: aggregatedData.value.values,\n      errors: aggregatedData.value.errors,\n      locations: aggregatedData.value.locations\n    };\n    \n  } catch (error) {\n    console.error('Error aggregating data:', error);\n    aggregatedData.value = null;\n    aggregatedSelection.value = null;\n  }\n  \n  // Update graph data after aggregation\n  updateGraphData();\n}\n\n// Save the aggregation\nfunction saveAggregation() {\n  if (!canSave.value || !props.selection) return;\n  \n  const aggregatedSelection: UserDataset = {\n    id: v4(),\n    region: props.selection.region,\n    timeRange: createAggregatedTimeRange(),\n    molecule: props.selection.molecule,\n    samples: aggregatedData.value!.values,\n    errors: aggregatedData.value!.errors,\n    locations: aggregatedData.value!.locations\n  };\n  \n  emit('save', aggregatedSelection);\n  closeDialog();\n}\n\n// Close dialog\nfunction closeDialog() {\n  dialogOpen.value = false;\n  // Reset state\n  nextTick(() => {\n    aggregatedData.value = null;\n  });\n}\n\n// Watch for selection changes\nwatch(() => props.selection, () => {\n  if (props.selection) {\n    updateAggregatedData();\n  }\n}, { immediate: true });\n\n// Watch error type selects\nwatch([originalErrorType, aggregatedErrorType], () => updateGraphData());\n</script>\n\n<style scoped>\n.v-card {\n  height: 100%;\n}\n\n.v-row {\n  height: 100%;\n}\n\n.v-col {\n  height: 100%;\n}\n</style>\n","import script from \"./DataAggregation.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DataAggregation.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./DataAggregation.vue?vue&type=style&index=0&id=9df64f86&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9df64f86\"]])\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"d-flex flex-row flex-wrap\" }\nconst _hoisted_2 = { class: \"text-caption\" }\nconst _hoisted_3 = { class: \"d-flex ga-2\" }\nconst _hoisted_4 = { style: {\"height\":\"calc(100% - 40px)\"} }\n\nimport { ref, computed, watch, nextTick } from 'vue';\nimport { v4 } from 'uuid';\nimport { TimeSeriesFolder, sortfoldBinContent } from '../esri/services/aggregation';\nimport PlotlyGraph from './PlotlyGraph.vue';\nimport type { Prettify, UserDataset, DataSet } from '../types';\nimport type { AggregationMethod, TimeSeriesData, FoldedTimeSeriesData , FoldType, FoldBinContent} from '../esri/services/aggregation';\n\n\ninterface DataFoldingProps {\n  selection: UserDataset | null;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'DataFolding',\n  props: /*@__PURE__*/_mergeModels({\n    selection: {}\n  }, {\n    \"modelValue\": { type: Boolean, ...{ type: Boolean, required: true } },\n    \"modelModifiers\": {},\n  }),\n  emits: /*@__PURE__*/_mergeModels([\"save\"], [\"update:modelValue\"]),\n  setup(__props: any, { emit: __emit }) {\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nconst props = __props;\n\nconst emit = __emit;\n\n// Dialog state\nconst dialogOpen = _useModel<boolean>(__props, 'modelValue');\n\n// Folding options\nconst foldingOptions = [\n  { title: 'By Hour', value: 'hourOfDay' },\n  { title: 'By Day of Week', value: 'dayOfWeek' },\n  { title: 'By Hour of Week', value: 'hourOfWeek' },\n  { title: 'Weekday vs Weekend', value: 'weekdayWeekend' }\n];\n\nconst methodOptions = [\n  { title: 'Mean', value: 'mean' },\n  { title: 'Min', value: 'min' },\n  { title: 'Max', value: 'max' }\n];\n\nconst timezoneOptions = [\n  { title: 'US/Eastern', value: 'US/Eastern' },\n  { title: 'US/Central', value: 'US/Central' },\n  { title: 'US/Mountain', value: 'US/Mountain' },\n  { title: 'US/Pacific', value: 'US/Pacific' },\n  { title: 'UTC', value: 'UTC' }\n];\n\n// Reactive state\nconst selectedFoldType = ref<FoldType>('hourOfDay');\nconst selectedMethod = ref<AggregationMethod>('mean');\nconst selectedTimezone = ref('US/Eastern');\nconst showErrors = ref(true);\nconst useSEM = ref(false);\nconst includeBinPhase = ref(true);\nconst alignToBinCenter = ref(false);\nconst useErrorBars = ref(true);\n\n// Computed properties\nconst originalDataPointCount = computed(() => {\n  if (!props.selection?.samples) return 0;\n  return Object.keys(props.selection.samples).length;\n});\n\nconst foldedDataPointCount = computed(() => {\n  if (!foldedData.value) return 0;\n  return Object.keys(foldedData.value.values).length;\n});\n\nconst canSave = computed(() => {\n  return !!(props.selection && foldedData.value && foldedDataPointCount.value > 0);\n});\n\n// Aggregated data\nconst foldedData = ref<FoldedTimeSeriesData | null>(null);\nconst foldedSelection = ref<null>(null);\n// Graph data for display - now a ref that gets manually updated\nconst graphData = ref<DataSet[]>([]);\n\n\n\nfunction timeseriesToDataSet(timeseries: TimeSeriesData): DataSet {\n  const x: DataSet['x'] = [];\n  const y: DataSet['y'] = [];\n  const lower: DataSet['lower'] = [];\n  const upper: DataSet['upper'] = [];\n\n  // tsa, tsb are the timestamps as strings\n  const sortedEntries = Object.entries(timeseries.values).sort(([tsa, _a], [tsb, _b]) => parseInt(tsa) - parseInt(tsb));\n  // get the first timestamp\n  sortedEntries.forEach(([timestamp, aggValue]) => {\n    y.push(aggValue.value);\n    x.push(new Date(parseInt(timestamp)));\n    const error = timeseries.errors[timestamp];\n    lower.push(error?.lower ?? null);\n    upper.push(error?.upper ?? null);\n  });\n\n  return { x, y, lower, upper };\n}\n\nfunction foldedTimesSeriesToDataSet(foldedTimeSeries: FoldedTimeSeriesData): DataSet {\n  const x: (number | null)[] = [];\n  const y: (number | null)[] = [];\n  const lower: (number | null)[] = [];\n  const upper: (number | null)[] = [];\n\n  // tsa, tsb are the timestamps as strings\n  const sortedEntries = Object.entries(foldedTimeSeries.bins).sort(([binIndexa, _a], [binIndexb, _b]) => parseInt(binIndexa) - parseInt(binIndexb));\n\n  sortedEntries.forEach(([binIndex, _binContent]) => {\n    const idx = parseInt(binIndex);\n    x.push(idx + (alignToBinCenter.value ? 0.5 : 0));\n    y.push(foldedTimeSeries.values[idx].value);\n    const error = foldedTimeSeries.errors[idx];\n    lower.push(error?.lower ?? null);\n    upper.push(error?.upper ?? null);\n  });\n\n  return { x, y, lower, upper };\n}\n\nfunction checkMonotonicIncreasing(arr: number[]): boolean {\n  for (let i = 1; i < arr.length; i++) {\n    if (arr[i] < arr[i - 1]) {\n      return false;\n    }\n  }\n  return true;\n}\n  \nfunction foldedTimeSeriesRawToDataSet(foldedTimeSeries: FoldedTimeSeriesData): DataSet {\n  const x: (number | null)[] = [];\n  const y: (number | null)[] = [];\n  const lower: (number | null)[] = [];\n  const upper: (number | null)[] = [];\n\n  // tsa, tsb are the timestamps as strings\n  const sortedEntries = Object.entries(foldedTimeSeries.bins).sort(([binIndexa, _a], [binIndexb, _b]) => parseInt(binIndexa) - parseInt(binIndexb));\n\n  sortedEntries.forEach(([binIndex, binContent]) => {\n    const sortedBinContent = sortfoldBinContent(binContent);\n    const idx = sortedBinContent.bin;\n    const bins = sortedBinContent as Prettify<FoldBinContent>;\n    bins.rawValues.forEach((rv, index) => {\n      x.push(bins.bin + (includeBinPhase.value ? bins.binPhase[index] : 0));\n      y.push(rv);\n    });\n    bins.lowers.forEach(low => {\n      lower.push(low ?? null);\n    });\n    bins.uppers.forEach(up => {\n      upper.push(up ?? null);\n    });\n    // const error = foldedTimeSeries.errors[idx];\n    // lower.push(error?.lower ?? null);\n    // upper.push(error?.upper ?? null);\n  });\n  \n  // Ensure x is strictly increasing for Plotly\n  // if (!checkMonotonicIncreasing(x)) {\n  //   console.error(\"X values are not strictly increasing, adjusting for Plotly compatibility.\");\n  // }\n  \n  return { x, y, lower, upper, errorType: useErrorBars.value ? 'bar' : 'band' };\n}\n\n// Function to update graph data\nfunction updateGraphData() {\n  console.log(\"Updating graph data\");\n  if (!props.selection) {\n    graphData.value = [];\n    return;\n  }\n  \n  // const data = [timeseriesToDataSet(selectionToTimeseries(props.selection))]; // Original data\n  const data: DataSet[] = [];\n  \n  if (foldedData.value) {\n    data.push(foldedTimeSeriesRawToDataSet(foldedData.value)); // Raw folded data\n    data.push(foldedTimesSeriesToDataSet(foldedData.value));\n  }\n  \n  graphData.value = data;\n  console.log(\"Graph data updated with\", data.length, \"datasets\");\n}\n\n// Create a time range for the folded data\nfunction createFoldedTimeRange() {\n  if (!props.selection) {\n    throw new Error('No selection available');\n  }\n  \n  const originalRange = props.selection.timeRange.range;\n  const ranges = Array.isArray(originalRange) ? originalRange : [originalRange];\n  \n  return {\n    id: v4(),\n    name: `Folded (${selectedFoldType.value})`,\n    description: `Folded data (${selectedFoldType.value}) ${selectedMethod.value}`,\n    range: ranges,\n    type: 'folded'\n  };\n}\n\n// Watch for changes in folding parameters\nwatch([\n  selectedFoldType, \n  selectedMethod, \n  selectedTimezone, \n  useSEM, \n  includeBinPhase, \n  alignToBinCenter, \n  useErrorBars\n], () => {\n  updateAggregatedData();\n}, { immediate: true });\n\nfunction selectionToTimeseries(selection: UserDataset): TimeSeriesData {\n  return {\n    values: selection.samples || {},\n    errors: selection.errors || {},\n    locations: selection.locations || [],\n    geometryType: selection.region.geometryType || 'rectangle'\n  };\n}\n\n// Update folded data when parameters change\nfunction updateAggregatedData() {\n  console.log(\"Updating folded data with window:\", selectedFoldType.value, \"method:\", selectedMethod.value, \"timezone:\", selectedTimezone.value);\n  if (!props.selection?.samples) {\n    foldedData.value = null;\n    return;\n  }\n  \n  try {\n    \n    // Convert the selection data to TimeSeriesData format\n    const timeSeriesData = selectionToTimeseries(props.selection);\n    \n    \n    const grouper = new TimeSeriesFolder(\n      selectedFoldType.value, \n      selectedTimezone.value, \n      selectedMethod.value, \n      useSEM.value ? 'sem' : 'std', true);\n    foldedData.value = grouper.foldData(timeSeriesData);\n      \n    \n    \n    \n    \n    // foldedSelection.value = {\n    //   id: v4(),\n    //   region: props.selection.region,\n    //   timeRange: createAggregatedTimeRange(),\n    //   molecule: props.selection.molecule,\n    //   samples: foldedData.value.values,\n    //   errors: foldedData.value.errors,\n    //   locations: foldedData.value.locations\n    // };\n    \n  } catch (error) {\n    console.error('Error aggregating data:', error);\n    foldedData.value = null;\n    foldedSelection.value = null;\n  }\n  \n  // Update graph data after folding\n  updateGraphData();\n}\n\n// Save the folding\nfunction saveFolding() {\n  if (!canSave.value || !props.selection || !foldedData.value) return;\n\n  // Precompute datasets so parent consumers don't need to transform again.\n  // We intentionally do NOT fabricate Dates for bins; x values remain numeric bin indices / phases.\n  const rawDataset = foldedTimeSeriesRawToDataSet(foldedData.value);\n  const summaryDataset = foldedTimesSeriesToDataSet(foldedData.value);\n\n  const foldedSelection: UserDataset = {\n    id: v4(),\n    region: { ...props.selection.region, color: '#333', name: props.selection.region.name } as typeof props.selection.region,\n    timeRange: createFoldedTimeRange(),\n    molecule: props.selection.molecule,\n    loading: false, // folded data is immediately available\n    // samples/errors intentionally omitted for folded since bins are synthetic; rely on plotlyDatasets\n    locations: foldedData.value.locations,\n    folded: {\n      foldType: selectedFoldType.value,\n      method: selectedMethod.value,\n      timezone: selectedTimezone.value,\n      useSEM: useSEM.value,\n      includeBinPhase: includeBinPhase.value,\n      alignToBinCenter: alignToBinCenter.value,\n      useErrorBars: useErrorBars.value,\n      raw: foldedData.value\n    },\n    plotlyDatasets: [rawDataset, summaryDataset]\n  } as unknown as UserDataset;\n  console.log(foldedSelection);\n  emit('save', foldedSelection);\n  closeDialog();\n}\n\n// Close dialog\nfunction closeDialog() {\n  dialogOpen.value = false;\n  // Reset state\n  nextTick(() => {\n    foldedData.value = null;\n  });\n}\n\n// Watch for selection changes\nwatch(() => props.selection, () => {\n  if (props.selection) {\n    updateAggregatedData();\n  }\n}, { immediate: true });\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_toolbar_title = _resolveComponent(\"v-toolbar-title\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_toolbar = _resolveComponent(\"v-toolbar\")!\n  const _component_v_card_title = _resolveComponent(\"v-card-title\")!\n  const _component_v_select = _resolveComponent(\"v-select\")!\n  const _component_v_checkbox = _resolveComponent(\"v-checkbox\")!\n  const _component_v_card_subtitle = _resolveComponent(\"v-card-subtitle\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_col = _resolveComponent(\"v-col\")!\n  const _component_v_row = _resolveComponent(\"v-row\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n\n  return (_openBlock(), _createBlock(_component_v_card, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_toolbar, {\n        density: \"compact\",\n        color: \"var(--info-background)\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_toolbar_title, null, {\n            default: _withCtx(() => [...(_cache[8] || (_cache[8] = [\n              _createTextVNode(\"Data Folding\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_v_spacer),\n          _createVNode(_component_v_btn, {\n            icon: \"mdi-close\",\n            onClick: closeDialog\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_v_card_text, { class: \"pa-4\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_row, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_col, {\n                cols: \"12\",\n                md: \"4\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_card, {\n                    variant: \"outlined\",\n                    class: \"pa-3\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_v_card_title, { class: \"text-h6 pa-0 mb-3\" }, {\n                        default: _withCtx(() => [...(_cache[9] || (_cache[9] = [\n                          _createTextVNode(\"Folding Options\", -1)\n                        ]))]),\n                        _: 1\n                      }),\n                      _createVNode(_component_v_select, {\n                        modelValue: selectedFoldType.value,\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((selectedFoldType).value = $event)),\n                        items: foldingOptions,\n                        label: \"Time Window\",\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"hide-details\": \"\",\n                        class: \"mb-3\"\n                      }, null, 8, [\"modelValue\"]),\n                      _createVNode(_component_v_select, {\n                        modelValue: selectedTimezone.value,\n                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((selectedTimezone).value = $event)),\n                        items: timezoneOptions,\n                        label: \"Timezone\",\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"hide-details\": \"\",\n                        class: \"mb-3\"\n                      }, null, 8, [\"modelValue\"]),\n                      _createVNode(_component_v_select, {\n                        modelValue: selectedMethod.value,\n                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((selectedMethod).value = $event)),\n                        items: methodOptions,\n                        label: \"Folding Method\",\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"hide-details\": \"\",\n                        class: \"mb-3\"\n                      }, null, 8, [\"modelValue\"]),\n                      _createElementVNode(\"div\", _hoisted_1, [\n                        _createVNode(_component_v_checkbox, {\n                          modelValue: showErrors.value,\n                          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((showErrors).value = $event)),\n                          label: \"Show Error Bands\",\n                          density: \"compact\",\n                          \"hide-details\": \"\",\n                          class: \"mb-3\"\n                        }, null, 8, [\"modelValue\"]),\n                        _createVNode(_component_v_checkbox, {\n                          modelValue: useErrorBars.value,\n                          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((useErrorBars).value = $event)),\n                          label: \"Error Bars\",\n                          density: \"compact\",\n                          \"hide-details\": \"\",\n                          class: \"mb-3\"\n                        }, null, 8, [\"modelValue\"]),\n                        _createVNode(_component_v_checkbox, {\n                          modelValue: useSEM.value,\n                          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((useSEM).value = $event)),\n                          label: \"Use SEM\",\n                          density: \"compact\",\n                          \"hide-details\": \"\",\n                          class: \"mb-3\"\n                        }, null, 8, [\"modelValue\"]),\n                        _createVNode(_component_v_checkbox, {\n                          modelValue: includeBinPhase.value,\n                          \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((includeBinPhase).value = $event)),\n                          label: \"Use True Time\",\n                          density: \"compact\",\n                          \"hide-details\": \"\",\n                          class: \"mb-3\"\n                        }, null, 8, [\"modelValue\"]),\n                        _createVNode(_component_v_checkbox, {\n                          modelValue: alignToBinCenter.value,\n                          \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((alignToBinCenter).value = $event)),\n                          label: \"Center bins\",\n                          density: \"compact\",\n                          \"hide-details\": \"\",\n                          class: \"mb-3\"\n                        }, null, 8, [\"modelValue\"])\n                      ]),\n                      _createVNode(_component_v_card, {\n                        height: \"fit-content\",\n                        variant: \"tonal\",\n                        class: \"pa-2 mb-3\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_v_card_subtitle, { class: \"pa-0\" }, {\n                            default: _withCtx(() => [...(_cache[10] || (_cache[10] = [\n                              _createTextVNode(\"Preview\", -1)\n                            ]))]),\n                            _: 1\n                          }),\n                          _createElementVNode(\"div\", _hoisted_2, [\n                            _createElementVNode(\"div\", null, \"Original points: \" + _toDisplayString(originalDataPointCount.value), 1),\n                            _createElementVNode(\"div\", null, \"Aggregated points: \" + _toDisplayString(foldedDataPointCount.value), 1),\n                            _createElementVNode(\"div\", null, \"Window: \" + _toDisplayString(selectedFoldType.value), 1)\n                          ])\n                        ]),\n                        _: 1\n                      }),\n                      _createElementVNode(\"div\", _hoisted_3, [\n                        _createVNode(_component_v_btn, {\n                          color: \"primary\",\n                          onClick: saveFolding,\n                          disabled: !canSave.value,\n                          size: \"small\"\n                        }, {\n                          default: _withCtx(() => [...(_cache[11] || (_cache[11] = [\n                            _createTextVNode(\" Save Folding \", -1)\n                          ]))]),\n                          _: 1\n                        }, 8, [\"disabled\"]),\n                        _createVNode(_component_v_btn, {\n                          color: \"secondary\",\n                          variant: \"outlined\",\n                          onClick: closeDialog,\n                          size: \"small\"\n                        }, {\n                          default: _withCtx(() => [...(_cache[12] || (_cache[12] = [\n                            _createTextVNode(\" Cancel \", -1)\n                          ]))]),\n                          _: 1\n                        })\n                      ])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_v_col, {\n                cols: \"12\",\n                md: \"8\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_card, {\n                    variant: \"outlined\",\n                    class: \"pa-3\",\n                    style: {\"height\":\"500px\"}\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_v_card_title, null, {\n                        default: _withCtx(() => [...(_cache[13] || (_cache[13] = [\n                          _createTextVNode(\" Time Series Comparison \", -1)\n                        ]))]),\n                        _: 1\n                      }),\n                      _createElementVNode(\"div\", _hoisted_4, [\n                        _createVNode(PlotlyGraph, {\n                          datasets: graphData.value,\n                          \"show-errors\": showErrors.value,\n                          colors: [_ctx.selection?.region.color ?? 'blue', '#333'],\n                          \"data-options\": [\n                    {mode: 'markers'}, // options for the original data\n                    {mode: 'lines+markers'} // options for the folded data\n                    ]\n                        }, null, 8, [\"datasets\", \"show-errors\", \"colors\"])\n                      ])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n  <!-- <v-dialog\n    v-model=\"dialogOpen\"\n    max-width=\"90vw\"\n    max-height=\"90vh\"\n    persistent\n    scrollable\n  > -->\n    <v-card>\n      <v-toolbar\n        density=\"compact\"\n        color=\"var(--info-background)\"\n      >\n        <v-toolbar-title>Data Folding</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-btn\n          icon=\"mdi-close\"\n          @click=\"closeDialog\"\n        ></v-btn>\n      </v-toolbar>\n      \n      <v-card-text class=\"pa-4\">\n        <v-row>\n          <!-- Left Panel: Folding Options -->\n          <v-col cols=\"12\" md=\"4\">\n            <v-card variant=\"outlined\" class=\"pa-3\">\n              <v-card-title class=\"text-h6 pa-0 mb-3\">Folding Options</v-card-title>\n              \n              <!-- Time Window Selection -->\n              <v-select\n                v-model=\"selectedFoldType\"\n                :items=\"foldingOptions\"\n                label=\"Time Window\"\n                density=\"compact\"\n                variant=\"outlined\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <!-- Timezone Selection -->\n              <v-select\n                v-model=\"selectedTimezone\"\n                :items=\"timezoneOptions\"\n                label=\"Timezone\"\n                density=\"compact\"\n                variant=\"outlined\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <!-- Folding Method -->\n              <v-select\n                v-model=\"selectedMethod\"\n                :items=\"methodOptions\"\n                label=\"Folding Method\"\n                density=\"compact\"\n                variant=\"outlined\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <!-- Show Errors Toggle -->\n              <div class=\"d-flex flex-row flex-wrap\">\n              <v-checkbox\n                v-model=\"showErrors\"\n                label=\"Show Error Bands\"\n                density=\"compact\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <v-checkbox\n                v-model=\"useErrorBars\"\n                label=\"Error Bars\"\n                density=\"compact\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <!-- Show Errors Toggle -->\n              <v-checkbox\n                v-model=\"useSEM\"\n                label=\"Use SEM\"\n                density=\"compact\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <v-checkbox\n                v-model=\"includeBinPhase\"\n                label=\"Use True Time\"\n                density=\"compact\"\n                hide-details\n                class=\"mb-3\"\n              />\n              \n              <v-checkbox\n                v-model=\"alignToBinCenter\"\n                label=\"Center bins\"\n                density=\"compact\"\n                hide-details\n                class=\"mb-3\"\n              />\n              </div>\n              <!-- Preview Info -->\n              <v-card height=\"fit-content\" variant=\"tonal\" class=\"pa-2 mb-3\">\n                <v-card-subtitle class=\"pa-0\">Preview</v-card-subtitle>\n                <div class=\"text-caption\">\n                  <div>Original points: {{ originalDataPointCount }}</div>\n                  <div>Aggregated points: {{ foldedDataPointCount }}</div>\n                  <div>Window: {{ selectedFoldType }}</div>\n                </div>\n              </v-card>\n              \n              <!-- Action Buttons -->\n              <div class=\"d-flex ga-2\">\n                <v-btn\n                  color=\"primary\"\n                  @click=\"saveFolding\"\n                  :disabled=\"!canSave\"\n                  size=\"small\"\n                >\n                  Save Folding\n                </v-btn>\n                <v-btn\n                  color=\"secondary\"\n                  variant=\"outlined\"\n                  @click=\"closeDialog\"\n                  size=\"small\"\n                >\n                  Cancel\n                </v-btn>\n              </div>\n            </v-card>\n          </v-col>\n          \n          <!-- Right Panel: Timeseries Graph -->\n          <v-col cols=\"12\" md=\"8\">\n            <v-card variant=\"outlined\" class=\"pa-3\" style=\"height: 500px;\">\n              <v-card-title>\n                Time Series Comparison\n              </v-card-title>\n              <div style=\"height: calc(100% - 40px);\">\n                <plotly-graph\n                  :datasets=\"graphData\"\n                  :show-errors=\"showErrors\"\n                  :colors=\"[selection?.region.color ?? 'blue', '#333']\"\n                  :data-options=\"[\n                    {mode: 'markers'}, // options for the original data\n                    {mode: 'lines+markers'} // options for the folded data\n                    ]\"\n                />\n              </div>\n            </v-card>\n          </v-col>\n        </v-row>\n      </v-card-text>\n    </v-card>\n  <!-- </v-dialog> -->\n</template>\n\n<script setup lang=\"ts\">\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { ref, computed, watch, nextTick } from 'vue';\nimport { v4 } from 'uuid';\nimport { TimeSeriesFolder, sortfoldBinContent } from '../esri/services/aggregation';\nimport PlotlyGraph from './PlotlyGraph.vue';\nimport type { Prettify, UserDataset, DataSet } from '../types';\nimport type { AggregationMethod, TimeSeriesData, FoldedTimeSeriesData , FoldType, FoldBinContent} from '../esri/services/aggregation';\n\n\ninterface DataFoldingProps {\n  selection: UserDataset | null;\n}\n\nconst props = defineProps<DataFoldingProps>();\n\nconst emit = defineEmits<{\n  (event: 'save', foldedSelection: UserDataset): void;\n}>();\n\n// Dialog state\nconst dialogOpen = defineModel<boolean>('modelValue', { type: Boolean, required: true });\n\n// Folding options\nconst foldingOptions = [\n  { title: 'By Hour', value: 'hourOfDay' },\n  { title: 'By Day of Week', value: 'dayOfWeek' },\n  { title: 'By Hour of Week', value: 'hourOfWeek' },\n  { title: 'Weekday vs Weekend', value: 'weekdayWeekend' }\n];\n\nconst methodOptions = [\n  { title: 'Mean', value: 'mean' },\n  { title: 'Min', value: 'min' },\n  { title: 'Max', value: 'max' }\n];\n\nconst timezoneOptions = [\n  { title: 'US/Eastern', value: 'US/Eastern' },\n  { title: 'US/Central', value: 'US/Central' },\n  { title: 'US/Mountain', value: 'US/Mountain' },\n  { title: 'US/Pacific', value: 'US/Pacific' },\n  { title: 'UTC', value: 'UTC' }\n];\n\n// Reactive state\nconst selectedFoldType = ref<FoldType>('hourOfDay');\nconst selectedMethod = ref<AggregationMethod>('mean');\nconst selectedTimezone = ref('US/Eastern');\nconst showErrors = ref(true);\nconst useSEM = ref(false);\nconst includeBinPhase = ref(true);\nconst alignToBinCenter = ref(false);\nconst useErrorBars = ref(true);\n\n// Computed properties\nconst originalDataPointCount = computed(() => {\n  if (!props.selection?.samples) return 0;\n  return Object.keys(props.selection.samples).length;\n});\n\nconst foldedDataPointCount = computed(() => {\n  if (!foldedData.value) return 0;\n  return Object.keys(foldedData.value.values).length;\n});\n\nconst canSave = computed(() => {\n  return !!(props.selection && foldedData.value && foldedDataPointCount.value > 0);\n});\n\n// Aggregated data\nconst foldedData = ref<FoldedTimeSeriesData | null>(null);\nconst foldedSelection = ref<null>(null);\n// Graph data for display - now a ref that gets manually updated\nconst graphData = ref<DataSet[]>([]);\n\n\n\nfunction timeseriesToDataSet(timeseries: TimeSeriesData): DataSet {\n  const x: DataSet['x'] = [];\n  const y: DataSet['y'] = [];\n  const lower: DataSet['lower'] = [];\n  const upper: DataSet['upper'] = [];\n\n  // tsa, tsb are the timestamps as strings\n  const sortedEntries = Object.entries(timeseries.values).sort(([tsa, _a], [tsb, _b]) => parseInt(tsa) - parseInt(tsb));\n  // get the first timestamp\n  sortedEntries.forEach(([timestamp, aggValue]) => {\n    y.push(aggValue.value);\n    x.push(new Date(parseInt(timestamp)));\n    const error = timeseries.errors[timestamp];\n    lower.push(error?.lower ?? null);\n    upper.push(error?.upper ?? null);\n  });\n\n  return { x, y, lower, upper };\n}\n\nfunction foldedTimesSeriesToDataSet(foldedTimeSeries: FoldedTimeSeriesData): DataSet {\n  const x: (number | null)[] = [];\n  const y: (number | null)[] = [];\n  const lower: (number | null)[] = [];\n  const upper: (number | null)[] = [];\n\n  // tsa, tsb are the timestamps as strings\n  const sortedEntries = Object.entries(foldedTimeSeries.bins).sort(([binIndexa, _a], [binIndexb, _b]) => parseInt(binIndexa) - parseInt(binIndexb));\n\n  sortedEntries.forEach(([binIndex, _binContent]) => {\n    const idx = parseInt(binIndex);\n    x.push(idx + (alignToBinCenter.value ? 0.5 : 0));\n    y.push(foldedTimeSeries.values[idx].value);\n    const error = foldedTimeSeries.errors[idx];\n    lower.push(error?.lower ?? null);\n    upper.push(error?.upper ?? null);\n  });\n\n  return { x, y, lower, upper };\n}\n\nfunction checkMonotonicIncreasing(arr: number[]): boolean {\n  for (let i = 1; i < arr.length; i++) {\n    if (arr[i] < arr[i - 1]) {\n      return false;\n    }\n  }\n  return true;\n}\n  \nfunction foldedTimeSeriesRawToDataSet(foldedTimeSeries: FoldedTimeSeriesData): DataSet {\n  const x: (number | null)[] = [];\n  const y: (number | null)[] = [];\n  const lower: (number | null)[] = [];\n  const upper: (number | null)[] = [];\n\n  // tsa, tsb are the timestamps as strings\n  const sortedEntries = Object.entries(foldedTimeSeries.bins).sort(([binIndexa, _a], [binIndexb, _b]) => parseInt(binIndexa) - parseInt(binIndexb));\n\n  sortedEntries.forEach(([binIndex, binContent]) => {\n    const sortedBinContent = sortfoldBinContent(binContent);\n    const idx = sortedBinContent.bin;\n    const bins = sortedBinContent as Prettify<FoldBinContent>;\n    bins.rawValues.forEach((rv, index) => {\n      x.push(bins.bin + (includeBinPhase.value ? bins.binPhase[index] : 0));\n      y.push(rv);\n    });\n    bins.lowers.forEach(low => {\n      lower.push(low ?? null);\n    });\n    bins.uppers.forEach(up => {\n      upper.push(up ?? null);\n    });\n    // const error = foldedTimeSeries.errors[idx];\n    // lower.push(error?.lower ?? null);\n    // upper.push(error?.upper ?? null);\n  });\n  \n  // Ensure x is strictly increasing for Plotly\n  // if (!checkMonotonicIncreasing(x)) {\n  //   console.error(\"X values are not strictly increasing, adjusting for Plotly compatibility.\");\n  // }\n  \n  return { x, y, lower, upper, errorType: useErrorBars.value ? 'bar' : 'band' };\n}\n\n// Function to update graph data\nfunction updateGraphData() {\n  console.log(\"Updating graph data\");\n  if (!props.selection) {\n    graphData.value = [];\n    return;\n  }\n  \n  // const data = [timeseriesToDataSet(selectionToTimeseries(props.selection))]; // Original data\n  const data: DataSet[] = [];\n  \n  if (foldedData.value) {\n    data.push(foldedTimeSeriesRawToDataSet(foldedData.value)); // Raw folded data\n    data.push(foldedTimesSeriesToDataSet(foldedData.value));\n  }\n  \n  graphData.value = data;\n  console.log(\"Graph data updated with\", data.length, \"datasets\");\n}\n\n// Create a time range for the folded data\nfunction createFoldedTimeRange() {\n  if (!props.selection) {\n    throw new Error('No selection available');\n  }\n  \n  const originalRange = props.selection.timeRange.range;\n  const ranges = Array.isArray(originalRange) ? originalRange : [originalRange];\n  \n  return {\n    id: v4(),\n    name: `Folded (${selectedFoldType.value})`,\n    description: `Folded data (${selectedFoldType.value}) ${selectedMethod.value}`,\n    range: ranges,\n    type: 'folded'\n  };\n}\n\n// Watch for changes in folding parameters\nwatch([\n  selectedFoldType, \n  selectedMethod, \n  selectedTimezone, \n  useSEM, \n  includeBinPhase, \n  alignToBinCenter, \n  useErrorBars\n], () => {\n  updateAggregatedData();\n}, { immediate: true });\n\nfunction selectionToTimeseries(selection: UserDataset): TimeSeriesData {\n  return {\n    values: selection.samples || {},\n    errors: selection.errors || {},\n    locations: selection.locations || [],\n    geometryType: selection.region.geometryType || 'rectangle'\n  };\n}\n\n// Update folded data when parameters change\nfunction updateAggregatedData() {\n  console.log(\"Updating folded data with window:\", selectedFoldType.value, \"method:\", selectedMethod.value, \"timezone:\", selectedTimezone.value);\n  if (!props.selection?.samples) {\n    foldedData.value = null;\n    return;\n  }\n  \n  try {\n    \n    // Convert the selection data to TimeSeriesData format\n    const timeSeriesData = selectionToTimeseries(props.selection);\n    \n    \n    const grouper = new TimeSeriesFolder(\n      selectedFoldType.value, \n      selectedTimezone.value, \n      selectedMethod.value, \n      useSEM.value ? 'sem' : 'std', true);\n    foldedData.value = grouper.foldData(timeSeriesData);\n      \n    \n    \n    \n    \n    // foldedSelection.value = {\n    //   id: v4(),\n    //   region: props.selection.region,\n    //   timeRange: createAggregatedTimeRange(),\n    //   molecule: props.selection.molecule,\n    //   samples: foldedData.value.values,\n    //   errors: foldedData.value.errors,\n    //   locations: foldedData.value.locations\n    // };\n    \n  } catch (error) {\n    console.error('Error aggregating data:', error);\n    foldedData.value = null;\n    foldedSelection.value = null;\n  }\n  \n  // Update graph data after folding\n  updateGraphData();\n}\n\n// Save the folding\nfunction saveFolding() {\n  if (!canSave.value || !props.selection || !foldedData.value) return;\n\n  // Precompute datasets so parent consumers don't need to transform again.\n  // We intentionally do NOT fabricate Dates for bins; x values remain numeric bin indices / phases.\n  const rawDataset = foldedTimeSeriesRawToDataSet(foldedData.value);\n  const summaryDataset = foldedTimesSeriesToDataSet(foldedData.value);\n\n  const foldedSelection: UserDataset = {\n    id: v4(),\n    region: { ...props.selection.region, color: '#333', name: props.selection.region.name } as typeof props.selection.region,\n    timeRange: createFoldedTimeRange(),\n    molecule: props.selection.molecule,\n    loading: false, // folded data is immediately available\n    // samples/errors intentionally omitted for folded since bins are synthetic; rely on plotlyDatasets\n    locations: foldedData.value.locations,\n    folded: {\n      foldType: selectedFoldType.value,\n      method: selectedMethod.value,\n      timezone: selectedTimezone.value,\n      useSEM: useSEM.value,\n      includeBinPhase: includeBinPhase.value,\n      alignToBinCenter: alignToBinCenter.value,\n      useErrorBars: useErrorBars.value,\n      raw: foldedData.value\n    },\n    plotlyDatasets: [rawDataset, summaryDataset]\n  } as unknown as UserDataset;\n  console.log(foldedSelection);\n  emit('save', foldedSelection);\n  closeDialog();\n}\n\n// Close dialog\nfunction closeDialog() {\n  dialogOpen.value = false;\n  // Reset state\n  nextTick(() => {\n    foldedData.value = null;\n  });\n}\n\n// Watch for selection changes\nwatch(() => props.selection, () => {\n  if (props.selection) {\n    updateAggregatedData();\n  }\n}, { immediate: true });\n</script>\n\n<style scoped>\n.v-card {\n  height: 100%;\n}\n\n.v-row {\n  height: 100%;\n}\n\n.v-col {\n  height: 100%;\n}\n</style>\n","import script from \"./DataFolding.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DataFolding.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./DataFolding.vue?vue&type=style&index=0&id=be9c49ea&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-be9c49ea\"]])\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nimport { ref } from 'vue';\nimport type { UserDataset } from '../types';\n\nimport DataAggregation from './DataAggregation.vue';\nimport DataFolding from './DataFolding.vue';\n\ninterface DataAggregationProps {\n  selection: UserDataset | null;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'AdvancedOperations',\n  props: /*@__PURE__*/_mergeModels({\n    selection: {}\n  }, {\n    \"modelValue\": { type: Boolean, ...{ type: Boolean, required: true } },\n    \"modelModifiers\": {},\n  }),\n  emits: /*@__PURE__*/_mergeModels([\"save\"], [\"update:modelValue\"]),\n  setup(__props: any, { emit: __emit }) {\n\n\nconst dialogOpen = _useModel<boolean>(__props, 'modelValue');\n\n\nconst mode = ref<'aggregate' | 'fold'>('aggregate');\n\nconst emit = __emit;\n\n// Save the aggregation\nfunction saveAggregation(selection: UserDataset) {\n  emit('save', selection);\n}\n\nfunction saveFolded(selection: UserDataset) {\n  // Reuse same save channel for folded selections\n  emit('save', selection);\n}\n\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_btn_toggle = _resolveComponent(\"v-btn-toggle\")!\n  const _component_v_toolbar = _resolveComponent(\"v-toolbar\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_v_dialog, {\n    modelValue: dialogOpen.value,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((dialogOpen).value = $event)),\n    \"max-width\": \"90vw\",\n    \"max-height\": \"90vh\",\n    persistent: \"\",\n    scrollable: \"\"\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_toolbar, { flat: \"\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_btn_toggle, {\n            modelValue: mode.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((mode).value = $event)),\n            class: \"ma-4\",\n            variant: \"outlined\",\n            density: \"compact\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_btn, { value: \"aggregate\" }, {\n                default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n                  _createTextVNode(\"Aggregate Data\", -1)\n                ]))]),\n                _: 1\n              }),\n              _createVNode(_component_v_btn, { value: \"fold\" }, {\n                default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n                  _createTextVNode(\"Fold Data\", -1)\n                ]))]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"])\n        ]),\n        _: 1\n      }),\n      (mode.value === 'aggregate')\n        ? (_openBlock(), _createBlock(DataAggregation, {\n            key: 0,\n            modelValue: dialogOpen.value,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((dialogOpen).value = $event)),\n            selection: _ctx.selection,\n            onSave: saveAggregation\n          }, null, 8, [\"modelValue\", \"selection\"]))\n        : _createCommentVNode(\"\", true),\n      (mode.value === 'fold')\n        ? (_openBlock(), _createBlock(DataFolding, {\n            key: 1,\n            modelValue: dialogOpen.value,\n            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((dialogOpen).value = $event)),\n            selection: _ctx.selection,\n            onSave: saveFolded\n          }, null, 8, [\"modelValue\", \"selection\"]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _: 1\n  }, 8, [\"modelValue\"]))\n}\n}\n\n})","<template>\n  <v-dialog\n    v-model=\"dialogOpen\"\n    max-width=\"90vw\"\n    max-height=\"90vh\"\n    persistent\n    scrollable\n  > \n    <v-toolbar flat>\n      <v-btn-toggle\n        v-model=\"mode\"\n        class=\"ma-4\"\n        variant=\"outlined\"\n        density=\"compact\"\n      >\n        <v-btn value=\"aggregate\" >Aggregate Data</v-btn>\n        <v-btn value=\"fold\" >Fold Data</v-btn>\n      </v-btn-toggle>\n    </v-toolbar>\n    <data-aggregation\n      v-if=\"mode === 'aggregate'\"\n      v-model=\"dialogOpen\"\n      :selection=\"selection\"\n      @save=\"saveAggregation\"\n    />\n      \n    <data-folding\n      v-if=\"mode === 'fold'\"\n      v-model=\"dialogOpen\"\n      :selection=\"selection\"\n      @save=\"saveFolded\"\n    />\n  </v-dialog>\n\n  \n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nimport type { UserDataset } from '../types';\n\nimport DataAggregation from './DataAggregation.vue';\nimport DataFolding from './DataFolding.vue';\n\ninterface DataAggregationProps {\n  selection: UserDataset | null;\n}\n\nconst { selection } = defineProps<DataAggregationProps>();\nconst dialogOpen = defineModel<boolean>('modelValue', { type: Boolean, required: true });\n\n\nconst mode = ref<'aggregate' | 'fold'>('aggregate');\n\nconst emit = defineEmits<{\n  (event: 'save', aggregatedSelection: UserDataset): void;\n}>();\n\n// Save the aggregation\nfunction saveAggregation(selection: UserDataset) {\n  emit('save', selection);\n}\n\nfunction saveFolded(selection: UserDataset) {\n  // Reuse same save channel for folded selections\n  emit('save', selection);\n}\n\n\n\n</script>\n\n<style scoped>\n.v-card {\n  height: 100%;\n}\n\n.v-row {\n  height: 100%;\n}\n\n.v-col {\n  height: 100%;\n}\n</style>\n","import script from \"./AdvancedOperations.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AdvancedOperations.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AdvancedOperations.vue?vue&type=style&index=0&id=39ac9891&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-39ac9891\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withKeys as _withKeys, mergeProps as _mergeProps, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { ref } from 'vue';\n\nexport default /*@__PURE__*/_defineComponent({\n  ...{ inheritAttrs: false },\n  __name: 'CTextField',\n  props: {\n    title: {},\n    label: {},\n    buttonColor: {},\n    confirmText: { default: 'Done' },\n    minWidth: { default: 300 },\n    width: { default: '50%' }\n  },\n  emits: [\"update:modelValue\", \"confirm\", \"cancel\"],\n  setup(__props: any, { emit: __emit }) {\n\n\n\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst props = __props;\n\n// const modelValue = defineModel('modelValue', { type: String, required: true });\n\nconst emit = __emit;\n\nconst local = ref('');\n// watch(modelValue, v => { \n//   if (v !== local.value) {\n//     local.value = v; \n//   }\n// });\n\n// don't update the model value\n// watch(local, v => emit('update:modelValue', v));\n\nfunction onConfirm() {\n  if (!local.value.trim()) return;\n  emit('confirm', local.value.trim());\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_card_title = _resolveComponent(\"v-card-title\")!\n  const _component_v_text_field = _resolveComponent(\"v-text-field\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n\n  return (_openBlock(), _createBlock(_component_v_card, {\n    class: \"mx-auto px-3 py-2\",\n    \"min-width\": _ctx.minWidth,\n    width: _ctx.width\n  }, {\n    default: _withCtx(() => [\n      _renderSlot(_ctx.$slots, \"title\", {}, () => [\n        _createVNode(_component_v_card_title, null, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(_ctx.title), 1)\n          ]),\n          _: 1\n        })\n      ]),\n      _createVNode(_component_v_text_field, _mergeProps({ class: \"mb-2 px-2\" }, _ctx.$attrs, {\n        modelValue: local.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((local).value = $event)),\n        label: _ctx.label,\n        \"hide-details\": \"\",\n        autofocus: \"\",\n        onKeyup: _withKeys(onConfirm, [\"enter\"])\n      }), null, 16, [\"modelValue\", \"label\"]),\n      _createVNode(_component_v_card_actions, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_spacer),\n          _createVNode(_component_v_btn, {\n            variant: \"text\",\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (emit('cancel')))\n          }, {\n            default: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n              _createTextVNode(\"Cancel\", -1)\n            ]))]),\n            _: 1\n          }),\n          _createVNode(_component_v_btn, {\n            color: _ctx.buttonColor,\n            variant: \"flat\",\n            disabled: !local.value.trim(),\n            onClick: onConfirm\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(_toDisplayString(_ctx.confirmText), 1)\n            ]),\n            _: 1\n          }, 8, [\"color\", \"disabled\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 3\n  }, 8, [\"min-width\", \"width\"]))\n}\n}\n\n})","<template>\n  <v-card \n    class=\"mx-auto px-3 py-2\" \n    :min-width=\"minWidth\" \n    :width=\"width\"\n    >\n    <slot name=\"title\">\n      <v-card-title>\n        {{ title }}\n      </v-card-title>\n    </slot>\n    <v-text-field\n      class=\"mb-2 px-2\"\n      v-bind=\"$attrs\"\n      v-model=\"local\"\n      :label=\"label\"\n      hide-details\n      autofocus\n      @keyup.enter=\"onConfirm\"\n    />\n    <v-card-actions>\n      <v-spacer />\n      <v-btn variant=\"text\" @click=\"emit('cancel')\">Cancel</v-btn>\n      <v-btn\n        :color=\"buttonColor\"\n        variant=\"flat\"\n        :disabled=\"!local.trim()\"\n        @click=\"onConfirm\"\n      >{{ confirmText }}</v-btn>\n    </v-card-actions>\n    \n  </v-card>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\ndefineOptions({ inheritAttrs: false });\n\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst props = withDefaults(defineProps<{\n  title?: string;\n  label?: string;\n  buttonColor?: string;\n  confirmText?: string;\n  minWidth?: string | number;\n  width?: string | number;\n}>(), {\n  confirmText: 'Done',\n  minWidth: 300,\n  width: '50%',\n});\n\n// const modelValue = defineModel('modelValue', { type: String, required: true });\n\nconst emit = defineEmits<{\n  (e:'update:modelValue', v:string): void;\n  (e:'confirm', v:string): void;\n  (e:'cancel'): void;\n}>();\n\nconst local = ref('');\n// watch(modelValue, v => { \n//   if (v !== local.value) {\n//     local.value = v; \n//   }\n// });\n\n// don't update the model value\n// watch(local, v => emit('update:modelValue', v));\n\nfunction onConfirm() {\n  if (!local.value.trim()) return;\n  emit('confirm', local.value.trim());\n}\n</script>","import script from \"./CTextField.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CTextField.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, resolveDirective as _resolveDirective, withDirectives as _withDirectives, normalizeStyle as _normalizeStyle, vShow as _vShow, normalizeClass as _normalizeClass, mergeProps as _mergeProps } from \"vue\"\n\nconst _hoisted_1 = { id: \"dataset-sections\" }\nconst _hoisted_2 = { id: \"add-region-time\" }\nconst _hoisted_3 = {\n  key: 1,\n  class: \"my-selections\",\n  style: {\"margin-top\":\"1em\"}\n}\nconst _hoisted_4 = { id: \"add-region-buttons\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"my-selections\",\n  style: {\"margin-top\":\"1em\"}\n}\nconst _hoisted_6 = {\n  key: 0,\n  class: \"my-selections\",\n  style: {\"margin-top\":\"1em\"}\n}\nconst _hoisted_7 = {\n  key: 0,\n  class: \"dataset-loading\"\n}\nconst _hoisted_8 = { class: \"text-subtitle-2\" }\nconst _hoisted_9 = { key: 0 }\nconst _hoisted_10 = { class: \"selection-icons\" }\nconst _hoisted_11 = { class: \"d-flex flex-wrap flex-row ma-2 align-center justify-center ga-1\" }\n\nimport { computed, ref } from \"vue\";\nimport { storeToRefs } from \"pinia\";\nimport { v4 } from \"uuid\";\nimport { supportsTouchscreen } from \"@cosmicds/vue-toolkit\";\n\nimport type { MillisecondRange, TimeRange, UserDataset, UnifiedRegion } from \"../types\";\nimport { useTempoStore } from \"../stores/app\";\nimport { moleculeName, MOLECULE_OPTIONS } from \"../esri/utils\";\nimport { areEquivalentTimeRanges, formatTimeRange } from \"../utils/timeRange\";\nimport { atleast1d } from \"../utils/atleast1d\";\n\nimport DateTimeRangeSelection from \"../date_time_range_selection/DateTimeRangeSelection.vue\";\nimport AdvancedOperations from \"./AdvancedOperations.vue\";\nimport { TimeRangeSelectionType } from \"@/types/datetime\";\nimport PlotlyGraph from \"./PlotlyGraph.vue\";\nimport CTextField from \"./CTextField.vue\";\n\ntype UnifiedRegionType = UnifiedRegion<typeof backend.value>;\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'DatasetControls',\n  setup(__props) {\n\nconst store = useTempoStore();\nconst {\n  accentColor,\n  accentColor2,\n  backend,\n  regions,\n  datasets,\n  timeRanges,\n  singleDateSelected,\n  selectedTimezone,\n  uniqueDays,\n  selectionActive,\n  lastFocusedRegion,\n} = storeToRefs(store);\n\nfunction plotlyDragPredicate(element: HTMLElement): boolean {\n  return element.closest(\".plotly\") === null;\n}\n\nconst touchscreen = supportsTouchscreen();\n\nconst openPanels = ref<number[]>([]);\nconst openGraphs = ref<Record<string,boolean>>({});\nconst openSelection = ref<string | null>(null);\nconst tableSelection = ref<UserDataset | null>(null);\n\nconst createTimeRangeActive = ref(false);\nconst createDatasetActive = ref(false);\nconst datasetRowRefs = ref({});\nconst sampleErrorID = ref<string | null>(null);\nconst loadingPointSample = ref<string | false>(false);\n\nconst showEditRegionNameDialog = ref(false);\nconst regionBeingEdited = ref<UnifiedRegionType | null>(null);\n\nconst aggregationDataset = ref<UserDataset | null>(null);\nconst showAggregationDialog = ref(false);\nfunction openAggregationDialog(selection: UserDataset) {\n  aggregationDataset.value = selection;\n  showAggregationDialog.value = true;\n}\nfunction handleAggregationSaved(aggregatedSelection: UserDataset) {\n  store.addDataset(aggregatedSelection, false); // no need to fetch anything\n  showAggregationDialog.value = false;\n  aggregationDataset.value = null;\n}\n\nfunction handleDatasetCreated(dataset: UserDataset) {\n  store.addDataset(dataset);\n  createDatasetActive.value = false;\n}\n\nfunction removeDataset(dataset: UserDataset) {\n  store.deleteDataset(dataset);\n\n  delete openGraphs[dataset.id];\n  delete datasetRowRefs[dataset.id];\n}\n\nfunction handleDateTimeRangeSelectionChange(timeRanges: MillisecondRange[], selectionType: TimeRangeSelectionType) {\n  if (!Array.isArray(timeRanges) || timeRanges.length === 0) {\n    console.error('No time ranges received from DateTimeRangeSelection');\n    return;\n  }\n  const normalized = atleast1d(timeRanges);\n  // No dedup tracking now\n  // Build description based on selection type\n  let descriptionBase = 'Custom';\n  switch (selectionType) {\n  case 'weekday':\n    descriptionBase = 'Weekday Pattern';\n    break;\n  case 'daterange':\n    descriptionBase = 'Date Range';\n    break;\n  case 'singledate':\n    descriptionBase = 'Single Date';\n    break;\n  case 'pattern':\n    descriptionBase = 'Pattern';\n    break;\n  }\n  const formatted = formatTimeRange(normalized);\n  const description = `${descriptionBase} (${formatted})`;\n  const tr: TimeRange = {\n    id: v4(),\n    name: formatted,\n    description,\n    range: normalized.length === 1 ? normalized[0] : normalized,\n    type: selectionType,\n  };\n  store.addTimeRange(tr);\n\n  createTimeRangeActive.value = false;\n  console.log(`Registered ${tr.name}: ${tr.description}`);\n}\n\nfunction editRegionName(region: UnifiedRegionType) {\n  console.log(`Editing ${region.geometryType}: ${region.name}`);\n  // Set the region to edit\n\n  // eslint-disable-next-line\n  // @ts-ignore it is not actually deep\n  const existing = (regions.value as UnifiedRegionType[]).find(r => r.id === region.id);\n  if (!existing) {\n    console.error(`Region with ID ${region.id} not found.`);\n    return;\n  }\n  regionBeingEdited.value = region;\n  // Open dialog for renaming\n  showEditRegionNameDialog.value = true;\n}\n\nfunction graphTitle(dataset: UserDataset): string {\n  const molecule = dataset.molecule;\n  const molTitle = MOLECULE_OPTIONS.find(m => m.value === molecule)?.title || '';\n  return `${molTitle} Time Series for ${dataset.region.name}`;\n}\n\nconst showNO2Graph = ref(false);\nconst no2GraphData = computed(() =>{\n  return datasets.value.filter(s => s.molecule.includes('no2') && store.datasetHasSamples(s));\n});\n\n// ozone version\nconst showO3Graph = ref(false);\nconst o3GraphData = computed(() =>{\n  return datasets.value.filter(s => s.molecule.includes('o3') && store.datasetHasSamples(s));\n});\n\n\n// formaldehyde version\nconst showHCHOGraph = ref(false);\nconst hchoGraphData = computed(() =>{\n  return datasets.value.filter(s => s.molecule.includes('hcho') && store.datasetHasSamples(s));\n});\n\n\nconst showfoldedNO2Graph = ref(false);\nconst no2foldedGraphData = computed(() =>{\n  const validFoldedDatasets = datasets.value\n    .filter(\n      s => s.molecule.includes('no2') && \n      s.timeRange?.type === 'folded' && \n      s.plotlyDatasets && \n      s.plotlyDatasets.length > 0\n    );\n  return validFoldedDatasets.map(s => s.plotlyDatasets![1]); // \"!\" tells TS that we know it's not undefined\n});\n\nconst showfoldedO3Graph = ref(false);\nconst o3foldedGraphData = computed(() =>{\n  const validFoldedDatasets = datasets.value\n    .filter(\n      s => s.molecule.includes('o3') && \n      s.timeRange?.type === 'folded' && \n      s.plotlyDatasets && \n      s.plotlyDatasets.length > 0\n    );\n  return validFoldedDatasets.map(s => s.plotlyDatasets![1]); // \"!\" tells TS that we know it's not undefined\n}); \n\nconst showfoldedHCHOGraph = ref(false);\nconst hchofoldedGraphData = computed(() =>{\n  const validFoldedDatasets = datasets.value\n    .filter(\n      s => s.molecule.includes('hcho') && \n      s.timeRange?.type === 'folded' && \n      s.plotlyDatasets && \n      s.plotlyDatasets.length > 0\n    );\n  return validFoldedDatasets.map(s => s.plotlyDatasets![1]); // \"!\" tells TS that we know it's not undefined\n}); \n\nconst showErrorBands = ref(true);\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_list_item = _resolveComponent(\"v-list-item\")!\n  const _component_v_list = _resolveComponent(\"v-list\")!\n  const _component_v_expansion_panel = _resolveComponent(\"v-expansion-panel\")!\n  const _component_v_divider = _resolveComponent(\"v-divider\")!\n  const _component_selection_composer = _resolveComponent(\"selection-composer\")!\n  const _component_v_chip = _resolveComponent(\"v-chip\")!\n  const _component_v_progress_linear = _resolveComponent(\"v-progress-linear\")!\n  const _component_v_tooltip = _resolveComponent(\"v-tooltip\")!\n  const _component_v_expand_transition = _resolveComponent(\"v-expand-transition\")!\n  const _component_v_checkbox = _resolveComponent(\"v-checkbox\")!\n  const _component_timeseries_graph = _resolveComponent(\"timeseries-graph\")!\n  const _component_cds_dialog = _resolveComponent(\"cds-dialog\")!\n  const _component_v_toolbar_title = _resolveComponent(\"v-toolbar-title\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_toolbar = _resolveComponent(\"v-toolbar\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n  const _component_v_hover = _resolveComponent(\"v-hover\")!\n  const _component_v_expansion_panels = _resolveComponent(\"v-expansion-panels\")!\n  const _directive_tooltip = _resolveDirective(\"tooltip\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[38] || (_cache[38] = _createElementVNode(\"h2\", null, \"Investigate Patterns with Time\", -1)),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_v_expansion_panels, {\n        modelValue: openPanels.value,\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((openPanels).value = $event)),\n        variant: \"accordion\",\n        id: \"user-options-panels\",\n        multiple: \"\",\n        class: \"pl-3\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_expansion_panel, {\n            title: \"Time Ranges\",\n            class: \"mt-3 h3-panel-titles\"\n          }, {\n            text: _withCtx(() => [\n              _createVNode(_component_v_btn, {\n                size: \"small\",\n                active: createTimeRangeActive.value,\n                color: _unref(accentColor2),\n                onClick: _cache[0] || (_cache[0] = ($event: any) => (createTimeRangeActive.value = !createTimeRangeActive.value))\n              }, {\n                prepend: _withCtx(() => [\n                  (!createTimeRangeActive.value)\n                    ? (_openBlock(), _createBlock(_component_v_icon, {\n                        key: 0,\n                        icon: \"mdi-plus\"\n                      }))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                default: _withCtx(() => [\n                  _createTextVNode(\" \" + _toDisplayString(createTimeRangeActive.value ? \"Cancel\" : \"New Time Range\"), 1)\n                ]),\n                _: 1\n              }, 8, [\"active\", \"color\"]),\n              (createTimeRangeActive.value)\n                ? (_openBlock(), _createBlock(DateTimeRangeSelection, {\n                    key: 0,\n                    \"current-date\": _unref(singleDateSelected),\n                    \"selected-timezone\": _unref(selectedTimezone),\n                    \"allowed-dates\": _unref(uniqueDays),\n                    onRangesChange: handleDateTimeRangeSelectionChange\n                  }, null, 8, [\"current-date\", \"selected-timezone\", \"allowed-dates\"]))\n                : _createCommentVNode(\"\", true),\n              (_unref(timeRanges).length>0)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                    _cache[28] || (_cache[28] = _createElementVNode(\"h4\", null, \"My Time Ranges\", -1)),\n                    _createVNode(_component_v_list, null, {\n                      default: _withCtx(() => [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(timeRanges), (timeRange, index) => {\n                          return (_openBlock(), _createBlock(_component_v_list_item, {\n                            key: index,\n                            title: timeRange.name === 'Displayed Day' ? `Displayed Day: ${ _unref(formatTimeRange)(timeRange.range) }`  : _unref(formatTimeRange)(timeRange.range),\n                            style: {\"background-color\":\"#444444\"}\n                          }, {\n                            append: _withCtx(() => [\n                              (timeRange.id !== 'displayed-day' && !_unref(datasets).some(s => _unref(areEquivalentTimeRanges)(s.timeRange, timeRange)))\n                                ? _withDirectives((_openBlock(), _createBlock(_component_v_btn, {\n                                    key: 0,\n                                    variant: \"plain\",\n                                    icon: \"mdi-delete\",\n                                    color: \"white\",\n                                    onClick: () => _unref(store).deleteTimeRange(timeRange)\n                                  }, null, 8, [\"onClick\"])), [\n                                    [_directive_tooltip, 'Delete']\n                                  ])\n                                : _createCommentVNode(\"\", true)\n                            ]),\n                            _: 2\n                          }, 1032, [\"title\"]))\n                        }), 128))\n                      ]),\n                      _: 1\n                    })\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_expansion_panel, {\n            title: \"Regions\",\n            class: \"mt-3 h3-panel-titles\"\n          }, {\n            text: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_4, [\n                _createVNode(_component_v_btn, {\n                  size: \"small\",\n                  active: _unref(selectionActive) === 'rectangle',\n                  disabled: _unref(selectionActive) === 'point',\n                  color: _unref(accentColor2),\n                  onClick: _cache[1] || (_cache[1] = () => {\n                  selectionActive.value = (_unref(selectionActive) === 'rectangle') ? null : 'rectangle';\n                })\n                }, {\n                  prepend: _withCtx(() => [\n                    (_unref(selectionActive) !== 'rectangle')\n                      ? (_openBlock(), _createBlock(_component_v_icon, {\n                          key: 0,\n                          icon: \"mdi-plus\"\n                        }))\n                      : _createCommentVNode(\"\", true)\n                  ]),\n                  default: _withCtx(() => [\n                    _createTextVNode(\" \" + _toDisplayString(_unref(selectionActive) === 'rectangle' ? \"Cancel\" : \"New Region\"), 1)\n                  ]),\n                  _: 1\n                }, 8, [\"active\", \"disabled\", \"color\"])\n              ]),\n              (_unref(regions).length>0)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                    _cache[29] || (_cache[29] = _createElementVNode(\"h4\", null, \"My Regions\", -1)),\n                    _createVNode(_component_v_list, null, {\n                      default: _withCtx(() => [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(regions), (region, index) => {\n                          return (_openBlock(), _createBlock(_component_v_list_item, {\n                            key: index,\n                            title: region.name,\n                            style: _normalizeStyle({ 'background-color': region.color }),\n                            onClick: () => lastFocusedRegion.value = region\n                          }, {\n                            append: _withCtx(() => [\n                              _withDirectives(_createVNode(_component_v_btn, {\n                                variant: \"plain\",\n                                icon: \"mdi-pencil\",\n                                color: \"white\",\n                                onClick: () => editRegionName(region as UnifiedRegionType)\n                              }, null, 8, [\"onClick\"]), [\n                                [_directive_tooltip, 'Edit Name']\n                              ]),\n                              (!_unref(store).regionHasDatasets(region as UnifiedRegionType))\n                                ? _withDirectives((_openBlock(), _createBlock(_component_v_btn, {\n                                    key: 0,\n                                    variant: \"plain\",\n                                    icon: \"mdi-delete\",\n                                    color: \"white\",\n                                    onClick: () => _unref(store).deleteRegion(region as UnifiedRegionType)\n                                  }, null, 8, [\"onClick\"])), [\n                                    [_directive_tooltip, 'Delete']\n                                  ])\n                                : _createCommentVNode(\"\", true)\n                            ]),\n                            _: 2\n                          }, 1032, [\"title\", \"style\", \"onClick\"]))\n                        }), 128))\n                      ]),\n                      _: 1\n                    })\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_divider, {\n            class: \"mt-3\",\n            opacity: \"1\"\n          }),\n          _createVNode(_component_v_expansion_panel, {\n            title: \"Datasets\",\n            class: \"mt-3 h3-panel-titles\"\n          }, {\n            text: _withCtx(() => [\n              _createVNode(_component_v_btn, {\n                size: \"small\",\n                active: createDatasetActive.value,\n                color: _unref(accentColor2),\n                onClick: _cache[2] || (_cache[2] = ($event: any) => (createDatasetActive.value = !createDatasetActive.value)),\n                class: \"mt-3\"\n              }, {\n                prepend: _withCtx(() => [\n                  (!createDatasetActive.value)\n                    ? (_openBlock(), _createBlock(_component_v_icon, {\n                        key: 0,\n                        icon: \"mdi-plus\"\n                      }))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                default: _withCtx(() => [\n                  _createTextVNode(\" \" + _toDisplayString(createDatasetActive.value ? \"Cancel\" : \"New Dataset\"), 1)\n                ]),\n                _: 1\n              }, 8, [\"active\", \"color\"]),\n              _withDirectives(_createVNode(_component_selection_composer, {\n                backend: _unref(backend),\n                \"time-ranges\": _unref(timeRanges),\n                regions: _unref(regions),\n                disabled: { region: _unref(selectionActive) === 'rectangle', point: _unref(selectionActive) === 'point', timeRange: createTimeRangeActive.value },\n                onCreate: handleDatasetCreated\n              }, null, 8, [\"backend\", \"time-ranges\", \"regions\", \"disabled\"]), [\n                [_vShow, createDatasetActive.value]\n              ]),\n              (_unref(datasets).length>0)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                    _cache[31] || (_cache[31] = _createElementVNode(\"h4\", null, \"My Datasets\", -1)),\n                    _createVNode(_component_v_list, null, {\n                      default: _withCtx(() => [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(datasets), (dataset) => {\n                          return (_openBlock(), _createBlock(_component_v_hover, {\n                            key: dataset.id\n                          }, {\n                            default: _withCtx(({ isHovering, props }) => [\n                              _createVNode(_component_v_list_item, _mergeProps({ ref_for: true }, props, {\n                                ref_for: true,\n                                ref: (el) => datasetRowRefs.value[dataset.id] = el,\n                                class: \"selection-item my-2\",\n                                style: { 'background-color': dataset.region.color },\n                                ripple: _unref(touchscreen),\n                                onClick: () => {\n                    if (_unref(touchscreen)) {\n                      openSelection.value = (openSelection.value == dataset.id) ? null : dataset.id;\n                    }\n                  },\n                                lines: \"two\"\n                              }), {\n                                default: _withCtx(() => [\n                                  _createElementVNode(\"div\", null, [\n                                    _createVNode(_component_v_chip, { size: \"small\" }, {\n                                      default: _withCtx(() => [\n                                        _createTextVNode(_toDisplayString(dataset.region.name), 1)\n                                      ]),\n                                      _: 2\n                                    }, 1024),\n                                    _createVNode(_component_v_chip, { size: \"small\" }, {\n                                      default: _withCtx(() => [\n                                        _createTextVNode(_toDisplayString(_unref(moleculeName)(dataset.molecule)), 1)\n                                      ]),\n                                      _: 2\n                                    }, 1024),\n                                    (dataset.timeRange)\n                                      ? (_openBlock(), _createBlock(_component_v_chip, {\n                                          key: 0,\n                                          size: \"small\",\n                                          class: \"text-caption\"\n                                        }, {\n                                          default: _withCtx(() => [\n                                            _createTextVNode(_toDisplayString(dataset.timeRange.description), 1)\n                                          ]),\n                                          _: 2\n                                        }, 1024))\n                                      : _createCommentVNode(\"\", true),\n                                    (dataset.timeRange)\n                                      ? (_openBlock(), _createBlock(_component_v_chip, {\n                                          key: 1,\n                                          size: \"small\",\n                                          class: \"text-caption\"\n                                        }, {\n                                          default: _withCtx(() => [\n                                            _createTextVNode(_toDisplayString(dataset.timeRange?.type ?? 'no type'), 1)\n                                          ]),\n                                          _: 2\n                                        }, 1024))\n                                      : _createCommentVNode(\"\", true)\n                                  ]),\n                                  ((dataset.loading || !dataset.samples)  && !(dataset.timeRange?.type === 'folded' && dataset.plotlyDatasets))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                        _createVNode(_component_v_progress_linear, {\n                                          class: _normalizeClass(['dataset-loading-progress', !(dataset.loading && dataset.samples) ? 'dataset-loading-failed' : '']),\n                                          active: dataset.loading || !dataset.samples,\n                                          color: dataset.loading ? 'primary' : 'red',\n                                          indeterminate: dataset.loading,\n                                          value: !dataset.loading ? 100 : 0,\n                                          striped: !dataset.loading,\n                                          bottom: \"\",\n                                          rounded: \"\",\n                                          height: \"20\"\n                                        }, {\n                                          default: _withCtx(() => [\n                                            _createElementVNode(\"span\", _hoisted_8, _toDisplayString(dataset.loading ? 'Data Loading' : (!dataset.samples ? 'Error Loading Data' : '')), 1)\n                                          ]),\n                                          _: 2\n                                        }, 1032, [\"class\", \"active\", \"color\", \"indeterminate\", \"value\", \"striped\"]),\n                                        (!(dataset.loading || dataset.samples || dataset.plotlyDatasets))\n                                          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                              _createVNode(_component_v_tooltip, {\n                                                text: \"Failure info\",\n                                                location: \"top\"\n                                              }, {\n                                                activator: _withCtx(({ props }) => [\n                                                  _createVNode(_component_v_btn, _mergeProps({ ref_for: true }, props, {\n                                                    size: \"x-small\",\n                                                    icon: \"mdi-help-circle\",\n                                                    variant: \"plain\",\n                                                    onClick: () => sampleErrorID.value = dataset.id\n                                                  }), null, 16, [\"onClick\"])\n                                                ]),\n                                                _: 2\n                                              }, 1024),\n                                              _createVNode(_component_v_tooltip, {\n                                                text: \"Remove selection\",\n                                                location: \"top\"\n                                              }, {\n                                                activator: _withCtx(({ props }) => [\n                                                  _createVNode(_component_v_btn, _mergeProps({ ref_for: true }, props, {\n                                                    size: \"x-small\",\n                                                    icon: \"mdi-trash-can\",\n                                                    variant: \"plain\",\n                                                    onClick: () => removeDataset(dataset)\n                                                  }), null, 16, [\"onClick\"])\n                                                ]),\n                                                _: 2\n                                              }, 1024)\n                                            ]))\n                                          : _createCommentVNode(\"\", true)\n                                      ]))\n                                    : _createCommentVNode(\"\", true),\n                                  _createVNode(_component_v_expand_transition, null, {\n                                    default: _withCtx(() => [\n                                      _withDirectives(_createElementVNode(\"div\", _hoisted_10, [\n                                        _createVNode(_component_v_tooltip, {\n                                          text: \"Get Center Point Sample\",\n                                          location: \"top\"\n                                        }, {\n                                          activator: _withCtx(({ props }) => [\n                                            _createVNode(_component_v_btn, _mergeProps({ ref_for: true }, props, {\n                                              size: \"x-small\",\n                                              loading: loadingPointSample.value === dataset.id,\n                                              icon: \"mdi-image-filter-center-focus\",\n                                              variant: \"plain\",\n                                              onClick: () => _unref(store).fetchCenterPointDataForDataset(dataset)\n                                            }), null, 16, [\"loading\", \"onClick\"])\n                                          ]),\n                                          _: 2\n                                        }, 1024),\n                                        _createVNode(_component_v_tooltip, {\n                                          text: \"Show table\",\n                                          location: \"top\"\n                                        }, {\n                                          activator: _withCtx(({ props }) => [\n                                            _createVNode(_component_v_btn, _mergeProps({ ref_for: true }, props, {\n                                              size: \"x-small\",\n                                              icon: \"mdi-table\",\n                                              disabled: !dataset.samples,\n                                              variant: \"plain\",\n                                              onClick: () => tableSelection.value = dataset\n                                            }), null, 16, [\"disabled\", \"onClick\"])\n                                          ]),\n                                          _: 2\n                                        }, 1024),\n                                        _createVNode(_component_v_tooltip, {\n                                          text: \"Show graph\",\n                                          location: \"top\"\n                                        }, {\n                                          activator: _withCtx(({ props }) => [\n                                            _createVNode(_component_v_btn, _mergeProps({ ref_for: true }, props, {\n                                              size: \"x-small\",\n                                              icon: \"mdi-chart-line\",\n                                              disabled: !(dataset.samples || dataset.plotlyDatasets),\n                                              variant: \"plain\",\n                                              onClick: () => openGraphs.value[dataset.id] = true\n                                            }), null, 16, [\"disabled\", \"onClick\"])\n                                          ]),\n                                          _: 2\n                                        }, 1024),\n                                        (dataset.timeRange.type === 'pattern' || dataset.timeRange.type === 'daterange')\n                                          ? (_openBlock(), _createBlock(_component_v_tooltip, {\n                                              key: 0,\n                                              text: \"Aggregate Data\",\n                                              location: \"top\"\n                                            }, {\n                                              activator: _withCtx(({ props }) => [\n                                                _createVNode(_component_v_btn, _mergeProps({ ref_for: true }, props, {\n                                                  size: \"x-small\",\n                                                  icon: \"mdi-chart-box\",\n                                                  disabled: !dataset.samples,\n                                                  variant: \"plain\",\n                                                  onClick: () => openAggregationDialog(dataset)\n                                                }), null, 16, [\"disabled\", \"onClick\"])\n                                              ]),\n                                              _: 2\n                                            }, 1024))\n                                          : _createCommentVNode(\"\", true),\n                                        _createVNode(_component_v_tooltip, {\n                                          text: \"Remove selection\",\n                                          location: \"top\"\n                                        }, {\n                                          activator: _withCtx(({ props }) => [\n                                            _createVNode(_component_v_btn, _mergeProps({ ref_for: true }, props, {\n                                              size: \"x-small\",\n                                              icon: \"mdi-trash-can\",\n                                              variant: \"plain\",\n                                              onClick: () => removeDataset(dataset)\n                                            }), null, 16, [\"onClick\"])\n                                          ]),\n                                          _: 2\n                                        }, 1024)\n                                      ], 512), [\n                                        [_vShow, (dataset.samples || dataset.plotlyDatasets) && (_unref(touchscreen) ? openSelection.value == dataset.id : isHovering)]\n                                      ])\n                                    ]),\n                                    _: 2\n                                  }, 1024),\n                                  _createVNode(_component_cds_dialog, {\n                                    title: graphTitle(dataset),\n                                    modelValue: openGraphs.value[dataset.id],\n                                    \"onUpdate:modelValue\": ($event: any) => ((openGraphs.value[dataset.id]) = $event),\n                                    \"title-color\": \"#F44336\",\n                                    draggable: \"\",\n                                    persistent: \"\",\n                                    scrim: false,\n                                    modal: false,\n                                    \"drag-predicate\": plotlyDragPredicate\n                                  }, {\n                                    default: _withCtx(() => [\n                                      _createVNode(_component_v_checkbox, {\n                                        modelValue: showErrorBands.value,\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((showErrorBands).value = $event)),\n                                        label: \"Show Errors\",\n                                        density: \"compact\",\n                                        \"hide-details\": \"\"\n                                      }, null, 8, [\"modelValue\"]),\n                                      (dataset.timeRange.type === 'folded' && dataset.plotlyDatasets)\n                                        ? (_openBlock(), _createBlock(PlotlyGraph, {\n                                            key: 0,\n                                            datasets: dataset.plotlyDatasets,\n                                            \"show-errors\": showErrorBands.value,\n                                            colors: [dataset.region.color, '#333'],\n                                            \"data-options\": [{mode: 'markers'}, {mode: 'lines+markers'}]\n                                          }, null, 8, [\"datasets\", \"show-errors\", \"colors\"]))\n                                        : (_openBlock(), _createBlock(_component_timeseries_graph, {\n                                            key: 1,\n                                            data: dataset ? [dataset] : [],\n                                            \"show-errors\": showErrorBands.value\n                                          }, null, 8, [\"data\", \"show-errors\"]))\n                                    ]),\n                                    _: 2\n                                  }, 1032, [\"title\", \"modelValue\", \"onUpdate:modelValue\"]),\n                                  _createVNode(_component_v_dialog, {\n                                    \"model-value\": sampleErrorID.value !== null,\n                                    \"max-width\": \"50%\"\n                                  }, {\n                                    default: _withCtx(() => [\n                                      _createVNode(_component_v_card, null, {\n                                        default: _withCtx(() => [\n                                          _createVNode(_component_v_toolbar, { density: \"compact\" }, {\n                                            default: _withCtx(() => [\n                                              _createVNode(_component_v_toolbar_title, { text: \"Error Loading Data\" }),\n                                              _createVNode(_component_v_spacer),\n                                              _createVNode(_component_v_btn, {\n                                                icon: \"mdi-close\",\n                                                onClick: _cache[4] || (_cache[4] = ($event: any) => (sampleErrorID.value = null))\n                                              })\n                                            ]),\n                                            _: 1\n                                          }),\n                                          _createVNode(_component_v_card_text, null, {\n                                            default: _withCtx(() => [...(_cache[30] || (_cache[30] = [\n                                              _createTextVNode(\" There was an error loading data for this selection. Either there is no data for the region/time range/molecule combination that you selected, or there was an error loading data from the server. You can delete this selection and try making a new one. \", -1)\n                                            ]))]),\n                                            _: 1\n                                          })\n                                        ]),\n                                        _: 1\n                                      })\n                                    ]),\n                                    _: 1\n                                  }, 8, [\"model-value\"])\n                                ]),\n                                _: 2\n                              }, 1040, [\"style\", \"ripple\", \"onClick\"])\n                            ]),\n                            _: 2\n                          }, 1024))\n                        }), 128))\n                      ]),\n                      _: 1\n                    })\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_11, [\n      (no2GraphData.value.length > 0)\n        ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 0,\n            onClick: _cache[6] || (_cache[6] = ($event: any) => (showNO2Graph.value = true))\n          }, {\n            default: _withCtx(() => [...(_cache[32] || (_cache[32] = [\n              _createTextVNode(\" Show NO Graph \", -1)\n            ]))]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_cds_dialog, {\n        title: \"Nitrogen Dioxide Data\",\n        modelValue: showNO2Graph.value,\n        \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((showNO2Graph).value = $event)),\n        draggable: \"\",\n        persistent: \"\",\n        modal: false,\n        scrim: false,\n        \"drag-predicate\": plotlyDragPredicate\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_checkbox, {\n            modelValue: showErrorBands.value,\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((showErrorBands).value = $event)),\n            label: \"Show Errors\",\n            density: \"compact\",\n            \"hide-details\": \"\"\n          }, null, 8, [\"modelValue\"]),\n          _createVNode(_component_timeseries_graph, {\n            data: no2GraphData.value.length > 0 ? no2GraphData.value : [],\n            \"show-errors\": showErrorBands.value\n          }, null, 8, [\"data\", \"show-errors\"])\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"]),\n      (o3GraphData.value.length > 0)\n        ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 1,\n            onClick: _cache[9] || (_cache[9] = ($event: any) => (showO3Graph.value = true))\n          }, {\n            default: _withCtx(() => [...(_cache[33] || (_cache[33] = [\n              _createTextVNode(\" Show Ozone Graph \", -1)\n            ]))]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_cds_dialog, {\n        title: \"Ozone Data\",\n        modelValue: showO3Graph.value,\n        \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((showO3Graph).value = $event)),\n        draggable: \"\",\n        persistent: \"\",\n        modal: false,\n        scrim: false,\n        \"drag-predicate\": plotlyDragPredicate\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_checkbox, {\n            modelValue: showErrorBands.value,\n            \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((showErrorBands).value = $event)),\n            label: \"Show Errors\",\n            density: \"compact\",\n            \"hide-details\": \"\"\n          }, null, 8, [\"modelValue\"]),\n          _createVNode(_component_timeseries_graph, {\n            data: o3GraphData.value.length > 0 ? o3GraphData.value : [],\n            \"show-errors\": showErrorBands.value\n          }, null, 8, [\"data\", \"show-errors\"])\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"]),\n      (hchoGraphData.value.length > 0)\n        ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 2,\n            onClick: _cache[12] || (_cache[12] = ($event: any) => (showHCHOGraph.value = true))\n          }, {\n            default: _withCtx(() => [...(_cache[34] || (_cache[34] = [\n              _createTextVNode(\" Show Formaldehyde Graph \", -1)\n            ]))]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_cds_dialog, {\n        title: \"Formaldehyde Data\",\n        modelValue: showHCHOGraph.value,\n        \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event: any) => ((showHCHOGraph).value = $event)),\n        draggable: \"\",\n        persistent: \"\",\n        modal: false,\n        scrim: false,\n        \"drag-predicate\": plotlyDragPredicate\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_checkbox, {\n            modelValue: showErrorBands.value,\n            \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((showErrorBands).value = $event)),\n            label: \"Show Errors\",\n            density: \"compact\",\n            \"hide-details\": \"\"\n          }, null, 8, [\"modelValue\"]),\n          _createVNode(_component_timeseries_graph, {\n            data: hchoGraphData.value.length > 0 ? hchoGraphData.value : [],\n            \"show-errors\": showErrorBands.value\n          }, null, 8, [\"data\", \"show-errors\"])\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"]),\n      (no2foldedGraphData.value.length > 0)\n        ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 3,\n            onClick: _cache[15] || (_cache[15] = ($event: any) => (showfoldedNO2Graph.value = true))\n          }, {\n            default: _withCtx(() => [...(_cache[35] || (_cache[35] = [\n              _createTextVNode(\" Show Folded NO Data \", -1)\n            ]))]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_cds_dialog, {\n        title: \"Nitrogen Dioxide Data\",\n        modelValue: showfoldedNO2Graph.value,\n        \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event: any) => ((showfoldedNO2Graph).value = $event)),\n        draggable: \"\",\n        persistent: \"\",\n        modal: false,\n        scrim: false,\n        \"drag-predicate\": plotlyDragPredicate\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_checkbox, {\n            modelValue: showErrorBands.value,\n            \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event: any) => ((showErrorBands).value = $event)),\n            label: \"Show Errors\",\n            density: \"compact\",\n            \"hide-details\": \"\"\n          }, null, 8, [\"modelValue\"]),\n          _createVNode(PlotlyGraph, {\n            datasets: no2foldedGraphData.value.length > 0 ? no2foldedGraphData.value : [],\n            \"show-errors\": showErrorBands.value,\n            colors: ['#FF5733', '#333'],\n            \"data-options\": [{mode: 'markers'}, {mode: 'lines+markers'}]\n          }, null, 8, [\"datasets\", \"show-errors\"])\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"]),\n      (o3foldedGraphData.value.length > 0)\n        ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 4,\n            onClick: _cache[18] || (_cache[18] = ($event: any) => (showfoldedO3Graph.value = true))\n          }, {\n            default: _withCtx(() => [...(_cache[36] || (_cache[36] = [\n              _createTextVNode(\" Show Folded O Data \", -1)\n            ]))]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_cds_dialog, {\n        title: \"Ozone Data\",\n        modelValue: showfoldedO3Graph.value,\n        \"onUpdate:modelValue\": _cache[20] || (_cache[20] = ($event: any) => ((showfoldedO3Graph).value = $event)),\n        draggable: \"\",\n        persistent: \"\",\n        modal: false,\n        scrim: false,\n        \"drag-predicate\": plotlyDragPredicate\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_checkbox, {\n            modelValue: showErrorBands.value,\n            \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event: any) => ((showErrorBands).value = $event)),\n            label: \"Show Errors\",\n            density: \"compact\",\n            \"hide-details\": \"\"\n          }, null, 8, [\"modelValue\"]),\n          _createVNode(PlotlyGraph, {\n            datasets: o3foldedGraphData.value.length > 0 ? o3foldedGraphData.value : [],\n            \"show-errors\": showErrorBands.value,\n            colors: ['#FF5733', '#333'],\n            \"data-options\": [{mode: 'markers'}, {mode: 'lines+markers'}]\n          }, null, 8, [\"datasets\", \"show-errors\"])\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"]),\n      (hchofoldedGraphData.value.length > 0)\n        ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 5,\n            onClick: _cache[21] || (_cache[21] = ($event: any) => (showfoldedHCHOGraph.value = true))\n          }, {\n            default: _withCtx(() => [...(_cache[37] || (_cache[37] = [\n              _createTextVNode(\" Show Folded HCHO Data \", -1)\n            ]))]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_cds_dialog, {\n        title: \"Formaldehyde Data\",\n        modelValue: showfoldedHCHOGraph.value,\n        \"onUpdate:modelValue\": _cache[23] || (_cache[23] = ($event: any) => ((showfoldedHCHOGraph).value = $event)),\n        draggable: \"\",\n        persistent: \"\",\n        modal: false,\n        scrim: false,\n        \"drag-predicate\": plotlyDragPredicate\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_checkbox, {\n            modelValue: showErrorBands.value,\n            \"onUpdate:modelValue\": _cache[22] || (_cache[22] = ($event: any) => ((showErrorBands).value = $event)),\n            label: \"Show Errors\",\n            density: \"compact\",\n            \"hide-details\": \"\"\n          }, null, 8, [\"modelValue\"]),\n          _createVNode(PlotlyGraph, {\n            datasets: hchofoldedGraphData.value.length > 0 ? hchofoldedGraphData.value : [],\n            \"show-errors\": showErrorBands.value,\n            colors: ['#FF5733', '#333'],\n            \"data-options\": [{mode: 'markers'}, {mode: 'lines+markers'}]\n          }, null, 8, [\"datasets\", \"show-errors\"])\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"])\n    ]),\n    _createVNode(_component_v_dialog, {\n      modelValue: showEditRegionNameDialog.value,\n      \"onUpdate:modelValue\": _cache[26] || (_cache[26] = ($event: any) => ((showEditRegionNameDialog).value = $event))\n    }, {\n      default: _withCtx(() => [\n        _createVNode(CTextField, {\n          label: \"Region Name\",\n          title: \"Enter a new name for this region\",\n          \"hide-details\": \"\",\n          dense: \"\",\n          \"button-color\": _unref(accentColor),\n          onConfirm: _cache[24] || (_cache[24] = (name) => {\n            if (regionBeingEdited.value) {\n              _unref(store).setRegionName(regionBeingEdited.value as UnifiedRegionType, name);\n              showEditRegionNameDialog.value = false;\n            }\n          }),\n          onCancel: _cache[25] || (_cache[25] = () => {\n            showEditRegionNameDialog.value = false;\n            regionBeingEdited.value = null;\n          })\n        }, null, 8, [\"button-color\"])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"]),\n    _createVNode(AdvancedOperations, {\n      modelValue: showAggregationDialog.value,\n      \"onUpdate:modelValue\": _cache[27] || (_cache[27] = ($event: any) => ((showAggregationDialog).value = $event)),\n      selection: aggregationDataset.value,\n      onSave: handleAggregationSaved\n    }, null, 8, [\"modelValue\", \"selection\"])\n  ]))\n}\n}\n\n})","<template>\n  <div id=\"dataset-sections\">\n    <h2>Investigate Patterns with Time</h2>\n    <div id=\"add-region-time\">\n      <v-expansion-panels\n        v-model=\"openPanels\"\n        variant=\"accordion\"\n        id=\"user-options-panels\"\n        multiple\n        class=\"pl-3\"\n      >\n        <v-expansion-panel\n          title=\"Time Ranges\"\n          class=\"mt-3 h3-panel-titles\"\n        >\n          <template #text>\n            <v-btn\n              size=\"small\"\n              :active=\"createTimeRangeActive\"\n              :color=\"accentColor2\"\n              @click=\"createTimeRangeActive = !createTimeRangeActive\"\n            >\n              <template #prepend>\n                <v-icon v-if=\"!createTimeRangeActive\" icon=\"mdi-plus\"></v-icon>\n              </template>\n              {{ createTimeRangeActive ? \"Cancel\" : \"New Time Range\" }}\n            </v-btn>\n            <date-time-range-selection\n              v-if=\"createTimeRangeActive\"\n              :current-date=\"singleDateSelected\"\n              :selected-timezone=\"selectedTimezone\"\n              :allowed-dates=\"uniqueDays\"\n              @ranges-change=\"handleDateTimeRangeSelectionChange\"\n            />\n            <div class=\"my-selections\" v-if=\"timeRanges.length>0\" style=\"margin-top: 1em;\">\n              <h4>My Time Ranges</h4>\n              <v-list>\n                <v-list-item\n                  v-for=\"(timeRange, index) in timeRanges\"\n                  :key=\"index\"\n                  :title=\"timeRange.name === 'Displayed Day' ? `Displayed Day: ${ formatTimeRange(timeRange.range) }`  : formatTimeRange(timeRange.range)\"\n                  style=\"background-color: #444444\"\n                >\n\n                  <template #append>\n                    <v-btn\n                      v-if=\"timeRange.id !== 'displayed-day' && !datasets.some(s => areEquivalentTimeRanges(s.timeRange, timeRange))\"\n                      variant=\"plain\"\n                      v-tooltip=\"'Delete'\"\n                      icon=\"mdi-delete\"\n                      color=\"white\"\n                      @click=\"() => store.deleteTimeRange(timeRange)\"\n                    >\n                    </v-btn>\n                  </template>\n                </v-list-item>\n              </v-list>\n            </div>\n          </template>\n        </v-expansion-panel>\n        <v-expansion-panel\n          title=\"Regions\"\n          class=\"mt-3 h3-panel-titles\"\n        >\n          <template #text>\n            <div id=\"add-region-buttons\">\n              <v-btn\n                size=\"small\"\n                :active=\"selectionActive === 'rectangle'\"\n                :disabled=\"selectionActive === 'point'\"\n                :color=\"accentColor2\"\n                @click=\"() => {\n                  selectionActive = (selectionActive === 'rectangle') ? null : 'rectangle';\n                }\"\n              >\n                <template #prepend>\n                  <v-icon v-if=\"selectionActive !== 'rectangle'\" icon=\"mdi-plus\"></v-icon>\n                </template>\n                {{ selectionActive === 'rectangle' ? \"Cancel\" : \"New Region\" }}\n              </v-btn>\n            </div>\n            <div class=\"my-selections\" v-if=\"regions.length>0\" style=\"margin-top: 1em;\">\n            <h4>My Regions</h4>                   \n              <v-list>\n                <v-list-item\n                  v-for=\"(region, index) in regions\"\n                  :key=\"index\"\n                  :title=\"region.name\"\n                  :style=\"{ 'background-color': region.color }\"\n                  @click=\"() => lastFocusedRegion = region\"\n                >\n                  <template #append>\n                    <!-- New: Edit Geometry button (disabled if any selection using region has samples) -->\n                    <!-- <v-btn\n                      variant=\"plain\"\n                      :icon=\"region.geometryType === 'rectangle' ? 'mdi-select' : 'mdi-plus'\"\n                      color=\"white\"\n                      :disabled=\"regionHasSamples(region as UnifiedRegionType)\"\n                      v-tooltip=\"regionHasSamples(region as UnifiedRegionType) ? 'Cannot edit geometry after samples are fetched for a selection using this region' : 'Edit Geometry'\"\n                      @click=\"() => editRegionGeometry(region as UnifiedRegionType)\"\n                    ></v-btn> -->\n                    <v-btn\n                      variant=\"plain\"\n                      v-tooltip=\"'Edit Name'\"\n                      icon=\"mdi-pencil\"\n                      color=\"white\"\n                      @click=\"() => editRegionName(region as UnifiedRegionType)\"\n                    ></v-btn>\n                    <v-btn\n                      v-if=\"!store.regionHasDatasets(region as UnifiedRegionType)\"\n                      variant=\"plain\"\n                      v-tooltip=\"'Delete'\"\n                      icon=\"mdi-delete\"\n                      color=\"white\"\n                      @click=\"() => store.deleteRegion(region as UnifiedRegionType)\"\n                    ></v-btn>\n                  </template>\n                </v-list-item>\n              </v-list>\n            </div>\n          </template>\n        </v-expansion-panel>\n\n        <v-divider\n          class=\"mt-3\"\n          opacity=\"1\"\n        >\n        </v-divider>\n\n        <v-expansion-panel\n          title=\"Datasets\"\n          class=\"mt-3 h3-panel-titles\"\n        >\n        <template #text>\n          <v-btn\n            size=\"small\"\n            :active=\"createDatasetActive\"\n            :color=\"accentColor2\"                    \n            @click=\"createDatasetActive = !createDatasetActive\"\n            class=\"mt-3\"\n          >\n            <template #prepend>\n              <v-icon v-if=\"!createDatasetActive\" icon=\"mdi-plus\"></v-icon>\n            </template>\n            {{ createDatasetActive ? \"Cancel\" : \"New Dataset\" }}\n          </v-btn>\n          <selection-composer\n            v-show=\"createDatasetActive\"\n            :backend=\"backend\"\n            :time-ranges=\"timeRanges\"\n            :regions=\"regions\"\n            :disabled=\"{ region: selectionActive === 'rectangle', point: selectionActive === 'point', timeRange: createTimeRangeActive }\"\n            @create=\"handleDatasetCreated\"\n          >\n          </selection-composer>\n          <div class=\"my-selections\" v-if=\"datasets.length>0\" style=\"margin-top: 1em;\">\n\n            <h4>My Datasets</h4>\n            <v-list>\n              <v-hover\n                v-slot=\"{ isHovering, props }\"\n                v-for=\"dataset in datasets\"\n                :key=\"dataset.id\"\n              >\n                <v-list-item\n                  v-bind=\"props\"\n                  :ref=\"(el) => datasetRowRefs[dataset.id] = el\"\n                  class=\"selection-item my-2\"\n                  :style=\"{ 'background-color': dataset.region.color }\"\n                  :ripple=\"touchscreen\"\n                  @click=\"() => {\n                    if (touchscreen) {\n                      openSelection = (openSelection == dataset.id) ? null : dataset.id;\n                    }\n                  }\"\n                  lines=\"two\"\n                >\n                  <template #default>\n                    <div>\n                      <v-chip size=\"small\">{{ dataset.region.name }}</v-chip>\n                      <v-chip size=\"small\">{{ moleculeName(dataset.molecule) }}</v-chip>\n                      <v-chip v-if=\"dataset.timeRange\" size=\"small\" class=\"text-caption\">\n                        {{ dataset.timeRange.description }}\n                      </v-chip>\n                      <v-chip v-if=\"dataset.timeRange\" size=\"small\" class=\"text-caption\">\n                        {{ dataset.timeRange?.type ?? 'no type' }}\n                      </v-chip>\n                    </div>\n                    <div\n                      v-if=\"(dataset.loading || !dataset.samples)  && !(dataset.timeRange?.type === 'folded' && dataset.plotlyDatasets)\"\n                      class=\"dataset-loading\"\n                    >\n                      <v-progress-linear\n                        :class=\"['dataset-loading-progress', !(dataset.loading && dataset.samples) ? 'dataset-loading-failed' : '']\"\n                        :active=\"dataset.loading || !dataset.samples\"\n                        :color=\"dataset.loading ? 'primary' : 'red'\"\n                        :indeterminate=\"dataset.loading\"\n                        :value=\"!dataset.loading ? 100 : 0\"\n                        :striped=\"!dataset.loading\"\n                        bottom\n                        rounded\n                        height=\"20\"\n                      >\n                        <template #default>\n                          <span class=\"text-subtitle-2\">\n                            {{ dataset.loading ? 'Data Loading' : (!dataset.samples ? 'Error Loading Data' : '') }}\n                          </span>\n                        </template>\n                      </v-progress-linear>\n                      <div v-if=\"!(dataset.loading || dataset.samples || dataset.plotlyDatasets)\">\n                        <v-tooltip\n                          text=\"Failure info\"\n                          location=\"top\"\n                        >\n                          <template #activator=\"{ props }\">\n                            <v-btn\n                              v-bind=\"props\"\n                              size=\"x-small\"\n                              icon=\"mdi-help-circle\"\n                              variant=\"plain\"\n                              @click=\"() => sampleErrorID = dataset.id\"\n                            ></v-btn>\n                          </template>\n                        </v-tooltip>\n                        <v-tooltip\n                          text=\"Remove selection\"\n                          location=\"top\"\n                        >\n                          <template #activator=\"{ props }\">\n                            <v-btn\n                              v-bind=\"props\"\n                              size=\"x-small\"\n                              icon=\"mdi-trash-can\"\n                              variant=\"plain\"\n                              @click=\"() => removeDataset(dataset)\"\n                            ></v-btn>\n                          </template>\n                        </v-tooltip>\n                      </div>\n                    </div>\n\n                    <v-expand-transition>\n                      <div\n                        class=\"selection-icons\"\n                        v-show=\"(dataset.samples || dataset.plotlyDatasets) && (touchscreen ? openSelection == dataset.id : isHovering)\"\n                      >\n                        <v-tooltip\n                          text=\"Get Center Point Sample\"\n                          location=\"top\"\n                        >\n                          <template #activator=\"{ props }\">\n                            <v-btn\n                              v-bind=\"props\"\n                              size=\"x-small\"\n                              :loading=\"loadingPointSample === dataset.id\"\n                              icon=\"mdi-image-filter-center-focus\"\n                              variant=\"plain\"\n                              @click=\"() => store.fetchCenterPointDataForDataset(dataset)\"\n                            ></v-btn>\n                          </template>\n                        </v-tooltip> \n                        <v-tooltip\n                          text=\"Show table\"\n                          location=\"top\"\n                        >\n                          <template #activator=\"{ props }\">\n                            <v-btn\n                              v-bind=\"props\"\n                              size=\"x-small\"\n                              icon=\"mdi-table\"\n                              :disabled=\"!dataset.samples\"\n                              variant=\"plain\"\n                              @click=\"() => tableSelection = dataset\"\n                            ></v-btn>\n                          </template>\n                        </v-tooltip>\n                        <v-tooltip\n                          text=\"Show graph\"\n                          location=\"top\"\n                        >\n                          <template #activator=\"{ props }\">\n                            <v-btn\n                              v-bind=\"props\"\n                              size=\"x-small\"\n                              icon=\"mdi-chart-line\"\n                              :disabled=\"!(dataset.samples || dataset.plotlyDatasets)\"\n                              variant=\"plain\"\n                              @click=\"() => openGraphs[dataset.id] = true\"\n                            ></v-btn>\n                          </template>\n                        </v-tooltip>\n                        <v-tooltip\n                          v-if=\"dataset.timeRange.type === 'pattern' || dataset.timeRange.type === 'daterange'\"\n                          text=\"Aggregate Data\"\n                          location=\"top\"\n                        >\n                          <template #activator=\"{ props }\">\n                            <v-btn\n                              v-bind=\"props\"\n                              size=\"x-small\"\n                              icon=\"mdi-chart-box\"\n                              :disabled=\"!dataset.samples\"\n                              variant=\"plain\"\n                              @click=\"() => openAggregationDialog(dataset)\"\n                            ></v-btn>\n                          </template>\n                        </v-tooltip>\n                        <v-tooltip\n                          text=\"Remove selection\"\n                          location=\"top\"\n                        >\n                          <template #activator=\"{ props }\">\n                            <v-btn\n                              v-bind=\"props\"\n                              size=\"x-small\"\n                              icon=\"mdi-trash-can\"\n                              variant=\"plain\"\n                              @click=\"() => removeDataset(dataset)\"\n                            ></v-btn>\n                          </template>\n                        </v-tooltip>\n                      </div>\n                    </v-expand-transition>\n                    <cds-dialog\n                      :title=\"graphTitle(dataset)\"\n                      v-model=\"openGraphs[dataset.id]\"\n                      title-color=\"#F44336\"\n                      draggable\n                      persistent\n                      :scrim=\"false\"\n                      :modal=\"false\"\n                      :drag-predicate=\"plotlyDragPredicate\"\n                    >\n                      <v-checkbox\n                        v-model=\"showErrorBands\"\n                        label=\"Show Errors\"\n                        density=\"compact\"\n                        hide-details\n                      >\n                      </v-checkbox>\n                      <template v-if=\"dataset.timeRange.type === 'folded' && dataset.plotlyDatasets\">\n                        <plotly-graph\n                          :datasets=\"dataset.plotlyDatasets\"\n                          :show-errors=\"showErrorBands\"\n                          :colors=\"[dataset.region.color, '#333']\"\n                          :data-options=\"[{mode: 'markers'}, {mode: 'lines+markers'}]\"\n                        />\n                      </template>\n                      <template v-else>\n                        <timeseries-graph\n                          :data=\"dataset ? [dataset] : []\"\n                          :show-errors=\"showErrorBands\"\n                        />\n                      </template>\n                    </cds-dialog>\n                    <v-dialog\n                      :model-value=\"sampleErrorID !== null\"\n                      max-width=\"50%\"\n                    >\n                      <v-card>\n                        <v-toolbar\n                          density=\"compact\"\n                        >\n                          <v-toolbar-title text=\"Error Loading Data\"></v-toolbar-title>\n                          <v-spacer></v-spacer>\n                          <v-btn\n                            icon=\"mdi-close\"\n                            @click=\"sampleErrorID = null\"\n                          >\n                          </v-btn>\n                        </v-toolbar>\n                        <v-card-text>\n                          There was an error loading data for this selection. Either there is no data for the\n                          region/time range/molecule combination that you selected, or there was an error loading\n                          data from the server. You can delete this selection and try making a new one.\n                        </v-card-text>\n                      </v-card>\n                    </v-dialog>\n                  </template>\n                </v-list-item>\n              </v-hover>\n            </v-list>\n          </div>\n        </template>\n      </v-expansion-panel>\n    </v-expansion-panels>\n    </div>\n\n    <div class=\"d-flex flex-wrap flex-row ma-2 align-center justify-center ga-1\">\n    <v-btn v-if=\"no2GraphData.length > 0\" @click=\"showNO2Graph = true\">\n      Show NO Graph\n    </v-btn>\n    <cds-dialog\n      title=\"Nitrogen Dioxide Data\"\n      v-model=\"showNO2Graph\"\n      draggable\n      persistent\n      :modal=\"false\"\n      :scrim=\"false\"\n      :drag-predicate=\"plotlyDragPredicate\"\n    >\n      <v-checkbox\n        v-model=\"showErrorBands\"\n        label=\"Show Errors\"\n        density=\"compact\"\n        hide-details\n      >\n      </v-checkbox>\n      <timeseries-graph\n        :data=\"no2GraphData.length > 0 ? no2GraphData : []\"\n        :show-errors=\"showErrorBands\"\n      />\n    </cds-dialog>\n\n    <v-btn v-if=\"o3GraphData.length > 0\" @click=\"showO3Graph = true\">\n      Show Ozone Graph\n    </v-btn>\n    <cds-dialog\n      title=\"Ozone Data\"\n      v-model=\"showO3Graph\"\n      draggable\n      persistent\n      :modal=\"false\"\n      :scrim=\"false\"\n      :drag-predicate=\"plotlyDragPredicate\"\n    >\n      <v-checkbox\n        v-model=\"showErrorBands\"\n        label=\"Show Errors\"\n        density=\"compact\"\n        hide-details\n      >\n      </v-checkbox>\n      <timeseries-graph\n        :data=\"o3GraphData.length > 0 ? o3GraphData : []\"\n        :show-errors=\"showErrorBands\"\n      />\n    </cds-dialog>\n    \n    <v-btn v-if=\"hchoGraphData.length > 0\" @click=\"showHCHOGraph = true\">\n      Show Formaldehyde Graph\n    </v-btn>\n    <cds-dialog\n      title=\"Formaldehyde Data\"\n      v-model=\"showHCHOGraph\"\n      draggable\n      persistent\n      :modal=\"false\"\n      :scrim=\"false\"\n      :drag-predicate=\"plotlyDragPredicate\"\n    >\n      <v-checkbox\n        v-model=\"showErrorBands\"\n        label=\"Show Errors\"\n        density=\"compact\"\n        hide-details\n      >\n      </v-checkbox>\n      <timeseries-graph\n        :data=\"hchoGraphData.length > 0 ? hchoGraphData : []\"\n        :show-errors=\"showErrorBands\"\n      />\n    </cds-dialog>\n    \n    <v-btn v-if=\"no2foldedGraphData.length > 0\" @click=\"showfoldedNO2Graph = true\">\n      Show Folded NO Data\n    </v-btn>\n    <cds-dialog\n      title=\"Nitrogen Dioxide Data\"\n      v-model=\"showfoldedNO2Graph\"\n      draggable\n      persistent\n      :modal=\"false\"\n      :scrim=\"false\"\n      :drag-predicate=\"plotlyDragPredicate\"\n    >\n      <v-checkbox\n        v-model=\"showErrorBands\"\n        label=\"Show Errors\"\n        density=\"compact\"\n        hide-details\n      >\n      </v-checkbox>\n      <plotly-graph\n        :datasets=\"no2foldedGraphData.length > 0 ? no2foldedGraphData : []\"\n        :show-errors=\"showErrorBands\"\n        :colors=\"['#FF5733', '#333']\"\n        :data-options=\"[{mode: 'markers'}, {mode: 'lines+markers'}]\"\n      />\n    </cds-dialog>\n\n    <v-btn v-if=\"o3foldedGraphData.length > 0\" @click=\"showfoldedO3Graph = true\">\n      Show Folded O Data\n    </v-btn>\n    <cds-dialog\n      title=\"Ozone Data\"\n      v-model=\"showfoldedO3Graph\"\n      draggable\n      persistent\n      :modal=\"false\"\n      :scrim=\"false\"\n      :drag-predicate=\"plotlyDragPredicate\"\n    >\n      <v-checkbox\n        v-model=\"showErrorBands\"\n        label=\"Show Errors\"\n        density=\"compact\"\n        hide-details\n      >\n      </v-checkbox>\n      <plotly-graph\n        :datasets=\"o3foldedGraphData.length > 0 ? o3foldedGraphData : []\"\n        :show-errors=\"showErrorBands\"\n        :colors=\"['#FF5733', '#333']\"\n        :data-options=\"[{mode: 'markers'}, {mode: 'lines+markers'}]\"\n      />\n    </cds-dialog>\n\n    <v-btn v-if=\"hchofoldedGraphData.length > 0\" @click=\"showfoldedHCHOGraph = true\">\n      Show Folded HCHO Data\n    </v-btn>\n    <cds-dialog\n      title=\"Formaldehyde Data\"\n      v-model=\"showfoldedHCHOGraph\"\n      draggable\n      persistent\n      :modal=\"false\"\n      :scrim=\"false\"\n      :drag-predicate=\"plotlyDragPredicate\"\n    >\n      <v-checkbox\n        v-model=\"showErrorBands\"\n        label=\"Show Errors\"\n        density=\"compact\"\n        hide-details\n      >\n      </v-checkbox>\n      <plotly-graph\n        :datasets=\"hchofoldedGraphData.length > 0 ? hchofoldedGraphData : []\"\n        :show-errors=\"showErrorBands\"\n        :colors=\"['#FF5733', '#333']\"\n        :data-options=\"[{mode: 'markers'}, {mode: 'lines+markers'}]\"\n      />\n    </cds-dialog>\n    </div>\n\n    <v-dialog\n      v-model=\"showEditRegionNameDialog\"\n    >\n      <!-- text field that requires a confirmation -->\n        <c-text-field\n          label=\"Region Name\"\n          title=\"Enter a new name for this region\"\n          hide-details\n          dense\n          :button-color=\"accentColor\"\n          @confirm=\"(name: string) => {\n            if (regionBeingEdited) {\n              store.setRegionName(regionBeingEdited as UnifiedRegionType, name);\n              showEditRegionNameDialog = false;\n            }\n          }\"\n          @cancel=\"() => {\n            showEditRegionNameDialog = false;\n            regionBeingEdited = null;\n          }\"\n        ></c-text-field>\n\n        </v-dialog>\n        \n    <!-- Data Aggregation Dialog -->\n    <advanced-operations\n      v-model=\"showAggregationDialog\"\n      :selection=\"aggregationDataset\"\n      @save=\"handleAggregationSaved\"\n    />\n\n  </div>\n\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref } from \"vue\";\nimport { storeToRefs } from \"pinia\";\nimport { v4 } from \"uuid\";\nimport { supportsTouchscreen } from \"@cosmicds/vue-toolkit\";\n\nimport type { MillisecondRange, TimeRange, UserDataset, UnifiedRegion } from \"../types\";\nimport { useTempoStore } from \"../stores/app\";\nimport { moleculeName, MOLECULE_OPTIONS } from \"../esri/utils\";\nimport { areEquivalentTimeRanges, formatTimeRange } from \"../utils/timeRange\";\nimport { atleast1d } from \"../utils/atleast1d\";\n\nimport DateTimeRangeSelection from \"../date_time_range_selection/DateTimeRangeSelection.vue\";\nimport AdvancedOperations from \"./AdvancedOperations.vue\";\nimport { TimeRangeSelectionType } from \"@/types/datetime\";\nimport PlotlyGraph from \"./PlotlyGraph.vue\";\nimport CTextField from \"./CTextField.vue\";\n\ntype UnifiedRegionType = UnifiedRegion<typeof backend.value>;\n\nconst store = useTempoStore();\nconst {\n  accentColor,\n  accentColor2,\n  backend,\n  regions,\n  datasets,\n  timeRanges,\n  singleDateSelected,\n  selectedTimezone,\n  uniqueDays,\n  selectionActive,\n  lastFocusedRegion,\n} = storeToRefs(store);\n\nfunction plotlyDragPredicate(element: HTMLElement): boolean {\n  return element.closest(\".plotly\") === null;\n}\n\nconst touchscreen = supportsTouchscreen();\n\nconst openPanels = ref<number[]>([]);\nconst openGraphs = ref<Record<string,boolean>>({});\nconst openSelection = ref<string | null>(null);\nconst tableSelection = ref<UserDataset | null>(null);\n\nconst createTimeRangeActive = ref(false);\nconst createDatasetActive = ref(false);\nconst datasetRowRefs = ref({});\nconst sampleErrorID = ref<string | null>(null);\nconst loadingPointSample = ref<string | false>(false);\n\nconst showEditRegionNameDialog = ref(false);\nconst regionBeingEdited = ref<UnifiedRegionType | null>(null);\n\nconst aggregationDataset = ref<UserDataset | null>(null);\nconst showAggregationDialog = ref(false);\nfunction openAggregationDialog(selection: UserDataset) {\n  aggregationDataset.value = selection;\n  showAggregationDialog.value = true;\n}\nfunction handleAggregationSaved(aggregatedSelection: UserDataset) {\n  store.addDataset(aggregatedSelection, false); // no need to fetch anything\n  showAggregationDialog.value = false;\n  aggregationDataset.value = null;\n}\n\nfunction handleDatasetCreated(dataset: UserDataset) {\n  store.addDataset(dataset);\n  createDatasetActive.value = false;\n}\n\nfunction removeDataset(dataset: UserDataset) {\n  store.deleteDataset(dataset);\n\n  delete openGraphs[dataset.id];\n  delete datasetRowRefs[dataset.id];\n}\n\nfunction handleDateTimeRangeSelectionChange(timeRanges: MillisecondRange[], selectionType: TimeRangeSelectionType) {\n  if (!Array.isArray(timeRanges) || timeRanges.length === 0) {\n    console.error('No time ranges received from DateTimeRangeSelection');\n    return;\n  }\n  const normalized = atleast1d(timeRanges);\n  // No dedup tracking now\n  // Build description based on selection type\n  let descriptionBase = 'Custom';\n  switch (selectionType) {\n  case 'weekday':\n    descriptionBase = 'Weekday Pattern';\n    break;\n  case 'daterange':\n    descriptionBase = 'Date Range';\n    break;\n  case 'singledate':\n    descriptionBase = 'Single Date';\n    break;\n  case 'pattern':\n    descriptionBase = 'Pattern';\n    break;\n  }\n  const formatted = formatTimeRange(normalized);\n  const description = `${descriptionBase} (${formatted})`;\n  const tr: TimeRange = {\n    id: v4(),\n    name: formatted,\n    description,\n    range: normalized.length === 1 ? normalized[0] : normalized,\n    type: selectionType,\n  };\n  store.addTimeRange(tr);\n\n  createTimeRangeActive.value = false;\n  console.log(`Registered ${tr.name}: ${tr.description}`);\n}\n\nfunction editRegionName(region: UnifiedRegionType) {\n  console.log(`Editing ${region.geometryType}: ${region.name}`);\n  // Set the region to edit\n\n  // eslint-disable-next-line\n  // @ts-ignore it is not actually deep\n  const existing = (regions.value as UnifiedRegionType[]).find(r => r.id === region.id);\n  if (!existing) {\n    console.error(`Region with ID ${region.id} not found.`);\n    return;\n  }\n  regionBeingEdited.value = region;\n  // Open dialog for renaming\n  showEditRegionNameDialog.value = true;\n}\n\nfunction graphTitle(dataset: UserDataset): string {\n  const molecule = dataset.molecule;\n  const molTitle = MOLECULE_OPTIONS.find(m => m.value === molecule)?.title || '';\n  return `${molTitle} Time Series for ${dataset.region.name}`;\n}\n\nconst showNO2Graph = ref(false);\nconst no2GraphData = computed(() =>{\n  return datasets.value.filter(s => s.molecule.includes('no2') && store.datasetHasSamples(s));\n});\n\n// ozone version\nconst showO3Graph = ref(false);\nconst o3GraphData = computed(() =>{\n  return datasets.value.filter(s => s.molecule.includes('o3') && store.datasetHasSamples(s));\n});\n\n\n// formaldehyde version\nconst showHCHOGraph = ref(false);\nconst hchoGraphData = computed(() =>{\n  return datasets.value.filter(s => s.molecule.includes('hcho') && store.datasetHasSamples(s));\n});\n\n\nconst showfoldedNO2Graph = ref(false);\nconst no2foldedGraphData = computed(() =>{\n  const validFoldedDatasets = datasets.value\n    .filter(\n      s => s.molecule.includes('no2') && \n      s.timeRange?.type === 'folded' && \n      s.plotlyDatasets && \n      s.plotlyDatasets.length > 0\n    );\n  return validFoldedDatasets.map(s => s.plotlyDatasets![1]); // \"!\" tells TS that we know it's not undefined\n});\n\nconst showfoldedO3Graph = ref(false);\nconst o3foldedGraphData = computed(() =>{\n  const validFoldedDatasets = datasets.value\n    .filter(\n      s => s.molecule.includes('o3') && \n      s.timeRange?.type === 'folded' && \n      s.plotlyDatasets && \n      s.plotlyDatasets.length > 0\n    );\n  return validFoldedDatasets.map(s => s.plotlyDatasets![1]); // \"!\" tells TS that we know it's not undefined\n}); \n\nconst showfoldedHCHOGraph = ref(false);\nconst hchofoldedGraphData = computed(() =>{\n  const validFoldedDatasets = datasets.value\n    .filter(\n      s => s.molecule.includes('hcho') && \n      s.timeRange?.type === 'folded' && \n      s.plotlyDatasets && \n      s.plotlyDatasets.length > 0\n    );\n  return validFoldedDatasets.map(s => s.plotlyDatasets![1]); // \"!\" tells TS that we know it's not undefined\n}); \n\nconst showErrorBands = ref(true);\n</script>\n\n<style scoped lang=\"less\">\n#dataset-sections {\n  padding: 0.5rem 1rem;\n  border: 5px solid var(--tempo-red);\n  border-radius: 10px;\n  margin: 10px;\n}\n\n// prevent overflows of the content\n#add-region-time {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  gap: 5px;\n}\n\n.my-selections {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  gap: 5px;\n  padding: 0.5rem;\n  border-radius: 10px;\n  // background-color: #555555;\n}\n\n.h3-panel-titles .v-expansion-panel-title {\n  font-size: 1.17em;\n  font-weight: bold;\n}\n</style>\n","import script from \"./DatasetControls.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DatasetControls.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./DatasetControls.vue?vue&type=style&index=0&id=0e43a0b2&scoped=true&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0e43a0b2\"]])\n\nexport default __exports__","import { computed, toRef, ref, watch, type MaybeRef, onMounted } from \"vue\";\n\nimport { ESRI_URLS, getEsriTimesteps, MoleculeType } from \"../esri/utils\";\n\nconst timestepCache: Record<MoleculeType, number[]> = {};\n\nexport function useEsriTimesteps(initialMolecule: MaybeRef<MoleculeType>, updateOnMount=true) {\n  const molecule = toRef(initialMolecule);\n  const url = computed(() => ESRI_URLS[molecule.value].url);\n  const variable = computed(() => ESRI_URLS[molecule.value].variable);\n  const loadingTimesteps = ref(false);\n  const esriTimesteps = ref<number[]>([]);\n  const error = ref<string | null>(null);\n\n  async function updateEsriTimeSteps(): Promise<void> {\n    if (timestepCache[molecule.value]) {\n      esriTimesteps.value = timestepCache[molecule.value];\n      return;\n    }\n\n    loadingTimesteps.value = true;\n    return getEsriTimesteps(url.value, variable.value)\n      .then(timesteps => {\n        esriTimesteps.value = timesteps;\n      })\n      .catch((err: Error) => {\n        console.error(`Error fetching ESRI time steps: ${err}`);\n        error.value = err.message;\n      });\n  }\n\n  if (updateOnMount) {\n    onMounted(updateEsriTimeSteps);\n  }\n\n  watch(() => [url, variable], _newValues => {\n    updateEsriTimeSteps();\n  });\n\n  return {\n    molecule,\n    url,\n    variable,\n    loadingTimesteps,\n    esriTimesteps,\n  };\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"time-chips-container\" }\nconst _hoisted_2 = { class: \"chips-grid\" }\nconst _hoisted_3 = [\"onClick\"]\nconst _hoisted_4 = { class: \"chip-content\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"chip-date\"\n}\nconst _hoisted_6 = {\n  key: 1,\n  class: \"chip-time\"\n}\n\nimport { computed } from 'vue';\n\ninterface Props {\n  timestamps: number[]\n  selectedIndex?: number\n  reverse?: boolean,\n  useUtc?: boolean,\n  dateOnly?: boolean\n  hourOnly?: boolean\n}\n\ninterface Emits {\n  (e: 'select', payload: { value: number; index: number }): void\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TimeChips',\n  props: {\n    timestamps: {},\n    selectedIndex: { default: -1 },\n    reverse: { type: Boolean, default: false },\n    useUtc: { type: Boolean, default: false },\n    dateOnly: { type: Boolean, default: false },\n    hourOnly: { type: Boolean, default: false }\n  },\n  emits: [\"select\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\n\nconst formatDate = (timestamp: number): string => {\n  if (props.useUtc) {\n    const date = new Date(timestamp);\n    timestamp = date.getTime() + date.getTimezoneOffset() * 60*1000; // Adjust for UTC offset\n  }\n  const date = new Date(timestamp);\n  return date.toLocaleDateString('en-US', {\n    month: 'short',\n    year: 'numeric'\n  });\n};\n\nconst formatTime = (timestamp: number): string => {\n  if (props.useUtc) {\n    const date = new Date(timestamp);\n    timestamp = date.getTime() + date.getTimezoneOffset() * 60*1000; // Adjust for UTC offset\n  }\n  const date = new Date(timestamp);\n  return date.toLocaleTimeString('en-US', {\n    hour: '2-digit',\n    minute: '2-digit',\n    hour12: true\n  });\n};\n\n\n\nconst timestampsComputed = computed(() => \n  props.reverse ? [...props.timestamps].sort((a,b) => b-a) : [...props.timestamps].sort((a,b) => a-b)\n);\n\nconst formattedDates = computed(() => \n  timestampsComputed.value.map(timestamp => formatDate(timestamp))\n);\n\nconst formattedTimes = computed(() => \n  timestampsComputed.value.map(timestamp => formatTime(timestamp))\n);\nconst handleChipClick = (value: number, index: number) => {\n  emit('select', { value, index });\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(timestampsComputed.value, (timestamp, index) => {\n        return (_openBlock(), _createElementBlock(\"button\", {\n          key: timestamp,\n          class: _normalizeClass([\n          'time-chip',\n          { 'active': index === _ctx.selectedIndex }\n        ]),\n          onClick: ($event: any) => (handleChipClick(timestamp, index))\n        }, [\n          _createElementVNode(\"div\", _hoisted_4, [\n            (!_ctx.hourOnly)\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString(formattedDates.value[index]), 1))\n              : _createCommentVNode(\"\", true),\n            (!_ctx.dateOnly)\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(formattedTimes.value[index]), 1))\n              : _createCommentVNode(\"\", true)\n          ])\n        ], 10, _hoisted_3))\n      }), 128))\n    ])\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\nimport { computed } from 'vue';\n\ninterface Props {\n  timestamps: number[]\n  selectedIndex?: number\n  reverse?: boolean,\n  useUtc?: boolean,\n  dateOnly?: boolean\n  hourOnly?: boolean\n}\n\ninterface Emits {\n  (e: 'select', payload: { value: number; index: number }): void\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  selectedIndex: -1,\n  reverse: false,\n  useUtc: false,\n  dateOnly: false,\n  hourOnly: false\n});\n\nconst emit = defineEmits<Emits>();\n\n\nconst formatDate = (timestamp: number): string => {\n  if (props.useUtc) {\n    const date = new Date(timestamp);\n    timestamp = date.getTime() + date.getTimezoneOffset() * 60*1000; // Adjust for UTC offset\n  }\n  const date = new Date(timestamp);\n  return date.toLocaleDateString('en-US', {\n    month: 'short',\n    year: 'numeric'\n  });\n};\n\nconst formatTime = (timestamp: number): string => {\n  if (props.useUtc) {\n    const date = new Date(timestamp);\n    timestamp = date.getTime() + date.getTimezoneOffset() * 60*1000; // Adjust for UTC offset\n  }\n  const date = new Date(timestamp);\n  return date.toLocaleTimeString('en-US', {\n    hour: '2-digit',\n    minute: '2-digit',\n    hour12: true\n  });\n};\n\n\n\nconst timestampsComputed = computed(() => \n  props.reverse ? [...props.timestamps].sort((a,b) => b-a) : [...props.timestamps].sort((a,b) => a-b)\n);\n\nconst formattedDates = computed(() => \n  timestampsComputed.value.map(timestamp => formatDate(timestamp))\n);\n\nconst formattedTimes = computed(() => \n  timestampsComputed.value.map(timestamp => formatTime(timestamp))\n);\nconst handleChipClick = (value: number, index: number) => {\n  emit('select', { value, index });\n};\n</script>\n\n<template>\n  <div class=\"time-chips-container\">\n    <div class=\"chips-grid\">\n      <button\n        v-for=\"(timestamp, index) in timestampsComputed\"\n        :key=\"timestamp\"\n        :class=\"[\n          'time-chip',\n          { 'active': index === selectedIndex }\n        ]\"\n        @click=\"handleChipClick(timestamp, index)\"\n      >\n        <div class=\"chip-content\">\n          <span \n            v-if=\"!hourOnly\"\n            class=\"chip-date\">{{ formattedDates[index] }}</span>\n          <span \n            v-if=\"!dateOnly\"\n            class=\"chip-time\">{{ formattedTimes[index] }}</span>\n        </div>\n      </button>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.time-chips-container {\n  width: 100%;\n  max-height: 300px;\n  background: transparent;\n  border-radius: 8px;\n  padding: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e5e7eb;\n  overflow: hidden;\n}\n\n.chips-grid {\n  /* display: grid; */\n  /* grid-template-columns: repeat(5, 1fr); */\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-evenly;\n  gap: 8px;\n  max-height: 276px;\n  overflow-y: auto;\n}\n\n\n\n.time-chip {\n  flex-basis: 15%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: fit-content;\n  padding: 8px;\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  color: #475569;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  outline: none;\n  user-select: none;\n}\n\n.time-chip:hover {\n  background: #8cc5ff;\n  border-color: #cbd5e1;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.time-chip:active {\n  background: #8cc5ff;\n}\n\n.time-chip.active {\n  background: #3b82f6;\n  border-color: #3b82f6;\n  color: #ffffff;\n  box-shadow: 0 2px 12px rgba(59, 130, 246, 0.3);\n}\n\n.time-chip.active:hover {\n  background: #2563eb;\n  border-color: #2563eb;\n}\n\n.chip-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2px;\n  text-align: center;\n  line-height: 1.2;\n}\n\n.chip-date {\n  font-size: 11px;\n  font-weight: 600;\n  opacity: 0.9;\n}\n\n.chip-time {\n  font-size: 10px;\n  font-weight: 500;\n  opacity: 0.8;\n}\n\n.time-chip.active .chip-date,\n.time-chip.active .chip-time {\n  opacity: 1;\n}\n\n@media (max-width: 768px) {\n  .time-chips-container {\n    padding: 8px;\n    max-height: 250px;\n  }\n  \n  .chips-grid {\n    grid-template-columns: repeat(3, 1fr);\n    gap: 6px;\n    max-height: 234px;\n  }\n  \n  .time-chip {\n    height: 48px;\n    padding: 6px;\n  }\n  \n  .chip-date {\n    font-size: 10px;\n  }\n  \n  .chip-time {\n    font-size: 9px;\n  }\n}\n</style>","import script from \"./TimeChips.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TimeChips.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TimeChips.vue?vue&type=style&index=0&id=20cd57df&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-20cd57df\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, withKeys as _withKeys, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, mergeProps as _mergeProps, isRef as _isRef, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { id: \"map-view\" }\nconst _hoisted_2 = { class: \"mt-2\" }\nconst _hoisted_3 = { class: \"d-flex flex-row align-center\" }\nconst _hoisted_4 = [\"disabled\"]\nconst _hoisted_5 = { class: \"d-flex flex-row align-center my-2\" }\n\nimport { ref, watch } from \"vue\";\nimport { storeToRefs } from \"pinia\";\nimport { DatePickerInstance } from \"@vuepic/vue-datepicker\";\nimport { supportsTouchscreen } from \"@cosmicds/vue-toolkit\";\n\nimport { MOLECULE_OPTIONS, type MoleculeType } from \"@/esri/utils\";\nimport { useTempoStore } from \"@/stores/app\";\nimport { useEsriTimesteps } from \"@/composables/useEsriTimesteps\";\n\nimport TimeChips from \"@/components/TimeChips.vue\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MapControls',\n  emits: [\"molecule\"],\n  setup(__props, { emit: __emit }) {\n\nconst store = useTempoStore();\nconst {\n  timestamps,\n  singleDateSelected,\n  uniqueDays,\n  selectedTimezone,\n  timezoneOptions,\n  timeIndex,\n  minIndex,\n  maxIndex,\n} = storeToRefs(store);\n\nconst emit = __emit;\n\nconst molecule = ref<MoleculeType>('no2');\nconst { esriTimesteps } = useEsriTimesteps(molecule);\n\nconst radio = ref<number | null>(null);\nconst touchscreen = supportsTouchscreen();\n\nconst calendar = ref<DatePickerInstance | null>(null);\n\nfunction handleEsriTimeSelected(ts: number, _index: number) {\n  const idx = timestamps.value.indexOf(ts);\n  console.log(`ESRI time selected: ${new Date(ts)} (nearest index ${idx})`);\n  if (idx >= 0) {\n    timeIndex.value = idx;\n  }\n  // We may need something like this when we get back the monthly average service.\n  //singleDateSelected.value = new Date(ts);\n}\n\nwatch(molecule, (newMol: MoleculeType) => {\n  emit(\"molecule\", newMol);\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_date_picker = _resolveComponent(\"date-picker\")!\n  const _component_v_radio_group = _resolveComponent(\"v-radio-group\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_tooltip = _resolveComponent(\"v-tooltip\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_select = _resolveComponent(\"v-select\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[13] || (_cache[13] = _createElementVNode(\"h2\", null, \"Explore Map View\", -1)),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[12] || (_cache[12] = _createElementVNode(\"h3\", null, \"Select a Date\", -1)),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createVNode(_component_v_radio_group, {\n          modelValue: radio.value,\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((radio).value = $event))\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_date_picker, {\n              ref_key: \"calendar\",\n              ref: calendar,\n              \"model-value\": _unref(singleDateSelected),\n              onInternalModelChange: _cache[2] || (_cache[2] = (value) => {\n              if (value != null && value.getTime() != _unref(singleDateSelected).getTime()) {\n                radio.value = null;\n                singleDateSelected.value = value;\n                calendar.value?.closeMenu();\n              }\n            }),\n              \"allowed-dates\": _unref(uniqueDays),\n              clearable: false,\n              \"enable-time-picker\": false,\n              \"multi-dates\": false,\n              transitions: false,\n              format: (date) => date?.toDateString(),\n              \"preview-format\": (date) => date?.toDateString(),\n              \"no-today\": \"\",\n              dark: \"\",\n              \"year-range\": [_unref(uniqueDays)[0]?.getFullYear(), _unref(uniqueDays)[_unref(uniqueDays).length - 1]?.getFullYear()]\n            }, {\n              \"action-buttons\": _withCtx(() => [\n                _createElementVNode(\"button\", {\n                  class: \"dp__action_button dp__action-latest\",\n                  onClick: _cache[0] || (_cache[0] = () => singleDateSelected.value = _unref(uniqueDays)[_unref(uniqueDays).length - 1]),\n                  onKeyup: _cache[1] || (_cache[1] = _withKeys(() => singleDateSelected.value = _unref(uniqueDays)[_unref(uniqueDays).length - 1], [\"enter\"])),\n                  disabled: _unref(singleDateSelected) === _unref(uniqueDays)[_unref(uniqueDays).length - 1],\n                  elevation: \"0\",\n                  size: \"sm\"\n                }, \" Latest \", 40, _hoisted_4)\n              ]),\n              _: 1\n            }, 8, [\"model-value\", \"allowed-dates\", \"format\", \"preview-format\", \"year-range\"]),\n            (molecule.value.toLowerCase().includes('month'))\n              ? (_openBlock(), _createBlock(TimeChips, {\n                  key: 0,\n                  timestamps: _unref(esriTimesteps).slice(_unref(minIndex), _unref(maxIndex) + 1),\n                  onSelect: _cache[3] || (_cache[3] = ($event: any) => (handleEsriTimeSelected($event.value, $event.index))),\n                  \"selected-index\": _unref(timeIndex) - _unref(minIndex),\n                  \"use-utc\": molecule.value.toLowerCase().includes('month'),\n                  \"date-only\": molecule.value.toLowerCase().includes('month'),\n                  \"hour-only\": !molecule.value.toLowerCase().includes('month')\n                }, null, 8, [\"timestamps\", \"selected-index\", \"use-utc\", \"date-only\", \"hour-only\"]))\n              : _createCommentVNode(\"\", true)\n          ]),\n          _: 1\n        }, 8, [\"modelValue\"])\n      ]),\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createVNode(_component_v_tooltip, {\n          disabled: _unref(touchscreen),\n          text: \"Previous Date\"\n        }, {\n          activator: _withCtx(({ props }) => [\n            _createVNode(_component_v_btn, _mergeProps(props, {\n              class: \"rounded-icon-wrapper\",\n              onClick: _unref(store).moveBackwardOneDay,\n              onKeyup: _withKeys(_unref(store).moveBackwardOneDay, [\"enter\"]),\n              disabled: _unref(singleDateSelected) === _unref(uniqueDays)[0],\n              color: \"#009ade\",\n              variant: \"outlined\",\n              elevation: \"0\",\n              size: \"md\"\n            }), {\n              default: _withCtx(() => [\n                _createVNode(_component_v_icon, null, {\n                  default: _withCtx(() => [...(_cache[9] || (_cache[9] = [\n                    _createTextVNode(\"mdi-chevron-double-left\", -1)\n                  ]))]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 16, [\"onClick\", \"onKeyup\", \"disabled\"])\n          ]),\n          _: 1\n        }, 8, [\"disabled\"]),\n        _createVNode(_component_v_spacer),\n        _createVNode(_component_v_tooltip, {\n          disabled: _unref(touchscreen),\n          text: \"Get Data for latest available day\"\n        }, {\n          activator: _withCtx(({ props }) => [\n            _createVNode(_component_v_btn, _mergeProps(props, {\n              style: {\"padding-inline\":\"4px\"},\n              onClick: _cache[5] || (_cache[5] = () => singleDateSelected.value = _unref(uniqueDays)[_unref(uniqueDays).length - 1]),\n              onKeyup: _cache[6] || (_cache[6] = _withKeys(() => singleDateSelected.value = _unref(uniqueDays)[_unref(uniqueDays).length - 1], [\"enter\"])),\n              disabled: _unref(singleDateSelected) === _unref(uniqueDays)[_unref(uniqueDays).length - 1],\n              color: \"#009ade\",\n              variant: \"outlined\",\n              elevation: \"0\",\n              size: \"md\"\n            }), {\n              default: _withCtx(() => [...(_cache[10] || (_cache[10] = [\n                _createTextVNode(\" Latest Data \", -1)\n              ]))]),\n              _: 1\n            }, 16, [\"disabled\"])\n          ]),\n          _: 1\n        }, 8, [\"disabled\"]),\n        _createVNode(_component_v_spacer),\n        _createVNode(_component_v_tooltip, {\n          disabled: _unref(touchscreen),\n          text: \"Next Date\"\n        }, {\n          activator: _withCtx(({ props }) => [\n            _createVNode(_component_v_btn, _mergeProps(props, {\n              class: \"rounded-icon-wrapper\",\n              onClick: _unref(store).moveForwardOneDay,\n              onKeyup: _withKeys(_unref(store).moveForwardOneDay, [\"enter\"]),\n              disabled: _unref(singleDateSelected) === _unref(uniqueDays)[_unref(uniqueDays).length - 1],\n              color: \"#009ade\",\n              variant: \"outlined\",\n              elevation: \"0\",\n              size: \"md\"\n            }), {\n              default: _withCtx(() => [\n                _createVNode(_component_v_icon, null, {\n                  default: _withCtx(() => [...(_cache[11] || (_cache[11] = [\n                    _createTextVNode(\"mdi-chevron-double-right\", -1)\n                  ]))]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 16, [\"onClick\", \"onKeyup\", \"disabled\"])\n          ]),\n          _: 1\n        }, 8, [\"disabled\"])\n      ])\n    ]),\n    _createVNode(_component_v_select, {\n      modelValue: _unref(selectedTimezone),\n      \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => (_isRef(selectedTimezone) ? (selectedTimezone).value = $event : null)),\n      label: \"Timezone\",\n      items: _unref(timezoneOptions),\n      \"item-title\": \"name\",\n      \"item-value\": \"tz\",\n      \"hide-details\": \"\",\n      dense: \"\",\n      class: \"mt-3 pl-3\"\n    }, null, 8, [\"modelValue\", \"items\"]),\n    _createVNode(_component_v_select, {\n      modelValue: molecule.value,\n      \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((molecule).value = $event)),\n      items: _unref(MOLECULE_OPTIONS),\n      \"item-title\": \"title\",\n      \"item-value\": \"value\",\n      label: \"Molecule / Quantity\",\n      \"hide-details\": \"\",\n      dense: \"\",\n      class: \"mt-3 pl-3\"\n    }, null, 8, [\"modelValue\", \"items\"])\n  ]))\n}\n}\n\n})","<template>\n  <div id=\"map-view\">\n    <h2>Explore Map View</h2>\n    <div class=\"mt-2\">\n      <h3>Select a Date</h3>\n      <div class=\"d-flex flex-row align-center\">\n        <v-radio-group v-model=\"radio\">\n          <date-picker\n            ref=\"calendar\"\n            :model-value=\"singleDateSelected\"\n            @internal-model-change=\"(value: Date) => {\n              if (value != null && value.getTime() != singleDateSelected.getTime()) {\n                radio = null;\n                singleDateSelected = value;\n                calendar?.closeMenu();\n              }\n            }\"\n            :allowed-dates=\"uniqueDays\"\n            :clearable=\"false\"\n            :enable-time-picker=\"false\"\n            :multi-dates=\"false\"\n            :transitions=\"false\"\n            :format=\"(date: Date | null) => date?.toDateString()\"\n            :preview-format=\"(date: Date | null) => date?.toDateString()\"\n            no-today\n            dark\n            :year-range=\"[uniqueDays[0]?.getFullYear(), uniqueDays[uniqueDays.length - 1]?.getFullYear()]\"\n          >\n            <template #action-buttons>\n              <button\n                class=\"dp__action_button dp__action-latest\"\n                @click=\"() => singleDateSelected = uniqueDays[uniqueDays.length - 1]\"\n                @keyup.enter=\"() => singleDateSelected = uniqueDays[uniqueDays.length - 1]\"\n                :disabled=\"singleDateSelected === uniqueDays[uniqueDays.length - 1]\"\n                elevation=\"0\"\n                size=\"sm\"\n              >\n                Latest\n            </button>\n            </template>\n            <!-- <template #action-extra=\"{ selectCurrentDate }\">\n            \n            </template> -->\n          </date-picker>\n          <!-- time chips to select time specifically for esri times -->\n          <time-chips\n            v-if=\"molecule.toLowerCase().includes('month')\"\n            :timestamps=\"esriTimesteps.slice(minIndex, maxIndex + 1)\"\n            @select=\"handleEsriTimeSelected($event.value, $event.index)\"\n            :selected-index=\"timeIndex - minIndex\"\n            :use-utc=\"molecule.toLowerCase().includes('month')\"\n            :date-only=\"molecule.toLowerCase().includes('month')\"\n            :hour-only=\"!molecule.toLowerCase().includes('month')\"\n          />\n        </v-radio-group>\n      </div>        \n      <!-- add buttons to increment and decrement the singledateselected -->\n      <div class=\"d-flex flex-row align-center my-2\">\n        <v-tooltip :disabled=\"touchscreen\" text=\"Previous Date\">\n          <template v-slot:activator=\"{ props }\">\n            <v-btn\n              v-bind=\"props\"\n              class=\"rounded-icon-wrapper\"\n              @click=\"store.moveBackwardOneDay\"\n              @keyup.enter=\"store.moveBackwardOneDay\"\n              :disabled=\"singleDateSelected === uniqueDays[0]\"\n              color=\"#009ade\"\n              variant=\"outlined\"\n              elevation=\"0\"\n              size=\"md\"\n            >\n              <v-icon>mdi-chevron-double-left</v-icon>\n            </v-btn>\n          </template>\n        </v-tooltip>\n        <v-spacer></v-spacer>\n        <v-tooltip :disabled=\"touchscreen\" text=\"Get Data for latest available day\">\n          <template v-slot:activator=\"{ props }\">\n            <v-btn\n              v-bind=\"props\"\n              style=\"padding-inline: 4px;\"\n              @click=\"() => singleDateSelected = uniqueDays[uniqueDays.length - 1]\"\n              @keyup.enter=\"() => singleDateSelected = uniqueDays[uniqueDays.length - 1]\"\n              :disabled=\"singleDateSelected === uniqueDays[uniqueDays.length - 1]\"\n              color=\"#009ade\"\n              variant=\"outlined\"\n              elevation=\"0\"\n              size=\"md\"\n            >\n              Latest Data\n            </v-btn>\n          </template>\n        </v-tooltip>\n        <v-spacer></v-spacer>\n        <v-tooltip :disabled=\"touchscreen\" text=\"Next Date\">\n          <template v-slot:activator=\"{ props }\">\n            <v-btn\n              v-bind=\"props\"\n              class=\"rounded-icon-wrapper\"\n              @click=\"store.moveForwardOneDay\"\n              @keyup.enter=\"store.moveForwardOneDay\"\n              :disabled=\"singleDateSelected === uniqueDays[uniqueDays.length - 1]\"\n              color=\"#009ade\"\n              variant=\"outlined\"\n              elevation=\"0\"\n              size=\"md\"\n            >\n              <v-icon>mdi-chevron-double-right</v-icon>\n            </v-btn>\n          </template>\n        </v-tooltip>\n      </div>\n\n    </div>\n    <v-select\n      v-model=\"selectedTimezone\"\n      label=\"Timezone\"\n      :items=\"timezoneOptions\"\n      item-title=\"name\"\n      item-value=\"tz\"\n      hide-details\n      dense\n      class=\"mt-3 pl-3\"\n    ></v-select>\n    <v-select\n      v-model=\"molecule\"\n      :items=\"MOLECULE_OPTIONS\"\n      item-title=\"title\"\n      item-value=\"value\"\n      label=\"Molecule / Quantity\"\n      hide-details\n      dense\n      class=\"mt-3 pl-3\"\n    ></v-select>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch } from \"vue\";\nimport { storeToRefs } from \"pinia\";\nimport { DatePickerInstance } from \"@vuepic/vue-datepicker\";\nimport { supportsTouchscreen } from \"@cosmicds/vue-toolkit\";\n\nimport { MOLECULE_OPTIONS, type MoleculeType } from \"@/esri/utils\";\nimport { useTempoStore } from \"@/stores/app\";\nimport { useEsriTimesteps } from \"@/composables/useEsriTimesteps\";\n\nimport TimeChips from \"@/components/TimeChips.vue\";\n\nconst store = useTempoStore();\nconst {\n  timestamps,\n  singleDateSelected,\n  uniqueDays,\n  selectedTimezone,\n  timezoneOptions,\n  timeIndex,\n  minIndex,\n  maxIndex,\n} = storeToRefs(store);\n\nconst emit = defineEmits<{\n  (event: \"molecule\", molecule: MoleculeType): void;\n}>();\n\nconst molecule = ref<MoleculeType>('no2');\nconst { esriTimesteps } = useEsriTimesteps(molecule);\n\nconst radio = ref<number | null>(null);\nconst touchscreen = supportsTouchscreen();\n\nconst calendar = ref<DatePickerInstance | null>(null);\n\nfunction handleEsriTimeSelected(ts: number, _index: number) {\n  const idx = timestamps.value.indexOf(ts);\n  console.log(`ESRI time selected: ${new Date(ts)} (nearest index ${idx})`);\n  if (idx >= 0) {\n    timeIndex.value = idx;\n  }\n  // We may need something like this when we get back the monthly average service.\n  //singleDateSelected.value = new Date(ts);\n}\n\nwatch(molecule, (newMol: MoleculeType) => {\n  emit(\"molecule\", newMol);\n});\n</script>\n","import script from \"./MapControls.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MapControls.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import type { ColorMap } from \"./types\";\nimport { colormaps, type AllAvailableColorMaps } from \".\";\n\nfunction lerp(a: number, b: number, t: number): number {\n  return a + (b - a) * t;\n}\n\n// linear spline\nfunction spline( t: number, ...values: number[]): number {\n  if (t <= 0) return values[0] as number;\n  if (t >= 1) return values[values.length - 1] as number;\n  const n = values.length - 1;\n  const i = Math.floor(t * n);\n  const u = t * n - i;\n  return lerp(values[i], values[i + 1] ?? values[i], u);\n}\n\nfunction clamp(x: number, min: number, max: number): number {\n  return Math.min(Math.max(x, min), max);\n}\n\nexport function colormap(cmap: AllAvailableColorMaps, cmin: number, cmax: number, val: number): [number, number, number]\n{ \n  \n  let reversed = false;\n  if (cmap.endsWith('_r')) {\n    cmap = cmap.slice(0, -2) as AllAvailableColorMaps;\n    reversed = true;\n  }\n  if (!(cmap in colormaps)) {\n    throw new Error(`Colormap ${cmap} not found`);\n  }\n  \n  const { r: redValues, g: greenValues, b: blueValues } = colormaps[cmap] as ColorMap;\n\n  // const normalizedVal = clamp((val-cmin)/(cmax-cmin),0,1);\n  const normalizedVal = reversed ? clamp((cmax - val) / (cmax - cmin), 0, 1) : clamp((val - cmin) / (cmax - cmin), 0, 1);\n  const r = spline(normalizedVal, ...redValues);\n  const g = spline(normalizedVal, ...greenValues);\n  const b = spline(normalizedVal, ...blueValues);\n  return [Math.round(r*255),Math.round(g*255),Math.round(b*255)];\n}\n\n","import {Ref, ref, watch} from 'vue';\nimport M, {Marker} from 'maplibre-gl';\nimport { LatLngPair } from '@/types';\n\n\nexport interface MaplibreLocationMarker {\n  locationMarker: Ref<M.Marker | null>;\n  setMarker: (latlng: LatLngPair) => void;\n  removeMarker: () => void;\n  showLocationMarker: Ref<boolean>;\n}\n\nexport function useLocationMarker( map: Ref<M.Map | null>, show: boolean): MaplibreLocationMarker {\n  \n  const showLocationMarker = ref(show);\n  const locationMarker = ref<null | Marker>(null);\n  \n  \n  const addToMap = () => {\n    if (locationMarker.value !== null && map.value !== null) {\n      locationMarker.value.addTo(map.value);\n    }\n  };\n  \n  function setMarker(latlng: LatLngPair) {\n    if (!map.value) return ;\n    \n    const lnglat = [latlng[1], latlng[0]] as M.LngLatLike;\n    \n    if (locationMarker.value == null) {\n      \n      locationMarker.value = new M.Marker()\n        .setLngLat(lnglat);\n      \n    } else {\n      locationMarker.value.setLngLat(lnglat);\n    }\n    \n    if (showLocationMarker.value) {\n      addToMap();\n    }\n  }\n  \n  function removeMarker() {\n    locationMarker.value?.remove();\n  }\n  \n  watch(showLocationMarker, (show: boolean) => {\n    if (show) {\n      addToMap();\n    } else {\n      removeMarker();\n    }\n  });\n  \n  return {\n    locationMarker: locationMarker as Ref<M.Marker | null>,\n    setMarker,\n    removeMarker,\n    showLocationMarker\n  };\n}","import { onMounted, onUnmounted, toRef, watch } from \"vue\";\nimport { Map, MapMouseEvent } from \"maplibre-gl\";\n\nimport { UseSelectionOptions } from \"../../types\";\n\nexport function baseUseSelection<SelectionInfo>(\n  options: UseSelectionOptions<Map, MapMouseEvent, SelectionInfo>,\n) {\n\n  const { map, handler } = options;\n  const active = toRef(options.active ?? false);\n\n  onMounted(() => {\n    const mMap = map.value;\n    if (active.value && mMap) {\n      updateListeners(mMap, active.value);\n    }\n  });\n\n  function updateListeners(map: Map, active: boolean) {\n    if (active) {\n      map.dragPan.disable();\n      map.scrollZoom.disable();\n      if (handler.onMousedown) {\n        map.on(\"mousedown\", handler.onMousedown);\n      }\n      if (handler.onMouseup) {\n        map.on(\"mouseup\", handler.onMouseup);\n      }\n      if (handler.onMousemove) {\n        map.on(\"mousemove\", handler.onMousemove);\n      }\n    } else {\n      map.dragPan.enable();\n      map.scrollZoom.enable();\n      if (handler.onMousedown) {\n        map.off(\"mousedown\", handler.onMousedown);\n      }\n      if (handler.onMouseup) {\n        map.off(\"mouseup\", handler.onMouseup);\n      }\n      if (handler.onMousemove) {\n        map.off(\"mousemove\", handler.onMousemove);\n      }\n    }\n  }\n\n  watch(active, (nowActive: boolean) => {\n    const mMap = map.value;\n    if (mMap !== null) {\n      updateListeners(mMap, nowActive);\n      mMap.getCanvas().style.cursor = nowActive ? 'crosshair' : '';\n    }\n  });\n\n  // If we're going to take in the map as a ref,\n  // we might as well update if its value does\n  watch(map, (newMap: Map | null) => {\n    if (newMap !== null) {\n      updateListeners(newMap, active.value);\n    }\n  });\n\n  onUnmounted(() => {\n    // The map will probably be destroyed along with the component using this composable\n    // But if not, we should remove handlers\n    const mMap = map.value;\n    if (mMap !== null && active.value) {\n      updateListeners(mMap, false);\n    }\n  });\n\n  return {\n    active,\n    selectionInfo: handler.selectionInfo,\n  };\n\n}\n","import { ref, type MaybeRef, type Ref } from \"vue\";\nimport { GeoJSONSource, LngLat, Map, MapMouseEvent } from \"maplibre-gl\";\nimport { v4 } from \"uuid\";\n\nimport type { RectangleSelectionInfo, SelectionHandler } from \"../../types\";\nimport type { LayerType } from \"./utils\";\nimport { baseUseSelection } from \"./baseUseSelection\";\n\n\nexport function useRectangleSelection(\n  map: Ref<Map | null>,\n  interactColor: string = \"yellow\",\n  active: MaybeRef<boolean>,\n) {\n\n  let rectangleSource: GeoJSONSource | null = null;\n  let rectangleLayer: LayerType | undefined = undefined;\n  let startCoords: LngLat | null = null;\n  let geoJson: GeoJSON.FeatureCollection;\n  const uuid = v4();\n\n  const handler: SelectionHandler<MapMouseEvent, RectangleSelectionInfo> = {\n\n    selectionInfo: ref<RectangleSelectionInfo | null>(null),\n\n    onMousedown(event: MapMouseEvent) {\n      const mMap = map.value;\n      if (!mMap) {\n        return;\n      }\n\n      startCoords = event.lngLat;\n      geoJson = {\n        type: \"FeatureCollection\",\n        features: [{\n          type: \"Feature\",\n          geometry: {\n            type: \"Polygon\",\n            coordinates: [[\n              [startCoords.lng, startCoords.lat],\n              [startCoords.lng, startCoords.lat],\n              [startCoords.lng, startCoords.lat],\n              [startCoords.lng, startCoords.lat],\n            ]],\n          },\n          properties: {},\n        }],\n      };\n\n      mMap.addSource(uuid, {\n        type: \"geojson\",\n        data: geoJson,\n      });\n\n      const source = mMap.getSource(uuid);\n      if (!source) {\n        return;\n      }\n\n      rectangleSource = source as GeoJSONSource;\n\n      mMap.addLayer({\n        id: uuid,\n        type: \"line\",\n        source: uuid,\n        paint: {\n          \"line-color\": interactColor,\n          \"line-width\": 2,\n          \"line-dasharray\": [2, 1],\n        }\n      });\n\n      const layer = mMap.getLayer(uuid);\n      if (layer) {\n        rectangleLayer = layer;\n      }\n    },\n\n    onMouseup(event: MapMouseEvent) {\n      const mMap = map.value;\n      if (!mMap || startCoords === null) {\n        return;\n      }\n\n      const eventCoords = event.lngLat;\n      handler.selectionInfo.value = {\n        xmin: Math.min(startCoords.lng, eventCoords.lng),\n        ymin: Math.min(startCoords.lat, eventCoords.lat),\n        xmax: Math.max(startCoords.lng, eventCoords.lng),\n        ymax: Math.max(startCoords.lat, eventCoords.lat),\n      };\n\n      if (rectangleLayer) {\n        mMap.removeLayer(rectangleLayer.id);\n      }\n      if (rectangleSource) {\n        mMap.removeSource(rectangleSource.id);\n      }\n      startCoords = null;\n\n    },\n\n    onMousemove(event: MapMouseEvent) {\n      const mMap = map.value;\n      if (!mMap || (startCoords === null) || (!geoJson)) {\n        return;\n      }\n\n      const eventCoords = event.lngLat;\n      const coordinates = [[\n        [startCoords.lng, startCoords.lat],\n        [eventCoords.lng, startCoords.lat],\n        [eventCoords.lng, eventCoords.lat],\n        [startCoords.lng, eventCoords.lat],\n        [startCoords.lng, startCoords.lat],\n      ]];\n\n      geoJson.features[0] = {\n        ...geoJson.features[0],\n        geometry: {\n          type: \"Polygon\",\n          coordinates,\n        }\n      };\n\n      rectangleSource?.setData(geoJson);\n    }\n  };\n\n  return baseUseSelection({ map, handler, active });\n\n}\n","import { GeoJSONSource, LngLatBoundsLike, Map } from \"maplibre-gl\";\nimport { v4 } from \"uuid\";\n\nimport { RectangleSelectionInfo, PointSelectionInfo, UnifiedRegion } from \"../../types\";\n\nconst layerGetter = (m: Map, id: string) => m.getLayer(id);\nexport type LayerType = Exclude<ReturnType<typeof layerGetter>, undefined>;\n\nfunction createBounds(info: RectangleSelectionInfo) {\n  return [\n    [info.xmin, info.ymin],\n    [info.xmax, info.ymin],\n    [info.xmax, info.ymax],\n    [info.xmin, info.ymax],\n    [info.xmin, info.ymin],\n  ];\n}\n\n\nexport function addRectangleLayer(\n  map: Map,\n  info: RectangleSelectionInfo,\n  color: string,\n) {\n  \n  const uuid = v4();\n  const geoJson: GeoJSON.FeatureCollection = {\n    type: \"FeatureCollection\",\n    features: [{\n      type: \"Feature\",\n      geometry: {\n        type: \"Polygon\",\n        coordinates: [\n          createBounds(info),\n        ],\n      },\n      properties: {},\n    }],\n  };\n\n  map.addSource(uuid, {\n    type: \"geojson\",\n    data: geoJson,\n  });\n  const source = map.getSource(uuid) as GeoJSONSource;\n\n  map.addLayer({\n    id: uuid,\n    type: \"fill\",\n    source: uuid,\n    paint: {\n      \"fill-color\": color,\n      \"fill-opacity\": 0.7,\n    }\n  });\n\n  return { layer: source };\n}\n\nexport function updateRectangleBounds(\n  source: GeoJSONSource,\n  info: RectangleSelectionInfo,\n) {\n  source.getData().then(data => {\n    const geoJson = data as GeoJSON.FeatureCollection;\n    geoJson.features[0] = {\n      ...geoJson.features[0],\n      geometry: {\n        type: \"Polygon\",\n        coordinates: [createBounds(info)],\n      }\n    };\n\n    source.setData(geoJson);\n  });\n}\n\nexport function removeRectangleLayer(\n  map: Map,\n  layer: LayerType,\n) {\n  map.removeLayer(layer.id);\n  map.removeSource(layer.id);\n}\n\n// Point layer utilities\nexport function addPointLayer(\n  map: Map,\n  info: PointSelectionInfo,\n  color: string,\n) {\n  const uuid = v4();\n  const geoJson: GeoJSON.FeatureCollection = {\n    type: \"FeatureCollection\",\n    features: [{\n      type: \"Feature\",\n      geometry: {\n        type: \"Point\",\n        coordinates: [info.x, info.y],\n      },\n      properties: {},\n    }],\n  };\n\n  map.addSource(uuid, {\n    type: \"geojson\",\n    data: geoJson,\n  });\n  const source = map.getSource(uuid) as GeoJSONSource;\n\n  map.addLayer({\n    id: uuid,\n    type: \"circle\",\n    source: uuid,\n    paint: {\n      \"circle-radius\": 8,\n      \"circle-color\": color,\n      \"circle-stroke-color\": \"white\",\n      \"circle-stroke-width\": 2,\n    }\n  });\n\n  return { layer: source };\n}\n\nexport function updatePointLocation(\n  source: GeoJSONSource,\n  info: PointSelectionInfo,\n) {\n  source.getData().then(data => {\n    const geoJson = data as GeoJSON.FeatureCollection;\n    geoJson.features[0] = {\n      ...geoJson.features[0],\n      geometry: {\n        type: \"Point\",\n        coordinates: [info.x, info.y],\n      }\n    };\n    source.setData(geoJson);\n  });\n}\n\nexport function removePointLayer(\n  map: Map,\n  layer: LayerType,\n) {\n  map.removeLayer(layer.id);\n  map.removeSource(layer.id);\n}\n\nexport function regionBounds(region: UnifiedRegion<\"maplibre\">): [[number, number], [number, number]] {\n  const pointPadding = 1;\n  return region.geometryType == \"rectangle\" ?\n    [[region.geometryInfo.xmin, region.geometryInfo.ymin], [region.geometryInfo.xmax, region.geometryInfo.ymax]] :\n    [[region.geometryInfo.x - pointPadding, region.geometryInfo.y - pointPadding], [region.geometryInfo.x + pointPadding, region.geometryInfo.y + pointPadding]];\n}\n\nexport function fitBounds(map: Map, bounds: LngLatBoundsLike, _fly: boolean) {\n  map.fitBounds(bounds);\n}\n","import { ref, type MaybeRef, type Ref } from \"vue\";\nimport { Map, MapMouseEvent } from \"maplibre-gl\";\n\nimport type { PointSelectionInfo, SelectionHandler } from \"../../types\";\nimport { baseUseSelection } from \"./baseUseSelection\";\n\nexport function usePointSelection(\n  map: Ref<Map | null>,\n  active: MaybeRef<boolean>,\n) {\n  \n  const handler: SelectionHandler<MapMouseEvent, PointSelectionInfo> = {\n    selectionInfo: ref<PointSelectionInfo | null>(null),\n\n    onMouseup(event: MapMouseEvent) {\n      handler.selectionInfo.value = {\n        x: event.lngLat.lng,\n        y: event.lngLat.lat,\n      };\n    },\n  };\n\n  return baseUseSelection({ map, handler, active });\n}\n","export const paulTolMutedColorblindSafeColors = ['#CC6677', '#332288', '#117733', '#882255', '#44aa99', '#999933', '#aa4499',];\n\nexport const COLORS = [\n  ...paulTolMutedColorblindSafeColors, '#e6194b', '#3cb44b', '#4363d8', '#911eb4', '#46f0f0',\n  '#f032e6', '#bcf60c', '#fabebe', '#008080', '#e6beff', '#9a6324', '#fffac8',\n  '#800000', '#aaffc3', '#808000', '#ffd8b1', '#000075', '#808080', '#ffffff',\n  '#000000'\n];\n","import { Ref } from 'vue';\nimport maplibregl from 'maplibre-gl';\n\nexport interface MultiMarkerOptions {\n  label?: string;\n  color?: string;\n  fillColor?: string;\n  fillOpacity?: number;\n  opacity?: number;\n  radius?: number;\n  outlineColor?: string;\n  paint?: maplibregl.CircleLayerSpecification['paint'];\n  layout?: maplibregl.CircleLayerSpecification['layout'];\n  shape?: 'circle' | 'marker';\n  scale?: 'world' | 'screen';\n}\n\n\nconst DEG_DEFAULT = 0.05; // example default: 0.05\nconst PX_DEFAULT  = 8;\n\n  \nfunction toGeoJSON(points: Array<{ x: number; y: number }>, radius_deg?: number): GeoJSON.FeatureCollection<GeoJSON.Point> {\n  return {\n    type: 'FeatureCollection',\n    features: points.map(pt => ({\n      type: 'Feature',\n      geometry: { type: 'Point', coordinates: [pt.x, pt.y] } as GeoJSON.Point,\n      properties: {\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        radius_deg: radius_deg ?? DEG_DEFAULT,\n        // the below are unused, but useful if we want something different in the future\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        radius_px: PX_DEFAULT,\n        lat: pt.y,\n        lon: pt.x,\n      },\n    })),\n  };\n}\n\nexport function useMultiMarker(map: Ref<maplibregl.Map | null>, options: MultiMarkerOptions = {}) {\n  const sourceId = `${options.label ?? 'multi-marker'}-source`;\n  const layerId = `${options.label ?? 'multi-marker'}-layer`;\n  \n  options.scale = options.scale ?? 'screen';\n  \n  function optionsToPaint() {\n    return {\n      // 'circle-radius': options.radius ?? 8,\n      'circle-color': options.fillColor ?? options.color ?? '#ff0000',\n      'circle-opacity': options.fillOpacity ?? options.opacity ?? 0.8,\n      'circle-stroke-color': options.outlineColor ?? options.color ?? '#000',\n      'circle-stroke-width': 2\n    };\n  }\n\n  function addMarkers(points: Array<{ x: number; y: number }>) {\n    if (!map.value) return;\n    clearMarkers();\n    const geojson = toGeoJSON(points, options.scale === 'world' ? (options.radius ?? DEG_DEFAULT) : options.radius ?? PX_DEFAULT);\n    if (map.value.getSource(sourceId)) {\n      (map.value.getSource(sourceId) as maplibregl.GeoJSONSource).setData(geojson);\n    } else {\n      map.value.addSource(sourceId, {\n        type: 'geojson',\n        data: geojson,\n      });\n    }\n    if (!map.value.getLayer(layerId)) {\n      \n      const paint = {\n        ...optionsToPaint(),\n        ...(options.paint ?? {}),\n      };\n      \n      if (options.scale === 'screen') {\n        paint['circle-radius'] = options.radius ?? PX_DEFAULT;\n        paint['circle-pitch-scale'] = 'viewport'; // stays in screen pixels even when pitched\n      } else {\n        // use a maplibre expression to avoid js handlers. https://maplibre.org/maplibre-style-spec/expressions/#zoom\n\n        // conversion from degrees to pixels at equator at zoom = 0\n        // Explanation: at zoom = 0\n        // 360 degrees = 256 pixels @ equator. we will ignore latitude scaling.\n        // to include latitude scaling, multiply radius by cos(lat) where lat is in radians\n        // after testing, a slightly smaller factor seems to work better visually\n        const degreeToPixel = 512 / 360; // typically we would use 256 but maplibre-gl uses 2x the resolution\n        \n        paint['circle-radius'] = [\n          // pixel scale is dependent on zoom ~ 2^zoom\n          // https://leafletjs.com/examples/zoom-levels/ (zoom explainer from leaflet)\n          'interpolate', ['exponential', 2], ['zoom'],\n          // at zoom = 0, the pixel radius = radius in degrees * K\n          0,  ['*', ['get', 'radius_deg'], degreeToPixel],\n          // at zoom = 24  (or whatever max zoom your style uses)\n          24, ['*', ['get', 'radius_deg'], degreeToPixel * Math.pow(2, 24)]\n        ];\n        paint['circle-pitch-scale'] = 'viewport'; // stays in screen pixels even when pitched\n      }\n      \n      \n      \n      map.value.addLayer({\n        id: layerId,\n        type: 'circle',\n        source: sourceId,\n        paint: paint,\n        layout: options.layout ?? {\n          'visibility': 'visible',\n        },\n      } as maplibregl.CircleLayerSpecification);\n    }\n  }\n\n  function clearMarkers() {\n    if (!map.value) return;\n    if (map.value.getLayer(layerId)) {\n      map.value.removeLayer(layerId);\n    }\n    if (map.value.getSource(sourceId)) {\n      map.value.removeSource(sourceId);\n    }\n  }\n\n  return { addMarkers, clearMarkers };\n}","import { Ref, ref, onMounted, onUnmounted } from 'vue';\nimport M, { Map, AttributionControl } from 'maplibre-gl';\nimport { InitMapOptions, LatLngPair } from '@/types';\n\n\nconst scale = window.devicePixelRatio;\nconst retinaParam = scale > 1 ? '@2x' : '';\n\nexport interface MapLibreComposable {\n    map: Ref<M.Map | null>;\n    createMap: () => Ref<M.Map>;\n    setView: (latlng: LatLngPair, zoom: number) => void;\n    resetView: () => void;\n    cleanupMap: () => void;\n    getCenter: () => M.LngLat;\n  }\n  \n\n  \nexport function useMap(id=\"map\", options: InitMapOptions, _showRoads: Ref<boolean>, onReady?: (map: M.Map) => void): MapLibreComposable {\n  // Something to know about MatLibre it likes longitude, latitude as opposed\n  // to leaflet which uses latitude, longitude\n  // this is where our map will be\n  const map = ref<M.Map | null>(null);\n  \n  async function addStates(map: M.Map) {\n    fetch(\"states.geojson\")\n      .then(response => response.json())\n      .then(data => {\n        map.addSource('states-custom', {\n          'type': 'geojson',\n          'data': data\n        });\n        map.addLayer({\n          'id': 'states-custom',\n          'type': 'line',\n          'source': 'states-custom',\n          'paint': {\n            'line-color': 'black',\n            'line-width': 0.5,\n            'line-opacity': 0.8,\n          }\n        });\n      });\n  }\n  \n  async function addCoastlines(map: M.Map) {\n    fetch(\"coastlines.geojson\")\n      .then(response => response.json())\n      .then(data => {\n        map.addSource('coastline-custom', {\n          'type': 'geojson',\n          'data': data\n        });\n        map.addLayer({\n          'id': 'coastline-custom',\n          'type': 'line',\n          'source': 'coastline-custom',\n          'paint': {\n            'line-color': 'black',\n            'line-width': 1,\n            'line-opacity': 0.8,\n          }\n        });\n      });\n  }\n  \n  \n  \n  function addLabels(map: M.Map) {\n    map.addSource('stamen-toner-labels', {\n      type: 'raster',\n      tiles: [`https://tiles.stadiamaps.com/tiles/stamen_toner_labels/{z}/{x}/{y}${retinaParam}.png`],\n      tileSize: 256,\n    });\n\n    map.addLayer({\n      id: 'stamen-toner-labels',\n      type: 'raster',\n      source: 'stamen-toner-labels',\n      minzoom: 0,\n      maxzoom: 20\n    });\n    \n    map.moveLayer('stamen-toner-labels');\n  }\n  \n  function setupMap() {\n    if (map.value === null) return;\n    \n    // Need to use weird type assertion to avoid\n    // Type instantiation is excessively deep and possibly infinite.ts(2589)\n    // See discussion here https://github.com/mapbox/mapbox-gl-js/issues/13203#issuecomment-2634013147\n    const libreMap = map.value as unknown as M.Map;\n    addCoastlines(libreMap);\n    addStates(libreMap);\n    addLabels(libreMap);\n    \n    \n    if (onReady !== undefined) {\n      onReady(libreMap);\n    }\n  }\n\n  function cleanupMap() {\n    if (map.value) {\n      map.value.remove();\n      map.value = null;\n    }\n  }\n  \n  // { MapLibre Demo Tiles\n  //   container: id,\n  //   style: 'https://demotiles.maplibre.org/style.json', // style URL\n  //   center: options.loc ? [options.loc[1], options.loc[0]] : [0, 0], // starting position [lng, lat]\n  //   zoom: options.zoom ?? 1 // starting zoom\n  // }\n  \n  // { \n  //   container: id,\n  //   style: 'https://tiles.openfreemap.org/styles/liberty', // style URL\n  //   center: options.loc ? [options.loc[1], options.loc[0]] : [0, 0], // starting position [lng, lat]\n  //   zoom: options.zoom ?? 1, // starting zoom,\n  //   attributionControl: false\n  // }\n  \n  // { CartoDB Positron\n  //   container: id,\n  //   style: 'https://{s}.basemaps.cartocdn.com/mapboxgl/style_tpl.json', // style URL\n  //   center: options.loc ? [options.loc[1], options.loc[0]] : [0, 0], // starting position [lng, lat]\n  //   zoom: options.zoom ?? 1 // starting zoom\n  // }  \n  // https://github.com/CartoDB/basemap-styles other \"basemap\" styles\n  function createMap(): Ref<M.Map> {\n    const _map = new M.Map({\n      container: id,\n      // style: 'https://tiles.openfreemap.org/styles/liberty', // style URL\n      style: 'https://basemaps.cartocdn.com/gl/positron-nolabels-gl-style/style.json',\n      center: options.loc ? [options.loc[1], options.loc[0]] : [0, 0], // starting position [lng, lat]\n      zoom: options.zoom ?? 1, // starting zoom,\n      attributionControl: false\n    }).addControl(new AttributionControl({\n      compact: true,\n    }));\n    \n    _map.on('style.load', setupMap);\n    \n    map.value = _map;\n    return map as unknown as Ref<M.Map>;\n  }\n\n  function setView(latlng: LatLngPair, zoom: number) {\n    if (map.value) {\n      map.value.setCenter([latlng[1], latlng[0]]);\n      map.value.setZoom(zoom);\n    }\n  }\n  \n  function getCenter() {\n    if (map.value) {\n      return map.value.getCenter();\n    }\n  }\n  \n  // function getZoom() {\n  //   if (map.value) {\n  //     return map.value.getZoom();\n  //   }\n  // }\n  \n  function resetView() {\n    if (map.value) {\n      setView(options.loc, options.zoom);\n    }\n  }\n  \n  onMounted(() => {\n    \n  });\n\n  onUnmounted(() => {\n    cleanupMap();\n  });\n\n  return {\n    map: map as Ref<M.Map | null>,\n    createMap,\n    setView,\n    resetView,\n    cleanupMap,\n    getCenter\n  } as MapLibreComposable;\n}\n","import { IControl, Map } from \"maplibre-gl\";\nimport { LngLatPair } from \"@/types\";\n\nexport class CDSMaplibreHomeTool implements IControl {\n  private _container: HTMLElement | undefined;\n  private _button: HTMLButtonElement | undefined;\n  private _homeIcon: HTMLImageElement | undefined;\n  private _map: Map | undefined;\n  private _centerLonLat: [number, number];\n  private _zoom: number;\n  private _onHome: CallableFunction;\n    \n  constructor(centerLonLat: LngLatPair, zoom: number, onHome: CallableFunction ) {\n    this._centerLonLat = centerLonLat;\n    this._zoom = zoom;\n    this._onHome = onHome;\n  }\n    \n  onAdd(map: Map): HTMLElement {\n    \n    this._map = map;\n    this._container = document.createElement('div');\n    this._container.className = 'maplibregl-ctrl maplibregl-ctrl-group maplibre-control-cds-home';\n    \n    this._button = document.createElement('button');\n    this._button.className = 'maplibregl-ctrl-icon maplibre-control-cds-home-button';\n    this._button.type = 'button';\n    this._button.title = 'Home';\n    this._button.addEventListener('click', this._goHome.bind(this));\n    \n    this._homeIcon = document.createElement('img');\n    this._homeIcon.style.padding = '5px';\n    // SVG icon from Font Awesome https://fontawesome.com/icons/house?f=classic&s=solid (free one)\n    const svg = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d=\"M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z\"/></svg>';\n    this._homeIcon.src = `data:image/svg+xml,${encodeURIComponent(svg)}`;\n    \n    this._button.appendChild(this._homeIcon);\n    this._container.appendChild(this._button);\n    \n    return this._container;\n  }\n  \n  onRemove(): void {\n    // remove the event listener & element\n    this._container?.removeEventListener('click', this._goHome);\n    if (this._container && this._container.parentNode) {\n      this._container.parentNode.removeChild(this._container);\n    }\n  }\n  \n  _goHome() {\n    if (this._map) {\n      this._map.flyTo({\n        center: this._centerLonLat,\n        zoom: this._zoom\n      });\n      this._onHome();\n    }\n  }\n    \n    \n}","import { Ref, ref, watch } from 'vue';\nimport { Map, NavigationControl } from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\nimport { CDSMaplibreHomeTool } from './MaplibreHomeTool';\nimport { LatLngPair, LngLatPair } from '@/types';\n\nexport function usezoomhome(map: Ref<Map | null>, home: LatLngPair, zoom: number, callback: CallableFunction = () => null) {\n\n  const startingCenter = [home[1], home[0]] as LngLatPair;\n  const zoomHome: Ref<null | CDSMaplibreHomeTool> = ref(null);\n  \n\n  \n  function createControl() {\n    const control = new CDSMaplibreHomeTool(startingCenter, zoom, callback);\n    return control;\n  }\n  \n  \n  if (map.value !== null) {\n    map.value.addControl(new NavigationControl({showCompass: false}), 'top-left');\n    zoomHome.value = createControl();\n    map.value.addControl(zoomHome.value, 'top-left');\n  }\n  \n  watch(map, (newValue) => {\n    if (newValue !== null) {\n      newValue.addControl(new NavigationControl({showCompass: false}), 'top-left');\n      zoomHome.value = createControl();\n      newValue.addControl(zoomHome.value, 'top-left');\n    }\n  });\n  \n  \n  return zoomHome.value;\n\n}\n","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"id\"]\n\nimport { ref, watch, onMounted, onBeforeUnmount } from \"vue\";\nimport { LatLngPair, InitMapOptions } from \"@/types\";\nimport type { PropType } from 'vue';\nimport type { Map, MapEventType, Listener } from 'maplibre-gl';\nimport { useMap } from \"@/composables/maplibre/useMap\";\nimport { usezoomhome } from '@/composables/maplibre/useZoomHome';\n\n\n// should be using a defined Prop type and widthDefaults, but \n// i could not get that to work with the center (LatLngPair is a weird type)\n// but apparently the old options syntax is still good\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MaplibreMap',\n  props: /*@__PURE__*/_mergeModels({\n  mapID: {\n    type: String as PropType<string>,\n    required: true\n  },\n  home: {\n    type: Object as PropType<InitMapOptions>,\n    required: false,\n    default: () => {\n      return {\n        loc: [39.8283, -98.5795] as LatLngPair, \n        zoom: 4, \n        t: null\n      };\n    }\n  },\n  initial: {\n    type: Object as PropType<InitMapOptions>,\n    required: false,\n    default: null\n  },\n  showRoads: {\n    type: Boolean,\n    required: false,\n    default: true\n  },\n  // events: { moveend: handler, zoomend: handler, click: handler, etc. }\n  events: {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    type: Object as PropType<Record<keyof MapEventType | string, Listener>>,\n    default: () => ({})\n  },\n  // width and height, default to 100%\n  width: {\n    type: String,\n    required: false,\n    default: '100%'\n  },\n  height: {\n    type: String,\n    required: false,\n    default: '100%'\n  }\n}, {\n    \"latitude\": {\n    default: 0\n  },\n    \"latitudeModifiers\": {},\n    \"longitude\": {\n    default: 0\n  },\n    \"longitudeModifiers\": {},\n    \"zoom\": {\n    default: 0\n  },\n    \"zoomModifiers\": {},\n  }),\n  emits: /*@__PURE__*/_mergeModels([\"ready\", \"zoomhome\"], [\"update:latitude\", \"update:longitude\", \"update:zoom\"]),\n  setup(__props, { expose: __expose, emit: __emit }) {\n\nconst props = __props;\n\n// define model values that set and return the current map center and zoom\nconst latitude = _useModel<number>(\n  __props, 'latitude');\nconst longitude = _useModel<number>(\n  __props, 'longitude');\nconst zoom = _useModel<number>(\n  __props, 'zoom');\n\n\n\n\nconst showRoadsRef = ref(props.showRoads);\nwatch(() => props.showRoads, (value) => {\n  showRoadsRef.value = value;\n});\n\nconst emit = __emit;\n\n\n\n\n\n\nfunction attachAllEvents(m: Map, handlers: typeof props.events) {\n  Object.entries(handlers).forEach(([evt, handler]) => {\n    m.on(evt, handler);\n  });\n}\n\nfunction detachAllEvents(m: Map, handlers: typeof props.events) {\n  Object.entries(handlers).forEach(([evt, handler]) => {\n    m.off(evt, handler);\n  });\n}\n\nconst mapReady = ref(false);\n// https://stackoverflow.com/a/36072263/11594175\nlet promiseResolve: (value: Map) => void;\n// let promiseReject: (reason?: any) => void; // we won't use the reject\nconst whenMapReady: Promise<Map> = new Promise((resolve, _reject) => {\n  promiseResolve = resolve; /**   this is just javascript, so this pulls \n                                  the resolve function\n                                  out of the promise constructor and makes it \n                                  available for us to use\n                            **/\n  // promiseReject = reject;\n});\n\nconst onMapReady = (m: Map) => {\n  console.log(\"Map is ready\", m);\n  mapReady.value = true;\n  emit('ready', m);\n  promiseResolve(m);\n  attachAllEvents(m, props.events);\n};\n\nconst {\n  map,\n  createMap,\n  setView,\n  resetView,\n  getCenter,\n  cleanupMap\n} = useMap(props.mapID, props.initial ?? props.home, showRoadsRef, onMapReady);\n\nwatch(() => [latitude.value, longitude.value, zoom.value], ([newLat, newLng, newZoom]) => {\n  if (map.value && mapReady.value) {\n    setView([newLat, newLng] as LatLngPair, newZoom);\n  }\n});\n\nonMounted(() => {\n\n  const mMap = createMap(); // just use the return value instead of map.value. eases type checking\n  \n  usezoomhome(mMap, props.home.loc, props.home.zoom, () => {\n    emit('zoomhome');\n  });\n\n  mMap.value.on('moveend', () => {\n    if (map.value) {\n      const center = map.value.getCenter();\n      latitude.value = center.lat;\n      longitude.value = center.lng;\n      zoom.value = map.value.getZoom();\n    }\n  });\n  \n});\n\nonBeforeUnmount(() => {\n  if (map.value) {\n    detachAllEvents(map.value, props.events);\n    cleanupMap();\n  }\n});\n\n\n// provide only works downwards and i don't think we need it\n// const MAPLIBRE_PROVIDE_KEY = props.mapID;\n// provide(MAPLIBRE_PROVIDE_KEY, \nconst exposedMapApi = {\n  map,\n  setView,\n  resetView,\n  getCenter,\n  on: (evt: keyof MapEventType | string, handler: Listener) => {\n    if (map.value) {\n      map.value.on(evt, handler);\n    }\n  },\n  off: (evt: keyof MapEventType | string, handler: Listener) => {\n    if (map.value) {\n      map.value.off(evt, handler);\n    }\n  },\n  once: (evt: keyof MapEventType | string, handler: Listener) => {\n    if (map.value) {\n      map.value.once(evt, handler);\n    }\n  },\n  mapReady,\n  onReady: whenMapReady\n};\n\n// we will also expose these on the template ref\n__expose(exposedMapApi);\n\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    id: __props.mapID,\n    class: \"tempo-map\",\n    style: _normalizeStyle({ '--width': __props.width, '--height': __props.height })\n  }, [\n    _renderSlot(_ctx.$slots, \"default\")\n  ], 12, _hoisted_1))\n}\n}\n\n})","<template>\n  <!-- this will automatically gets the class maplibregl-map added to it -->\n  <div :id=\"mapID\" class=\"tempo-map\" :style=\"{ '--width': width, '--height': height }\">\n    <slot></slot>\n  </div>\n</template>\n  \n<script setup lang=\"ts\">\nimport { ref, watch, onMounted, onBeforeUnmount, defineModel } from \"vue\";\nimport { LatLngPair, InitMapOptions } from \"@/types\";\nimport type { PropType } from 'vue';\nimport type { Map, MapEventType, Listener } from 'maplibre-gl';\nimport { useMap } from \"@/composables/maplibre/useMap\";\nimport { usezoomhome } from '@/composables/maplibre/useZoomHome';\n\n\n// should be using a defined Prop type and widthDefaults, but \n// i could not get that to work with the center (LatLngPair is a weird type)\n// but apparently the old options syntax is still good\nconst props = defineProps({\n  mapID: {\n    type: String as PropType<string>,\n    required: true\n  },\n  home: {\n    type: Object as PropType<InitMapOptions>,\n    required: false,\n    default: () => {\n      return {\n        loc: [39.8283, -98.5795] as LatLngPair, \n        zoom: 4, \n        t: null\n      };\n    }\n  },\n  initial: {\n    type: Object as PropType<InitMapOptions>,\n    required: false,\n    default: null\n  },\n  showRoads: {\n    type: Boolean,\n    required: false,\n    default: true\n  },\n  // events: { moveend: handler, zoomend: handler, click: handler, etc. }\n  events: {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    type: Object as PropType<Record<keyof MapEventType | string, Listener>>,\n    default: () => ({})\n  },\n  // width and height, default to 100%\n  width: {\n    type: String,\n    required: false,\n    default: '100%'\n  },\n  height: {\n    type: String,\n    required: false,\n    default: '100%'\n  }\n});\n\n// define model values that set and return the current map center and zoom\nconst latitude = defineModel<number>(\n  'latitude', \n  {\n    default: 0\n  });\nconst longitude = defineModel<number>(\n  'longitude', \n  {\n    default: 0\n  });\nconst zoom = defineModel<number>(\n  'zoom', \n  {\n    default: 0\n  });\n\n\n\n\nconst showRoadsRef = ref(props.showRoads);\nwatch(() => props.showRoads, (value) => {\n  showRoadsRef.value = value;\n});\n\nconst emit = defineEmits<{\n  (e: 'ready', map: Map): void;\n  (e: 'zoomhome'): void;\n}>();\n\n\n\n\n\n\nfunction attachAllEvents(m: Map, handlers: typeof props.events) {\n  Object.entries(handlers).forEach(([evt, handler]) => {\n    m.on(evt, handler);\n  });\n}\n\nfunction detachAllEvents(m: Map, handlers: typeof props.events) {\n  Object.entries(handlers).forEach(([evt, handler]) => {\n    m.off(evt, handler);\n  });\n}\n\nconst mapReady = ref(false);\n// https://stackoverflow.com/a/36072263/11594175\nlet promiseResolve: (value: Map) => void;\n// let promiseReject: (reason?: any) => void; // we won't use the reject\nconst whenMapReady: Promise<Map> = new Promise((resolve, _reject) => {\n  promiseResolve = resolve; /**   this is just javascript, so this pulls \n                                  the resolve function\n                                  out of the promise constructor and makes it \n                                  available for us to use\n                            **/\n  // promiseReject = reject;\n});\n\nconst onMapReady = (m: Map) => {\n  console.log(\"Map is ready\", m);\n  mapReady.value = true;\n  emit('ready', m);\n  promiseResolve(m);\n  attachAllEvents(m, props.events);\n};\n\nconst {\n  map,\n  createMap,\n  setView,\n  resetView,\n  getCenter,\n  cleanupMap\n} = useMap(props.mapID, props.initial ?? props.home, showRoadsRef, onMapReady);\n\nwatch(() => [latitude.value, longitude.value, zoom.value], ([newLat, newLng, newZoom]) => {\n  if (map.value && mapReady.value) {\n    setView([newLat, newLng] as LatLngPair, newZoom);\n  }\n});\n\nonMounted(() => {\n\n  const mMap = createMap(); // just use the return value instead of map.value. eases type checking\n  \n  usezoomhome(mMap, props.home.loc, props.home.zoom, () => {\n    emit('zoomhome');\n  });\n\n  mMap.value.on('moveend', () => {\n    if (map.value) {\n      const center = map.value.getCenter();\n      latitude.value = center.lat;\n      longitude.value = center.lng;\n      zoom.value = map.value.getZoom();\n    }\n  });\n  \n});\n\nonBeforeUnmount(() => {\n  if (map.value) {\n    detachAllEvents(map.value, props.events);\n    cleanupMap();\n  }\n});\n\n\n// provide only works downwards and i don't think we need it\n// const MAPLIBRE_PROVIDE_KEY = props.mapID;\n// provide(MAPLIBRE_PROVIDE_KEY, \nconst exposedMapApi = {\n  map,\n  setView,\n  resetView,\n  getCenter,\n  on: (evt: keyof MapEventType | string, handler: Listener) => {\n    if (map.value) {\n      map.value.on(evt, handler);\n    }\n  },\n  off: (evt: keyof MapEventType | string, handler: Listener) => {\n    if (map.value) {\n      map.value.off(evt, handler);\n    }\n  },\n  once: (evt: keyof MapEventType | string, handler: Listener) => {\n    if (map.value) {\n      map.value.once(evt, handler);\n    }\n  },\n  mapReady,\n  onReady: whenMapReady\n};\n\n// we will also expose these on the template ref\ndefineExpose(exposedMapApi);\n\n\n\n</script>\n  \n<style lang=\"less\">\n\n.tempo-map {\n  width: var(--width);\n  height: var(--height);\n}\n\n.tempo-map canvas.maplibregl-canvas {\n  background-color: whitesmoke;\n}\n\n</style>\n\n","import script from \"./MaplibreMap.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MaplibreMap.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MaplibreMap.vue?vue&type=style&index=0&id=73e25502&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { ref, watch, Ref, MaybeRef, toRef, nextTick, computed } from 'vue';\nimport { renderingRule, stretches, colorramps, RenderingRuleOptions, ColorRamps } from '../ImageLayerConfig';\nimport { Map, type MapSourceDataEvent } from 'maplibre-gl';\n\nimport { ImageService } from 'mapbox-gl-esri-sources';\nimport { useEsriTimesteps } from '../../composables/useEsriTimesteps';\nimport { MoleculeType } from '../utils';\n\n\ninterface UseEsriLayer {\n  esriImageSource: Ref<maplibregl.RasterTileSource | null>;\n  opacity: Ref<number>;\n  noEsriData: Ref<boolean>;\n  loadingEsriTimeSteps: Ref<boolean>;\n  esriTimesteps: Ref<number[]>;\n  updateEsriOpacity: (value?: number | null | undefined) => void;\n  updateEsriTimeRange: () => void;\n  addEsriSource: (map: Map) => void;\n  renderOptions: Ref<RenderingRuleOptions>;\n}\n\nexport function useEsriLayer(initialMolecule: MaybeRef<MoleculeType>,\n  timestamp: Ref<number | null>,\n  opacity: MaybeRef<number>,\n  fetchOnMount=true): UseEsriLayer {\n\n  const esriLayerId = 'esri-source';\n  const esriImageSource = ref<maplibregl.RasterTileSource | null>(null);\n  const map = ref<Map | null>(null);\n  const molecule = toRef(initialMolecule);\n\n  const { url, variable, esriTimesteps } = useEsriTimesteps(molecule, fetchOnMount);\n\n  const opacityRef = toRef(opacity);\n  const noEsriData = ref(false);\n  const loadingEsriTimeSteps = ref(false);\n  const renderOptions = ref<RenderingRuleOptions>({\n    range: stretches[variable.value],\n    colormap: colorramps[variable.value],\n  });\n\n  \n  const options = computed(() => {\n    return  {\n      'format': 'png',\n      'pixelType': 'U8',\n      'size': '256,256',\n      'transparent': true,\n      'bboxSR': 3857,\n      'imageSR': 3857,\n      'bbox': '{bbox-epsg-3857}',\n      'interpolation': 'RSP_NearestNeighbor',\n      'renderingRule': renderingRule(renderOptions.value.range, renderOptions.value.colormap),\n    };\n  });\n  // const _esriImageOptions = Object.entries(options).map(([key, value]) => `${key}=${value}`).join('&');\n  \n  function addLayer(map: Map | null | undefined) {\n\n    if (map && !map.getLayer(esriLayerId)) {\n      map.addLayer({\n        id: esriLayerId,\n        type: 'raster',\n        source: esriLayerId,\n        paint: {\n          'raster-resampling': 'nearest',\n          'raster-opacity': opacityRef.value ?? 0.8,\n        },\n      });\n    }\n  }\n  \n  function removeLayer(map: Map | null | undefined) {\n    if (map && map.getLayer(esriLayerId)) {\n      map.removeLayer(esriLayerId);\n    }\n  }\n  \n  const dynamicMapService = ref<ImageService | null>(null);\n  \n  function onSourceLoad(e: MapSourceDataEvent) {\n    console.log('Source data event: ', e.sourceId, e.isSourceLoaded);\n    if (e.sourceId === esriLayerId && e.isSourceLoaded && map.value?.getSource(esriLayerId)) {\n      console.log('ESRI source loaded');\n      esriImageSource.value = map.value?.getSource(esriLayerId) as maplibregl.RasterTileSource;\n      updateEsriOpacity();\n      updateEsriTimeRange();\n      map.value?.off('sourcedata', onSourceLoad);\n    }\n  }\n  \n  function createImageService(map: Map, url: string, options) {\n    return new ImageService(\n      esriLayerId,\n      map,\n      {\n        url: url,\n        ...options\n      },\n      {\n        tileSize: 256,\n      }\n    );\n    \n  }\n\n  function addEsriSource(_map: Map) {\n    if (!_map) return;\n    map.value = _map;\n    \n    dynamicMapService.value = createImageService(_map, url.value, options.value);\n\n    addLayer(_map);\n    // this event will run until the source is loaded\n    _map.on('sourcedata', onSourceLoad);\n  }\n  \n  function hasEsriSource() {\n    return map.value?.getSource(esriLayerId) !== undefined;\n  }\n\n  \n  function updateEsriTimeRange() {\n    if (!map.value) return;\n    if (timestamp.value === null) return;\n    const time = timestamp.value;\n\n    const nearest = esriTimesteps.value.length > 0 \n      ? esriTimesteps.value.reduce((a, b) => Math.abs(b - time) < Math.abs(a - time) ? b : a)\n      : time - 1000 * 60 * 15; \n    noEsriData.value = Math.abs((nearest - time) / (1000 * 60)) > 60;\n    // noEsriData.value = nearest > 1752595200000; // Example condition (July 15, 2025 12pm ET for testing)\n    if (noEsriData.value) {\n      console.error('No ESRI data available for the selected time');\n    }\n\n    if (dynamicMapService.value && !noEsriData.value) {\n      dynamicMapService.value.setDate(new Date(nearest), new Date(nearest * 2));\n    } else if (!noEsriData.value) {\n      // if there is esri coverage, then this is the issue\n      console.error('Dynamic Map Service is not initialized');\n    }\n  }\n\n  watch(esriTimesteps, _timesteps => {\n    nextTick(updateEsriTimeRange);\n  });\n\n\n  watch(timestamp, (_value) => {\n    if ( hasEsriSource() ) {\n      updateEsriTimeRange();\n    } else {\n      console.error('ESRI source not yet available');\n    }\n  });\n  \n  \n  function updateEsriOpacity(value: number | null | undefined = undefined) {\n    if (map.value) {\n      map.value.setPaintProperty(esriLayerId, 'raster-opacity', value ?? opacityRef.value ?? 0.8);\n    }\n  }\n\n  watch(molecule, (_newMol: MoleculeType) => {\n    dynamicMapService.value.esriServiceOptions.url = url.value;\n    dynamicMapService.value.esriServiceOptions.renderingRule = renderingRule(renderOptions.value.range, renderOptions.value.colormap);\n  });\n  \n  function updateStretch(vmin: number, vmax: number) {\n    if (dynamicMapService.value) {\n      dynamicMapService.value.esriServiceOptions.renderingRule = renderingRule([vmin, vmax], renderOptions.value.colormap);\n    }\n  }\n  \n  function updateColormap(colormap: ColorRamps) {\n    if (dynamicMapService.value) {\n      dynamicMapService.value.esriServiceOptions.renderingRule = renderingRule(renderOptions.value.range, colormap);\n    }\n  }\n  \n  watch(() => renderOptions.value.range, (newRange) => {\n    console.log('Range changed to ', newRange);\n    updateStretch(newRange[0], newRange[1]);\n  });\n  watch(() => renderOptions.value.colormap, (newColormap) => {\n    console.log('Colormap changed to ', newColormap);\n    updateColormap(newColormap);\n  });\n  \n  watch(variable, () => {\n    renderOptions.value.range = stretches[variable.value];\n    renderOptions.value.colormap = colorramps[variable.value];\n  });\n\n  watch(opacityRef, (_value: number) => {\n    updateEsriOpacity(_value);\n  });\n\n  watch(noEsriData, (value: boolean) => {\n    if (value) {\n      updateEsriOpacity(0);\n      removeLayer(map.value as Map | null);\n    } else {\n      addLayer(map.value as Map | null);\n    }\n  });\n\n  return {\n    esriImageSource,\n    opacity: opacityRef,\n    noEsriData,\n    esriTimesteps,\n    loadingEsriTimeSteps,\n    updateEsriOpacity,\n    updateEsriTimeRange,\n    addEsriSource,\n    renderOptions,\n  } as UseEsriLayer;\n}\n\n\n","import {ref, watch, Ref, onUnmounted} from 'vue';\n\n\nimport fieldOfRegard from \"@/assets/TEMPO_FOR.json\";\nimport augustFieldOfRegard from \"@/assets/august_for.json\";\n\n\nimport M from 'maplibre-gl';\n\nexport interface MaplibreFieldOfRegardComposable {\n  addFieldOfRegard: () => void;\n  showFieldOfRegard: Ref<boolean>;\n  updateFieldOfRegard: () => void;\n  fieldOfRegardLayer: Ref<M.GeoJSONSource | null>;\n}\n\nexport function useFieldOfRegard(\n  date: Ref<Date | null>,\n  map: Ref<M.Map | null>\n): MaplibreFieldOfRegardComposable {\n\n  const showFieldOfRegard = ref(true);\n  let usingAugust = true as boolean | null;\n  const fieldOfRegardLayer = ref<M.GeoJSONSource | null>(null);\n  const fieldOfRegardLayerId = 'field-of-regard';\n\n\n  function createFoRLayer() {\n    if (!map.value) {\n      console.warn(\"Map is not initialized, cannot create Field of Regard layer.\");\n      return;\n    }\n    // Create the Source if it doesn't exist\n    let source = map.value.getSource(fieldOfRegardLayerId);\n    if (source === undefined) {\n      map.value.addSource(fieldOfRegardLayerId, {\n        'type': 'geojson',\n        data: fieldOfRegard as GeoJSON.GeometryCollection,\n      });\n\n      source = map.value.getSource(fieldOfRegardLayerId);\n    }\n\n    // Create the layer if it doesn't exist\n    let layer = map.value.getLayer(fieldOfRegardLayerId);\n    if (layer === undefined) {\n      map.value.addLayer({\n        id: fieldOfRegardLayerId,\n        type: 'line',\n        source: fieldOfRegardLayerId,\n        paint: {\n          \"line-color\": \"#c10124\",\n          \"line-width\": 1,\n          \"line-opacity\": 0.8,\n        }\n      });\n\n      layer = map.value.getLayer(fieldOfRegardLayerId);\n    }\n\n    if (source) {\n      fieldOfRegardLayer.value = source as M.GeoJSONSource;\n    }\n  }\n\n  function clearFoR() {\n    if (fieldOfRegardLayer.value) {\n      if (fieldOfRegardLayer.value.map.getLayer(fieldOfRegardLayerId)) {\n        fieldOfRegardLayer.value.map\n          .removeLayer(fieldOfRegardLayerId)\n          .removeSource(fieldOfRegardLayerId);\n      }\n    }\n  }\n\n\n  function updateFieldOfRegard() {\n\n    if (date.value !== null && date.value.getUTCFullYear() === 2023 && date.value.getUTCMonth() === 7) {\n      fieldOfRegardLayer.value?.setData(augustFieldOfRegard as GeoJSON.GeometryCollection);\n      usingAugust = true;\n    } else {\n      if (usingAugust) { // only want this to run if it has to\n        fieldOfRegardLayer.value?.setData(fieldOfRegard as GeoJSON.GeometryCollection);\n        usingAugust = false;\n      }\n    }\n  }\n\n  function addFieldOfRegard() {\n    if (showFieldOfRegard.value && map.value) {\n      if (map.value.loaded()) {\n        createFoRLayer();\n      } else {\n        // style.load as already fired depending on where this is placed\n        // so we use 'load' event of the map itself\n        map.value.on('load', () => {\n          createFoRLayer();\n        });\n      }\n    }\n  }\n\n  watch(showFieldOfRegard, (show: boolean) => {\n    if (show) {\n      createFoRLayer();\n    } else if (map.value) {\n      clearFoR();\n    }\n  });\n\n  watch(date, updateFieldOfRegard);\n\n\n  onUnmounted(() => {\n    if (map.value) {\n      clearFoR();\n    }\n  });\n\n  return {\n    addFieldOfRegard,\n    showFieldOfRegard,\n    updateFieldOfRegard,\n    fieldOfRegardLayer: fieldOfRegardLayer as Ref<M.GeoJSONSource | null>,\n  };\n}\n","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderSlot as _renderSlot, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"d-flex flex-column align-center justify-center ga-2\" }\n\nimport { ref, watch, toRef, computed, type Ref, useTemplateRef, onMounted } from 'vue';\nimport type { PropType } from 'vue';\nimport type { Map } from 'maplibre-gl';\nimport MaplibreMap from './MaplibreMap.vue';\nimport { useEsriLayer } from '@/esri/maplibre/useEsriImageLayer';\nimport { useFieldOfRegard } from '@/composables/maplibre/useFieldOfRegard';\nimport { type MoleculeType } from '@/esri/utils';\nimport type { InitMapOptions, LatLngPair } from '@/types';\nimport type { MapEventType, Listener } from 'maplibre-gl';\nimport type { AvailableColorMaps } from \"@/colormaps\";\n\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'EsriMap',\n  props: /*@__PURE__*/_mergeModels({\n  mapID: { type: String, required: true },\n  home: {\n    type: Object as PropType<InitMapOptions>,\n    required: false,\n    default: () => {\n      return {\n        loc: [39.8283, -98.5795] as LatLngPair, \n        zoom: 4, \n        t: null\n      };\n    }\n  },\n  initial: {\n    type: Object as PropType<InitMapOptions | null>,\n    required: false,\n    default: null\n  },\n  showRoads: {\n    type: Boolean,\n    required: false,\n    default: true\n  },\n  // events: { moveend: handler, zoomend: handler, click: handler, etc. }\n  events: {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    type: Object as PropType<Record<keyof MapEventType | string, Listener>>,\n    required: false,\n    default: () => ({})\n  },\n  // width and height, default to 100%\n  width: {\n    type: String,\n    required: false,\n    default: '100%'\n  },\n  height: {\n    type: String,\n    required: false,\n    default: '100%'\n  },\n  // ESRI-specific props\n  timestamp: { \n    type: Number as PropType<number | null>, \n    required: false, \n    default: null \n  },\n  molecule: { \n    type: String as PropType<MoleculeType>, \n    required: true \n  },\n  opacity: { \n    type: Number, \n    required: false, \n    default: 0.9 \n  },\n  showFieldOfRegard: { \n    type: Boolean, \n    required: false, \n    default: true \n  }\n}, {\n    \"latitude\": { default: 0 },\n    \"latitudeModifiers\": {},\n    \"longitude\": { default: 0 },\n    \"longitudeModifiers\": {},\n    \"zoom\": { default: 0 },\n    \"zoomModifiers\": {},\n  }),\n  emits: /*@__PURE__*/_mergeModels([\"ready\", \"zoomhome\", \"colormap\", \"esri-timesteps-loaded\"], [\"update:latitude\", \"update:longitude\", \"update:zoom\"]),\n  setup(__props, { expose: __expose, emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\n// Reference to inner MaplibreMap exposed API\nconst innerMap = useTemplateRef<InstanceType<typeof MaplibreMap> | null>(\"innerMap\");\nconst map = ref<Map | null>(null);\n\n// Pass-through models for view state\nconst latitude = _useModel<number>(__props, 'latitude');\nconst longitude = _useModel<number>(__props, 'longitude');\nconst zoom = _useModel<number>(__props, 'zoom');\n\n// add a watcher to console log the lat/long/zoom changes\nwatch([latitude, longitude, zoom], ([newLat, newLng, newZoom]) => {\n  console.log(`Map view changed: lat=${newLat}, lng=${newLng}, zoom=${newZoom}`);\n});\n\n// Internal readiness tracking: single concept (base map ready)\nconst mapReady = ref(false);              // Underlying Maplibre map style loaded\nlet promiseResolve: (value: Map) => void;\nconst onReady: Promise<Map> = new Promise((resolve) => { promiseResolve = resolve; });\n\nconst molecule = computed(() => props.molecule);\n\n//https://vuejs.org/api/reactivity-utilities#toref (two-way)\n// can also do toRef(()=>props.timestamp) in v 3.3+\nconst timestampRef = toRef(props, 'timestamp');\nconst opacityRef = toRef(props, 'opacity');\n\n// ESRI layer composable\nconst { loadingEsriTimeSteps, addEsriSource, esriTimesteps, renderOptions } = useEsriLayer(\n  molecule,\n  timestampRef,\n  opacityRef\n);\n\nwatch(esriTimesteps, (newSteps, old) => {\n  if (newSteps.length > 0 && newSteps !== old) {\n    emit('esri-timesteps-loaded', newSteps);\n  }\n});\n\nwatch(() => renderOptions.value.colormap, cmap => emit(\"colormap\", cmap));\n\nconst singleDateSelected = computed(() => {\n  // a date object with the current day\n  if (props.timestamp) {\n    const dt = new Date(props.timestamp);\n    return new Date(dt.getFullYear(), dt.getMonth(), dt.getDate());\n  }\n  return null;\n});\n// Field of Regard handling\nconst { \n  addFieldOfRegard, \n  showFieldOfRegard: internalShowFieldOfRegard, \n  updateFieldOfRegard \n} = useFieldOfRegard(singleDateSelected, map as Ref<Map | null>);\n  \ninternalShowFieldOfRegard.value = props.showFieldOfRegard;\nwatch(() => props.showFieldOfRegard, (val) => {\n  internalShowFieldOfRegard.value = val;\n});\n\nfunction onInnerMapReady(m: Map) {\n  // Resolve base map readiness immediately\n  mapReady.value = true;\n  emit('ready', m);\n  promiseResolve(m);\n  map.value = m;\n  // Attach ESRI source right after base readiness (microtask keeps UI snappy)\n  addEsriSource(m);\n}\n\nonMounted(() => {\n  if (internalShowFieldOfRegard.value) {\n    updateFieldOfRegard();\n    addFieldOfRegard();\n  }\n});\n\n// Forward selected parts of inner MaplibreMap API after it's ready\nconst exposedApi = {\n  map,\n  mapReady,\n  onReady, // Promise resolves when base map ready\n  // Forwarded methods\n  setView: (center: LatLngPair, zoom: number) => innerMap.value?.setView(center, zoom),\n  resetView: () => innerMap.value?.resetView(),\n  getCenter: () => innerMap.value?.getCenter(),\n  on: (type: keyof MapEventType | string, listener: Listener) => innerMap.value?.on(type, listener),\n  off: (type: keyof MapEventType | string, listener: Listener) => innerMap.value?.off(type, listener),\n  once: (type: keyof MapEventType | string, listener: Listener) => innerMap.value?.once(type, listener),\n  // ESRI specifics\n  esriTimesteps,\n  loadingEsriTimeSteps,\n  renderOptions,\n};\n\n__expose(exposedApi);\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_progress_circular = _resolveComponent(\"v-progress-circular\")!\n  const _component_v_overlay = _resolveComponent(\"v-overlay\")!\n\n  return (_openBlock(), _createBlock(MaplibreMap, {\n    mapID: __props.mapID,\n    home: __props.home,\n    initial: __props.initial,\n    \"show-roads\": __props.showRoads,\n    events: __props.events,\n    width: __props.width,\n    height: __props.height,\n    latitude: latitude.value,\n    longitude: longitude.value,\n    zoom: zoom.value,\n    \"onUpdate:latitude\": _cache[0] || (_cache[0] = (v)=> latitude.value = v),\n    \"onUpdate:longitude\": _cache[1] || (_cache[1] = (v)=> longitude.value = v),\n    \"onUpdate:zoom\": _cache[2] || (_cache[2] = (v)=> zoom.value = v),\n    ref_key: \"innerMap\",\n    ref: innerMap,\n    onReady: onInnerMapReady,\n    onZoomhome: _cache[3] || (_cache[3] = ($event: any) => (_ctx.$emit('zoomhome')))\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_overlay, {\n        \"model-value\": _unref(loadingEsriTimeSteps),\n        style: {\"z-index\":\"1000\"},\n        class: \"align-center justify-center\",\n        contained: \"\",\n        opacity: \".8\"\n      }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_1, [\n            _cache[4] || (_cache[4] = _createElementVNode(\"label\", { class: \"text-white\" }, \"Fetching time steps from NASA Earthdata GIS service...\", -1)),\n            _createVNode(_component_v_progress_circular, {\n              size: 80,\n              width: 12,\n              indeterminate: _unref(loadingEsriTimeSteps),\n              color: \"#092088\"\n            }, null, 8, [\"indeterminate\"])\n          ])\n        ]),\n        _: 1\n      }, 8, [\"model-value\"]),\n      _renderSlot(_ctx.$slots, \"default\")\n    ]),\n    _: 3\n  }, 8, [\"mapID\", \"home\", \"initial\", \"show-roads\", \"events\", \"width\", \"height\", \"latitude\", \"longitude\", \"zoom\"]))\n}\n}\n\n})","<template>\n  <MaplibreMap\n    :mapID=\"mapID\"\n    :home=\"home\"\n    :initial=\"initial\"\n    :show-roads=\"showRoads\"\n    :events=\"events\"\n    :width=\"width\"\n    :height=\"height\"\n    :latitude=\"latitude\"\n    :longitude=\"longitude\"\n    :zoom=\"zoom\"\n    @update:latitude=\"(v:number)=> latitude = v\"\n    @update:longitude=\"(v:number)=> longitude = v\"\n    @update:zoom=\"(v:number)=> zoom = v\"\n    ref=\"innerMap\"\n    @ready=\"onInnerMapReady\"\n    @zoomhome=\"$emit('zoomhome')\"\n  >\n    <!-- Loading overlay while fetching ESRI time steps -->\n    <v-overlay\n      :model-value=\"loadingEsriTimeSteps\"\n      style=\"z-index: 1000;\"\n      class=\"align-center justify-center\"\n      contained\n      opacity=\".8\"\n    >\n      <div class=\"d-flex flex-column align-center justify-center ga-2\">\n        <label class=\"text-white\">Fetching time steps from NASA Earthdata GIS service...</label>\n        <v-progress-circular\n          :size=\"80\"\n          :width=\"12\"\n          :indeterminate=\"loadingEsriTimeSteps\"\n          color=\"#092088\"\n        />\n      </div>\n    </v-overlay>\n    <slot />\n  </MaplibreMap>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch, toRef, computed, defineExpose, type Ref, useTemplateRef, onMounted, defineModel } from 'vue';\nimport type { PropType } from 'vue';\nimport type { Map } from 'maplibre-gl';\nimport MaplibreMap from './MaplibreMap.vue';\nimport { useEsriLayer } from '@/esri/maplibre/useEsriImageLayer';\nimport { useFieldOfRegard } from '@/composables/maplibre/useFieldOfRegard';\nimport { type MoleculeType } from '@/esri/utils';\nimport type { InitMapOptions, LatLngPair } from '@/types';\nimport type { MapEventType, Listener } from 'maplibre-gl';\nimport type { AvailableColorMaps } from \"@/colormaps\";\n\n\nconst props = defineProps({\n  mapID: { type: String, required: true },\n  home: {\n    type: Object as PropType<InitMapOptions>,\n    required: false,\n    default: () => {\n      return {\n        loc: [39.8283, -98.5795] as LatLngPair, \n        zoom: 4, \n        t: null\n      };\n    }\n  },\n  initial: {\n    type: Object as PropType<InitMapOptions | null>,\n    required: false,\n    default: null\n  },\n  showRoads: {\n    type: Boolean,\n    required: false,\n    default: true\n  },\n  // events: { moveend: handler, zoomend: handler, click: handler, etc. }\n  events: {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    type: Object as PropType<Record<keyof MapEventType | string, Listener>>,\n    required: false,\n    default: () => ({})\n  },\n  // width and height, default to 100%\n  width: {\n    type: String,\n    required: false,\n    default: '100%'\n  },\n  height: {\n    type: String,\n    required: false,\n    default: '100%'\n  },\n  // ESRI-specific props\n  timestamp: { \n    type: Number as PropType<number | null>, \n    required: false, \n    default: null \n  },\n  molecule: { \n    type: String as PropType<MoleculeType>, \n    required: true \n  },\n  opacity: { \n    type: Number, \n    required: false, \n    default: 0.9 \n  },\n  showFieldOfRegard: { \n    type: Boolean, \n    required: false, \n    default: true \n  }\n});\n\nconst emit = defineEmits<{\n  // Single, simplified ready event: base map (Maplibre) is ready.\n  (e:'ready', map: Map): void; \n  (e:'zoomhome'): void; \n  (e: 'colormap', colormap: AvailableColorMaps): void;\n  // Timesteps loaded (can fire multiple times e.g., molecule switch)\n  (e:'esri-timesteps-loaded', steps: number[]): void;\n}>();\n\n// Reference to inner MaplibreMap exposed API\nconst innerMap = useTemplateRef<InstanceType<typeof MaplibreMap> | null>(\"innerMap\");\nconst map = ref<Map | null>(null);\n\n// Pass-through models for view state\nconst latitude = defineModel<number>('latitude', { default: 0 });\nconst longitude = defineModel<number>('longitude', { default: 0 });\nconst zoom = defineModel<number>('zoom', { default: 0 });\n\n// add a watcher to console log the lat/long/zoom changes\nwatch([latitude, longitude, zoom], ([newLat, newLng, newZoom]) => {\n  console.log(`Map view changed: lat=${newLat}, lng=${newLng}, zoom=${newZoom}`);\n});\n\n// Internal readiness tracking: single concept (base map ready)\nconst mapReady = ref(false);              // Underlying Maplibre map style loaded\nlet promiseResolve: (value: Map) => void;\nconst onReady: Promise<Map> = new Promise((resolve) => { promiseResolve = resolve; });\n\nconst molecule = computed(() => props.molecule);\n\n//https://vuejs.org/api/reactivity-utilities#toref (two-way)\n// can also do toRef(()=>props.timestamp) in v 3.3+\nconst timestampRef = toRef(props, 'timestamp');\nconst opacityRef = toRef(props, 'opacity');\n\n// ESRI layer composable\nconst { loadingEsriTimeSteps, addEsriSource, esriTimesteps, renderOptions } = useEsriLayer(\n  molecule,\n  timestampRef,\n  opacityRef\n);\n\nwatch(esriTimesteps, (newSteps, old) => {\n  if (newSteps.length > 0 && newSteps !== old) {\n    emit('esri-timesteps-loaded', newSteps);\n  }\n});\n\nwatch(() => renderOptions.value.colormap, cmap => emit(\"colormap\", cmap));\n\nconst singleDateSelected = computed(() => {\n  // a date object with the current day\n  if (props.timestamp) {\n    const dt = new Date(props.timestamp);\n    return new Date(dt.getFullYear(), dt.getMonth(), dt.getDate());\n  }\n  return null;\n});\n// Field of Regard handling\nconst { \n  addFieldOfRegard, \n  showFieldOfRegard: internalShowFieldOfRegard, \n  updateFieldOfRegard \n} = useFieldOfRegard(singleDateSelected, map as Ref<Map | null>);\n  \ninternalShowFieldOfRegard.value = props.showFieldOfRegard;\nwatch(() => props.showFieldOfRegard, (val) => {\n  internalShowFieldOfRegard.value = val;\n});\n\nfunction onInnerMapReady(m: Map) {\n  // Resolve base map readiness immediately\n  mapReady.value = true;\n  emit('ready', m);\n  promiseResolve(m);\n  map.value = m;\n  // Attach ESRI source right after base readiness (microtask keeps UI snappy)\n  addEsriSource(m);\n}\n\nonMounted(() => {\n  if (internalShowFieldOfRegard.value) {\n    updateFieldOfRegard();\n    addFieldOfRegard();\n  }\n});\n\n// Forward selected parts of inner MaplibreMap API after it's ready\nconst exposedApi = {\n  map,\n  mapReady,\n  onReady, // Promise resolves when base map ready\n  // Forwarded methods\n  setView: (center: LatLngPair, zoom: number) => innerMap.value?.setView(center, zoom),\n  resetView: () => innerMap.value?.resetView(),\n  getCenter: () => innerMap.value?.getCenter(),\n  on: (type: keyof MapEventType | string, listener: Listener) => innerMap.value?.on(type, listener),\n  off: (type: keyof MapEventType | string, listener: Listener) => innerMap.value?.off(type, listener),\n  once: (type: keyof MapEventType | string, listener: Listener) => innerMap.value?.once(type, listener),\n  // ESRI specifics\n  esriTimesteps,\n  loadingEsriTimeSteps,\n  renderOptions,\n};\n\ndefineExpose(exposedApi);\n\n</script>\n\n<style scoped lang=\"less\">\n#map-legend {\n  position: absolute;\n  bottom: 8px;\n  left: 8px;\n  background: rgba(255,255,255,0.85);\n  padding: 4px 8px;\n  font-size: 0.8rem;\n  border-radius: 4px;\n  z-index: 500;\n  pointer-events: none;\n}\n.line-legend {\n  border: none;\n  border-top: 2px solid #c10124;\n  margin: 0 0 2px 0;\n}\n</style>\n","import script from \"./EsriMap.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EsriMap.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./EsriMap.vue?vue&type=style&index=0&id=55d758c8&scoped=true&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-55d758c8\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, renderSlot as _renderSlot, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  style: {\"text-align\":\"center\"}\n}\nconst _hoisted_2 = [\"innerHTML\"]\nconst _hoisted_3 = { class: \"unit-label\" }\nconst _hoisted_4 = {\n  key: 1,\n  style: {\"text-align\":\"center\"}\n}\nconst _hoisted_5 = [\"innerHTML\"]\nconst _hoisted_6 = {\n  key: 0,\n  style: {\"text-align\":\"center\"}\n}\nconst _hoisted_7 = [\"innerHTML\"]\nconst _hoisted_8 = { class: \"unit-label\" }\nconst _hoisted_9 = {\n  key: 1,\n  style: {\"text-align\":\"center\"}\n}\nconst _hoisted_10 = [\"innerHTML\"]\n\nimport { computed } from \"vue\";\n\ninterface Props {\n  horizontal: boolean;\n  currentColormap: (x: number) => string;\n  colorMap: string;\n  startValue: number;\n  endValue: number;\n  moleculeLabel: string; // can contain html\n  cbarScale: number;\n}\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MapColorbarWrap',\n  props: {\n    horizontal: { type: Boolean },\n    currentColormap: { type: Function },\n    colorMap: {},\n    startValue: {},\n    endValue: {},\n    moleculeLabel: {},\n    cbarScale: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\nconst scalePower = computed(() => {\n  const p = Math.log10(props.cbarScale);\n  return Number.isFinite(p) ? p : 0;\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_colorbar_horizontal = _resolveComponent(\"colorbar-horizontal\")!\n  const _component_colorbar = _resolveComponent(\"colorbar\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([_ctx.horizontal ? 'map-colorbar-wrap-horizontal' : 'map-colorbar-wrap'])\n  }, [\n    (_ctx.horizontal)\n      ? (_openBlock(), _createBlock(_component_colorbar_horizontal, {\n          key: 0,\n          backgroundColor: \"transparent\",\n          nsteps: 255,\n          cmap: _ctx.currentColormap,\n          cmapName: _ctx.colorMap,\n          \"start-value\": _ctx.startValue,\n          \"end-value\": _ctx.endValue,\n          extend: true\n        }, {\n          label: _withCtx(() => [\n            (scalePower.value !== 0)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                  _cache[4] || (_cache[4] = _createTextVNode(\" Amount of \", -1)),\n                  _createElementVNode(\"span\", { innerHTML: _ctx.moleculeLabel }, null, 8, _hoisted_2),\n                  _createElementVNode(\"span\", _hoisted_3, [\n                    _cache[0] || (_cache[0] = _createTextVNode(\"(10\", -1)),\n                    _createElementVNode(\"sup\", null, _toDisplayString(scalePower.value), 1),\n                    _cache[1] || (_cache[1] = _createTextVNode(\" mol/cm\", -1)),\n                    _cache[2] || (_cache[2] = _createElementVNode(\"sup\", null, \"2\", -1)),\n                    _cache[3] || (_cache[3] = _createTextVNode(\")\", -1))\n                  ])\n                ]))\n              : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                  _cache[5] || (_cache[5] = _createTextVNode(\" Amount of \", -1)),\n                  _createElementVNode(\"span\", { innerHTML: _ctx.moleculeLabel }, null, 8, _hoisted_5),\n                  _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"unit-label\" }, [\n                    _createTextVNode(\" molecules/cm\"),\n                    _createElementVNode(\"sup\", null, \"2\")\n                  ], -1))\n                ]))\n          ]),\n          _: 1\n        }, 8, [\"cmap\", \"cmapName\", \"start-value\", \"end-value\"]))\n      : _createCommentVNode(\"\", true),\n    _renderSlot(_ctx.$slots, \"default\"),\n    (!_ctx.horizontal)\n      ? (_openBlock(), _createBlock(_component_colorbar, {\n          key: 1,\n          backgroundColor: \"transparent\",\n          nsteps: 255,\n          cmap: _ctx.currentColormap,\n          cmapName: _ctx.colorMap,\n          \"start-value\": _ctx.startValue,\n          \"end-value\": _ctx.endValue,\n          extend: true\n        }, {\n          label: _withCtx(() => [\n            (scalePower.value !== 0)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                  _cache[11] || (_cache[11] = _createTextVNode(\" Amount of \", -1)),\n                  _createElementVNode(\"span\", { innerHTML: _ctx.moleculeLabel }, null, 8, _hoisted_7),\n                  _createElementVNode(\"span\", _hoisted_8, [\n                    _cache[7] || (_cache[7] = _createTextVNode(\"(10\", -1)),\n                    _createElementVNode(\"sup\", null, _toDisplayString(scalePower.value), 1),\n                    _cache[8] || (_cache[8] = _createTextVNode(\" mol/cm\", -1)),\n                    _cache[9] || (_cache[9] = _createElementVNode(\"sup\", null, \"2\", -1)),\n                    _cache[10] || (_cache[10] = _createTextVNode(\")\", -1))\n                  ])\n                ]))\n              : (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                  _cache[12] || (_cache[12] = _createTextVNode(\" Amount of \", -1)),\n                  _createElementVNode(\"span\", { innerHTML: _ctx.moleculeLabel }, null, 8, _hoisted_10),\n                  _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"unit-label\" }, [\n                    _createTextVNode(\"(molecules/cm\"),\n                    _createElementVNode(\"sup\", null, \"2\"),\n                    _createTextVNode(\")\")\n                  ], -1))\n                ]))\n          ]),\n          _: 1\n        }, 8, [\"cmap\", \"cmapName\", \"start-value\", \"end-value\"]))\n      : _createCommentVNode(\"\", true)\n  ], 2))\n}\n}\n\n})","<template>\n  <div :class=\"[horizontal ? 'map-colorbar-wrap-horizontal' : 'map-colorbar-wrap']\">\n    <colorbar-horizontal\n      v-if=\"horizontal\"\n      backgroundColor=\"transparent\"\n      :nsteps=\"255\"\n      :cmap=\"currentColormap\"\n      :cmapName=\"colorMap\"\n      :start-value=\"startValue\"\n      :end-value=\"endValue\"\n      :extend=\"true\"\n    >\n      <template v-slot:label>\n        <div v-if=\"scalePower !== 0\" style=\"text-align: center;\">\n          Amount of <span v-html=\"moleculeLabel\"></span>\n          <span class=\"unit-label\">(10<sup>{{ scalePower }}</sup> mol/cm<sup>2</sup>)</span>\n        </div>\n        <div v-else style=\"text-align: center;\">\n          Amount of <span v-html=\"moleculeLabel\"></span>\n          <span class=\"unit-label\"> molecules/cm<sup>2</sup></span>\n        </div>\n      </template>\n    </colorbar-horizontal>\n\n    <slot />\n\n    <colorbar\n      v-if=\"!horizontal\"\n      backgroundColor=\"transparent\"\n      :nsteps=\"255\"\n      :cmap=\"currentColormap\"\n      :cmapName=\"colorMap\"\n      :start-value=\"startValue\"\n      :end-value=\"endValue\"\n      :extend=\"true\"\n    >\n      <template v-slot:label>\n        <div v-if=\"scalePower !== 0\" style=\"text-align: center;\">\n          Amount of <span v-html=\"moleculeLabel\"></span>\n          <span class=\"unit-label\">(10<sup>{{ scalePower }}</sup> mol/cm<sup>2</sup>)</span>\n        </div>\n        <div v-else style=\"text-align: center;\">\n          Amount of <span v-html=\"moleculeLabel\"></span>\n          <span class=\"unit-label\">(molecules/cm<sup>2</sup>)</span>\n        </div>\n      </template>\n    </colorbar>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from \"vue\";\n\ninterface Props {\n  horizontal: boolean;\n  currentColormap: (x: number) => string;\n  colorMap: string;\n  startValue: number;\n  endValue: number;\n  moleculeLabel: string; // can contain html\n  cbarScale: number;\n}\nconst props = defineProps<Props>();\n\nconst scalePower = computed(() => {\n  const p = Math.log10(props.cbarScale);\n  return Number.isFinite(p) ? p : 0;\n});\n</script>\n\n<style lang=\"less\">\n\n// hopefully unobtrusive wrapper \n.map-colorbar-wrap {\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: 100%;\n}\n.map-colorbar-wrap-horizontal {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n}\n\n\n// the main colorbar containers\n.colorbar-container {\n  flex-grow: 0;\n  flex-shrink: 1;\n\n  .unit-label {\n    font-size: .95em;\n  }\n}\n\n.colorbar-container-horizontal {\n  margin-top: 1rem;\n  margin-bottom: 0.5rem;\n  z-index: 5000;\n  --height: 0.75rem;\n}\n\n// fix the sub/sup alignment in the colorbar labels\n.colorbar-container sub {\n  vertical-align: sub !important;\n  line-height: 1.25 !important;\n}\n\n.colorbar-container sup {\n  vertical-align: super !important;\n  line-height: 1.25 !important;\n}\n\n.colorbar-container sub,\n.colorbar-container sup {\n  top: 0 !important;\n}\n\n</style>\n","import script from \"./MapColorbarWrap.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MapColorbarWrap.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MapColorbarWrap.vue?vue&type=style&index=0&id=26099026&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, withKeys as _withKeys, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, mergeProps as _mergeProps, withCtx as _withCtx, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, isRef as _isRef } from \"vue\"\n\nconst _hoisted_1 = { class: \"map-container\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"map-legend\"\n}\nconst _hoisted_3 = { class: \"map-show-hide-controls\" }\nconst _hoisted_4 = { class: \"opacity-slider-container mt-5\" }\nconst _hoisted_5 = { class: \"d-flex flex-row align-center justify-space-between\" }\nconst _hoisted_6 = { class: \"d-flex flex-row align-center justify-space-between\" }\nconst _hoisted_7 = { class: \"location-and-sharing\" }\nconst _hoisted_8 = { class: \"slider-row\" }\nconst _hoisted_9 = { class: \"thumb-label\" }\n\nimport { computed, ref, useTemplateRef, watch, type Ref, type WritableComputedRef } from \"vue\";\nimport { useDisplay } from 'vuetify';\nimport { storeToRefs } from \"pinia\";\nimport { MapBoxFeature, MapBoxFeatureCollection, MapBoxFeatureType, MapBoxForwardGeocodingOptions, geocodingInfoForSearch } from \"@cosmicds/vue-toolkit\";\nimport { Map } from \"maplibre-gl\";\nimport { getTimezoneOffset } from \"date-fns-tz\";\nimport { v4 } from \"uuid\";\n\nimport type { LatLngPair, PointSelectionInfo, RectangleSelectionInfo, SelectionType } from \"@/types\";\nimport { type MoleculeType, MOLECULE_OPTIONS } from \"@/esri/utils\";\nimport { colorbarOptions } from \"@/esri/ImageLayerConfig\";\nimport { colormap } from \"@/colormaps/utils\";\nimport { useTempoStore } from \"@/stores/app\";\nimport { useLocationMarker } from \"@/composables/maplibre/useMarker\";\nimport { useRectangleSelection } from \"@/composables/maplibre/useRectangleSelection\";\nimport { addRectangleLayer, addPointLayer, regionBounds, fitBounds } from \"@/composables/maplibre/utils\";\nimport { usePointSelection } from \"@/composables/maplibre/usePointSelection\";\nimport { COLORS } from \"@/utils/color\";\nimport { EsriSampler } from \"@/esri/services/sampling\";\nimport { useMultiMarker } from '@/composables/maplibre/useMultiMarker';\n\nimport EsriMap from \"@/components/EsriMap.vue\";\nimport MapColorbarWrap from \"@/components/MapColorbarWrap.vue\";\n\ntype MapType = Map | null;\ntype MapTypeRef = Ref<MapType>;\ntype Timeout = ReturnType<typeof setTimeout>;\n\ntype UnifiedRegionType = typeof regions.value[number];\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'MapWithControls',\n  setup(__props) {\n\nconst maplibreMap = useTemplateRef<InstanceType<typeof EsriMap>>(\"maplibreMap\");\nconst map = ref<MapType>(null);\n\nconst store = useTempoStore();\nconst {\n  accentColor2,\n  opacitySliderUsedCount,\n  regions,\n  timestamp,\n  timeIndex,\n  molecule,\n  minIndex,\n  maxIndex,\n  date,\n  selectedTimezone,\n  timeSliderUsedCount,\n  playButtonClickedCount,\n  timestamps,\n  timestampsLoaded,\n  selectionActive,\n  regionsCreatedCount,\n  currentTempoDataService,\n  maxSampleCount,\n  colorMap,\n  lastFocusedRegion,\n} = storeToRefs(store);\n\nfunction createSelectionComputed(selection: SelectionType): WritableComputedRef<boolean> {\n  return computed({\n    get() {\n      return selectionActive.value === selection;\n    },\n    set(value: boolean) {\n      if (value === (selectionActive.value !== selection)) {\n        selectionActive.value = value ? selection : null;\n      }\n    },\n  });\n}\n\nconst pointSelectionActive = createSelectionComputed(\"point\");\nconst rectangleSelectionActive = createSelectionComputed(\"rectangle\");\n\nconst { selectionInfo: rectangleInfo } = useRectangleSelection(map as MapTypeRef, \"red\", rectangleSelectionActive);\nconst { selectionInfo: pointInfo } = usePointSelection(map as MapTypeRef, pointSelectionActive);\n\nconst display = useDisplay();\n\n\nconst onMapReady = (m: Map) => {\n  map.value = m; // ESRI source already added by EsriMap\n};\n\nconst showLocationMarker = ref(true);\nconst {\n  setMarker,\n  removeMarker,\n  locationMarker,\n  initState,\n  homeState,\n} = useLocationMarker(map as Ref<Map | null>, showLocationMarker.value);\n\nconst showFieldOfRegard = ref(false);\nconst showControls = ref(false);\nconst showRoads = ref(true);\nconst opacity = ref(0.9);\nconst showSamplingPreviewMarkers = ref(false);\nconst playing = ref(false);\nconst playInterval = ref<Timeout | null>(null);\n\n\nconst searchOpen = ref(true);\nconst searchErrorMessage = ref<string | null>(null);\nfunction activateRectangleSelectionMode() {\n  rectangleSelectionActive.value = !rectangleSelectionActive.value;\n}\n\nfunction activatePointSelectionMode() {\n  pointSelectionActive.value = !pointSelectionActive.value;\n}\n\nconst currentColormap = computed(() => {\n  return (x: number): string => {\n    const rgb = colormap(colorMap.value, 0, 1, x);\n    return `rgba(${rgb[0]}, ${rgb[1]}, ${rgb[2]},1)`;\n  };\n});\n\nconst mapTitle = computed(() => {\n  const currentMolecule = MOLECULE_OPTIONS.find(m => m.value === molecule.value);\n  if (!currentMolecule) {\n    return '';\n  }\n  return currentMolecule.title;\n});\n\n// TODO: Maybe there's a built-in Date function to get this formatting?\nconst thumbLabel = computed(() => {\n  if (date.value === null || timestamp.value === null) {\n    return '';\n  }\n  const offset = getTimezoneOffset(selectedTimezone.value, date.value);\n  const dateObj = new Date(timestamp.value + offset);\n  const hours = dateObj.getUTCHours();\n  const amPm = hours >= 12 ? \"PM\" : \"AM\";\n  let hourValue = hours % 12;\n  if (hourValue === 0) {\n    hourValue = 12;\n  }\n  return `${date.value.getUTCMonth() + 1}/${dateObj.getUTCDate()}/${dateObj.getUTCFullYear()} ${hourValue}:${dateObj.getUTCMinutes().toString().padStart(2, '0')} ${amPm}`;\n});\n\nconst defaultMapboxOptions = {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  types: [\"place\", \"postcode\"] as MapBoxFeatureType[],\n  countries: [\"US\", \"CA\", \"MX\", \"CU\", \"BM\", \"HT\", \"DO\"],\n  limit: 5,\n};\nasync function geocodingInfoForSearchLimited(searchText: string, options?: MapBoxForwardGeocodingOptions): Promise<MapBoxFeatureCollection | null> {\n  const token = process.env.VUE_APP_MAPBOX_ACCESS_TOKEN;\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const opts = options ?? { ...defaultMapboxOptions, access_token: token ?? \"\" };\n  return geocodingInfoForSearch(searchText, opts).catch(_err => null);\n}\n\nfunction setLocationFromSearch(items: [MapBoxFeature | null, string]) {\n  const [feature, text] = items;\n  if (feature !== null) {\n    // Latitude, Longitude order\n    const coordinates: LatLngPair = [feature.center[1], feature.center[0]] as LatLngPair;\n    maplibreMap.value?.setView(coordinates, 12);\n    setMarker(coordinates);\n    store.userSelectedLocations.push(text);\n  }\n}\n\nfunction onZoomhome() {\n  if (locationMarker.value !== null) {\n    removeMarker();\n  }\n}\n\nconst currentUrl = ref(window.location.href);\nfunction updateURL() {\n  if (map.value) {\n    const center = map.value.getCenter();\n    let stateObj = null as Record<string, string> | null;\n    stateObj = {\n      lat: `${center.lat.toFixed(4)}`,\n      lon: `${center.lng.toFixed(4)}`,\n      zoom: `${map.value.getZoom()}`,\n      t: `${timestamp.value}`\n    };\n    const url = new URL(location.origin);\n    const searchParams = new URLSearchParams(stateObj ?? {});\n    // const hash = window.location.hash;\n    // url.hash = hash;\n    url.pathname = location.pathname;\n    window.history.replaceState(null, '', url.toString());\n    url.search = searchParams.toString();\n    currentUrl.value = url.toString();\n    // window.history.replaceState(stateObj, '', url);\n  }\n}\n\n// ESRI timesteps arrive from EsriMap component; store directly in timestamps\nfunction onEsriTimestepsLoaded(steps: number[]) {\n  console.log(\"Loading steps\");\n  console.log(steps);\n  if (!Array.isArray(steps) || steps.length === 0) return;\n  const sorted = steps.slice().sort();\n  timestamps.value = sorted;\n  if (timeIndex.value >= sorted.length) {\n    timeIndex.value = 0;\n  }\n  timestampsLoaded.value = true;\n}\n\nwatch(playing, (val: boolean) => {\n  if (val) {\n    play();\n    playButtonClickedCount.value += 1;\n  } else {\n    pause();\n  }\n});\n\nfunction play() {\n  playInterval.value = setInterval(() => {\n    if (timeIndex.value >= maxIndex.value) {\n      if (playInterval.value) {\n        // clearInterval(this.playInterval);\n        // this.playInterval = null;\n        // let it loop\n        timeIndex.value = minIndex.value;\n      }\n    } else {\n      timeIndex.value += 1;\n    }\n  }, 1000);\n}\n\n\nfunction pause() {\n  if (playInterval.value) {\n    clearInterval(playInterval.value);\n  }\n}\n\nfunction rectangleIsDegenerate(info: RectangleSelectionInfo): boolean {\n  return info.xmax === info.xmin || info.ymax === info.ymin;\n}\n\nfunction createRegion(info: RectangleSelectionInfo | PointSelectionInfo, geometryType: \"rectangle\" | \"point\"): UnifiedRegionType {\n  const color = COLORS[regionsCreatedCount.value % COLORS.length];\n  regionsCreatedCount.value += 1;\n\n  const isRect = geometryType === 'rectangle';\n  const { layer } = isRect ? \n    addRectangleLayer((map.value as MapType)!, info as RectangleSelectionInfo, color)\n    : addPointLayer((map.value as MapType)!, info as PointSelectionInfo, color);\n  return {\n    id: v4(),\n    name: `${isRect ? 'Region' : 'Point'} ${regionsCreatedCount.value}`,\n    geometryInfo: info,\n    geometryType: geometryType,\n    color,\n    layer,\n  };\n\n}\n\nwatch(rectangleInfo, (info: RectangleSelectionInfo | null) => {\n  if (info === null || map.value === null) {\n    rectangleSelectionActive.value = false;\n    return;\n  }\n  if (rectangleIsDegenerate(info)) {\n    // make it a point selection instead\n    // TODO: only implement when we have a solution to only do this on a double-click\n    // pointInfo.value = {\n    //   x: info.xmin,\n    //   y: info.ymin\n    // };\n    rectangleSelectionActive.value = false;\n    return;\n  }\n\n  const newRegion = createRegion(info, \"rectangle\");\n  store.addRegion(newRegion);\n  rectangleSelectionActive.value = false;\n  \n  // do not permit editing a region on a selection\n  // handleSelectionRegionEdit(info);\n  \n\n});\n\n// Add watcher for point selection\nwatch(pointInfo, (info: PointSelectionInfo | null) => {\n  if (info === null || map.value === null) {\n    pointSelectionActive.value = false;\n    return;\n  }\n  const newRegion = createRegion(info, \"point\"); \n  store.addRegion(newRegion);\n  pointSelectionActive.value = false;\n});\n\nconst samplingPreviewMarkers = useMultiMarker(map as MapTypeRef , {\n  shape: 'circle',\n  color: '#0000ff',\n  fillColor: '#0000ff',\n  fillOpacity: 0.5,\n  opacity: 1,\n  radius: 0.02 / 2, // degrees\n  scale: 'world',\n  outlineColor: '#0000ff',\n  label: 'predicted-samples-locations'\n});\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst sampler = ref<EsriSampler>(null);\ncurrentTempoDataService.value.withMetadataCache().then(meta => {\n  sampler.value = new EsriSampler(meta);\n});\n\nwatch([showSamplingPreviewMarkers, regions, ()=> regions.value.length], (newVal) => {\n  const tempoDataService = currentTempoDataService.value;\n  const show = newVal[0];\n  const regs = newVal[1];\n  samplingPreviewMarkers.clearMarkers();\n  let locations: {x: number, y:number}[] = [];\n  if (sampler.value && show && regs.length > 0) {\n    regs.forEach(r => {\n      if (r.geometryType === 'rectangle') {\n        sampler.value.setGeometry(r.geometryInfo);\n        if (tempoDataService.meta) {\n          sampler.value.setMetadata(tempoDataService.meta);\n        }\n        locations = [...locations, ...sampler.value.getSampleLocationsGrid(maxSampleCount.value)];\n        // samplingPreviewMarkers.addMarkers(locations);\n      }\n    });\n    samplingPreviewMarkers.addMarkers(locations);\n  }\n});\n\nwatch(lastFocusedRegion, region => {\n  if (region !== null) {\n    const bounds = regionBounds(region);\n    fitBounds(map.value, bounds, true);\n  }\n});\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_toolbar_title = _resolveComponent(\"v-toolbar-title\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_switch = _resolveComponent(\"v-switch\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_tooltip = _resolveComponent(\"v-tooltip\")!\n  const _component_v_toolbar = _resolveComponent(\"v-toolbar\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\")!\n  const _component_v_slider = _resolveComponent(\"v-slider\")!\n  const _component_v_checkbox = _resolveComponent(\"v-checkbox\")!\n  const _component_info_button = _resolveComponent(\"info-button\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_menu = _resolveComponent(\"v-menu\")!\n  const _component_location_search = _resolveComponent(\"location-search\")!\n  const _component_icon_button = _resolveComponent(\"icon-button\")!\n  const _component_map_controls = _resolveComponent(\"map-controls\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(MapColorbarWrap, {\n      horizontal: _unref(display).width.value <= 750,\n      \"current-colormap\": currentColormap.value,\n      \"color-map\": _unref(colorMap),\n      \"start-value\": _unref(colorbarOptions)[_unref(molecule)].stretch[0] / _unref(colorbarOptions)[_unref(molecule)].cbarScale,\n      \"end-value\": _unref(colorbarOptions)[_unref(molecule)].stretch[1] / _unref(colorbarOptions)[_unref(molecule)].cbarScale,\n      \"molecule-label\": _unref(colorbarOptions)[_unref(molecule)].label,\n      \"cbar-scale\": _unref(colorbarOptions)[_unref(molecule)].cbarScale\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_v_card, {\n          class: \"map-contents\",\n          style: {\"width\":\"100%\",\"height\":\"100%\"}\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_v_toolbar, {\n              density: \"compact\",\n              color: \"var(--info-background)\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_toolbar_title, {\n                  text: `TEMPO Data Viewer: ${mapTitle.value}`\n                }, null, 8, [\"text\"]),\n                _createVNode(_component_v_spacer),\n                (_unref(regions).length > 0)\n                  ? (_openBlock(), _createBlock(_component_v_switch, {\n                      key: 0,\n                      modelValue: showSamplingPreviewMarkers.value,\n                      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((showSamplingPreviewMarkers).value = $event)),\n                      label: `${showSamplingPreviewMarkers.value ? 'Showing' : 'Hiding'} Sample Points`,\n                      disabled: _unref(regions).length === 0,\n                      onKeyup: _cache[1] || (_cache[1] = _withKeys(($event: any) => (showSamplingPreviewMarkers.value = !showSamplingPreviewMarkers.value), [\"enter\"])),\n                      inset: \"\",\n                      \"hide-details\": \"\",\n                      class: \"me-3\",\n                      style: {'--v-theme-on-surface': 'var(--accent-color)'}\n                    }, null, 8, [\"modelValue\", \"label\", \"disabled\"]))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_component_v_tooltip, {\n                  text: _unref(selectionActive) === 'rectangle' ? 'Cancel selection' : 'Select a region'\n                }, {\n                  activator: _withCtx(({ props }) => [\n                    _createVNode(_component_v_btn, _mergeProps(props, {\n                      icon: \"mdi-select\",\n                      color: _unref(selectionActive) === 'rectangle' ? 'info' : 'default',\n                      variant: _unref(selectionActive) === 'rectangle' ? 'tonal' : 'text',\n                      disabled: _unref(selectionActive) === 'point',\n                      onClick: activateRectangleSelectionMode\n                    }), null, 16, [\"color\", \"variant\", \"disabled\"])\n                  ]),\n                  _: 1\n                }, 8, [\"text\"]),\n                _createVNode(_component_v_tooltip, {\n                  text: _unref(selectionActive) === 'point' ? 'Cancel selection' : 'Select a point'\n                }, {\n                  activator: _withCtx(({ props }) => [\n                    _createVNode(_component_v_btn, _mergeProps(props, {\n                      icon: \"mdi-plus\",\n                      color: _unref(selectionActive) === 'point' ? 'info' : 'default',\n                      variant: _unref(selectionActive) === 'point' ? 'tonal' : 'text',\n                      disabled: _unref(selectionActive) === 'rectangle',\n                      onClick: activatePointSelectionMode\n                    }), null, 16, [\"color\", \"variant\", \"disabled\"])\n                  ]),\n                  _: 1\n                }, 8, [\"text\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(EsriMap, {\n              mapID: \"map\",\n              initial: _unref(initState),\n              home: _unref(homeState),\n              \"show-roads\": showRoads.value,\n              events: {\n            'moveend': updateURL,\n            'zoomend': updateURL,\n          },\n              timestamp: _unref(timestamp),\n              molecule: _unref(molecule),\n              opacity: opacity.value,\n              \"show-field-of-regard\": showFieldOfRegard.value,\n              onZoomhome: onZoomhome,\n              onReady: onMapReady,\n              onEsriTimestepsLoaded: onEsriTimestepsLoaded,\n              ref_key: \"maplibreMap\",\n              ref: maplibreMap,\n              width: \"100%\",\n              height: \"450px\"\n            }, null, 8, [\"initial\", \"home\", \"show-roads\", \"events\", \"timestamp\", \"molecule\", \"opacity\", \"show-field-of-regard\"]),\n            (showFieldOfRegard.value)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [...(_cache[17] || (_cache[17] = [\n                  _createElementVNode(\"hr\", { class: \"line-legend\" }, null, -1),\n                  _createTextVNode(\"TEMPO Field of Regard\", -1)\n                ]))]))\n              : _createCommentVNode(\"\", true),\n            _createVNode(_component_v_menu, {\n              class: \"map-controls\",\n              modelValue: showControls.value,\n              \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((showControls).value = $event)),\n              \"close-on-content-click\": false\n            }, {\n              activator: _withCtx(({ props }) => [\n                _createElementVNode(\"div\", _hoisted_3, [\n                  _createVNode(_component_v_btn, _mergeProps(props, {\n                    class: \"mx-2 mt-5\",\n                    elevation: \"2\",\n                    color: \"white\",\n                    icon: \"\",\n                    style: {\"outline\":\"2px solid #b6b6b6\"},\n                    rounded: \"0\",\n                    size: \"x-small\"\n                  }), {\n                    default: _withCtx(() => [\n                      _createVNode(_component_v_icon, {\n                        color: \"black\",\n                        size: \"x-large\"\n                      }, {\n                        default: _withCtx(() => [...(_cache[18] || (_cache[18] = [\n                          _createTextVNode(\"mdi-tune-variant\", -1)\n                        ]))]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  }, 16)\n                ])\n              ]),\n              default: _withCtx(() => [\n                _createVNode(_component_v_card, { class: \"controls-card\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_font_awesome_icon, {\n                      style: {\"position\":\"absolute\",\"right\":\"16px\",\"cursor\":\"pointer\"},\n                      icon: \"square-xmark\",\n                      size: \"xl\",\n                      onClick: _cache[2] || (_cache[2] = ($event: any) => (showControls.value = false)),\n                      onKeyup: _cache[3] || (_cache[3] = _withKeys(($event: any) => (showControls.value = false), [\"enter\"])),\n                      color: _unref(accentColor2),\n                      tabindex: \"0\"\n                    }, null, 8, [\"color\"]),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                      _cache[19] || (_cache[19] = _createElementVNode(\"div\", { class: \"opacity-slider-label\" }, \"TEMPO data opacity\", -1)),\n                      _createVNode(_component_v_slider, {\n                        modelValue: opacity.value,\n                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((opacity).value = $event)),\n                        min: 0,\n                        max: 1,\n                        color: \"#c10124\",\n                        density: \"compact\",\n                        \"hide-details\": \"\",\n                        class: \"mb-4\",\n                        onEnd: _cache[5] || (_cache[5] = ($event: any) => (opacitySliderUsedCount.value += 1))\n                      }, null, 8, [\"modelValue\"])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                      _createVNode(_component_v_checkbox, {\n                        modelValue: showRoads.value,\n                        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((showRoads).value = $event)),\n                        onKeyup: _cache[7] || (_cache[7] = _withKeys(($event: any) => (showRoads.value = !showRoads.value), [\"enter\"])),\n                        label: \"Show Roads\",\n                        color: \"#c10124\",\n                        \"hide-details\": \"\"\n                      }, null, 8, [\"modelValue\"])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                      _createVNode(_component_v_checkbox, {\n                        modelValue: showFieldOfRegard.value,\n                        \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((showFieldOfRegard).value = $event)),\n                        onKeyup: _cache[9] || (_cache[9] = _withKeys(($event: any) => (showFieldOfRegard.value = !showFieldOfRegard.value), [\"enter\"])),\n                        label: \"TEMPO Field of Regard\",\n                        color: \"#c10124\",\n                        \"hide-details\": \"\"\n                      }, null, 8, [\"modelValue\"]),\n                      _createVNode(_component_info_button, null, {\n                        default: _withCtx(() => [\n                          _cache[24] || (_cache[24] = _createElementVNode(\"p\", null, \" The TEMPO satellite observes the atmosphere over North America, from the Atlantic Ocean to the Pacific Coast, and from roughly Mexico City to central Canada. \", -1)),\n                          _createElementVNode(\"p\", null, [\n                            _cache[20] || (_cache[20] = _createTextVNode(\" The TEMPO Field of Regard (in \", -1)),\n                            _cache[21] || (_cache[21] = _createElementVNode(\"span\", { class: \"text-red\" }, \"red\", -1)),\n                            _cache[22] || (_cache[22] = _createTextVNode(\", currently \", -1)),\n                            _createElementVNode(\"em\", null, _toDisplayString(showFieldOfRegard.value ? 'visible' : \"hidden\"), 1),\n                            _cache[23] || (_cache[23] = _createTextVNode(\") is the area over which the satellite takes measurements. \", -1))\n                          ])\n                        ]),\n                        _: 1\n                      })\n                    ])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"modelValue\"]),\n            _createElementVNode(\"div\", _hoisted_7, [\n              _createVNode(_component_location_search, {\n                modelValue: searchOpen.value,\n                \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((searchOpen).value = $event)),\n                small: \"\",\n                \"stay-open\": \"\",\n                buttonSize: \"xl\",\n                \"persist-selected\": \"\",\n                \"search-provider\": geocodingInfoForSearchLimited,\n                onSetLocation: setLocationFromSearch,\n                onError: _cache[12] || (_cache[12] = (error) => searchErrorMessage.value = error)\n              }, null, 8, [\"modelValue\"])\n            ])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }, 8, [\"horizontal\", \"current-colormap\", \"color-map\", \"start-value\", \"end-value\", \"molecule-label\", \"cbar-scale\"]),\n    _createElementVNode(\"div\", _hoisted_8, [\n      _createVNode(_component_v_slider, {\n        class: \"time-slider\",\n        modelValue: _unref(timeIndex),\n        \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => (_isRef(timeIndex) ? (timeIndex).value = $event : null)),\n        min: _unref(minIndex),\n        max: _unref(maxIndex),\n        step: 1,\n        color: \"#068ede95\",\n        \"thumb-label\": \"always\",\n        \"track-size\": 10,\n        \"show-ticks\": \"always\",\n        \"hide-details\": \"\",\n        onEnd: _cache[14] || (_cache[14] = ($event: any) => (timeSliderUsedCount.value += 1))\n      }, {\n        \"thumb-label\": _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_9, _toDisplayString(thumbLabel.value), 1)\n        ]),\n        _: 1\n      }, 8, [\"modelValue\", \"min\", \"max\"]),\n      _createVNode(_component_icon_button, {\n        class: \"play-pause\",\n        \"fa-icon\": playing.value ? 'pause' : 'play',\n        \"fa-size\": \"sm\",\n        onActivate: _cache[15] || (_cache[15] = ($event: any) => (playing.value = !playing.value))\n      }, null, 8, [\"fa-icon\"])\n    ]),\n    _createVNode(_component_map_controls, {\n      onMolecule: _cache[16] || (_cache[16] = (mol) => { molecule.value = mol })\n    })\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"map-container\">\n    <map-colorbar-wrap\n      :horizontal=\"display.width.value <= 750\"\n      :current-colormap=\"currentColormap\"\n      :color-map=\"colorMap\"\n      :start-value=\"colorbarOptions[molecule].stretch[0] / colorbarOptions[molecule].cbarScale\"\n      :end-value=\"colorbarOptions[molecule].stretch[1] / colorbarOptions[molecule].cbarScale\"\n      :molecule-label=\"colorbarOptions[molecule].label\"\n      :cbar-scale=\"colorbarOptions[molecule].cbarScale\"\n    >\n      <v-card class=\"map-contents\" style=\"width:100%; height: 100%;\">\n        <v-toolbar\n          density=\"compact\"\n          color=\"var(--info-background)\"\n        >\n          <v-toolbar-title :text=\"`TEMPO Data Viewer: ${mapTitle}`\"></v-toolbar-title>\n          <v-spacer></v-spacer>\n          <!-- switch for preview points -->\n           <v-switch\n            v-if=\"regions.length > 0\"\n            v-model=\"showSamplingPreviewMarkers\"\n            :label=\"`${showSamplingPreviewMarkers ? 'Showing' : 'Hiding'} Sample Points`\"\n            :disabled=\"regions.length === 0\"\n            @keyup.enter=\"showSamplingPreviewMarkers = !showSamplingPreviewMarkers\"\n            inset\n            hide-details\n            class=\"me-3\"\n            :style=\"{'--v-theme-on-surface': 'var(--accent-color)'}\"\n            />\n          <v-tooltip :text=\"selectionActive === 'rectangle' ? 'Cancel selection' : 'Select a region'\">\n            <template #activator=\"{ props }\">\n              <v-btn\n                v-bind=\"props\"\n                icon=\"mdi-select\"\n                :color=\"selectionActive === 'rectangle' ? 'info' : 'default'\"\n                :variant=\"selectionActive === 'rectangle' ? 'tonal' : 'text'\"\n                :disabled=\"selectionActive === 'point'\"\n                @click=\"activateRectangleSelectionMode\"\n              ></v-btn>\n            </template>\n          </v-tooltip>\n          <v-tooltip :text=\"selectionActive === 'point' ? 'Cancel selection' : 'Select a point'\">\n            <template #activator=\"{ props }\">\n              <v-btn\n                v-bind=\"props\"\n                icon=\"mdi-plus\"\n                :color=\"selectionActive === 'point' ? 'info' : 'default'\"\n                :variant=\"selectionActive === 'point' ? 'tonal' : 'text'\"\n                :disabled=\"selectionActive === 'rectangle'\"\n                @click=\"activatePointSelectionMode\"\n              ></v-btn>\n            </template>\n          </v-tooltip>\n        </v-toolbar>\n        <EsriMap\n          mapID=\"map\"\n          :initial=\"initState\"\n          :home=\"homeState\"\n          :show-roads=\"showRoads\"\n          :events=\"{\n            'moveend': updateURL,\n            'zoomend': updateURL,\n          }\"\n          :timestamp=\"timestamp\"\n          :molecule=\"molecule\"\n          :opacity=\"opacity\"\n          :show-field-of-regard=\"showFieldOfRegard\"\n          @zoomhome=\"onZoomhome\"\n          @ready=\"onMapReady\"\n          @esri-timesteps-loaded=\"onEsriTimestepsLoaded\"\n          ref=\"maplibreMap\"\n          width=\"100%\"\n          height=\"450px\"\n        />\n\n        <div v-if=\"showFieldOfRegard\" class=\"map-legend\"><hr class=\"line-legend\">TEMPO Field of Regard</div>\n        <!-- show hide cloud data, disable if none is available -->\n\n        <v-menu\n          class=\"map-controls\"\n          v-model=\"showControls\"\n          :close-on-content-click=\"false\"\n        >\n          <template v-slot:activator=\"{ props }\">\n            <div class=\"map-show-hide-controls\">\n              <v-btn\n                v-bind=\"props\"\n                class=\"mx-2 mt-5\"\n                elevation=\"2\"\n                color=\"white\"\n                icon\n                style=\"outline: 2px solid #b6b6b6;\"\n                rounded=\"0\"\n                size=\"x-small\"\n              >\n                <template v-slot:default>\n                  <v-icon\n                    color=\"black\"\n                    size=\"x-large\"\n                  >mdi-tune-variant</v-icon>\n                </template>\n              </v-btn>\n            </div>\n          </template>\n          <v-card class=\"controls-card\">\n            <font-awesome-icon\n              style=\"position:absolute;right:16px;cursor:pointer\"\n              icon=\"square-xmark\"\n              size=\"xl\"\n              @click=\"showControls = false\"\n              @keyup.enter=\"showControls = false\"\n              :color=\"accentColor2\"\n              tabindex=\"0\"\n            ></font-awesome-icon>\n            <div\n              class=\"opacity-slider-container mt-5\"\n            >\n              <div class=\"opacity-slider-label\">TEMPO data opacity</div>\n              <v-slider\n                  v-model=\"opacity\"\n                  :min=\"0\"\n                  :max=\"1\"\n                  color=\"#c10124\"\n                  density=\"compact\"\n                  hide-details\n                  class=\"mb-4\"\n                  @end=\"opacitySliderUsedCount += 1\"\n                >\n              </v-slider>\n            </div>\n            <div\n              class=\"d-flex flex-row align-center justify-space-between\"\n            >\n              <v-checkbox\n                v-model=\"showRoads\"\n                @keyup.enter=\"showRoads = !showRoads\"\n                label=\"Show Roads\"\n                color=\"#c10124\"\n                hide-details\n              />\n            </div>\n            <div\n              class=\"d-flex flex-row align-center justify-space-between\"\n            >\n              <v-checkbox\n                v-model=\"showFieldOfRegard\"\n                @keyup.enter=\"showFieldOfRegard = !showFieldOfRegard\"\n                label=\"TEMPO Field of Regard\"\n                color=\"#c10124\"\n                hide-details\n              />\n              <info-button>\n                <p>\n                  The TEMPO satellite observes the atmosphere over North America, from the Atlantic Ocean to the Pacific Coast, and from roughly Mexico City to central Canada. \n                </p>\n                <p>\n                  The TEMPO Field of Regard (in <span class=\"text-red\">red</span>, currently <em>{{ showFieldOfRegard ? 'visible' : \"hidden\" }}</em>)\n                  is the area over which the satellite takes measurements. \n                </p>\n                </info-button>\n              </div>\n          </v-card>\n        </v-menu>\n        <div class=\"location-and-sharing\">\n        <location-search\n          v-model=\"searchOpen\"\n          small\n          stay-open\n          buttonSize=\"xl\"\n          persist-selected\n          :search-provider=\"geocodingInfoForSearchLimited\"\n          @set-location=\"setLocationFromSearch\"\n          @error=\"(error: string) => searchErrorMessage = error\"\n        ></location-search>\n      </div>\n      </v-card>\n    </map-colorbar-wrap>\n    <div class=\"slider-row\">\n      <v-slider\n        class=\"time-slider\"\n        v-model=\"timeIndex\"\n        :min=\"minIndex\"\n        :max=\"maxIndex\"\n        :step=\"1\"\n        color=\"#068ede95\"\n        thumb-label=\"always\"\n        :track-size=\"10\"\n        show-ticks=\"always\"\n        hide-details\n        @end=\"timeSliderUsedCount += 1\"\n      >\n        <template v-slot:thumb-label>\n          <div class=\"thumb-label\">\n            {{ thumbLabel }}\n          </div>\n        </template>\n      </v-slider>\n      <icon-button\n        class=\"play-pause\"\n        :fa-icon=\"playing ? 'pause' : 'play'\"\n        fa-size=\"sm\"\n        @activate=\"playing = !playing\"\n      ></icon-button>\n        </div>\n    <map-controls\n      @molecule=\"(mol: MoleculeType) => { molecule = mol }\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, useTemplateRef, watch, type Ref, type WritableComputedRef } from \"vue\";\nimport { useDisplay } from 'vuetify';\nimport { storeToRefs } from \"pinia\";\nimport { MapBoxFeature, MapBoxFeatureCollection, MapBoxFeatureType, MapBoxForwardGeocodingOptions, geocodingInfoForSearch } from \"@cosmicds/vue-toolkit\";\nimport { Map } from \"maplibre-gl\";\nimport { getTimezoneOffset } from \"date-fns-tz\";\nimport { v4 } from \"uuid\";\n\nimport type { LatLngPair, PointSelectionInfo, RectangleSelectionInfo, SelectionType } from \"@/types\";\nimport { type MoleculeType, MOLECULE_OPTIONS } from \"@/esri/utils\";\nimport { colorbarOptions } from \"@/esri/ImageLayerConfig\";\nimport { colormap } from \"@/colormaps/utils\";\nimport { useTempoStore } from \"@/stores/app\";\nimport { useLocationMarker } from \"@/composables/maplibre/useMarker\";\nimport { useRectangleSelection } from \"@/composables/maplibre/useRectangleSelection\";\nimport { addRectangleLayer, addPointLayer, regionBounds, fitBounds } from \"@/composables/maplibre/utils\";\nimport { usePointSelection } from \"@/composables/maplibre/usePointSelection\";\nimport { COLORS } from \"@/utils/color\";\nimport { EsriSampler } from \"@/esri/services/sampling\";\nimport { useMultiMarker } from '@/composables/maplibre/useMultiMarker';\n\nimport EsriMap from \"@/components/EsriMap.vue\";\nimport MapColorbarWrap from \"@/components/MapColorbarWrap.vue\";\n\ntype MapType = Map | null;\ntype MapTypeRef = Ref<MapType>;\nconst maplibreMap = useTemplateRef<InstanceType<typeof EsriMap>>(\"maplibreMap\");\nconst map = ref<MapType>(null);\n\ntype Timeout = ReturnType<typeof setTimeout>;\n\nconst store = useTempoStore();\nconst {\n  accentColor2,\n  opacitySliderUsedCount,\n  regions,\n  timestamp,\n  timeIndex,\n  molecule,\n  minIndex,\n  maxIndex,\n  date,\n  selectedTimezone,\n  timeSliderUsedCount,\n  playButtonClickedCount,\n  timestamps,\n  timestampsLoaded,\n  selectionActive,\n  regionsCreatedCount,\n  currentTempoDataService,\n  maxSampleCount,\n  colorMap,\n  lastFocusedRegion,\n} = storeToRefs(store);\n\nfunction createSelectionComputed(selection: SelectionType): WritableComputedRef<boolean> {\n  return computed({\n    get() {\n      return selectionActive.value === selection;\n    },\n    set(value: boolean) {\n      if (value === (selectionActive.value !== selection)) {\n        selectionActive.value = value ? selection : null;\n      }\n    },\n  });\n}\n\nconst pointSelectionActive = createSelectionComputed(\"point\");\nconst rectangleSelectionActive = createSelectionComputed(\"rectangle\");\n\nconst { selectionInfo: rectangleInfo } = useRectangleSelection(map as MapTypeRef, \"red\", rectangleSelectionActive);\nconst { selectionInfo: pointInfo } = usePointSelection(map as MapTypeRef, pointSelectionActive);\n\ntype UnifiedRegionType = typeof regions.value[number];\n\nconst display = useDisplay();\n\n\nconst onMapReady = (m: Map) => {\n  map.value = m; // ESRI source already added by EsriMap\n};\n\nconst showLocationMarker = ref(true);\nconst {\n  setMarker,\n  removeMarker,\n  locationMarker,\n  initState,\n  homeState,\n} = useLocationMarker(map as Ref<Map | null>, showLocationMarker.value);\n\nconst showFieldOfRegard = ref(false);\nconst showControls = ref(false);\nconst showRoads = ref(true);\nconst opacity = ref(0.9);\nconst showSamplingPreviewMarkers = ref(false);\nconst playing = ref(false);\nconst playInterval = ref<Timeout | null>(null);\n\n\nconst searchOpen = ref(true);\nconst searchErrorMessage = ref<string | null>(null);\nfunction activateRectangleSelectionMode() {\n  rectangleSelectionActive.value = !rectangleSelectionActive.value;\n}\n\nfunction activatePointSelectionMode() {\n  pointSelectionActive.value = !pointSelectionActive.value;\n}\n\nconst currentColormap = computed(() => {\n  return (x: number): string => {\n    const rgb = colormap(colorMap.value, 0, 1, x);\n    return `rgba(${rgb[0]}, ${rgb[1]}, ${rgb[2]},1)`;\n  };\n});\n\nconst mapTitle = computed(() => {\n  const currentMolecule = MOLECULE_OPTIONS.find(m => m.value === molecule.value);\n  if (!currentMolecule) {\n    return '';\n  }\n  return currentMolecule.title;\n});\n\n// TODO: Maybe there's a built-in Date function to get this formatting?\nconst thumbLabel = computed(() => {\n  if (date.value === null || timestamp.value === null) {\n    return '';\n  }\n  const offset = getTimezoneOffset(selectedTimezone.value, date.value);\n  const dateObj = new Date(timestamp.value + offset);\n  const hours = dateObj.getUTCHours();\n  const amPm = hours >= 12 ? \"PM\" : \"AM\";\n  let hourValue = hours % 12;\n  if (hourValue === 0) {\n    hourValue = 12;\n  }\n  return `${date.value.getUTCMonth() + 1}/${dateObj.getUTCDate()}/${dateObj.getUTCFullYear()} ${hourValue}:${dateObj.getUTCMinutes().toString().padStart(2, '0')} ${amPm}`;\n});\n\nconst defaultMapboxOptions = {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  types: [\"place\", \"postcode\"] as MapBoxFeatureType[],\n  countries: [\"US\", \"CA\", \"MX\", \"CU\", \"BM\", \"HT\", \"DO\"],\n  limit: 5,\n};\nasync function geocodingInfoForSearchLimited(searchText: string, options?: MapBoxForwardGeocodingOptions): Promise<MapBoxFeatureCollection | null> {\n  const token = process.env.VUE_APP_MAPBOX_ACCESS_TOKEN;\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const opts = options ?? { ...defaultMapboxOptions, access_token: token ?? \"\" };\n  return geocodingInfoForSearch(searchText, opts).catch(_err => null);\n}\n\nfunction setLocationFromSearch(items: [MapBoxFeature | null, string]) {\n  const [feature, text] = items;\n  if (feature !== null) {\n    // Latitude, Longitude order\n    const coordinates: LatLngPair = [feature.center[1], feature.center[0]] as LatLngPair;\n    maplibreMap.value?.setView(coordinates, 12);\n    setMarker(coordinates);\n    store.userSelectedLocations.push(text);\n  }\n}\n\nfunction onZoomhome() {\n  if (locationMarker.value !== null) {\n    removeMarker();\n  }\n}\n\nconst currentUrl = ref(window.location.href);\nfunction updateURL() {\n  if (map.value) {\n    const center = map.value.getCenter();\n    let stateObj = null as Record<string, string> | null;\n    stateObj = {\n      lat: `${center.lat.toFixed(4)}`,\n      lon: `${center.lng.toFixed(4)}`,\n      zoom: `${map.value.getZoom()}`,\n      t: `${timestamp.value}`\n    };\n    const url = new URL(location.origin);\n    const searchParams = new URLSearchParams(stateObj ?? {});\n    // const hash = window.location.hash;\n    // url.hash = hash;\n    url.pathname = location.pathname;\n    window.history.replaceState(null, '', url.toString());\n    url.search = searchParams.toString();\n    currentUrl.value = url.toString();\n    // window.history.replaceState(stateObj, '', url);\n  }\n}\n\n// ESRI timesteps arrive from EsriMap component; store directly in timestamps\nfunction onEsriTimestepsLoaded(steps: number[]) {\n  console.log(\"Loading steps\");\n  console.log(steps);\n  if (!Array.isArray(steps) || steps.length === 0) return;\n  const sorted = steps.slice().sort();\n  timestamps.value = sorted;\n  if (timeIndex.value >= sorted.length) {\n    timeIndex.value = 0;\n  }\n  timestampsLoaded.value = true;\n}\n\nwatch(playing, (val: boolean) => {\n  if (val) {\n    play();\n    playButtonClickedCount.value += 1;\n  } else {\n    pause();\n  }\n});\n\nfunction play() {\n  playInterval.value = setInterval(() => {\n    if (timeIndex.value >= maxIndex.value) {\n      if (playInterval.value) {\n        // clearInterval(this.playInterval);\n        // this.playInterval = null;\n        // let it loop\n        timeIndex.value = minIndex.value;\n      }\n    } else {\n      timeIndex.value += 1;\n    }\n  }, 1000);\n}\n\n\nfunction pause() {\n  if (playInterval.value) {\n    clearInterval(playInterval.value);\n  }\n}\n\nfunction rectangleIsDegenerate(info: RectangleSelectionInfo): boolean {\n  return info.xmax === info.xmin || info.ymax === info.ymin;\n}\n\nfunction createRegion(info: RectangleSelectionInfo | PointSelectionInfo, geometryType: \"rectangle\" | \"point\"): UnifiedRegionType {\n  const color = COLORS[regionsCreatedCount.value % COLORS.length];\n  regionsCreatedCount.value += 1;\n\n  const isRect = geometryType === 'rectangle';\n  const { layer } = isRect ? \n    addRectangleLayer((map.value as MapType)!, info as RectangleSelectionInfo, color)\n    : addPointLayer((map.value as MapType)!, info as PointSelectionInfo, color);\n  return {\n    id: v4(),\n    name: `${isRect ? 'Region' : 'Point'} ${regionsCreatedCount.value}`,\n    geometryInfo: info,\n    geometryType: geometryType,\n    color,\n    layer,\n  };\n\n}\n\nwatch(rectangleInfo, (info: RectangleSelectionInfo | null) => {\n  if (info === null || map.value === null) {\n    rectangleSelectionActive.value = false;\n    return;\n  }\n  if (rectangleIsDegenerate(info)) {\n    // make it a point selection instead\n    // TODO: only implement when we have a solution to only do this on a double-click\n    // pointInfo.value = {\n    //   x: info.xmin,\n    //   y: info.ymin\n    // };\n    rectangleSelectionActive.value = false;\n    return;\n  }\n\n  const newRegion = createRegion(info, \"rectangle\");\n  store.addRegion(newRegion);\n  rectangleSelectionActive.value = false;\n  \n  // do not permit editing a region on a selection\n  // handleSelectionRegionEdit(info);\n  \n\n});\n\n// Add watcher for point selection\nwatch(pointInfo, (info: PointSelectionInfo | null) => {\n  if (info === null || map.value === null) {\n    pointSelectionActive.value = false;\n    return;\n  }\n  const newRegion = createRegion(info, \"point\"); \n  store.addRegion(newRegion);\n  pointSelectionActive.value = false;\n});\n\nconst samplingPreviewMarkers = useMultiMarker(map as MapTypeRef , {\n  shape: 'circle',\n  color: '#0000ff',\n  fillColor: '#0000ff',\n  fillOpacity: 0.5,\n  opacity: 1,\n  radius: 0.02 / 2, // degrees\n  scale: 'world',\n  outlineColor: '#0000ff',\n  label: 'predicted-samples-locations'\n});\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst sampler = ref<EsriSampler>(null);\ncurrentTempoDataService.value.withMetadataCache().then(meta => {\n  sampler.value = new EsriSampler(meta);\n});\n\nwatch([showSamplingPreviewMarkers, regions, ()=> regions.value.length], (newVal) => {\n  const tempoDataService = currentTempoDataService.value;\n  const show = newVal[0];\n  const regs = newVal[1];\n  samplingPreviewMarkers.clearMarkers();\n  let locations: {x: number, y:number}[] = [];\n  if (sampler.value && show && regs.length > 0) {\n    regs.forEach(r => {\n      if (r.geometryType === 'rectangle') {\n        sampler.value.setGeometry(r.geometryInfo);\n        if (tempoDataService.meta) {\n          sampler.value.setMetadata(tempoDataService.meta);\n        }\n        locations = [...locations, ...sampler.value.getSampleLocationsGrid(maxSampleCount.value)];\n        // samplingPreviewMarkers.addMarkers(locations);\n      }\n    });\n    samplingPreviewMarkers.addMarkers(locations);\n  }\n});\n\nwatch(lastFocusedRegion, region => {\n  if (region !== null) {\n    const bounds = regionBounds(region);\n    fitBounds(map.value, bounds, true);\n  }\n});\n\n</script>\n\n<style lang=\"less\">\n.map-container {\n  width: 100%;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n\n  .location-and-sharing {\n    position: absolute;\n    bottom: 0;\n    z-index: 1000;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    gap: 0.5rem;\n    width: fit-content;\n  }\n\n  .forward-geocoding-container {\n    width: 250px;\n    border: 2px solid black;\n  }\n\n  .map-show-hide-controls {\n    z-index: 1000;\n    position: absolute;\n    top: calc(48px + 1rem);\n    right: 80px;\n  }\n\n  .map-legend {\n    position: absolute;\n    top: 48px;\n    right: 80px;\n    width: fit-content;\n    z-index: 1000;\n\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n\n    color: black;\n    background-color: #fff5;\n    padding-left: 0.5rem;\n    padding-right: 0.25rem;\n\n    backdrop-filter: blur(5px);\n\n    hr.line-legend {\n      display: inline-block;\n      border: 0.5px solid #c10124;\n      width: 3rem;\n    }\n  }\n\n  .controls-card {\n    padding: 1rem;\n    border: 1px solid #068ede;\n  }\n\n  .slider-row {\n    display: flex;\n    flex-direction: row;\n    padding-left: 0;\n  }\n\n  >.play-pause {\n    height: fit-content;\n    align-self: center;\n    padding-inline: 0.5rem;\n    margin-left: 0.75rem;\n    width: 2.5rem;\n    color: var(--accent-color);\n    border: 2px solid var(--accent-color);\n  }\n\n  .play-pause[disabled] {\n    filter: grayscale(100%);\n    cursor: progress;\n    cursor: not-allowed;\n  }\n\n  .icon-wrapper {\n    padding-inline: 0.5rem !important;\n  }\n}\n\n.time-slider {\n\n  .v-slider-thumb {\n\n    .v-slider-thumb__surface::after {\n      background-image: url(\"@/assets/smithsonian.png\");\n      background-size: 30px 30px;\n      height: 30px;\n      width: 30px;\n    }\n\n    .v-slider-thumb__label {\n      background-color: var(--accent-color-2);\n      border: 0.25rem solid var(--accent-color);\n      width: max-content;\n      height: 2.5rem;\n      font-size: 1rem;\n\n      &::before {\n        color: var(--accent-color);\n      }\n    }\n  }\n\n  .v-slider-track__tick {\n    background-color: var(--accent-color);\n    /* Change color */\n    height: 15px;\n    /* Change size */\n    width: 4px;\n    margin-top: 0 !important;\n    // top: -10%;\n  }\n\n  .v-slider {\n\n    .v-slider.v-input--horizontal {\n      grid-template-rows: auto 0px;\n    }\n\n    .v-slider.v-input--horizontal .v-slider-thumb__label {\n      // top: calc(var(--v-slider-thumb-size) * 1.5);\n      z-index: 2000;\n    }\n\n    .v-slider.v-input--horizontal .v-slider-thumb__label::before {\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-top: 6px solid currentColor;\n      bottom: -15px;\n    }\n  }\n}\n\n#opacity-slider-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  padding-left: 7%;\n  padding-right: 7%;\n  gap: 2px;\n\n  .v-slider {\n    margin-right: 0;\n    width: 100%;\n  }\n\n  #opacity-slider-label {\n    opacity: 0.7;\n    width: fit-content;\n  }\n}\n</style>\n","import script from \"./MapWithControls.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MapWithControls.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MapWithControls.vue?vue&type=style&index=0&id=2493fc50&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport Vue, { createApp } from \"vue\";\n\nimport { FundingAcknowledgement, IconButton, CreditLogos } from \"@cosmicds/vue-toolkit\";\nimport LocationSearch from \"./components/LocationSearch.vue\";\nimport TempoLite from \"./TempoLite.vue\";\nimport Colorbar from './components/ColorBar.vue';\nimport ColorBarHorizontal from \"./components/ColorBarHorizontal.vue\";\nimport InfoButton from \"./components/InfoButton.vue\";\nimport vuetify from \"../plugins/vuetify\";\nimport SnackbarAlert from \"./components/SnackbarAlert.vue\";\nimport ShareButton from \"./components/ShareButton.vue\";\nimport CDSDialog from \"./components/CDSDialog.vue\";\nimport MarqeeAlert from \"./components/MarqeeAlert.vue\";\nimport TimeseriesGraph from \"./components/TimeseriesGraph.vue\";\nimport SelectionComposer from \"./components/SelectionComposer.vue\";\nimport HeaderBar from \"./components/HeaderBar.vue\";\nimport DatasetControls from \"./components/DatasetControls.vue\";\nimport MapControls from \"./components/MapControls.vue\";\nimport MapWithControls from \"./components/MapWithControls.vue\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport {\n  faBookOpen,\n  faPlay,\n  faPause,\n  faTimes,\n  faVideo,\n  faMagnifyingGlass,\n  faCircleXmark,\n  faSquareXmark,\n  faHome,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nimport VueDatePicker from \"@vuepic/vue-datepicker\";\nimport '@vuepic/vue-datepicker/dist/main.css';\nimport { UseClipboard } from \"@vueuse/components\";\n\nimport { createPinia } from \"pinia\";\n\nlibrary.add(faBookOpen);\nlibrary.add(faPlay);\nlibrary.add(faPause);\nlibrary.add(faTimes);\nlibrary.add(faVideo);\nlibrary.add(faMagnifyingGlass);\nlibrary.add(faCircleXmark);\nlibrary.add(faSquareXmark);\nlibrary.add(faHome);\n\n// TODO: This doesn't work. Why??\n// import \"golden-layout/dist/css/goldenlayout-base.css\";\n// import \"golden-layout/dist/css/themes/goldenlayout-dark-theme.css\";\n\n/** v-hide directive taken from https://www.ryansouthgate.com/2020/01/30/vue-js-v-hide-element-whilst-keeping-occupied-space/ */\n// Extract the function out, up here, so I'm not writing it twice\nconst update = (el: HTMLElement, binding: Vue.DirectiveBinding) => el.style.visibility = (binding.value) ? \"hidden\" : \"\";\n\nconst pinia = createPinia();\n\ncreateApp(TempoLite, {})\n\n  // Plugins\n  .use(vuetify)\n  .use(pinia)\n\n  // Directives\n  .directive(\n    /**\n    * Hides an HTML element, keeping the space it would have used if it were visible (css: Visibility)\n    */\n    \"hide\", {\n      // Run on initialisation (first render) of the directive on the element\n      beforeMount(el, binding, _vnode, _prevVnode) {\n        update(el, binding);\n      },\n      // Run on subsequent updates to the value supplied to the directive\n      updated(el, binding, _vnode, _prevVnode) {\n        update(el, binding);\n      }\n    })\n\n  // Components\n  .component('font-awesome-icon', FontAwesomeIcon)\n  .component('icon-button', IconButton)\n  .component('funding-acknowledgement', FundingAcknowledgement)\n  .component('credit-logos', CreditLogos)\n  .component('colorbar', Colorbar)\n  .component('location-search', LocationSearch)\n  .component('info-button', InfoButton)\n  .component('colorbar-horizontal', ColorBarHorizontal)\n  .component('date-picker', VueDatePicker)\n  .component('use-clipboard', UseClipboard as Vue.Component)\n  .component('snackbar-alert', SnackbarAlert)\n  .component('share-button', ShareButton)\n  .component('cds-dialog', CDSDialog)\n  .component('marquee-alert', MarqeeAlert)\n  .component('timeseries-graph', TimeseriesGraph)\n  .component('selection-composer', SelectionComposer)\n  .component('dataset-controls', DatasetControls)\n  .component('map-controls', MapControls)\n  .component('map-with-controls', MapWithControls)\n  .component(\"header-bar\", HeaderBar)\n\n  // Mount\n  .mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_cosmicds_tempo_lite\"] = self[\"webpackChunk_cosmicds_tempo_lite\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], () => (__webpack_require__(6116)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_font_awesome_icon","class","style","cssStyles","locationJustUpdated","small","modelValue","searchText","$event","setLocationFromSearchFeature","items","searchResults","features","textForMapboxFeature","bgColor","label","density","solo","color","accentColor","performForwardGeocodingSearch","searchErrorMessage","focusCombobox","onFocusChange","ref","menu","menuOpen","append","icon","size","searchOpen","buttonSize","toggleSearch","closeSearch","stayOpen","_","RELEVANT_FEATURE_TYPES","NA_COUNTRIES","NA_ABBREVIATIONS","feature","pieces","text","push","context","forEach","item","itemType","id","split","includes","shortCode","short_code","some","abbr","startsWith","substring","itemText","join","name","emits","props","searchProvider","type","Function","default","Boolean","required","String","theme","persistSelected","data","this","locationUpdatedText","comboFocused","computed","methods","console","log","length","then","info","$emit","focused","blurCombobox","input","$refs","searchInput","blur","focus","undefined","place_name","slice","timedJustUpdatedLocation","clearSearchData","setTimeout","watch","value","__exports__","magma","r","g","b","inferno","plasma","viridis","cividis","gray","svs_nitrogen_dioxide","svsColorRamp","sargassum","sargassumColorRamp","colormaps","nonEsriColormaps","rgb","esriColorRamp","_stretchRule","min","max","ResamplingTypeEnum","stretches","colorramps","colorbarOptions","stretch","cbarScale","colormap","_colorMapRule","colorRamp","Object","keys","toLowerCase","_resampleRule","resamplingType","composeRasterRules","baseRule","additionalRules","currentRule","i","nextOuterRule","rasterFunctionArguments","Raster","renderingRule","range","resamplineRule","Math","fetchEsriTimeSteps","Promise","esriUrl","variableName","dimensionName","url","format","multidimensionalDefinition","params","f","JSON","stringify","fetchURL","URL","search","URLSearchParams","toString","fetch","res","json","extractTimeSteps","slices","timesteps","map","values","reduce","acc","val","Array","isArray","concat","ESRI_URLS","variable","MOLECULE_OPTIONS","title","moleculeName","molecule","find","m","getEsriTimesteps","rectangleToGeometry","rect","xmin","ymin","xmax","ymax","rings","spatialReference","wkid","pointToGeometry","point","x","y","isBad","v","isNaN","nan2null","_getValidData","arr","validArr","sum","_nanLength","filter","nanmean","_arr","difference","a","diff","result","nanvariance","diffs","nanstdev","sqrt","nanstandardError","stdev","nanmin","nanmax","sumOfSquares","nanMeanOfSquares","nanRootMeanSquare","ms","serviceMetaData","geometry","metadata","serviceBounds","fullExtent","pixelXSize","pixelSizeX","pixelYSize","pixelSizeY","serviceXsize","serviceYsize","setGeometry","Error","setMetadata","latSize","abs","lonSize","getSampleDistance","sampleCount","geometryArea","getSampleCount","sampleDistance","calculateActualSampleCount","initialSampleCount","pixelSize","nx","round","geometryXsize","ny","geometryYsize","actualSampleCount","getSamplingSpecificationFromSamplingDistance","count","distance","lats","lons","getSamplingSpecificationFromSampleCount","permitOversampling","adjustedSampleCount","getSampleLocations","spec","delta","sign","j","getSampleLocationsGrid","locations","points","safeParseNumber","parsed","parseFloat","stringifyEsriGetSamplesParameters","geometryType","mosaicRule","returnFirstValueOnly","interpolation","outFields","sliceID","time","options","timeStr","t","Date","getTime","baseUrl","metadataCache","_loadingMetadata","updateMetadataCache","setVariable","getVariable","setBaseUrl","getBaseUrl","_getServiceMetadata","response","ok","status","catch","error","getMetadata","withMetadataCache","resolve","fetchSample","timeRange","esriGeometry","isRectBounds","timeString","start","end","urlWithParams","code","message","details","processedSamples","samples","sample","location","attributes","StdTime","date","locationId","totalSamples","fetchSamples","timeRanges","promises","tr","all","results","validResults","flat","aggregateByTime","grouped","Map","has","set","get","errors","sampleValues","s","calculateMean","calculateError","seen","Set","key","add","getTimeSeriesStatistics","jsonData","uniqueLocations","uniqueLatitudes","uniqueLongitudes","valuesPerLocation","locString","totalValues","numUniqueLocations","latitudeSpacing","sort","longitudeSpacing","fetchTimeseriesData","meta","sampler","EsriSampler","rawData","stats","toFixed","fetchCenterPointData","rectangle","center","validSamples","lower","upper","mean","squaredDiffs","pow","squaredSEM","ONEDAYMS","useUniqueTimeSelection","timestamps","timeIndex","singleDateSelected","minIndex","maxIndex","mode","initialTimeSelection","getOneDaysTimestamps","mod","ts","idx","getAllDaysTimestamps","setNearestDate","warn","timestamp","offset","uniqueDays","easternDates","days","getUTCFullYear","getUTCMonth","getUTCDate","unique","from","uniqueDaysIndex","e","indexOf","getUniqueDayIndex","findIndex","day","moveBackwardOneDay","currentIndex","moveForwardOneDay","nextIndex","nearestDate","nearestDateIndex","index","newTimestamps","immediate","useTimezone","selectedTimezone","toTimezone","utcDate","fromTimezone","setToMidnight","zonedDate","setHours","setToEndOfDay","formatTimeLong","timeZone","formatDuration","startUtc","endUtc","startZoned","endZoned","startTime","toLocaleTimeString","hour","minute","hour12","endTime","formatTimezoneRange","startDate","toLocaleDateString","month","formatUTCRange","formatTime","Number","formatDateDisplay","toDateString","timezoneInfo","toLocaleString","timeZoneName","pop","isDST","standardOffset","currentOffset","timezoneOptions","dateIsDST","tz","atleast1d","formatSingleRange","startString","endString","formatTimeRange","ranges","allStarts","allEnds","minStart","maxEnd","rangeForSingleDay","timezone","dayUTC","areEquivalentMsRanges","first","second","areEquivalentTimeRanges","array","firstRange","every","rg","createTempoStore","backend","regions","datasets","timestampsLoaded","tempoDataServices","backendRef","maxSampleCount","sampleErrors","regionsCreatedCount","userSelectedCalendarDates","userSelectedTimezones","userSelectedLocations","userSelectedNotableEvents","shareButtonClickedCount","playButtonClickedCount","timeSliderUsedCount","opacitySliderUsedCount","selectionActive","lastFocusedRegion","colorMap","tzOptions","displayedDayTimeRange","description","accentColor2","getTempoDataService","service","TempoDataService","currentTempoDataService","addTimeRange","deleteTimeRange","splice","_newDate","oldDate","oldRange","displayedDateSelections","sel","formatted","oldTimeRange","v4","zoomScale","urlParams","window","initLat","initLon","initZoom","initTime","initState","loc","zoom","homeLat","homeLon","homeZoom","homeState","addRegion","region","deleteDataset","dataset","addDataset","fetchDataForDataset","markDatasetUpdated","ds","setRegionName","newName","trim","existing","loading","geometryInfo","fetchCenterPointDataForDataset","datasetHasSamples","regionHasDatasets","deleteRegion","loaded","useTempoStore","infoColor","__name","setup","__props","root","mapTarget","sidePanelTarget","store","cssVars","rootEl","layout","components","tag","elementRef","registerComponentFactoryFunction","container","element","config","settings","hasHeaders","responsiveMode","content","componentType","draggable","width","resizeWithContainerAutomatically","loadLayout","_component_header_bar","_component_map_with_controls","_component_dataset_controls","ref_key","to","_hoisted_1","_hoisted_2","backgroundColor","startValue","endValue","cmapName","nsteps","cmap","extend","mounted","colorbarGradient","random","triangles","showStartTriangle","showEndTriangle","cssLinearGradientFromCmap","n","colors","co","colorbar","document","querySelector","firstChild","removeChild","div","createElement","className","background","height","appendChild","styleDownTriangle","styleUpTriangle","offsetWidth","offsetHeight","borderLeft","borderRight","borderBottom","borderTop","styleLeftTriangle","styleRightTriangle","styleColorbarChunk","flexGrow","flexShrink","dialogVisible","activator","activatorProps","tooltipTextValue","disabled","showTooltip","elevation","handleKeydown","helpText","tooltipText","event","icons","defaultSet","aliases","sets","mdi","locale","fallback","messages","en","defaultTheme","hide","hideButton","onClick","openDialog","prepend","snackbar","$attrs","role","timeout","actions","tabindex","variant","closeDialog","msg","$nextTick","snackbarMessage","$el","_component_use_clipboard","source","copy","tooltipDisabled","alert","transition","buttonColor","rounded","iconColor","getElementRect","rectPromise","_reject","resolveRectPromise","observer","IntersectionObserver","entries","boundingClientRect","disconnect","observe","useDraggableDialog","dialogSelector","scrimSelector","dragInfo","mousedown","mouseup","mousemove","removeListeners","removeEventListener","setupDraggable","dragging","dragPredicate","target","cursor","closestDialog","closest","button","boundingRect","d","el","mouseStartX","clientX","mouseStartY","clientY","elStartX","left","elStartY","top","overlays","querySelectorAll","oldTransition","margin","position","innerWidth","innerHeight","classList","overlay","display","addEventListener","remove","resizeObserver","ResizeObserver","entry","dialogs","dialog","parseInt","body","newRoot","titleColor","shortTitle","scrim","persistent","modal","__emit","emit","card","showDialog","displayedShortTitle","cardRoot","attrs","updateRoot","close","stopPropagation","replace","isVisible","showErrors","sampleKeyCounts","plot","graph","datumToDate","datum","legendGroups","errorTraces","traceVisible","renderPlot","plotlyData","len","regionColor","dataT","dataV","legendGroup","legendgroup","showlegend","marker","visible","errs","valueLower","valueHigher","low","high","line","fill","paddingFactor","axisMax","yaxis","newPlot","on","traceIndex","curveNumber","trace","group","dataId","currentlyVisible","updateErrorDisplay","restyle","newCounts","oldCounts","different","newData","oldData","selectedTimeRange","draftUserDataset","availableMolecules","o","creationProgress","percent","setDraftSelectionRegion","setDraftSelectionMolecule","setDraftSelectionTimeRange","composeSelection","draft","reset","newRegions","exists","rid","selection","loader","indeterminate","html","highlight","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","href","rel","currentUrl","showChanges","showAboutData","showCredits","touchscreen","supportsTouchscreen","smallSize","smAndDown","mobile","_component_cds_dialog","_component_share_button","src","alt","changes","change","useDateTimeSelector","currentDate","initialTimezone","Intl","DateTimeFormat","resolvedOptions","selectionType","selectedDayOfWeek","selectedTime","instancesBack","timePlusMinus","selectedDays","selectedTimes","hasManualWeekdayStartDate","weekdayStartDateTimestamp","endDate","weekdayStartDate","toISOString","setWeekdayStartTimestamp","dayNames","generateMillisecondRanges","generateWeekdayRanges","generatePatternRanges","generateSingleDateRange","generateDateRangeRanges","parsedTime","baseTimestamp","baseDate","targetDayOfWeek","currentDay","getDay","daysDifference","setDate","getDate","rangeDate","originalDay","originalTime","deduped","startMs","endMs","singleDate","setSingleDateTimestamp","midnightTs","initialParentTs","newCurrentDate","setStartTimestamp","setEndTimestamp","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","defaultStartDate","defaultEndDate","allowedDates","validTimes","currentDateRef","timezoneRef","setStartTimestampInternal","setEndTimestampInternal","weekdayCalendar","startDateCalendar","endDateCalendar","singleDateCalendar","weekdayStartDateObj","startDateObj","endDateObj","singleDateObj","timeOptions","h","padStart","dayOptions","instanceRules","updateCustomRange","currentRanges","handleWeekdayDateChange","closeMenu","handleStartDateChange","handleEndDateChange","handleSingleDateChange","normalizeTimes","normalized","ampmMatch","match","suffix","mm","today","newDate","newTimezone","newDateString","newTs","newTimestamp","row","clearable","teleport","dark","getFullYear","step","placeholder","rules","multiple","chips","hint","getBeginningOfWeek","weekStart","method","errorMethod","includeCalibrationUncertainty","_getZonedDate","getGroupId","groupDate","endsWith","groupDay","floor","utcMidnight","groupData","timeseries","groups","groupId","groupValues","aggregatedValue","standardError","lowers","uppers","newLower","newUpper","sortfoldBinContent","bin","sorted","binPhase","bp","sortedIndices","applySort","rawValues","foldType","_binCount","_binIndex","z","getHours","_binPhase","getMinutes","getSeconds","foldData","binCount","binsRecord","binIndex","numericValues","calibrationErrors","err","publicBins","dispersionMeasure","bins","dataOptions","errorBarStyles","generateHash","string","hash","char","charCodeAt","hashDataset","errorType","normalizeBadValue","nanMean","validValues","filterNulls","filterNullValues","filteredX","filteredY","filteredLower","filteredUpper","errorOptions","symmetric","arrayminus","thickness","dataTraceOptions","hasErrors","traceErrorOptions","clientWidth","_newData","_oldData","deep","dialogOpen","windowOptions","methodOptions","selectedWindow","selectedMethod","useSEM","originalErrorType","aggregatedErrorType","errorTypeItems","originalDataPointCount","aggregatedDataPointCount","aggregatedData","canSave","aggregatedSelection","graphData","opts","selectionSamplesToDataSet","timeSeriesDataToDataSet","selectionToTimeseries","sortedEntries","tsa","tsb","aggValue","updateGraphData","createAggregatedTimeRange","originalRange","updateAggregatedData","timeSeriesData","grouper","TimeSeriesResampler","saveAggregation","cols","md","foldingOptions","selectedFoldType","includeBinPhase","alignToBinCenter","useErrorBars","foldedDataPointCount","foldedData","foldedSelection","foldedTimesSeriesToDataSet","foldedTimeSeries","binIndexa","binIndexb","foldedTimeSeriesRawToDataSet","binContent","sortedBinContent","rv","up","createFoldedTimeRange","TimeSeriesFolder","saveFolding","rawDataset","summaryDataset","folded","raw","plotlyDatasets","saveFolded","scrollable","inheritAttrs","confirmText","minWidth","local","onConfirm","autofocus","plotlyDragPredicate","openPanels","openGraphs","openSelection","tableSelection","createTimeRangeActive","createDatasetActive","datasetRowRefs","sampleErrorID","loadingPointSample","showEditRegionNameDialog","regionBeingEdited","aggregationDataset","showAggregationDialog","openAggregationDialog","handleAggregationSaved","handleDatasetCreated","removeDataset","handleDateTimeRangeSelectionChange","descriptionBase","editRegionName","graphTitle","molTitle","showNO2Graph","no2GraphData","showO3Graph","o3GraphData","showHCHOGraph","hchoGraphData","showfoldedNO2Graph","no2foldedGraphData","validFoldedDatasets","showfoldedO3Graph","o3foldedGraphData","showfoldedHCHOGraph","hchofoldedGraphData","showErrorBands","_component_selection_composer","_component_timeseries_graph","active","opacity","isHovering","ref_for","ripple","lines","striped","bottom","dense","timestepCache","useEsriTimesteps","initialMolecule","updateOnMount","loadingTimesteps","esriTimesteps","updateEsriTimeSteps","_newValues","selectedIndex","reverse","useUtc","dateOnly","hourOnly","formatDate","getTimezoneOffset","year","timestampsComputed","formattedDates","formattedTimes","handleChipClick","radio","calendar","handleEsriTimeSelected","_index","newMol","_component_date_picker","transitions","lerp","spline","u","clamp","cmin","cmax","reversed","redValues","greenValues","blueValues","normalizedVal","useLocationMarker","show","showLocationMarker","locationMarker","addToMap","addTo","setMarker","latlng","lnglat","setLngLat","removeMarker","baseUseSelection","handler","updateListeners","dragPan","disable","scrollZoom","onMousedown","onMouseup","onMousemove","enable","off","mMap","nowActive","getCanvas","newMap","selectionInfo","useRectangleSelection","interactColor","geoJson","rectangleSource","rectangleLayer","startCoords","uuid","lngLat","coordinates","lng","lat","properties","addSource","getSource","addLayer","paint","layer","getLayer","eventCoords","removeLayer","removeSource","setData","createBounds","addRectangleLayer","addPointLayer","regionBounds","pointPadding","fitBounds","bounds","_fly","usePointSelection","paulTolMutedColorblindSafeColors","COLORS","DEG_DEFAULT","PX_DEFAULT","toGeoJSON","radius_deg","pt","radius_px","lon","useMultiMarker","sourceId","layerId","optionsToPaint","fillColor","fillOpacity","outlineColor","addMarkers","clearMarkers","geojson","scale","radius","degreeToPixel","devicePixelRatio","retinaParam","useMap","_showRoads","onReady","addStates","addCoastlines","addLabels","tiles","tileSize","minzoom","maxzoom","moveLayer","setupMap","libreMap","cleanupMap","createMap","_map","attributionControl","addControl","AttributionControl","compact","setView","setCenter","setZoom","getCenter","resetView","centerLonLat","onHome","_centerLonLat","_zoom","_onHome","onAdd","_container","_button","_goHome","bind","_homeIcon","padding","svg","encodeURIComponent","onRemove","parentNode","flyTo","usezoomhome","home","callback","startingCenter","zoomHome","createControl","control","CDSMaplibreHomeTool","NavigationControl","showCompass","newValue","mapID","initial","showRoads","events","__expose","latitude","longitude","showRoadsRef","attachAllEvents","handlers","evt","detachAllEvents","promiseResolve","mapReady","whenMapReady","onMapReady","newLat","newLng","newZoom","getZoom","exposedMapApi","once","useEsriLayer","fetchOnMount","esriLayerId","esriImageSource","opacityRef","noEsriData","loadingEsriTimeSteps","renderOptions","dynamicMapService","onSourceLoad","isSourceLoaded","updateEsriOpacity","updateEsriTimeRange","createImageService","ImageService","addEsriSource","hasEsriSource","nearest","setPaintProperty","updateStretch","vmin","vmax","esriServiceOptions","updateColormap","_timesteps","_value","_newMol","newRange","newColormap","useFieldOfRegard","showFieldOfRegard","usingAugust","fieldOfRegardLayer","fieldOfRegardLayerId","createFoRLayer","clearFoR","updateFieldOfRegard","addFieldOfRegard","innerMap","timestampRef","newSteps","old","dt","getMonth","internalShowFieldOfRegard","onInnerMapReady","exposedApi","listener","contained","horizontal","currentColormap","moleculeLabel","scalePower","p","log10","isFinite","_component_colorbar_horizontal","_component_colorbar","maplibreMap","createSelectionComputed","pointSelectionActive","rectangleSelectionActive","rectangleInfo","pointInfo","showControls","showSamplingPreviewMarkers","playing","playInterval","activateRectangleSelectionMode","activatePointSelectionMode","mapTitle","currentMolecule","thumbLabel","dateObj","hours","getUTCHours","amPm","hourValue","getUTCMinutes","defaultMapboxOptions","types","countries","limit","geocodingInfoForSearchLimited","token","access_token","geocodingInfoForSearch","_err","setLocationFromSearch","onZoomhome","updateURL","stateObj","origin","searchParams","pathname","history","replaceState","onEsriTimestepsLoaded","steps","play","setInterval","pause","clearInterval","rectangleIsDegenerate","createRegion","isRect","newRegion","samplingPreviewMarkers","shape","newVal","tempoDataService","regs","_component_info_button","_component_location_search","_component_icon_button","_component_map_controls","inset","mol","update","binding","visibility","TempoLite","use","vuetify","directive","beforeMount","_vnode","_prevVnode","updated","component","IconButton","FundingAcknowledgement","CreditLogos","LocationSearch","InfoButton","ColorBarHorizontal","SnackbarAlert","ShareButton","CDSDialog","MarqeeAlert","TimeseriesGraph","SelectionComposer","DatasetControls","MapControls","MapWithControls","HeaderBar","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","getter","__esModule","definition","defineProperty","enumerable","globalThis","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}