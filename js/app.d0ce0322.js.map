{"version":3,"file":"js/app.d0ce0322.js","mappings":"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OAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,GAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,GAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,QAAU,QAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,QAAU,SAC1yEE,EAAIjB,EAAOe,EAAe,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,GAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,GAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,GAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,QAAU,QAAU,QAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,QAAU,QAAU,QAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,UACx1EjB,EAAIE,EAAOe,EAAe,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,OAAS,OAAS,OAAS,OAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,OAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAAS,QAA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","sources":["webpack://@cosmicds/tempo-lite/./src/components/LocationSearch.vue?637f","webpack://@cosmicds/tempo-lite/./src/components/LocationSearch.vue","webpack://@cosmicds/tempo-lite/./src/mapbox.ts","webpack://@cosmicds/tempo-lite/./src/components/LocationSearch.vue?99f6","webpack://@cosmicds/tempo-lite/./src/revised_cmap.ts","webpack://@cosmicds/tempo-lite/./src/PreloadImages.ts","webpack://@cosmicds/tempo-lite/./src/changes.ts","webpack://@cosmicds/tempo-lite/./src/composables/useBounds.ts","webpack://@cosmicds/tempo-lite/./src/interestingEvents.ts","webpack://@cosmicds/tempo-lite/./src/components/ListComponent.vue?a935","webpack://@cosmicds/tempo-lite/./src/components/ListComponent.vue","webpack://@cosmicds/tempo-lite/./src/components/ListComponent.vue?12d3","webpack://@cosmicds/tempo-lite/./src/components/UserGuide.vue?d2fe","webpack://@cosmicds/tempo-lite/./src/components/UserGuide.vue","webpack://@cosmicds/tempo-lite/./src/components/UserGuide.vue?3c1b","webpack://@cosmicds/tempo-lite/./src/components/SampleTable.vue?b75a","webpack://@cosmicds/tempo-lite/./src/components/SampleTable.vue","webpack://@cosmicds/tempo-lite/./src/components/SampleTable.vue?1a06","webpack://@cosmicds/tempo-lite/./src/utils/atleast1d.ts","webpack://@cosmicds/tempo-lite/./src/composables/useUniqueTimeSelection.ts","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/useTimezone.ts","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/useDateTimeSelector.ts","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/RangeCard.vue?6dcc","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/RangeCard.vue","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/RangeCard.vue?742b","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/TimelineVisualization.vue?81b9","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/TimelineVisualization.vue","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/TimelineVisualization.vue?851f","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/DateTimeRangeSelection.vue?5777","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/DateTimeRangeSelection.vue","webpack://@cosmicds/tempo-lite/./src/date_time_range_selection/DateTimeRangeSelection.vue?5987","webpack://@cosmicds/tempo-lite/./src/components/TimeChips.vue?2981","webpack://@cosmicds/tempo-lite/./src/components/TimeChips.vue","webpack://@cosmicds/tempo-lite/./src/components/TimeChips.vue?b22d","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useMap.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/MaplibreHomeTool.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useZoomHome.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useImageOverlay.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useFieldOfRegard.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useMarker.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useRectangleSelection.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/utils.ts","webpack://@cosmicds/tempo-lite/./src/composables/maplibre/useMultiMarker.ts","webpack://@cosmicds/tempo-lite/./src/esri/ImageLayerConfig.ts","webpack://@cosmicds/tempo-lite/./src/esri/maplibre/useEsriImageLayer.ts","webpack://@cosmicds/tempo-lite/./src/esri/geometry.ts","webpack://@cosmicds/tempo-lite/./src/esri/services/TempoDataService.ts","webpack://@cosmicds/tempo-lite/./src/TempoLite.vue?f66b","webpack://@cosmicds/tempo-lite/./src/TempoLite.vue","webpack://@cosmicds/tempo-lite/./src/TempoLite.vue?8f1a","webpack://@cosmicds/tempo-lite/./src/components/ColorBar.vue?94c2","webpack://@cosmicds/tempo-lite/./src/components/ColorBar.vue","webpack://@cosmicds/tempo-lite/./src/components/ColorBar.vue?632f","webpack://@cosmicds/tempo-lite/./src/components/ColorBarHorizontal.vue?20c5","webpack://@cosmicds/tempo-lite/./src/components/ColorBarHorizontal.vue","webpack://@cosmicds/tempo-lite/./src/components/ColorBarHorizontal.vue?6f32","webpack://@cosmicds/tempo-lite/./src/components/InfoButton.vue?e04c","webpack://@cosmicds/tempo-lite/./src/components/InfoButton.vue","webpack://@cosmicds/tempo-lite/./src/components/InfoButton.vue?de13","webpack://@cosmicds/tempo-lite/./plugins/vuetify.ts","webpack://@cosmicds/tempo-lite/./src/components/SnackbarAlert.vue?dde0","webpack://@cosmicds/tempo-lite/./src/components/SnackbarAlert.vue","webpack://@cosmicds/tempo-lite/./src/components/SnackbarAlert.vue?3716","webpack://@cosmicds/tempo-lite/./src/components/ShareButton.vue?f44e","webpack://@cosmicds/tempo-lite/./src/components/ShareButton.vue","webpack://@cosmicds/tempo-lite/./src/components/ShareButton.vue?a5b6","webpack://@cosmicds/tempo-lite/./src/composables/useDraggableDialog.ts","webpack://@cosmicds/tempo-lite/./src/components/CDSDialog.vue?f933","webpack://@cosmicds/tempo-lite/./src/components/CDSDialog.vue","webpack://@cosmicds/tempo-lite/./src/components/CDSDialog.vue?51b6","webpack://@cosmicds/tempo-lite/./src/components/MarqeeAlert.vue?b891","webpack://@cosmicds/tempo-lite/./src/components/MarqeeAlert.vue","webpack://@cosmicds/tempo-lite/./src/components/MarqeeAlert.vue?852b","webpack://@cosmicds/tempo-lite/./src/components/TimeseriesGraph.vue?a88f","webpack://@cosmicds/tempo-lite/./src/components/TimeseriesGraph.vue","webpack://@cosmicds/tempo-lite/./src/components/TimeseriesGraph.vue?a5cc","webpack://@cosmicds/tempo-lite/./src/main.ts","webpack://@cosmicds/tempo-lite/webpack/bootstrap","webpack://@cosmicds/tempo-lite/webpack/runtime/chunk loaded","webpack://@cosmicds/tempo-lite/webpack/runtime/compat get default export","webpack://@cosmicds/tempo-lite/webpack/runtime/define property getters","webpack://@cosmicds/tempo-lite/webpack/runtime/global","webpack://@cosmicds/tempo-lite/webpack/runtime/hasOwnProperty shorthand","webpack://@cosmicds/tempo-lite/webpack/runtime/make namespace object","webpack://@cosmicds/tempo-lite/webpack/runtime/publicPath","webpack://@cosmicds/tempo-lite/webpack/runtime/jsonp chunk loading","webpack://@cosmicds/tempo-lite/webpack/startup"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderSlot as _renderSlot, vShow as _vShow, withDirectives as _withDirectives, withKeys as _withKeys, normalizeClass as _normalizeClass, withCtx as _withCtx, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\")!\n  const _component_v_combobox = _resolveComponent(\"v-combobox\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"forward-geocoding-container\",\n    style: _normalizeStyle(_ctx.cssStyles)\n  }, [\n    _withDirectives(_createVNode(_component_v_combobox, {\n      class: _normalizeClass(['forward-geocoding-input', _ctx.locationJustUpdated ? 'geocode-success' : '', _ctx.small ? 'forward-geocoding-input-small' : '']),\n      modelValue: _ctx.searchText,\n      \"onUpdate:modelValue\": [\n        _cache[0] || (_cache[0] = ($event: any) => ((_ctx.searchText) = $event)),\n        _ctx.setLocationFromSearchFeature\n      ],\n      items: _ctx.searchResults ? _ctx.searchResults.features : [],\n      \"item-title\": _ctx.textForMapboxFeature,\n      \"bg-color\": _ctx.bgColor,\n      label: \"Enter city or zip\",\n      density: _ctx.small ? 'compact' : 'default',\n      \"hide-details\": \"\",\n      solo: \"\",\n      color: _ctx.accentColor,\n      onInput: () => {},\n      onKeydown: [\n        _withKeys(_ctx.performForwardGeocodingSearch, [\"enter\"]),\n        _cache[1] || (_cache[1] = _withKeys(($event: any) => (_ctx.searchResults = null), [\"esc\"]))\n      ],\n      \"error-messages\": _ctx.searchErrorMessage,\n      \"onClick:append\": _ctx.focusCombobox,\n      \"onUpdate:focused\": _cache[2] || (_cache[2] = ($event: any) => (_ctx.onFocusChange($event))),\n      ref: \"searchInput\",\n      menu: _ctx.menuOpen,\n      \"onUpdate:menu\": _cache[3] || (_cache[3] = ($event: any) => (_ctx.menuOpen = $event))\n    }, {\n      append: _withCtx(() => [\n        _createVNode(_component_font_awesome_icon, {\n          class: \"geocoding-search-icon\",\n          icon: \"magnifying-glass\",\n          size: _ctx.searchOpen ? 'xl' : _ctx.buttonSize,\n          color: \"gray\",\n          onClick: _ctx.toggleSearch\n        }, null, 8, [\"size\", \"onClick\"]),\n        _renderSlot(_ctx.$slots, \"append-icon\", { class: \"geocode-icon\" }),\n        _withDirectives(_createVNode(_component_font_awesome_icon, {\n          class: \"geocoding-close-icon\",\n          icon: \"circle-xmark\",\n          size: _ctx.searchOpen ? 'xl' : '1x',\n          color: \"gray\",\n          onClick: _ctx.closeSearch\n        }, null, 8, [\"size\", \"onClick\"]), [\n          [_vShow, _ctx.searchOpen && !_ctx.stayOpen]\n        ])\n      ]),\n      _: 3\n    }, 8, [\"class\", \"modelValue\", \"items\", \"item-title\", \"bg-color\", \"density\", \"color\", \"onUpdate:modelValue\", \"onKeydown\", \"error-messages\", \"onClick:append\", \"menu\"]), [\n      [_vShow, _ctx.searchOpen]\n    ]),\n    _withDirectives(_createVNode(_component_font_awesome_icon, {\n      class: \"geocoding-search-icon\",\n      icon: \"magnifying-glass\",\n      size: _ctx.searchOpen ? 'xl' : _ctx.buttonSize,\n      color: \"gray\",\n      onClick: _withModifiers(_ctx.toggleSearch, [\"prevent\"])\n    }, null, 8, [\"size\", \"onClick\"]), [\n      [_vShow, !_ctx.searchOpen && !_ctx.stayOpen]\n    ])\n  ], 4))\n}","<template>\n  <div class=\"forward-geocoding-container\" :style=\"cssStyles\">\n    <v-combobox\n      v-show=\"searchOpen\"\n      :class=\"['forward-geocoding-input', locationJustUpdated ? 'geocode-success' : '', small ? 'forward-geocoding-input-small' : '']\"\n      v-model=\"searchText\"\n      :items=\"searchResults ? searchResults.features : []\"\n      :item-title=\"textForMapboxFeature\"\n      :bg-color=\"bgColor\"\n      label=\"Enter city or zip\"\n      :density=\"small ? 'compact' : 'default'\"\n      hide-details\n      solo\n      :color=\"accentColor\"\n      @input=\"() => {}\"\n      @update:model-value=\"setLocationFromSearchFeature\"\n      @keydown.enter=\"performForwardGeocodingSearch\"\n      @keydown.esc=\"searchResults = null\"\n      :error-messages=\"searchErrorMessage\"\n      @click:append=\"focusCombobox\"\n      @update:focused=\"onFocusChange($event)\"\n      ref=\"searchInput\"\n      :menu=\"menuOpen\"\n      @update:menu=\"menuOpen = $event\"\n    >\n    <template v-slot:append>\n      <font-awesome-icon\n        class=\"geocoding-search-icon\"\n        icon=\"magnifying-glass\"\n        :size=\"searchOpen ? 'xl' : buttonSize\"\n        color=\"gray\"\n        @click=\"toggleSearch\"\n      ></font-awesome-icon>\n\n      <slot name=\"append-icon\" class=\"geocode-icon\"></slot>\n\n      <font-awesome-icon\n        class=\"geocoding-close-icon\"\n        v-show=\"searchOpen && !stayOpen\"\n        icon=\"circle-xmark\"\n        :size=\"searchOpen ? 'xl' : '1x'\"\n        color=\"gray\"\n        @click=\"closeSearch\"\n      ></font-awesome-icon>\n    </template>\n  </v-combobox>\n  <font-awesome-icon\n      v-show=\"!searchOpen && !stayOpen\"\n      class=\"geocoding-search-icon\"\n      icon=\"magnifying-glass\"\n      :size=\"searchOpen ? 'xl' : buttonSize\"\n      color=\"gray\"\n      @click.prevent=\"toggleSearch\"\n    ></font-awesome-icon>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\nimport { MapBoxFeatureCollection, MapBoxFeature, textForMapboxFeature } from \"../mapbox\";\n\ntype SearchProvider = (searchText: string) => Promise<MapBoxFeatureCollection | null>;\n\nexport default defineComponent({\n  name: 'LocationSearch',\n\n  emits: ['update:modelValue', 'set-location', 'error', 'geolocate'],\n\n  props: {\n    searchProvider: {\n      type: Function as PropType<SearchProvider>,\n      default: () => {}\n    },\n    modelValue: {\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    stayOpen: {\n      type: Boolean,\n      default: false,\n    },\n    accentColor: {\n      type: String,\n      default: 'white',\n    },\n    small: {\n      type: Boolean,\n      default: false,\n    },\n    theme: {\n      type: String,\n      default: 'dark',\n    },\n    buttonSize: {\n      type: String,\n      default: '1x',\n    },\n    \n    bgColor: {\n      type: String,\n      default: 'white',\n    },\n    \n    persistSelected: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  \n  data() {\n    return {\n      searchOpen: this.modelValue || this.stayOpen,\n      searchText: null as string | null,\n      searchResults: null as MapBoxFeatureCollection | null,\n      searchErrorMessage: null as string | null,\n      locationJustUpdated: false,\n      locationUpdatedText: 'Location updated',\n      comboFocused: false,\n      menuOpen: false,\n    };\n  },\n\n  computed: {\n    cssStyles() {\n      return {\n        '--accent-color': this.accentColor,\n        '--bg-color': this.bgColor,\n        '--fg-container-padding': this.searchOpen ? (this.small ? '0px 5px 0px 0px' : '5px 10px 12px 10px') : '0px',\n        '--border-radius': this.searchOpen ? '7px' : '20px',\n      };\n    },\n  },\n  \n  \n  \n\n  \n  methods: {\n    performForwardGeocodingSearch() {\n      console.log('performForwardGeocodingSearch', this.searchText);\n      if (this.searchText === null || this.searchText.length < 3) {\n        return;\n      }\n      this.searchProvider(this.searchText).then((info) => {\n        if (info !== null && info.features?.length === 1) {\n          this.setLocationFromSearchFeature(info.features[0]);\n        } else if (info !== null && info.features?.length == 0) {\n          this.searchErrorMessage = \"No matching places were found\";\n          console.log('No matching places were found');\n          this.$emit('error', this.searchErrorMessage);\n        } else {\n          this.searchResults = info;\n        }\n      });\n    },\n    \n    textForMapboxFeature(feature: MapBoxFeature) {\n      if (typeof feature === 'string') {\n        return;\n      }\n      return textForMapboxFeature(feature);\n    },\n    \n       \n    onFocusChange(focused: boolean) {\n      console.log('focus change', focused);\n      this.comboFocused = focused;\n      // if (!focused && this.searchResults === null) {\n      //   this.searchText = null;\n      // }\n    },\n    \n    blurCombobox() {\n      console.log('blurring');\n      const input = this.$refs.searchInput as HTMLInputElement;\n      console.log(input);\n      input.blur();\n    },\n    \n    focusCombobox() {\n      const input = this.$refs.searchInput as HTMLInputElement;\n      input.focus();\n    },\n    \n    setLocationFromSearchFeature(feature: MapBoxFeature | string) {\n      // if it's a string do nothing\n      if (typeof feature === 'string') {\n        return;\n      }\n      console.log('setting location');\n      if (feature === null) { return; }\n      const name = this.textForMapboxFeature(feature);\n      if (name !== undefined) {\n        this.locationUpdatedText = name;\n      } else {\n        this.locationUpdatedText = feature.place_name.split(',').slice(0, 2).join(', ');\n      }\n      \n      // blur (defocus) the v-combobox\n      this.blurCombobox();\n      this.timedJustUpdatedLocation();\n      this.clearSearchData();\n      this.$emit('set-location', [feature, this.locationUpdatedText]);\n    },\n\n    toggleSearch() {\n      console.log('toggleSearch', this.searchOpen, this.searchText);\n      if (this.searchOpen) {\n        this.performForwardGeocodingSearch();\n        // this.$nextTick(() => this.focusCombobox());\n        this.menuOpen = true;\n        this.focusCombobox();\n      } else {\n        this.searchOpen = true;\n      }\n    },\n\n    closeSearch() {\n      this.searchOpen = false;\n      this.clearSearchData();\n    },\n\n    clearSearchData() {\n      this.searchResults = null;\n      this.searchText = null;\n      this.searchErrorMessage = null;\n    },\n    \n    timedJustUpdatedLocation() {\n      this.locationJustUpdated = true;\n      setTimeout(() => {\n        this.locationJustUpdated = this.persistSelected;\n      }, 5000);\n    },\n  },\n  \n  watch: {\n    \n    modelValue(value: boolean) {\n      this.searchOpen = value;\n    },\n    \n    searchOpen(value: boolean) {\n      this.$emit('update:modelValue', value);\n    },\n    \n    searchText(text: string | null) {\n      if (this.searchErrorMessage) {\n        this.searchErrorMessage = null;\n      }\n      if (!text || text.length === 0) {\n        this.searchResults = null;\n      }\n    },\n  }\n  \n});\n\n</script>\n\n\n<style lang=\"less\">\n\n// https://vue-loader.vuejs.org/guide/scoped-css.html#deep-selectors\n.forward-geocoding-container {\n  --border-radius: 20px;\n  position: relative;\n  color: var(--accent-color);\n  background-color: rgba(255, 255, 255, 0.4);\n  border-radius: var(--border-radius);\n  margin-left: 0.25rem;\n  margin-bottom: 0.25rem;\n  padding: var(--fg-container-padding);\n  backdrop-filter: blur(2px);\n\n  .v-field {\n    background-color: transparent !important;\n  }\n\n  // there are two separate labels, we want the 2nd one to be large. the first is the small floating label\n  .v-field > .v-field__field > .v-label.v-field-label:nth-child(2) {\n    font-size: 1.2rem;\n  }\n\n  // .v-input--horizontal .v-input__append {\n  //   margin-inline-start: 0;\n  // }\n  \n  .v-text-field {\n    min-width: 150px;\n  }\n  \n  .v-field--variant-filled.v-field--has-background .v-field__overlay {\n    border-top-right-radius: 0px;\n}\n\n  .forward-geocoding-input > .v-input__control > .v-field {\n    border-radius: var(--border-radius);\n  }\n  \n  .forward-geocoding-input.geocode-success label {\n    opacity: 1;\n  }\n  \n  .forward-geocoding-input-small label {\n    // .v-label sets default to 1rem\n    font-size: 0.8rem;\n  }\n\n  .forward-geocoding-input-row {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    gap: 10px;\n    align-items: center;\n  }\n  \n  .geocoding-search-icon {\n    padding-inline: calc(0.3 * var(--default-line-height));\n    padding-block: calc(0.4 * var(--default-line-height));\n  }\n\n  .geocoding-search-icon:hover, #geocoding-close-icon:hover {\n    cursor: pointer;\n  }\n\n}\n</style>\n","export interface MapBoxContextItem {\n  id: string;\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  mapbox_id: string;\n  text: string;\n  wikidata: string;\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  short_code?: string;\n}\n\n// The field names here come from MapBox\nexport interface MapBoxFeature {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  place_type: string[];\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  place_name: string;\n  text?: string;\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  properties: { short_code: string; };\n  center: [number, number];\n  context: MapBoxContextItem[];\n}\n\nexport interface MapBoxFeatureCollection {\n  type: \"FeatureCollection\";\n  features: MapBoxFeature[];\n}\n\n// TODO: Add more options as we need them\n// See https://docs.mapbox.com/api/search/geocoding-v6/#forward-geocoding-with-search-text-input\nexport interface MapBoxForwardGeocodingOptions {\n  // For countries, use the ISO 3166-1 alpha-2 country codes:\n  // https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2\n  countries?: string[];\n  types?: string[];\n  limit?: number;\n}\n\nconst RELEVANT_FEATURE_TYPES = [\"postcode\", \"place\", \"region\", \"country\"];\nconst NA_COUNTRIES = [\"United States\", \"Canada\", \"Mexico\"];\nconst NA_ABBREVIATIONS = [\"US-\", \"CA-\", \"MX-\"];\n\nexport function findBestFeature(collection: MapBoxFeatureCollection): MapBoxFeature | null {\n  const relevantFeatures = collection.features.filter(feature => RELEVANT_FEATURE_TYPES.some(type => feature.place_type.includes(type)));\n  const placeFeature = relevantFeatures.find(feature => feature.place_type.includes(\"place\")) ?? (relevantFeatures.find(feature => feature.place_type.includes(\"postcode\")) ?? undefined);\n  if (placeFeature !== undefined) {\n    return placeFeature;\n  }\n  const regionFeature = relevantFeatures.find(feature => feature.place_type.includes(\"region\"));\n  if (regionFeature !== undefined) {\n    return regionFeature;\n  }\n  const countryFeature = relevantFeatures.find(feature => feature.place_type.includes(\"country\"));\n  if (countryFeature !== undefined) {\n    return countryFeature;\n  }\n  return null;\n}\n\nexport function textForMapboxFeature(feature: MapBoxFeature): string {\n  const pieces: string[] = [];\n  if (feature.text) {\n    pieces.push(feature.text);\n  }\n  feature.context.forEach(item => {\n    const itemType = item.id.split(\".\")[0];\n    if (!RELEVANT_FEATURE_TYPES.includes(itemType)) {\n      return;\n    }\n    let text = null as string | null;\n    const shortCode = item.short_code;\n    if (itemType === \"region\" && shortCode != null) {\n      if (NA_ABBREVIATIONS.some(abbr => shortCode.startsWith(abbr))) {\n        text = shortCode.substring(3);\n      }\n    } else if (itemType === \"country\") {\n      const itemText = item.text;\n      if (!NA_COUNTRIES.includes(itemText)) {\n        text = itemText; \n      }\n    }\n    if (text !== null) {\n      pieces.push(text);\n    }\n  });\n  return pieces.join(\", \");\n}\n\nexport function textForMapboxResults(results: MapBoxFeatureCollection): string {\n  const feature = findBestFeature(results);\n  return feature !== null ? textForMapboxFeature(feature) : \"\";\n}\n\nexport async function textForLocation(longitudeDeg: number, latitudeDeg: number): Promise<string> {\n  const accessToken = process.env.VUE_APP_MAPBOX_ACCESS_TOKEN;\n  const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${longitudeDeg},${latitudeDeg}.json?access_token=${accessToken}`;\n  return fetch(url)\n    .then(response => response.json())\n    .then((result: MapBoxFeatureCollection) => {\n      if (result.features.length === 0) {\n        const ns = latitudeDeg >= 0 ? 'N' : 'S';\n        const ew = longitudeDeg >= 0 ? 'E' : 'W';\n        const lat = Math.abs(latitudeDeg).toFixed(3);\n        const lon = Math.abs(longitudeDeg).toFixed(3);\n        return `${lat}° ${ns}, ${lon}° ${ew}`;\n      }\n      return textForMapboxResults(result);\n    });\n}\n\nexport async function geocodingInfoForSearch(searchText: string, options?: MapBoxForwardGeocodingOptions): Promise<MapBoxFeatureCollection> {\n  const accessToken = process.env.VUE_APP_MAPBOX_ACCESS_TOKEN;\n  const search = new URLSearchParams();\n  search.set(\"access_token\", accessToken ?? \"\");\n  const types = (options?.types ?? [\"place\", \"postcode\"]).join(\",\");\n  search.set(\"types\", types);\n  if (options?.countries) {\n    search.set(\"country\", options.countries.join(\",\"));\n  }\n  search.set(\"limit\", options?.limit?.toString() ?? \"5\");\n  const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${searchText}.json?${search.toString()}`;\n  return fetch(url).then(response => response.json());\n}\n","import { render } from \"./LocationSearch.vue?vue&type=template&id=624ae7b9&ts=true\"\nimport script from \"./LocationSearch.vue?vue&type=script&lang=ts\"\nexport * from \"./LocationSearch.vue?vue&type=script&lang=ts\"\n\nimport \"./LocationSearch.vue?vue&type=style&index=0&id=624ae7b9&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","function lerp(a: number, b: number, t: number): number {\n  return a + (b - a) * t;\n}\n\n// linear spline\nfunction spline( t: number, ...values: number[]): number {\n  if (t <= 0) return values[0];\n  if (t >= 1) return values[values.length - 1];\n  const n = values.length - 1;\n  const i = Math.floor(t * n);\n  const u = t * n - i;\n  return lerp(values[i], values[i + 1], u);\n}\n\nfunction clamp(x: number, min: number, max: number): number {\n  return Math.min(Math.max(x, min), max);\n}\n\n\nexport function cbarNO2(cbar_min: number, cbar_max: number, cur_val: number): [number, number, number]\n{\n  const normalizedVal = clamp( (cur_val-cbar_min)/(cbar_max-cbar_min),0,1);\n  const r = spline(normalizedVal, 0.231373,0.227451,0.223529,0.215686,0.211765,0.211765,0.207843,0.207843,0.211765,0.211765,0.219608,0.227451,0.235294,0.247059,0.258824,0.270588,0.286275,0.298039,0.317647,0.329412,0.345098,0.364706,0.376471,0.396078,0.411765,0.427451,0.450980,0.466667,0.486275,0.501961,0.521569,0.541176,0.556863,0.580392,0.596078,0.615686,0.635294,0.650980,0.674510,0.690196,0.705882,0.725490,0.741176,0.760784,0.772549,0.788235,0.803922,0.819608,0.835294,0.847059,0.858824,0.874510,0.886275,0.898039,0.905882,0.917647,0.925490,0.933333,0.945098,0.949020,0.956863,0.964706,0.968627,0.972549,0.976471,0.980392,0.984314,0.988235,0.992157,0.992157,0.996078,0.996078,0.996078,1.00000,1.00000,1.00000,1.00000,1.00000,1.00000,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.992157,0.992157,0.992157,0.988235,0.988235,0.984314,0.980392,0.976471,0.972549,0.964706,0.960784,0.952941,0.949020,0.941176,0.937255,0.929412,0.925490,0.917647,0.909804,0.905882,0.898039,0.890196,0.882353,0.874510,0.870588,0.858824,0.850980,0.847059,0.835294,0.827451,0.819608,0.811765,0.803922,0.792157,0.784314,0.772549,0.764706,0.756863,0.745098,0.737255,0.725490,0.713726,0.705882,0.694118,0.686275,0.674510,0.662745,0.654902,0.639216,0.631373,0.619608,0.607843,0.600000,0.584314,0.576471,0.564706,0.552941,0.541176,0.529412,0.521569,0.509804,0.501961,0.490196,0.478431,0.470588,0.462745,0.450980,0.443137,0.435294,0.427451,0.415686,0.407843,0.400000,0.388235,0.380392,0.372549,0.364706,0.356863,0.345098,0.337255,0.329412,0.321569,0.313726,0.301961,0.294118,0.286275,0.278431,0.266667,0.258824,0.250980,0.239216,0.231373,0.223529,0.215686,0.207843,0.196078,0.188235,0.180392,0.172549,0.164706,0.156863,0.149020,0.145098,0.137255,0.133333,0.125490,0.121569,0.117647,0.113725,0.109804,0.105882,0.101961,0.101961,0.0980392,0.0941176,0.0941176,0.0901961,0.0901961,0.0862745,0.0823529,0.0823529,0.0784314,0.0745098,0.0745098,0.0705882,0.0666667,0.0666667,0.0627451,0.0627451,0.0588235,0.0549020,0.0549020,0.0509804,0.0509804,0.0470588,0.0431373,0.0431373,0.0392157,0.0392157,0.0352941,0.0313726,0.0313726,0.0313726,0.0274510,0.0274510);\n  const g = spline(normalizedVal, 0.462745,0.470588,0.474510,0.486275,0.494118,0.501961,0.517647,0.529412,0.541176,0.552941,0.564706,0.580392,0.592157,0.607843,0.623529,0.635294,0.650980,0.662745,0.674510,0.686275,0.698039,0.709804,0.721569,0.733333,0.741176,0.752941,0.760784,0.768627,0.780392,0.788235,0.792157,0.800000,0.807843,0.815686,0.823529,0.827451,0.835294,0.839216,0.847059,0.854902,0.858824,0.866667,0.870588,0.878431,0.882353,0.886275,0.894118,0.901961,0.905882,0.913725,0.917647,0.925490,0.929412,0.937255,0.941176,0.945098,0.952941,0.956863,0.960784,0.964706,0.968627,0.972549,0.976471,0.976471,0.980392,0.980392,0.980392,0.980392,0.976471,0.976471,0.972549,0.968627,0.964706,0.960784,0.952941,0.949020,0.941176,0.937255,0.929412,0.921569,0.913725,0.905882,0.898039,0.890196,0.878431,0.870588,0.862745,0.850980,0.843137,0.831373,0.823529,0.811765,0.803922,0.792157,0.780392,0.772549,0.756863,0.749020,0.733333,0.721569,0.709804,0.698039,0.686275,0.670588,0.654902,0.643137,0.627451,0.615686,0.600000,0.584314,0.572549,0.556863,0.545098,0.529412,0.517647,0.505882,0.494118,0.482353,0.466667,0.458824,0.447059,0.435294,0.427451,0.415686,0.407843,0.396078,0.388235,0.376471,0.368627,0.356863,0.349020,0.337255,0.329412,0.321569,0.309804,0.301961,0.294118,0.290196,0.282353,0.274510,0.270588,0.262745,0.258824,0.254902,0.250980,0.247059,0.239216,0.235294,0.231373,0.227451,0.223529,0.219608,0.215686,0.211765,0.207843,0.203922,0.200000,0.196078,0.192157,0.188235,0.184314,0.180392,0.176471,0.172549,0.168627,0.164706,0.160784,0.156863,0.152941,0.149020,0.145098,0.141176,0.141176,0.137255,0.133333,0.129412,0.125490,0.121569,0.117647,0.113725,0.109804,0.105882,0.105882,0.101961,0.0980392,0.0941176,0.0901961,0.0862745,0.0823529,0.0823529,0.0784314,0.0745098,0.0745098,0.0705882,0.0705882,0.0705882,0.0666667,0.0666667,0.0666667,0.0666667,0.0666667,0.0666667,0.0666667,0.0666667,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0588235,0.0588235,0.0588235,0.0588235,0.0549020,0.0549020,0.0549020,0.0509804,0.0509804,0.0509804,0.0509804,0.0470588,0.0470588,0.0470588,0.0431373,0.0431373,0.0431373,0.0392157,0.0392157,0.0392157,0.0352941,0.0352941,0.0352941,0.0352941,0.0313726,0.0313726,0.0313726,0.0274510,0.0274510,0.0274510,0.0235294,0.0235294,0.0235294,0.0235294,0.0196078,0.0196078,0.0196078,0.0156863,0.0156863,0.0156863);\n  const b = spline(normalizedVal, 0.776471,0.776471,0.776471,0.776471,0.776471,0.776471,0.776471,0.772549,0.772549,0.768627,0.764706,0.760784,0.756863,0.749020,0.745098,0.737255,0.733333,0.725490,0.717647,0.713726,0.709804,0.701961,0.698039,0.690196,0.686275,0.686275,0.682353,0.678431,0.678431,0.674510,0.674510,0.674510,0.674510,0.674510,0.674510,0.670588,0.670588,0.666667,0.662745,0.662745,0.658824,0.654902,0.650980,0.643137,0.639216,0.635294,0.631373,0.631373,0.627451,0.627451,0.627451,0.627451,0.627451,0.631373,0.639216,0.643137,0.650980,0.658824,0.670588,0.678431,0.686275,0.698039,0.705882,0.717647,0.725490,0.729412,0.737255,0.741176,0.745098,0.745098,0.741176,0.737255,0.733333,0.725490,0.717647,0.709804,0.694118,0.686275,0.670588,0.654902,0.643137,0.623529,0.611765,0.592157,0.576471,0.564706,0.549020,0.533333,0.517647,0.505882,0.498039,0.482353,0.474510,0.462745,0.450980,0.443137,0.431373,0.423529,0.411765,0.403922,0.392157,0.384314,0.376471,0.364706,0.356863,0.349020,0.337255,0.333333,0.325490,0.321569,0.317647,0.313726,0.313726,0.313726,0.313726,0.317647,0.321569,0.325490,0.329412,0.337255,0.341176,0.349020,0.352941,0.360784,0.364706,0.368627,0.376471,0.380392,0.384314,0.388235,0.392157,0.396078,0.400000,0.400000,0.403922,0.407843,0.411765,0.415686,0.419608,0.423529,0.423529,0.431373,0.431373,0.435294,0.439216,0.443137,0.447059,0.450980,0.454902,0.458824,0.462745,0.466667,0.470588,0.474510,0.474510,0.478431,0.482353,0.482353,0.486275,0.486275,0.490196,0.490196,0.490196,0.494118,0.494118,0.494118,0.498039,0.498039,0.498039,0.501961,0.501961,0.501961,0.501961,0.501961,0.501961,0.501961,0.501961,0.498039,0.498039,0.498039,0.498039,0.494118,0.494118,0.494118,0.490196,0.490196,0.490196,0.486275,0.486275,0.482353,0.478431,0.474510,0.470588,0.466667,0.462745,0.454902,0.450980,0.443137,0.435294,0.427451,0.419608,0.411765,0.403922,0.396078,0.384314,0.376471,0.368627,0.360784,0.352941,0.341176,0.333333,0.325490,0.317647,0.309804,0.301961,0.294118,0.286275,0.282353,0.274510,0.266667,0.262745,0.254902,0.247059,0.243137,0.235294,0.227451,0.223529,0.215686,0.211765,0.203922,0.196078,0.192157,0.184314,0.180392,0.172549,0.164706,0.156863,0.152941,0.145098,0.141176,0.133333,0.125490,0.121569,0.113725,0.109804,0.101961,0.0941176,0.0901961,0.0862745,0.0784314,0.0745098,0.0666667,0.0627451,0.0588235,0.0549020,0.0509804);\n  return [Math.round(r*255),Math.round(g*255),Math.round(b*255)];\n}\n\n\n\n\n\n// extended colormap\nexport function cbarNO2ColorsRevised2023(cbar_min: number, cbar_max: number, cur_val: number): [number, number, number]\n{\n  const normalizedVal = clamp( (cur_val-cbar_min)/(cbar_max-cbar_min),0,1);\n  const r = spline(normalizedVal, 0.231373,0.223529,0.215686,0.211765,0.207843,0.207843,0.211765,0.223529,0.235294,0.250980,0.270588,0.294118,0.317647,0.337255,0.364706,0.384314,0.411765,0.439216,0.466667,0.494118,0.521569,0.549020,0.580392,0.603922,0.635294,0.662745,0.690196,0.717647,0.741176,0.768627,0.788235,0.811765,0.835294,0.854902,0.874510,0.890196,0.905882,0.921569,0.933333,0.949020,0.956863,0.964706,0.972549,0.980392,0.984314,0.988235,0.992157,0.996078,0.996078,1.00000,1.00000,1.00000,1.00000,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.996078,0.992157,0.992157,0.988235,0.984314,0.980392,0.972549,0.964706,0.956863,0.949020,0.941176,0.929412,0.921569,0.913725,0.909804,0.905882,0.898039,0.894118,0.890196,0.882353,0.878431,0.870588,0.866667,0.862745,0.854902,0.850980,0.843137,0.839216,0.831373,0.823529,0.819608,0.811765,0.803922,0.796078,0.792157,0.784314,0.776471,0.768627,0.760784,0.756863,0.749020,0.741176,0.733333,0.725490,0.721569,0.709804,0.705882,0.698039,0.686275,0.682353,0.674510,0.662745,0.654902,0.647059,0.639216,0.631373,0.623529,0.615686,0.603922,0.600000,0.592157,0.580392,0.572549,0.564706,0.556863,0.549020,0.541176,0.533333,0.525490,0.517647,0.509804,0.501961,0.494118,0.486275,0.478431,0.470588,0.466667,0.458824,0.450980,0.443137,0.439216,0.431373,0.423529,0.419608,0.411765,0.403922,0.396078,0.392157,0.384314,0.376471,0.372549,0.364706,0.356863,0.352941,0.345098,0.337255,0.333333,0.325490,0.317647,0.313726,0.305882,0.301961,0.294118,0.286275,0.282353,0.270588,0.266667,0.258824,0.250980,0.247059,0.239216,0.235294,0.227451,0.219608,0.215686,0.207843,0.200000,0.196078,0.188235,0.180392,0.176471,0.172549,0.164706,0.156863,0.152941,0.145098,0.141176,0.137255,0.133333,0.129412,0.125490,0.121569,0.117647,0.113725,0.113725,0.109804,0.105882,0.105882,0.101961,0.101961,0.0980392,0.0980392,0.0941176,0.0941176,0.0901961,0.0901961,0.0862745,0.0862745,0.0823529,0.0823529,0.0823529,0.0784314,0.0784314,0.0745098,0.0745098,0.0705882,0.0705882,0.0666667,0.0666667,0.0627451,0.0627451,0.0627451,0.0588235,0.0588235,0.0549020,0.0549020,0.0509804,0.0509804,0.0470588,0.0470588,0.0431373,0.0431373,0.0392157,0.0392157,0.0392157,0.0352941,0.0352941,0.0313726,0.0313726,0.0313726,0.0274510,0.0274510,0.0274510);\n  const g = spline(normalizedVal, 0.462745,0.474510,0.486275,0.498039,0.517647,0.533333,0.552941,0.576471,0.592157,0.615686,0.635294,0.654902,0.674510,0.694118,0.709804,0.725490,0.741176,0.756863,0.768627,0.784314,0.792157,0.803922,0.815686,0.823529,0.835294,0.843137,0.854902,0.862745,0.870588,0.878431,0.886275,0.898039,0.905882,0.913725,0.925490,0.933333,0.941176,0.949020,0.956863,0.964706,0.968627,0.972549,0.976471,0.980392,0.980392,0.980392,0.976471,0.968627,0.964706,0.956863,0.949020,0.941176,0.929412,0.917647,0.905882,0.894118,0.878431,0.866667,0.850980,0.835294,0.823529,0.807843,0.792157,0.776471,0.756863,0.741176,0.721569,0.701961,0.686275,0.662745,0.643137,0.619608,0.600000,0.580392,0.556863,0.537255,0.517647,0.498039,0.482353,0.462745,0.447059,0.431373,0.415686,0.403922,0.388235,0.372549,0.364706,0.356863,0.349020,0.341176,0.337255,0.329412,0.321569,0.313726,0.305882,0.301961,0.298039,0.290196,0.286275,0.282353,0.278431,0.270588,0.266667,0.262745,0.258824,0.254902,0.250980,0.250980,0.247059,0.243137,0.239216,0.235294,0.231373,0.231373,0.227451,0.223529,0.219608,0.219608,0.215686,0.211765,0.207843,0.203922,0.203922,0.200000,0.196078,0.192157,0.192157,0.188235,0.184314,0.180392,0.180392,0.176471,0.172549,0.172549,0.168627,0.164706,0.160784,0.160784,0.156863,0.152941,0.152941,0.149020,0.145098,0.141176,0.141176,0.137255,0.133333,0.133333,0.129412,0.125490,0.125490,0.121569,0.117647,0.117647,0.113725,0.109804,0.109804,0.105882,0.101961,0.0980392,0.0980392,0.0941176,0.0901961,0.0901961,0.0862745,0.0862745,0.0823529,0.0823529,0.0784314,0.0784314,0.0745098,0.0745098,0.0705882,0.0705882,0.0705882,0.0705882,0.0666667,0.0666667,0.0666667,0.0666667,0.0666667,0.0666667,0.0666667,0.0666667,0.0666667,0.0666667,0.0666667,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0627451,0.0588235,0.0588235,0.0588235,0.0588235,0.0588235,0.0549020,0.0549020,0.0549020,0.0549020,0.0509804,0.0509804,0.0509804,0.0509804,0.0509804,0.0470588,0.0470588,0.0470588,0.0470588,0.0431373,0.0431373,0.0431373,0.0431373,0.0392157,0.0392157,0.0392157,0.0392157,0.0392157,0.0352941,0.0352941,0.0352941,0.0352941,0.0313726,0.0313726,0.0313726,0.0313726,0.0313726,0.0274510,0.0274510,0.0274510,0.0274510,0.0235294,0.0235294,0.0235294,0.0235294,0.0235294,0.0196078,0.0196078,0.0196078,0.0196078,0.0156863,0.0156863,0.0156863,0.0156863);\n  const b = spline(normalizedVal, 0.776471,0.776471,0.776471,0.776471,0.776471,0.772549,0.768627,0.760784,0.756863,0.745098,0.737255,0.729412,0.717647,0.709804,0.701961,0.694118,0.686275,0.682353,0.678431,0.678431,0.674510,0.674510,0.674510,0.670588,0.670588,0.666667,0.662745,0.654902,0.650980,0.643137,0.635294,0.631373,0.627451,0.627451,0.627451,0.631373,0.639216,0.647059,0.658824,0.674510,0.686275,0.701961,0.717647,0.729412,0.737255,0.741176,0.745098,0.741176,0.733333,0.721569,0.709804,0.690196,0.670588,0.647059,0.623529,0.603922,0.576471,0.552941,0.533333,0.513726,0.498039,0.478431,0.462745,0.447059,0.431373,0.415686,0.403922,0.388235,0.376471,0.360784,0.349020,0.337255,0.325490,0.317647,0.313726,0.313726,0.313726,0.317647,0.325490,0.333333,0.341176,0.349020,0.360784,0.368627,0.376471,0.380392,0.384314,0.388235,0.392157,0.396078,0.396078,0.400000,0.400000,0.403922,0.407843,0.407843,0.411765,0.415686,0.415686,0.419608,0.423529,0.423529,0.427451,0.431373,0.431373,0.435294,0.439216,0.443137,0.443137,0.447059,0.450980,0.450980,0.454902,0.458824,0.462745,0.462745,0.466667,0.470588,0.470588,0.474510,0.474510,0.478431,0.478431,0.482353,0.482353,0.486275,0.486275,0.486275,0.490196,0.490196,0.490196,0.490196,0.494118,0.494118,0.494118,0.494118,0.498039,0.498039,0.498039,0.498039,0.501961,0.501961,0.501961,0.501961,0.501961,0.501961,0.501961,0.501961,0.501961,0.501961,0.501961,0.498039,0.498039,0.498039,0.498039,0.494118,0.494118,0.494118,0.494118,0.494118,0.490196,0.490196,0.490196,0.490196,0.486275,0.486275,0.482353,0.482353,0.478431,0.478431,0.474510,0.470588,0.466667,0.462745,0.462745,0.454902,0.450980,0.447059,0.439216,0.435294,0.427451,0.423529,0.415686,0.411765,0.403922,0.396078,0.392157,0.384314,0.376471,0.372549,0.364706,0.356863,0.352941,0.345098,0.341176,0.333333,0.325490,0.321569,0.313726,0.309804,0.305882,0.298039,0.294118,0.286275,0.282353,0.274510,0.270588,0.266667,0.262745,0.254902,0.250980,0.247059,0.243137,0.239216,0.235294,0.227451,0.223529,0.219608,0.211765,0.207843,0.203922,0.200000,0.196078,0.192157,0.188235,0.180392,0.176471,0.172549,0.164706,0.160784,0.156863,0.152941,0.145098,0.141176,0.137255,0.133333,0.129412,0.125490,0.117647,0.113725,0.109804,0.105882,0.101961,0.0941176,0.0901961,0.0862745,0.0823529,0.0784314,0.0745098,0.0705882,0.0666667,0.0627451,0.0588235,0.0549020,0.0549020,0.0509804);\n  return [Math.round(r*255),Math.round(g*255),Math.round(b*255)];\n}\n\n","// modified from https://stackoverflow.com/a/63397776/11594175\n\nlet preloadedImages: HTMLElement[] = [];\n\nfunction loadImage(src: string): Promise<HTMLElement> {\n  return new Promise((resolve, reject) => {\n    const img = document.createElement(\"link\");\n    img.rel = \"preload\";\n    img.as = \"image\";\n    img.onload = function () {\n      resolve(img);\n    };\n    img.onerror = img.onabort = function () {\n      reject(src);\n    };\n    img.href = src;\n    // add it to the dom in body so it will load\n    document.body.appendChild(img);\n    // append to the preloaded images list so it can be removed\n    preloadedImages.push(img);\n  });\n}\nexport function _preloadImages(images: string[]): Promise<HTMLElement>[] {\n  // remove past images\n  preloadedImages.forEach((img) => {\n    img.remove();\n  });\n  preloadedImages = [];\n  const promises = images.map((src) => loadImage(src));\n  // Promise.all(promises);\n  return promises;\n}\n\n// reset the preload images\n","export default [\n  {\n    date: \"2025-04-24\",\n    html: 'Educational resources designed for for informal educators (e.g., in museums, public outreach) are now available on the Cosmic Data Stories website at <a style=\"font-weight: normal;\" tabindex=\"0\"  href=\"https://www.cosmicds.cfa.harvard.edu/resources/tempo\" target=\"_blank\" rel=\"noopener\">Educator Resources</a>. You can also find the link the menu.',\n    highlight: new Date() < new Date('2025-05-7 00:00:00') ,\n    \n  },\n  {\n    date: \"2025-02-02\",\n    html:\n      'During the LA fires that began on Jan 7th, NO<sub>2</sub> levels far exceeded the default range displayed on our maps. For Jan 7 - Feb 2, 2025, we added an option to use an extended range of NO<sub>2</sub> values. For those dates, a button appears on the map to toggle between the standard and extended range.',\n      \n  },\n  {\n    date: \"2025-01-21\",\n    text:\n      \"Enable viewing the full resolution data. By default this is always off, displaying data at 1/2 the native Level 3 resolution for better performance\"\n  },\n  {\n    date: \"2025-01-09\",\n    text:\n      \"We have added a new sharable url feature! Click the share icon to copy a link for the current view (location, zoom level, date, and time) to your clipboard.\",\n  },\n  {\n    date: \"2024-11-29\",\n    text:\n      \"We are in the process of updating our data processing routines and images to use averaging rather than the nearest-neighbor pixel value when reprojecting. TEMPO images for dates after Nov 29th use the new pipeline, and past images will be updated over time\",\n  },\n];\n","import { computed } from 'vue';\nimport type { Ref } from 'vue';\nimport { BoundingBox, BoundsSelector } from '@/types';\n\n// Define standard bounds as constants\nconst BOUNDS_COLLECTION: Record<string, BoundingBox> = {\n  novDec: {\n    west: -154.975,\n    south: 17.025,\n    east: -24.475, \n    north: 63.975\n  },\n  march: {\n    west: -167.99,\n    south: 14.01,\n    east: -13.01,\n    north: 72.99\n  },\n  default: {\n    west: -167.99,\n    south: 14.01,\n    east: -13.01,\n    north: 72.99\n  }\n};\n\nexport function useBounds(\n  date: Ref<Date>, \n  customSelector?: BoundsSelector\n) {\n  // Default selector function based on your existing logic\n  const defaultSelector: BoundsSelector = (date: Date) => {\n    if (date.getUTCFullYear() === 2023) {\n      return BOUNDS_COLLECTION.novDec;\n    } else if (date.getUTCFullYear() === 2024 && date.getUTCMonth() === 2) {\n      return BOUNDS_COLLECTION.march;\n    } else {\n      return BOUNDS_COLLECTION.default;\n    }\n  };\n\n  // Use the custom selector if provided, otherwise use the default\n  const selector = customSelector || defaultSelector;\n\n  // Current bounds as a reactive reference\n  const currentBounds = computed(() => selector(date.value));\n\n  // Array representation [west, south, east, north]\n  const boundsArray = computed(() => {\n    const bounds = currentBounds.value;\n    return [bounds.west, bounds.south, bounds.east, bounds.north];\n  });\n\n  return {\n    boundsCollection: BOUNDS_COLLECTION,\n    currentBounds,\n    boundsArray,\n    selector\n  };\n}","import { InterestingEvent, LatLngPair } from \"./types\";\n\nexport const interestingEvents: InterestingEvent[] = [\n  {\n    date: new Date(2025, 0, 8),\n    endDate: new Date(2025, 0, 31),\n    dateString: \"Jan 8\",\n    label: \"LA Wildfires (Jan 8-31, 2025)\",\n    highlighted: false,\n    hasFeature: true,\n    info: `\n    <p> \n      Beginning on January 7, 2025, a series of wildfires broke out in the Los Angeles area. In addition to the devastating damage caused by the fires, large amounts of particulate matter, NO<sub>2</sub>, and other pollutants were released into the air.\n    </p>\n    <p>\n      The TEMPO instrument can detect the NO<sub>2</sub> plumes from these fires,\n      helping scientists and the public to understand the extent of the pollution and how it moves through the air. \n    </p>\n    <p>\n      Compare levels of NO<sub>2</sub> before, during, and after the fires. \n    </p>\n    <p>\n      During the fires, NO<sub>2</sub> levels far exceeded the default range displayed on our maps. For Jan 7 - Feb 2, 2025, we added an option to use an extended range of NO<sub>2</sub> values. For those dates, a button appears on the map to toggle between the standard and extended range.\n    </p>\n    `,\n    locations: [\n      {\n        latlng: [33.4773, -118.5975] as LatLngPair,\n        zoom: 8,\n        text: \"Los Angeles Wildfires\",\n        time: \"2025-01-08T19:51:00.000Z\",\n        description: `\n        <p>\n          Plumes of NO<sub>2</sub> from the wildfires can be seen from the \n          fires in the Los Angeles Area. On this day, the plumes are being blown south over the Pacific Ocean by the Santa Ana winds. \n          </p>\n          <p>\n          The levels of NO<sub>2</sub> are so high, they actually exceed the top of the scale shown on the color map.\n          </p>\n        `\n      }]\n      \n    \n\n  },\n\n  {\n    date: new Date(2024, 2, 28),\n    dateString: \"Mar 28\",\n    label: \"March 28, 2024\",\n    info: `\n        Breathing air with a high concentration of NO<sub>2</sub>, \n        and the resulting smog it forms when it reacts with other pollutants, \n        can irritate human respiratory systems. \n        People with asthma, as well as children and the elderly, \n        are generally at greater risk for the health effects of air pollution. \n        TEMPO data can help communities make informed \n        decisions and take action to improve air quality.\n        `,\n    locations: [\n      {\n        latlng: [31.938392, -99.095785] as LatLngPair,\n        zoom: 6,\n        text: \"Texas Oil and Gas Production\",\n        time: \"2024-03-28T13:04:00.000Z\",\n        description:\n          \"<p>The Permian basin, near Odessa, has two large plumes of NO2. This is the largest oil and gas producing area in the USA. You can also see here how pollution from a source in one state (Texas) can be transported across state lines to New Mexico.</p>\",\n      },\n      {\n        latlng: [31.331933, -91.575283] as LatLngPair,\n        zoom: 8,\n        text: \"LA/MS Fires\",\n        time: \"2024-03-28T16:44:00.000Z\",\n        description:\n          \"<p>Two fires can be seen popping up south and east of Alexandria. These are most easily identified as hot spots of NO2 that appear quickly.</p>\",\n      },\n    ],\n  }, // Mar 28\n\n  {\n    date: new Date(2023, 10, 3),\n    dateString: \"Nov 3\",\n    label: \"November 3, 2023\",\n    info: `\n        Levels of NO<sub>2</sub> change quickly from day to day, \n        and even from hour to hour as wind transports \n        plumes of pollution.\n        `,\n    locations: [\n      {\n        latlng: [36.215934, -119.7775] as LatLngPair,\n        zoom: 6,\n        text: \"California Traffic and Agriculture\",\n        time: \"2023-11-03T14:22:00.000Z\",\n        description:\n          \"<p>Los Angeles clearly stands out. NO<sub>2</sub> values are even higher than the maximum of our color bar. You can clearly see the highways including Route 10 between San Bernardino and Mexicali and Route 15 leading from San Bernardino towards Las Vegas. A significant amount of NO<sub>2</sub> in California&rsquo;s central valley is a byproduct of agricultural activity there. Excess fertilizer in the soil gets broken down by microbes to produce nitrogen oxides which are very reactive. Emissions that don&rsquo;t come from combustion are typically much harder to see, but the Central Valley is an area where TEMPO data may reveal this agricultural source of pollution.</p>\",\n      },\n      {\n        latlng: [41.85726, -80.531177] as LatLngPair,\n        zoom: 5,\n        text: \"Northeast: Large Emissions Plumes\",\n        time: \"2023-11-03T12:22:00.000Z\",\n        description:\n          \"<p>Air pollution is often transported, or moved, over great distances. In this data set large plumes can be seen over the Northeast. If you look closely you can see that many of these plumes appear to originate out of cities in the midwest including Nashville, St. Louis, and Memphis.</p>\",\n      },\n    ],\n  },\n  \n  {\n    date: new Date(2023, 10, 1),\n    dateString: \"Nov 1\",\n    label: \"November 1, 2023\",\n    info: `\n        <p>\n          Because the TEMPO instrument measures sunlight reflected and scattered from Earth’s \n        surface and atmosphere, it can’t “see” through the clouds&mdash;so these\n        areas appear blank on the map.\n        </p>\n        <p>\n          But right away you’ll see that there \n        are high concentrations of NO<sub>2</sub> around many urban centers, \n        and sometimes along major highways.\n        </p>\n        `,\n    locations: [\n      {\n        latlng: [34.359786, -111.700124] as LatLngPair,\n        zoom: 7,\n        text: \"Arizona Urban Traffic and Fires\",\n        time: \"2023-11-01T14:22:00.000Z\",\n        description:\n          \"<p>NO<sub>2</sub> increases during daily rush hour. In Phoenix, notice the high levels of NO<sub>2</sub> early in the morning, dip down during the day, then start to build back up during the evening commute.</p><p>Fires can be seen between Phoenix and Flagstaff. These are most easily identified as hot spots of NO<sub>2</sub> that appear quickly.</p>\",\n      },\n      {\n        latlng: [36.1716, -115.1391] as LatLngPair,\n        zoom: 7,\n        text: \"Las Vegas: Fairly Constant Levels All Day\",\n        time: \"2023-11-01T14:22:00.000Z\",\n        description:\n          \"<p>In this data Las Vegas has less daily variation than many other cities.</p>\",\n      },\n    ],\n  },\n\n];\n","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, vModelRadio as _vModelRadio, withDirectives as _withDirectives, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle } from \"vue\"\n\nconst _hoisted_1 = { class: \"selection-list\" }\nconst _hoisted_2 = { class: \"selection-header\" }\nconst _hoisted_3 = { class: \"selection-items\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"selection-placeholder\"\n}\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = { class: \"selection-label\" }\nconst _hoisted_7 = [\"value\", \"onChange\"]\nconst _hoisted_8 = { class: \"selection-name\" }\nconst _hoisted_9 = {\n  key: 0,\n  class: \"selection-time\"\n}\n\nimport { computed } from 'vue';\nimport { RectangleSelection, MappingBackends } from '@/types';\n\ntype RectangleSelectionType = Omit<RectangleSelection<MappingBackends>, \"layer\"> | null;\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ListComponent',\n  props: /*@__PURE__*/_mergeModels({\n    selectionOptions: {},\n    selectionActive: { type: Boolean }\n  }, {\n    \"modelValue\": {},\n    \"modelModifiers\": {},\n  }),\n  emits: /*@__PURE__*/_mergeModels(['edit-selection', 'create-new'], [\"update:modelValue\"]),\n  setup(__props: any, { emit: __emit }) {\n\nconst modelValue = _useModel<RectangleSelectionType>(__props, 'modelValue');\nconst props = __props;\nconst emits = __emit;\n\nconst filteredSelectionOptions = computed(() =>\n  props.selectionOptions.filter(sel => sel !== null)\n);\n\n// Function to format time range for display - from TempoLite.vue\nfunction formatTimeRange(ranges:  { start: number; end: number } |  { start: number; end: number }[]): string {\n  if (Array.isArray(ranges)) {\n    if (ranges.length === 0) return 'No time range set';\n    if (ranges.length === 1) {\n      const range = ranges[0];\n      return `${new Date(range.start).toLocaleDateString()} - ${new Date(range.end).toLocaleDateString()}`;\n    }\n    const allStarts = ranges.map(r => r.start);\n    const allEnds = ranges.map(r => r.end);\n    const minStart = Math.min(...allStarts);\n    const maxEnd = Math.max(...allEnds);\n    return `${new Date(minStart).toLocaleDateString()} - ${new Date(maxEnd).toLocaleDateString()} (${ranges.length} ranges)`;\n  }\n  return `${new Date(ranges.start).toLocaleDateString()} - ${new Date(ranges.end).toLocaleDateString()}`;\n}\n\nfunction select(sel: RectangleSelectionType) {\n  if (modelValue.value !== sel) {\n    modelValue.value = sel;\n    emits('edit-selection', sel);\n  }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n\n  return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [\n    _createElementVNode(\"header\", _hoisted_2, [\n      _cache[2] || (_cache[2] = _createElementVNode(\"h3\", null, \"Selected Regions\", -1)),\n      _createVNode(_component_v_btn, {\n        size: \"x-small\",\n        icon: \"mdi-plus\",\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('create-new'))),\n        \"aria-label\": \"Add new selection\"\n      })\n    ]),\n    _createElementVNode(\"ul\", _hoisted_3, [\n      (filteredSelectionOptions.value.length === 0)\n        ? (_openBlock(), _createElementBlock(\"li\", _hoisted_4, \" Select a region on the map \"))\n        : _createCommentVNode(\"\", true),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredSelectionOptions.value, (sel, idx) => {\n        return (_openBlock(), _createElementBlock(\"li\", {\n          key: sel.id ?? idx,\n          onClick: ($event: any) => (select(sel)),\n          class: \"selection-item\",\n          style: _normalizeStyle(sel.color ? { '--selection-color': sel.color } : {})\n        }, [\n          _createElementVNode(\"label\", _hoisted_6, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"radio\",\n              name: \"region-selection\",\n              value: sel,\n              \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((modelValue).value = $event)),\n              onChange: ($event: any) => (select(sel))\n            }, null, 40, _hoisted_7), [\n              [_vModelRadio, modelValue.value]\n            ]),\n            _createElementVNode(\"span\", _hoisted_8, _toDisplayString(sel.name), 1),\n            (sel.timeRange)\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, _toDisplayString(formatTimeRange(sel.timeRange)), 1))\n              : _createCommentVNode(\"\", true)\n          ])\n        ], 12, _hoisted_5))\n      }), 128))\n    ])\n  ]))\n}\n}\n\n})","<template>\n  <section class=\"selection-list\">\n    <header class=\"selection-header\">\n      <h3>Selected Regions</h3>\n      <v-btn\n        size=\"x-small\"\n        icon=\"mdi-plus\"\n        @click=\"$emit('create-new')\"\n        aria-label=\"Add new selection\"\n      />\n    </header>\n    \n    <ul class=\"selection-items\">\n      <li v-if=\"filteredSelectionOptions.length === 0\" class=\"selection-placeholder\">\n        Select a region on the map\n      </li>\n      <li\n        v-for=\"(sel, idx) in filteredSelectionOptions\"\n        :key=\"sel.id ?? idx\"\n        @click=\"select(sel)\"\n        class=\"selection-item\"\n        :style=\"sel.color ? { '--selection-color': sel.color } : {}\"\n      >\n        <label class=\"selection-label\">\n          <input\n            type=\"radio\"\n            name=\"region-selection\"\n            :value=\"sel\"\n            v-model=\"modelValue\"\n            @change=\"select(sel)\"\n          />\n          <span class=\"selection-name\">{{ sel.name }}</span>\n          <span v-if=\"sel.timeRange\" class=\"selection-time\">\n            {{ formatTimeRange(sel.timeRange) }}\n          </span>\n        </label>\n      </li>\n    </ul>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { defineProps, defineEmits, computed, defineModel } from 'vue';\nimport { RectangleSelection, MappingBackends } from '@/types';\n\ntype RectangleSelectionType = Omit<RectangleSelection<MappingBackends>, \"layer\"> | null;\nconst modelValue = defineModel<RectangleSelectionType>('modelValue');\nconst props = defineProps<{ selectionOptions: RectangleSelectionType[], selectionActive?: boolean }>();\nconst emits = defineEmits(['edit-selection', 'create-new']);\n\nconst filteredSelectionOptions = computed(() =>\n  props.selectionOptions.filter(sel => sel !== null)\n);\n\n// Function to format time range for display - from TempoLite.vue\nfunction formatTimeRange(ranges:  { start: number; end: number } |  { start: number; end: number }[]): string {\n  if (Array.isArray(ranges)) {\n    if (ranges.length === 0) return 'No time range set';\n    if (ranges.length === 1) {\n      const range = ranges[0];\n      return `${new Date(range.start).toLocaleDateString()} - ${new Date(range.end).toLocaleDateString()}`;\n    }\n    const allStarts = ranges.map(r => r.start);\n    const allEnds = ranges.map(r => r.end);\n    const minStart = Math.min(...allStarts);\n    const maxEnd = Math.max(...allEnds);\n    return `${new Date(minStart).toLocaleDateString()} - ${new Date(maxEnd).toLocaleDateString()} (${ranges.length} ranges)`;\n  }\n  return `${new Date(ranges.start).toLocaleDateString()} - ${new Date(ranges.end).toLocaleDateString()}`;\n}\n\nfunction select(sel: RectangleSelectionType) {\n  if (modelValue.value !== sel) {\n    modelValue.value = sel;\n    emits('edit-selection', sel);\n  }\n}\n</script>\n\n<style scoped>\n.selection-list {\n  font-size: 0.9em;\n  max-height: 200px;\n}\n\n.selection-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 0.5em;\n}\n\n.selection-header h3 {\n  margin: 0;\n  font-size: 1em;\n}\n\n.selection-items {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.selection-item {\n  margin: 0.25em 0;\n  cursor: pointer;\n  background: var(--selection-color, transparent);\n  padding: 0.25em 0.5em;\n}\n\n.selection-label {\n  /* updated to inline layout */\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 0.5em;\n}\n\n.selection-name {\n  /* no extra formatting */\n}\n\n.selection-time {\n  /* updated sub-label inline */\n  font-size: 0.75em;\n  opacity: 0.7;\n  margin-left: 0.5em;\n}\n\n.selection-placeholder {\n  padding: 0.75em;\n  text-align: center;\n  font-style: italic;\n  font-size: 0.85em;\n  color: #666;\n}\n\n\n</style>\n","import script from \"./ListComponent.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ListComponent.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ListComponent.vue?vue&type=style&index=0&id=f2e9a010&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f2e9a010\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'UserGuide',\n  setup(__props) {\n\n// Generated by Copilot\n// No props currently; make reactive later if needed.\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_divider = _resolveComponent(\"v-divider\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n\n  return (_openBlock(), _createBlock(_component_v_card, {\n    variant: \"outlined\",\n    class: \"pa-4 time-range-guide\"\n  }, {\n    default: _withCtx(() => [\n      _cache[0] || (_cache[0] = _createElementVNode(\"h2\", { class: \"text-h6 mb-3\" }, \"Time Range & Selection Guide\", -1)),\n      _cache[1] || (_cache[1] = _createElementVNode(\"details\", { open: \"\" }, [\n        _createElementVNode(\"summary\", null, \"1. Modes: Current Day vs Custom Range\"),\n        _createElementVNode(\"ul\", null, [\n          _createElementVNode(\"li\", null, [\n            _createElementVNode(\"strong\", null, \"Current Day\"),\n            _createTextVNode(\": Full selected calendar day (00:00–23:59:59).\")\n          ]),\n          _createElementVNode(\"li\", null, [\n            _createElementVNode(\"strong\", null, \"Custom Range\"),\n            _createTextVNode(\": One or more user–defined date spans.\")\n          ]),\n          _createElementVNode(\"li\", null, \"Toggle using the Current Day / Custom Range radio buttons.\")\n        ])\n      ], -1)),\n      _cache[2] || (_cache[2] = _createElementVNode(\"details\", null, [\n        _createElementVNode(\"summary\", null, \"2. Creating a Region Selection\"),\n        _createElementVNode(\"ol\", null, [\n          _createElementVNode(\"li\", null, \"Click the Select Region button.\"),\n          _createElementVNode(\"li\", null, \"Drag on the map to draw a rectangle.\"),\n          _createElementVNode(\"li\", null, \"The new selection stores the current Effective Time Range.\")\n        ])\n      ], -1)),\n      _cache[3] || (_cache[3] = _createElementVNode(\"details\", null, [\n        _createElementVNode(\"summary\", null, \"3. Effective Time Range\"),\n        _createElementVNode(\"p\", null, \"The Effective Time Range chip shows what will be applied to:\"),\n        _createElementVNode(\"ul\", null, [\n          _createElementVNode(\"li\", null, \"Any brand‑new region you draw.\"),\n          _createElementVNode(\"li\", null, [\n            _createTextVNode(\"The currently selected region \"),\n            _createElementVNode(\"strong\", null, \"only if it has no samples yet\"),\n            _createTextVNode(\".\")\n          ])\n        ])\n      ], -1)),\n      _cache[4] || (_cache[4] = _createElementVNode(\"details\", null, [\n        _createElementVNode(\"summary\", null, \"4. Auto‑Update Rules\"),\n        _createElementVNode(\"p\", null, [\n          _createElementVNode(\"strong\", null, \"Auto‑updates\"),\n          _createTextVNode(\" a selection’s stored time range when ALL are true:\")\n        ]),\n        _createElementVNode(\"ul\", null, [\n          _createElementVNode(\"li\", null, \"It is the active (currently selected) selection.\"),\n          _createElementVNode(\"li\", null, \"It has no samples fetched yet.\"),\n          _createElementVNode(\"li\", null, \"You change the Effective Time Range.\")\n        ]),\n        _createElementVNode(\"p\", null, [\n          _createElementVNode(\"strong\", null, \"Will NOT update\"),\n          _createTextVNode(\" if samples exist, it isn’t selected, or it’s a comparison copy.\")\n        ])\n      ], -1)),\n      _cache[5] || (_cache[5] = _createElementVNode(\"details\", null, [\n        _createElementVNode(\"summary\", null, \"5. Adding Another Time Series\"),\n        _createElementVNode(\"p\", null, \"Use “+ New Time Series for Current Selection” to copy the region with the current Effective Time Range (keeps prior data unchanged).\")\n      ], -1)),\n      _cache[6] || (_cache[6] = _createElementVNode(\"details\", null, [\n        _createElementVNode(\"summary\", null, \"6. Fetching Data & Locking\"),\n        _createElementVNode(\"ul\", null, [\n          _createElementVNode(\"li\", null, \"“Get NO₂ Samples” downloads rectangle data.\"),\n          _createElementVNode(\"li\", null, \"“Get Center Point NO₂ Sample” creates a center‑point copy.\"),\n          _createElementVNode(\"li\", null, \"After data fetch, that selection’s time range is locked (no auto updates).\")\n        ])\n      ], -1)),\n      _cache[7] || (_cache[7] = _createElementVNode(\"details\", null, [\n        _createElementVNode(\"summary\", null, \"7. Editing Geometry\"),\n        _createElementVNode(\"ul\", null, [\n          _createElementVNode(\"li\", null, \"Editable only while no samples are fetched.\"),\n          _createElementVNode(\"li\", null, \"Reshaping keeps its (unfetched) time range.\"),\n          _createElementVNode(\"li\", null, \"Need a new period? Create a copy instead.\")\n        ])\n      ], -1)),\n      _cache[8] || (_cache[8] = _createElementVNode(\"details\", null, [\n        _createElementVNode(\"summary\", null, \"8. Multiple Custom Ranges\"),\n        _createElementVNode(\"ul\", null, [\n          _createElementVNode(\"li\", null, \"Stored as an array of ranges.\"),\n          _createElementVNode(\"li\", null, \"Display shows overall span plus count (e.g. “Jan 2 – Jan 5 (3 ranges)”).\"),\n          _createElementVNode(\"li\", null, \"Fetch merges data across all ranges.\")\n        ])\n      ], -1)),\n      _cache[9] || (_cache[9] = _createElementVNode(\"details\", null, [\n        _createElementVNode(\"summary\", null, \"9. Quick Legend\"),\n        _createElementVNode(\"ul\", null, [\n          _createElementVNode(\"li\", null, [\n            _createElementVNode(\"strong\", null, \"Effective Time Range\"),\n            _createTextVNode(\": Applied to new or unfetched current selection.\")\n          ]),\n          _createElementVNode(\"li\", null, [\n            _createElementVNode(\"strong\", null, \"Selection Time Range\"),\n            _createTextVNode(\": Frozen once samples are fetched.\")\n          ]),\n          _createElementVNode(\"li\", null, [\n            _createElementVNode(\"strong\", null, \"Copy\"),\n            _createTextVNode(\": Safe way to compare different periods.\")\n          ])\n        ])\n      ], -1)),\n      _cache[10] || (_cache[10] = _createElementVNode(\"details\", null, [\n        _createElementVNode(\"summary\", null, \"10. Tips\"),\n        _createElementVNode(\"ul\", null, [\n          _createElementVNode(\"li\", null, \"Use “Latest” to jump to newest day.\"),\n          _createElementVNode(\"li\", null, \"Copy to compare new periods—don’t overwrite.\"),\n          _createElementVNode(\"li\", null, \"Subtitle under a selection shows its stored time range.\")\n        ])\n      ], -1)),\n      _createVNode(_component_v_divider, { class: \"my-4\" }),\n      _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"text-caption\" }, \" Effective range changes never modify selections that already have data. \", -1))\n    ]),\n    _: 1,\n    __: [0,1,2,3,4,5,6,7,8,9,10,11]\n  }))\n}\n}\n\n})","<!-- Generated by Copilot -->\n<template>\n  <v-card variant=\"outlined\" class=\"pa-4 time-range-guide\">\n    <h2 class=\"text-h6 mb-3\">Time Range & Selection Guide</h2>\n\n    <details open>\n      <summary>1. Modes: Current Day vs Custom Range</summary>\n      <ul>\n        <li><strong>Current Day</strong>: Full selected calendar day (00:00–23:59:59).</li>\n        <li><strong>Custom Range</strong>: One or more user–defined date spans.</li>\n        <li>Toggle using the Current Day / Custom Range radio buttons.</li>\n      </ul>\n    </details>\n\n    <details>\n      <summary>2. Creating a Region Selection</summary>\n      <ol>\n        <li>Click the Select Region button.</li>\n        <li>Drag on the map to draw a rectangle.</li>\n        <li>The new selection stores the current Effective Time Range.</li>\n      </ol>\n    </details>\n\n    <details>\n      <summary>3. Effective Time Range</summary>\n      <p>The Effective Time Range chip shows what will be applied to:</p>\n      <ul>\n        <li>Any brand‑new region you draw.</li>\n        <li>The currently selected region <strong>only if it has no samples yet</strong>.</li>\n      </ul>\n    </details>\n\n    <details>\n      <summary>4. Auto‑Update Rules</summary>\n      <p><strong>Auto‑updates</strong> a selection’s stored time range when ALL are true:</p>\n      <ul>\n        <li>It is the active (currently selected) selection.</li>\n        <li>It has no samples fetched yet.</li>\n        <li>You change the Effective Time Range.</li>\n      </ul>\n      <p><strong>Will NOT update</strong> if samples exist, it isn’t selected, or it’s a comparison copy.</p>\n    </details>\n\n    <details>\n      <summary>5. Adding Another Time Series</summary>\n      <p>Use “+ New Time Series for Current Selection” to copy the region with the current Effective Time Range (keeps prior data unchanged).</p>\n    </details>\n\n    <details>\n      <summary>6. Fetching Data & Locking</summary>\n      <ul>\n        <li>“Get NO₂ Samples” downloads rectangle data.</li>\n        <li>“Get Center Point NO₂ Sample” creates a center‑point copy.</li>\n        <li>After data fetch, that selection’s time range is locked (no auto updates).</li>\n      </ul>\n    </details>\n\n    <details>\n      <summary>7. Editing Geometry</summary>\n      <ul>\n        <li>Editable only while no samples are fetched.</li>\n        <li>Reshaping keeps its (unfetched) time range.</li>\n        <li>Need a new period? Create a copy instead.</li>\n      </ul>\n    </details>\n\n    <details>\n      <summary>8. Multiple Custom Ranges</summary>\n      <ul>\n        <li>Stored as an array of ranges.</li>\n        <li>Display shows overall span plus count (e.g. “Jan 2 – Jan 5 (3 ranges)”).</li>\n        <li>Fetch merges data across all ranges.</li>\n      </ul>\n    </details>\n\n    <details>\n      <summary>9. Quick Legend</summary>\n      <ul>\n        <li><strong>Effective Time Range</strong>: Applied to new or unfetched current selection.</li>\n        <li><strong>Selection Time Range</strong>: Frozen once samples are fetched.</li>\n        <li><strong>Copy</strong>: Safe way to compare different periods.</li>\n      </ul>\n    </details>\n\n    <details>\n      <summary>10. Tips</summary>\n      <ul>\n        <li>Use “Latest” to jump to newest day.</li>\n        <li>Copy to compare new periods—don’t overwrite.</li>\n        <li>Subtitle under a selection shows its stored time range.</li>\n      </ul>\n    </details>\n\n    <v-divider class=\"my-4\" />\n    <div class=\"text-caption\">\n      Effective range changes never modify selections that already have data.\n    </div>\n  </v-card>\n</template>\n\n<script setup lang=\"ts\">\n// Generated by Copilot\n// No props currently; make reactive later if needed.\n</script>\n\n<style scoped>\n.time-range-guide details {\n  margin-bottom: 0.65rem;\n  border: 1px solid #3a4a5a;\n  border-radius: 6px;\n  padding: 0.55rem 0.85rem;\n  background: rgba(255,255,255,0.03);\n}\n\n.time-range-guide details[open] {\n  background: rgba(255,255,255,0.07);\n}\n\n.time-range-guide summary {\n  cursor: pointer;\n  font-weight: 600;\n  list-style: none;\n  outline: none;\n}\n\n.time-range-guide summary::-webkit-details-marker {\n  display: none;\n}\n\n.time-range-guide summary:focus-visible {\n  outline: 2px solid var(--accent-color, #068ede);\n  border-radius: 4px;\n}\n\n.time-range-guide ul,\n.time-range-guide ol {\n  margin: 0.4rem 0 0.25rem 1.1rem;\n  padding: 0;\n}\n\n.time-range-guide li {\n  margin-bottom: 0.25rem;\n}\n\n.time-range-guide p {\n  margin: 0.4rem 0 0.4rem;\n}\n</style>","import script from \"./UserGuide.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./UserGuide.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./UserGuide.vue?vue&type=style&index=0&id=ed90dba8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ed90dba8\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"text-red\"\n}\nconst _hoisted_2 = {\n  key: 1,\n  style: {\"width\":\"100%\",\"max-height\":\"120px\",\"overflow-y\":\"auto\",\"border-collapse\":\"collapse\"}\n}\nconst _hoisted_3 = {\n  class: \"pa-2\",\n  style: {\"border-bottom\":\"1px solid #eee\"}\n}\nconst _hoisted_4 = {\n  class: \"pa-2\",\n  style: {\"border-bottom\":\"1px solid #eee\"}\n}\nconst _hoisted_5 = {\n  key: 2,\n  class: \"mt-2\"\n}\n\n\ntype SampleTablePropType = { samples: Record<number, { value: number | null; date: Date }> | null, error?: string | null };\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SampleTable',\n  props: {\n    samples: {},\n    error: {}\n  },\n  setup(__props: any) {\n\nconst _props = __props;\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    (_ctx.error)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \"Error: \" + _toDisplayString(_ctx.error), 1))\n      : _createCommentVNode(\"\", true),\n    (_ctx.samples && Object.keys(_ctx.samples).length > 0)\n      ? (_openBlock(), _createElementBlock(\"table\", _hoisted_2, [\n          _cache[0] || (_cache[0] = _createElementVNode(\"thead\", null, [\n            _createElementVNode(\"tr\", null, [\n              _createElementVNode(\"th\", { class: \"font-weight-bold text-white\" }, \"Time\"),\n              _createElementVNode(\"th\", { class: \"font-weight-bold text-white\" }, \"Value\")\n            ])\n          ], -1)),\n          _createElementVNode(\"tbody\", null, [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.samples, (result, time) => {\n              return (_openBlock(), _createElementBlock(\"tr\", { key: time }, [\n                _createElementVNode(\"td\", _hoisted_3, _toDisplayString(new Date(Number(time))), 1),\n                _createElementVNode(\"td\", _hoisted_4, _toDisplayString(result.value !== null ? result.value.toExponential(3) : 'N/A'), 1)\n              ]))\n            }), 128))\n          ])\n        ]))\n      : (_ctx.samples && Object.keys(_ctx.samples).length === 0)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, \"No data for this point/time.\"))\n        : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<template>\n  <div>\n    <div v-if=\"error\" class=\"text-red\">Error: {{ error }}</div>\n    <table v-if=\"samples && Object.keys(samples).length > 0\" style=\"width: 100%; max-height: 120px; overflow-y: auto; border-collapse: collapse;\">\n      <thead>\n        <tr>\n          <th class=\"font-weight-bold text-white\">Time</th>\n          <th class=\"font-weight-bold text-white\">Value</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(result, time) in samples\" :key=\"time\">\n          <td class=\"pa-2\" style=\"border-bottom: 1px solid #eee;\">\n            {{ new Date(Number(time)) }}\n          </td>\n          <td class=\"pa-2\" style=\"border-bottom: 1px solid #eee;\">\n            {{ result.value !== null ? result.value.toExponential(3) : 'N/A' }}\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <div v-else-if=\"samples && Object.keys(samples).length === 0\" class=\"mt-2\">No data for this point/time.</div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { defineProps } from 'vue';\ntype SampleTablePropType = { samples: Record<number, { value: number | null; date: Date }> | null, error?: string | null };\nconst _props = defineProps<SampleTablePropType>();\n</script>\n","import script from \"./SampleTable.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SampleTable.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","\n\n/**\n * @function atleast1d\n * Ensures that the input is at least 1-dimensional. If the input is a single value, it wraps it in an array.\n * If the input is already an array, it returns the array as is.\n * If the input is undefined, it returns undefined.\n * If the input is null, it returns an array with a single null element.\n */\n// The complicated typing ensures that if T is undefined, the return type is also undefined.\nexport function atleast1d<T>(value: T | T[]): T[] {\n  return (Array.isArray(value) ? value : [value]);\n}","import { ref, computed, watch, Ref } from 'vue';\nimport { getTimezoneOffset } from 'date-fns-tz';\n\nconst ONEDAYMS = 1000 * 60 * 60 * 24;\n\nfunction isBad(value: unknown): value is null | undefined {\n  return value === null || value === undefined;\n}\n\nexport const useUniqueTimeSelection = (timestamps: Ref<number[]>) => {\n  const timeIndex = ref(0);\n  const singleDateSelected = ref<Date>(new Date());\n  const minIndex = ref<number>(0);\n  const maxIndex = ref<number>(0);\n\n  function getOneDaysTimestamps(date: Date) {\n    if (isBad(date)) {\n      return [];\n    }\n    const mod = [] as {ts:number, idx: number}[];\n    timestamps.value.forEach((ts, idx) => {\n      if ((ts - date.getTime()) < ONEDAYMS && (ts - date.getTime()) > 0) {\n        mod.push({ ts, idx });\n      }\n    });\n    return mod;\n  }\n\n  function setNearestDate(date: number | null) {\n    if (date == null) {\n      return;\n    }\n\n    const mod = getOneDaysTimestamps(new Date(date));\n    if (mod.length > 0) {\n      minIndex.value = mod[0].idx;\n      maxIndex.value = mod[mod.length - 1].idx;\n      timeIndex.value = minIndex.value;\n    } else {\n      console.warn(\"No timestamps found for the given date.\");\n    }\n  }\n\n  const timestamp = computed(() => {\n    const val = timestamps.value[timeIndex.value];\n    return val;\n  });\n\n  const date = computed(() => {\n    return new Date(timestamp.value);\n  });\n\n  const offset = (date: Date) => getTimezoneOffset(\"US/Eastern\", date);\n\n  const uniqueDays = computed(() => {\n    const easternDates = timestamps.value.map(ts => new Date(ts + offset(new Date(ts))));\n    const days = easternDates.map(date => (new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate())).getTime());\n    const unique = Array.from(new Set(days));\n    return unique.map(ts => new Date(ts));\n  });\n\n  const uniqueDaysIndex = (ts: number) => {\n    let date = new Date(ts + offset(new Date(ts)));\n    date = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate());\n    return uniqueDays.value.map(e => e.getTime()).indexOf(date.getTime());\n  };\n\n  function getUniqueDayIndex(date: Date | null | undefined): number {\n    if (isBad(date)) {\n      return 0;\n    }\n    return uniqueDays.value.findIndex(day => day.getTime() === date.getTime());\n  }\n\n  function moveBackwardOneDay() {\n    const currentIndex = getUniqueDayIndex(singleDateSelected.value);\n    if (currentIndex > 0) {\n      singleDateSelected.value = uniqueDays.value[currentIndex - 1];\n    }\n  }\n\n  function moveForwardOneDay() {\n    const nextIndex = getUniqueDayIndex(singleDateSelected.value) + 1;\n    if (nextIndex < uniqueDays.value.length) {\n      singleDateSelected.value = uniqueDays.value[nextIndex];\n    }\n  }\n\n  function nearestDate(date: Date): number {\n    const time = date.getTime();\n    const timestamp = timestamps.value.find(ts => ((ts - time) < ONEDAYMS) && (ts - time) >= 0);\n    if (timestamp !== undefined) {\n      return timestamp;\n    } else {\n      console.warn(\"No matching timestamp found, returning default value.\");\n      return timestamps.value[0];\n    }\n  }\n\n  function nearestDateIndex(date: Date): number {\n    const timestamp = date.getTime();\n    const index = timestamps.value.findIndex(ts => ((ts - timestamp) < ONEDAYMS) && (ts - timestamp) >= 0);\n    if (index < 0) {\n      console.log(\"No matching timestamp found, returning default index.\");\n      return 0;\n    }\n    return index;\n  }\n\n  watch(singleDateSelected, (value) => {\n    setNearestDate(value.getTime());\n  });\n\n  return {\n    timeIndex,\n    timestamp,\n    date,\n    singleDateSelected,\n    maxIndex,\n    minIndex,\n    uniqueDays,\n    uniqueDaysIndex,\n    setNearestDate,\n    getUniqueDayIndex,\n    moveBackwardOneDay,\n    moveForwardOneDay,\n    nearestDate,\n    nearestDateIndex\n  };\n};","import { computed, type Ref } from 'vue';\nimport { toZonedTime, fromZonedTime, format as formatTz } from 'date-fns-tz';\nimport type { MillisecondRange } from '../types/datetime';\n\n/**\n * Composable for centralized timezone handling and formatting\n */\nexport function useTimezone(selectedTimezone: Ref<string>) {\n  \n  /**\n   * Convert UTC timestamp to timezone-aware date\n   */\n  function toTimezone(timestamp: number): Date {\n    const utcDate = new Date(timestamp);\n    return toZonedTime(utcDate, selectedTimezone.value);\n  }\n\n  /**\n   * Convert timezone-aware date to UTC timestamp\n   */\n  function fromTimezone(date: Date): number {\n    return fromZonedTime(date, selectedTimezone.value).getTime();\n  }\n\n  /**\n   * Set date to local midnight in selected timezone\n   */\n  function setToMidnight(date: Date): number {\n    const zonedDate = toZonedTime(date, selectedTimezone.value);\n    zonedDate.setHours(0, 0, 0, 0);\n    return fromZonedTime(zonedDate, selectedTimezone.value).getTime();\n  }\n\n  /**\n   * Set date to end of day in selected timezone\n   */\n  function setToEndOfDay(date: Date): number {\n    const zonedDate = toZonedTime(date, selectedTimezone.value);\n    zonedDate.setHours(23, 59, 59, 999);\n    return fromZonedTime(zonedDate, selectedTimezone.value).getTime();\n  }\n\n  /**\n   * Format timestamp with full date and time\n   */\n  function formatTimeLong(timestamp: number): string {\n    const utcDate = new Date(timestamp);\n    const zonedDate = toZonedTime(utcDate, selectedTimezone.value);\n    return formatTz(zonedDate, 'EEE, MMM d, yyyy \\'at\\' h:mm a', { timeZone: selectedTimezone.value });\n  }\n\n  /**\n   * Format duration with timezone prefix\n   */\n  function formatDuration(range: MillisecondRange): string {\n    const startUtc = new Date(range.start);\n    const endUtc = new Date(range.end);\n    const startZoned = toZonedTime(startUtc, selectedTimezone.value);\n    const endZoned = toZonedTime(endUtc, selectedTimezone.value);\n    \n    const startTime = startZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    const endTime = endZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    \n    return `${selectedTimezone.value}: ${startTime} - ${endTime}`;\n  }\n\n  /**\n   * Format timezone range with date and time\n   */\n  function formatTimezoneRange(range: MillisecondRange): string {\n    const startUtc = new Date(range.start);\n    const endUtc = new Date(range.end);\n    const startZoned = toZonedTime(startUtc, selectedTimezone.value);\n    const endZoned = toZonedTime(endUtc, selectedTimezone.value);\n    \n    const startDate = startZoned.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric' \n    });\n    const startTime = startZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    const endTime = endZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    \n    return `${startDate} ${startTime} - ${endTime}`;\n  }\n\n  /**\n   * Format UTC range\n   */\n  function formatUTCRange(range: MillisecondRange): string {\n    const startUtc = new Date(range.start);\n    const endUtc = new Date(range.end);\n    \n    const startDate = startUtc.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric',\n      timeZone: 'UTC'\n    });\n    const startTime = startUtc.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n      timeZone: 'UTC'\n    });\n    const endTime = endUtc.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n      timeZone: 'UTC'\n    });\n    \n    return `${startDate} ${startTime} - ${endTime}`;\n  }\n\n  /**\n   * Format time string for display\n   */\n  function formatTime(timeString: string): string {\n    const [hour, minute] = timeString.split(':').map(Number);\n    const date = new Date();\n    date.setHours(hour, minute, 0, 0);\n    return date.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n  }\n\n  /**\n   * Format date for display\n   */\n  function formatDateDisplay(date: Date | null): string {\n    return date?.toDateString() || '';\n  }\n\n  // Computed properties for reactive timezone info\n  const timezoneInfo = computed(() => ({\n    name: selectedTimezone.value,\n    offset: new Date().toLocaleString('en', {\n      timeZone: selectedTimezone.value,\n      timeZoneName: 'short'\n    }).split(' ').pop() || ''\n  }));\n\n  return {\n    // Core timezone operations\n    toTimezone,\n    fromTimezone,\n    setToMidnight,\n    setToEndOfDay,\n    \n    // Formatting functions\n    formatTimeLong,\n    formatDuration,\n    formatTimezoneRange,\n    formatUTCRange,\n    formatTime,\n    formatDateDisplay,\n    \n    // Computed properties\n    timezoneInfo\n  };\n}","import { ref, computed, watch } from 'vue';\nimport type { Ref } from 'vue';\nimport { useTimezone } from './useTimezone';\nimport type { \n  MillisecondRange,\n  SelectionType \n} from '@/types/datetime';\n\ninterface UseDateTimeSelectorOptions {\n  currentDate?: Ref<Date>;\n  selectedTimezone?: Ref<string>;\n}\n\n/**\n * Custom hook for date/time selection with optional configuration\n * @param options - Optional configuration object with currentDate and selectedTimezone refs\n */\nexport function useDateTimeSelector(\n  options: UseDateTimeSelectorOptions = {}\n) {\n  const { currentDate, selectedTimezone: initialTimezone } = options;\n  \n  // Initialize timezone handling\n  const selectedTimezone = initialTimezone || ref<string>(\n    Intl.DateTimeFormat().resolvedOptions().timeZone\n  );\n  \n  const { \n    toTimezone, \n    fromTimezone, \n    setToMidnight, \n    setToEndOfDay,\n    formatTime \n  } = useTimezone(selectedTimezone);\n  \n  const selectionType = ref<SelectionType>('weekday');\n  \n  // Weekday selection state\n  const selectedDayOfWeek = ref<number>(1); // Default to Monday\n  const selectedTime = ref<string>('09:00');\n  const instancesBack = ref<number>(4);\n  const timePlusMinus = ref<number>(1); // +/- 1 hour for hour selection\n  \n  // Track if user has manually set the weekday start date\n  const hasManualWeekdayStartDate = ref<boolean>(false);\n\n  // Initialize weekdayStartDateTimestamp from currentDate option if provided\n  const weekdayStartDateTimestamp = ref<number>(\n    currentDate?.value?.getTime() || new Date().getTime()\n  );\n  const startDate = ref<number>(0);\n  const endDate = ref<number>(0);\n  \n  // Computed properties for date picker integration (convert timestamps to/from date objects)\n  const weekdayStartDate = computed({\n    get: () => {\n      if (hasManualWeekdayStartDate.value && weekdayStartDateTimestamp.value > 0) {\n        return new Date(weekdayStartDateTimestamp.value).toISOString().split('T')[0];\n      }\n      return new Date(weekdayStartDateTimestamp.value).toISOString().split('T')[0];\n    },\n    set: (value: string) => {\n      const date = new Date(value + 'T00:00:00');\n      setWeekdayStartTimestamp(date.getTime());\n    }\n  });\n  \n  const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n  \n  // New methods for direct timestamp manipulation\n  function setWeekdayStartTimestamp(timestamp: number): void {\n    weekdayStartDateTimestamp.value = timestamp;\n    hasManualWeekdayStartDate.value = timestamp > 0;\n  }\n  \n  // Generate millisecond ranges\n  function generateMillisecondRanges(): MillisecondRange[] {\n    if (selectionType.value === 'weekday') {\n      return generateWeekdayRanges();\n    } else {\n      return generateDateRangeRanges();\n    }\n  }\n  \n  // Parse time string into hour and minute\n  const parsedTime = computed(() => {\n    const [hour, minute] = selectedTime.value.split(':').map(Number);\n    return { hour, minute };\n  });\n  \n  function generateWeekdayRanges(): MillisecondRange[] {\n    // Determine base timestamp: use manual timestamp if set, otherwise current date\n    const baseTimestamp = hasManualWeekdayStartDate.value && weekdayStartDateTimestamp.value > 0\n      ? weekdayStartDateTimestamp.value\n      : weekdayStartDateTimestamp.value;\n    \n    // Create timezone-aware date for calculations  \n    const baseDate = toTimezone(baseTimestamp);\n    \n    const targetDayOfWeek = selectedDayOfWeek.value;\n    \n    // Find the target day occurrence - use baseDate if it already matches, otherwise find the most recent occurrence\n    const currentDate = new Date(baseDate);\n    \n    // Only search backwards if the base date doesn't already match the target day\n    if (currentDate.getDay() !== targetDayOfWeek) {\n      while (currentDate.getDay() !== targetDayOfWeek) {\n        currentDate.setDate(currentDate.getDate() - 1);\n      }\n    }\n    \n    // Generate ranges for the specified number of instances back\n    const ranges = Array.from({ length: instancesBack.value }, (_, i) => {\n      const rangeDate = new Date(currentDate);\n      rangeDate.setDate(currentDate.getDate() - (i * 7)); // Go back by weeks\n      \n      // Set the specific time\n      rangeDate.setHours(parsedTime.value.hour, parsedTime.value.minute, 0, 0);\n      \n      // Convert to UTC timestamp for the API\n      const startTime = fromTimezone(rangeDate);\n      const endTime = startTime + (timePlusMinus.value * 60 * 60 * 1000); // Add 1 hour\n      \n      return {\n        start: startTime,\n        end: endTime\n      };\n    });\n    \n    return ranges.sort((a, b) => - (a.start - b.start));\n  }\n  \n  function generateDateRangeRanges(): MillisecondRange[] {\n    if (startDate.value === 0 || endDate.value === 0) return [];\n    \n    // Use timestamps directly - they should already be set to appropriate times (midnight, end of day, etc.)\n    const startMs = startDate.value;\n    const endMs = endDate.value;\n    \n    return [{\n      start: startMs,\n      end: endMs\n    }];\n  }\n  \n\n  // Watch for currentDate changes and update weekdayStartDateTimestamp if not manually set\n  if (currentDate) {\n    watch(currentDate, (newCurrentDate) => {\n      if (!hasManualWeekdayStartDate.value) {\n        weekdayStartDateTimestamp.value = newCurrentDate.getTime();\n      }\n    });\n  }\n  \n  return {\n    // State\n    selectionType,\n    selectedDayOfWeek,\n    selectedTime,\n    instancesBack,\n    dayNames,\n    timePlusMinus,\n    \n    // Computed properties for date picker integration\n    weekdayStartDate,\n    startDate,\n    endDate,\n    \n    // New timestamp methods\n    setWeekdayStartTimestamp,\n    setStartTimestamp: (timestamp: number) => { startDate.value = timestamp; },\n    setEndTimestamp: (timestamp: number) => { endDate.value = timestamp; },\n    \n    // Timezone utilities\n    setToMidnight,\n    setToEndOfDay,\n    \n    // Utilities\n    generateMillisecondRanges,\n    formatTime\n  };\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"text-subtitle-2 font-weight-bold mb-1\" }\nconst _hoisted_2 = { class: \"text-caption text-disabled mt-1\" }\n\nimport { computed, toRef } from 'vue';\nimport { useTimezone } from './useTimezone';\nimport type { MillisecondRange } from '../types/datetime';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'RangeCard',\n  props: {\n    range: {},\n    index: {},\n    selectedTimezone: {},\n    mode: {}\n  },\n  setup(__props: any) {\n\nconst props = __props;\n\n// Create reactive timezone handling\nconst timezoneRef = toRef(props, 'selectedTimezone');\nconst { \n  formatTimeLong, \n  toTimezone\n} = useTimezone(timezoneRef);\n\n// Computed properties for display\nconst chipColor = computed(() => 'primary');\n\nconst chipLabel = computed(() => `${props.index + 1}`);\nconst formattedTime = computed(() => {\n  if (props.mode === 'weekday') {\n    return formatTimeLong(props.range.start);\n  } else {\n    // Date range mode: show \"Start DateTime - End DateTime\"\n    const startTime = formatTimeLong(props.range.start);\n    const endTime = formatTimeLong(props.range.end);\n    return `${startTime} - ${endTime}`;\n  }\n});\n\nconst formattedTimezoneTime = computed(() => {\n  if (props.mode === 'weekday') {\n    const zonedDate = toTimezone(props.range.start);\n    const time = zonedDate.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    const date = zonedDate.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric' \n    });\n    return `${props.selectedTimezone}: ${date} ${time}`;\n  } else {\n    // Date range mode: show timezone range\n    const startZoned = toTimezone(props.range.start);\n    const endZoned = toTimezone(props.range.end);\n    \n    const startTime = startZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    const startDate = startZoned.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric' \n    });\n    const endTime = endZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    const endDate = endZoned.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric' \n    });\n    \n    return `${props.selectedTimezone}: ${startDate} ${startTime} - ${endDate} ${endTime}`;\n  }\n});\n\nconst formattedUTCTime = computed(() => {\n  if (props.mode === 'weekday') {\n    const utcDate = new Date(props.range.start);\n    const time = utcDate.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n      timeZone: 'UTC'\n    });\n    const date = utcDate.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric',\n      timeZone: 'UTC'\n    });\n    return `${date} ${time}`;\n  } else {\n    // Date range mode: show UTC range\n    const startUtc = new Date(props.range.start);\n    const endUtc = new Date(props.range.end);\n    \n    const startTime = startUtc.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n      timeZone: 'UTC'\n    });\n    const startDate = startUtc.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric',\n      timeZone: 'UTC'\n    });\n    const endTime = endUtc.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n      timeZone: 'UTC'\n    });\n    const endDate = endUtc.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric',\n      timeZone: 'UTC'\n    });\n    \n    return `${startDate} ${startTime} - ${endDate} ${endTime}`;\n  }\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_chip = _resolveComponent(\"v-chip\")!\n  const _component_v_col = _resolveComponent(\"v-col\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_row = _resolveComponent(\"v-row\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n\n  return (_openBlock(), _createBlock(_component_v_card, {\n    class: \"mb-2 timeline-bar\",\n    ripple: false\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_card_text, { class: \"py-3\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_row, {\n            \"align-content\": \"center\",\n            dense: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_col, { cols: \"auto\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_chip, {\n                    size: \"small\",\n                    color: chipColor.value,\n                    variant: \"elevated\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(_toDisplayString(chipLabel.value), 1)\n                    ]),\n                    _: 1\n                  }, 8, [\"color\"])\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_v_col, null, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", _hoisted_1, _toDisplayString(formattedTime.value), 1),\n                  _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", null, _toDisplayString(formattedTimezoneTime.value), 1),\n                    _createElementVNode(\"div\", null, \"UTC: \" + _toDisplayString(formattedUTCTime.value), 1)\n                  ])\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_v_col, { cols: \"auto\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_icon, { color: \"success\" }, {\n                    default: _withCtx(() => _cache[0] || (_cache[0] = [\n                      _createTextVNode(\"mdi-check-circle\")\n                    ])),\n                    _: 1,\n                    __: [0]\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n  <v-card class=\"mb-2 timeline-bar\" :ripple=\"false\">\n    <v-card-text class=\"py-3\">\n      <v-row align-content=\"center\" dense>\n        <v-col cols=\"auto\">\n          <v-chip \n            size=\"small\" \n            :color=\"chipColor\"\n            variant=\"elevated\"\n          >\n            {{ chipLabel }}\n          </v-chip>\n        </v-col>\n        <v-col>\n          <div class=\"text-subtitle-2 font-weight-bold mb-1\">\n            {{ formattedTime }}\n          </div>\n          <div class=\"text-caption text-disabled mt-1\">\n            <div>{{ formattedTimezoneTime }}</div>\n            <div>UTC: {{ formattedUTCTime }}</div>\n          </div>\n        </v-col>\n        <v-col cols=\"auto\">\n          <v-icon color=\"success\">mdi-check-circle</v-icon>\n        </v-col>\n      </v-row>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, toRef } from 'vue';\nimport { useTimezone } from './useTimezone';\nimport type { MillisecondRange } from '../types/datetime';\n\nconst props = defineProps<{\n  range: MillisecondRange;\n  index: number;\n  selectedTimezone: string;\n  mode: 'weekday' | 'daterange';\n}>();\n\n// Create reactive timezone handling\nconst timezoneRef = toRef(props, 'selectedTimezone');\nconst { \n  formatTimeLong, \n  toTimezone\n} = useTimezone(timezoneRef);\n\n// Computed properties for display\nconst chipColor = computed(() => 'primary');\n\nconst chipLabel = computed(() => `${props.index + 1}`);\nconst formattedTime = computed(() => {\n  if (props.mode === 'weekday') {\n    return formatTimeLong(props.range.start);\n  } else {\n    // Date range mode: show \"Start DateTime - End DateTime\"\n    const startTime = formatTimeLong(props.range.start);\n    const endTime = formatTimeLong(props.range.end);\n    return `${startTime} - ${endTime}`;\n  }\n});\n\nconst formattedTimezoneTime = computed(() => {\n  if (props.mode === 'weekday') {\n    const zonedDate = toTimezone(props.range.start);\n    const time = zonedDate.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    const date = zonedDate.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric' \n    });\n    return `${props.selectedTimezone}: ${date} ${time}`;\n  } else {\n    // Date range mode: show timezone range\n    const startZoned = toTimezone(props.range.start);\n    const endZoned = toTimezone(props.range.end);\n    \n    const startTime = startZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    const startDate = startZoned.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric' \n    });\n    const endTime = endZoned.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n    const endDate = endZoned.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric' \n    });\n    \n    return `${props.selectedTimezone}: ${startDate} ${startTime} - ${endDate} ${endTime}`;\n  }\n});\n\nconst formattedUTCTime = computed(() => {\n  if (props.mode === 'weekday') {\n    const utcDate = new Date(props.range.start);\n    const time = utcDate.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n      timeZone: 'UTC'\n    });\n    const date = utcDate.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric',\n      timeZone: 'UTC'\n    });\n    return `${date} ${time}`;\n  } else {\n    // Date range mode: show UTC range\n    const startUtc = new Date(props.range.start);\n    const endUtc = new Date(props.range.end);\n    \n    const startTime = startUtc.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n      timeZone: 'UTC'\n    });\n    const startDate = startUtc.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric',\n      timeZone: 'UTC'\n    });\n    const endTime = endUtc.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true,\n      timeZone: 'UTC'\n    });\n    const endDate = endUtc.toLocaleDateString('en-US', { \n      month: 'short', \n      day: 'numeric',\n      timeZone: 'UTC'\n    });\n    \n    return `${startDate} ${startTime} - ${endDate} ${endTime}`;\n  }\n});\n</script>\n\n<style>\n.timeline-bar {\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n\n  &:hover {\n    transform: translateY(-1px);\n  }\n}\n\n</style>","import script from \"./RangeCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RangeCard.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./RangeCard.vue?vue&type=style&index=0&id=6be6ff5b&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"timeline-section\" }\nconst _hoisted_2 = { class: \"text-h6 mb-0\" }\nconst _hoisted_3 = { class: \"d-flex justify-space-between align-center mb-3\" }\nconst _hoisted_4 = { class: \"text-subtitle-2 font-weight-bold\" }\n\nimport RangeCard from '../date_time_range_selection/RangeCard.vue';\nimport type { MillisecondRange } from '../types/datetime';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TimelineVisualization',\n  props: {\n    ranges: {},\n    selectedTimezone: {},\n    mode: {}\n  },\n  setup(__props: any) {\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_col = _resolveComponent(\"v-col\")!\n  const _component_v_chip = _resolveComponent(\"v-chip\")!\n  const _component_v_row = _resolveComponent(\"v-row\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_virtual_scroll = _resolveComponent(\"v-virtual-scroll\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_v_row, {\n      align: \"center\",\n      class: \"mb-3\"\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_v_col, null, {\n          default: _withCtx(() => [\n            _createElementVNode(\"h4\", _hoisted_2, [\n              _createVNode(_component_v_icon, { class: \"mr-2\" }, {\n                default: _withCtx(() => _cache[0] || (_cache[0] = [\n                  _createTextVNode(\"mdi-timeline-outline\")\n                ])),\n                _: 1,\n                __: [0]\n              }),\n              _cache[1] || (_cache[1] = _createTextVNode(\" Timeline Visualization \"))\n            ])\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_v_col, { cols: \"auto\" }, {\n          default: _withCtx(() => [\n            _createVNode(_component_v_chip, {\n              size: \"small\",\n              color: _ctx.ranges.length > 0 ? 'success' : 'warning',\n              variant: \"tonal\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.ranges.length) + \" ranges \", 1)\n              ]),\n              _: 1\n            }, 8, [\"color\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    (_ctx.ranges.length === 0)\n      ? (_openBlock(), _createBlock(_component_v_card, {\n          key: 0,\n          class: \"text-center pa-6\",\n          variant: \"tonal\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_v_card_text, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_icon, {\n                  size: \"48\",\n                  color: \"grey-darken-1\",\n                  class: \"mb-3\"\n                }, {\n                  default: _withCtx(() => _cache[2] || (_cache[2] = [\n                    _createTextVNode(\" mdi-timeline-help-outline \")\n                  ])),\n                  _: 1,\n                  __: [2]\n                }),\n                _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"text-body-1 text-medium-emphasis mb-2\" }, \" No time ranges to display \", -1)),\n                _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"text-body-2 text-disabled\" }, \" Configure the settings above to generate time ranges \", -1))\n              ]),\n              _: 1,\n              __: [3,4]\n            })\n          ]),\n          _: 1\n        }))\n      : (_openBlock(), _createBlock(_component_v_card, {\n          key: 1,\n          class: \"pa-3\",\n          variant: \"tonal\"\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_3, [\n              _createElementVNode(\"span\", _hoisted_4, \" Time Ranges (\" + _toDisplayString(_ctx.ranges.length) + \") \", 1),\n              _createVNode(_component_v_chip, {\n                size: \"small\",\n                color: \"info\",\n                variant: \"tonal\"\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_ctx.selectedTimezone), 1)\n                ]),\n                _: 1\n              })\n            ]),\n            _createVNode(_component_v_virtual_scroll, {\n              items: _ctx.ranges,\n              height: \"300\",\n              \"item-height\": \"80\"\n            }, {\n              default: _withCtx(({ item, index }) => [\n                _createVNode(RangeCard, {\n                  range: item,\n                  index: index,\n                  \"selected-timezone\": _ctx.selectedTimezone,\n                  mode: _ctx.mode\n                }, null, 8, [\"range\", \"index\", \"selected-timezone\", \"mode\"])\n              ]),\n              _: 1\n            }, 8, [\"items\"])\n          ]),\n          _: 1\n        }))\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"timeline-section\">\n    <v-row align=\"center\" class=\"mb-3\">\n      <v-col>\n        <h4 class=\"text-h6 mb-0\">\n          <v-icon class=\"mr-2\">mdi-timeline-outline</v-icon>\n          Timeline Visualization\n        </h4>\n      </v-col>\n      <v-col cols=\"auto\">\n        <v-chip \n          size=\"small\" \n          :color=\"ranges.length > 0 ? 'success' : 'warning'\"\n          variant=\"tonal\"\n        >\n          {{ ranges.length }} ranges\n        </v-chip>\n      </v-col>\n    </v-row>\n\n    <!-- Empty State -->\n    <v-card v-if=\"ranges.length === 0\" class=\"text-center pa-6\" variant=\"tonal\">\n      <v-card-text>\n        <v-icon size=\"48\" color=\"grey-darken-1\" class=\"mb-3\">\n          mdi-timeline-help-outline\n        </v-icon>\n        <div class=\"text-body-1 text-medium-emphasis mb-2\">\n          No time ranges to display\n        </div>\n        <div class=\"text-body-2 text-disabled\">\n          Configure the settings above to generate time ranges\n        </div>\n      </v-card-text>\n    </v-card>\n\n    <!-- Timeline Ranges -->\n    <v-card v-else class=\"pa-3\" variant=\"tonal\">\n      <div class=\"d-flex justify-space-between align-center mb-3\">\n        <span class=\"text-subtitle-2 font-weight-bold\">\n          Time Ranges ({{ ranges.length }})\n        </span>\n        <v-chip size=\"small\" color=\"info\" variant=\"tonal\">\n          {{ selectedTimezone }}\n        </v-chip>\n      </div>\n\n      <v-virtual-scroll\n        :items=\"ranges\"\n        height=\"300\"\n        item-height=\"80\"\n      >\n        <template v-slot:default=\"{ item, index }\">\n          <RangeCard\n            :range=\"item\"\n            :index=\"index\"\n            :selected-timezone=\"selectedTimezone\"\n            :mode=\"mode\"\n          />\n        </template>\n      </v-virtual-scroll>\n    </v-card>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport RangeCard from '../date_time_range_selection/RangeCard.vue';\nimport type { MillisecondRange } from '../types/datetime';\n\ndefineProps<{\n  ranges: MillisecondRange[];\n  selectedTimezone: string;\n  mode: 'weekday' | 'daterange';\n}>();\n</script>\n\n<style scoped>\n.timeline-section {\n  /* Timeline-specific styles */\n}\n</style>","import script from \"./TimelineVisualization.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TimelineVisualization.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TimelineVisualization.vue?vue&type=style&index=0&id=18d8a132&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-18d8a132\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, unref as _unref, isRef as _isRef, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"weekday-pattern-section\"\n}\nconst _hoisted_2 = { class: \"mb-4\" }\nconst _hoisted_3 = { class: \"mb-4\" }\nconst _hoisted_4 = { class: \"mb-4\" }\nconst _hoisted_5 = { class: \"d-flex align-center ga-2\" }\nconst _hoisted_6 = { class: \"mb-4\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"date-range-section\"\n}\nconst _hoisted_8 = { class: \"mb-4\" }\nconst _hoisted_9 = { class: \"mb-4\" }\n\nimport { watch, computed, ref, onMounted } from 'vue';\nimport DatePicker from '@vuepic/vue-datepicker';\nimport '@vuepic/vue-datepicker/dist/main.css';\nimport { useTimezone } from './useTimezone';\nimport { useDateTimeSelector } from './useDateTimeSelector';\nimport TimelineVisualization from './TimelineVisualization.vue';\nimport type { MillisecondRange } from '../types/datetime';\n\n// === INTERFACES === \n// === PROPS ===\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'DateTimeRangeSelection',\n  props: {\n    currentDate: {},\n    selectedTimezone: {},\n    defaultStartDate: {},\n    defaultEndDate: {},\n    allowedDates: {},\n    validTimes: {}\n  },\n  emits: [\"ranges-change\"],\n  setup(__props: any, { emit: __emit }) {\n\n// === IMPORTS ===\nconst props = __props;\n\n// === EMITS ===\nconst emit = __emit;\n\n// === COMPOSABLE SETUP ===\n// Create refs for the current date and timezone to pass to the composable\nconst currentDateRef = ref(props.currentDate);\nconst timezoneRef = ref(props.selectedTimezone);\n\n// Initialize timezone handling\nconst { setToMidnight, setToEndOfDay, formatDateDisplay } = useTimezone(timezoneRef);\n\n// Initialize the datetime selector composable with optional parameters\nconst {\n  selectionType,\n  selectedDayOfWeek,\n  selectedTime,\n  instancesBack,\n  timePlusMinus,\n  weekdayStartDate,\n  startDate,\n  endDate,\n  setWeekdayStartTimestamp,\n  setStartTimestamp: setStartTimestampInternal,\n  setEndTimestamp: setEndTimestampInternal,\n  dayNames,\n  generateMillisecondRanges,\n} = useDateTimeSelector({\n  currentDate: currentDateRef,\n  selectedTimezone: timezoneRef\n});\n\n// === REFS ===\nconst weekdayCalendar = ref();\nconst startDateCalendar = ref();\nconst endDateCalendar = ref();\n\n// === COMPUTED PROPERTIES ===\n// Direct date objects for date pickers - no unnecessary timestamp conversion\nconst weekdayStartDateObj = ref<Date | null>(null);\nconst startDateObj = ref<Date | null>(null);\nconst endDateObj = ref<Date | null>(null);\n\n// Day options for v-select\nconst dayOptions = computed(() => \n  dayNames.map((day, index) => ({ title: day, value: index }))\n);\n\n// Generate ranges for visualization\nconst ranges = computed(() => {\n  return generateMillisecondRanges();\n});\n\n// Validation rules\nconst instanceRules = computed(() => [\n  (v: number) => v >= 1 && v <= 10 || 'Must be between 1 and 10'\n]);\n\n// === METHODS ===\n// Update custom range button handler\nfunction updateCustomRange() {\n  const currentRanges = generateMillisecondRanges();\n  emit('ranges-change', currentRanges);\n}\n\n// Date change handlers\nfunction handleWeekdayDateChange(value: Date) {\n  if (value != null) {\n    if (value.getTime() !== weekdayStartDateObj.value?.getTime()) {\n      weekdayStartDateObj.value = value;\n      // Update composable state directly\n      setWeekdayStartTimestamp(value.getTime());\n      weekdayCalendar.value?.closeMenu();\n    }\n  }\n}\n\nfunction handleStartDateChange(value: Date) {\n  if (value != null) {\n    if (value.getTime() !== startDateObj.value?.getTime()) {\n      startDateObj.value = value;\n      // Convert to timestamp and update composable\n      const timestamp = setToMidnight(value);\n      setStartTimestampInternal(timestamp);\n      startDateCalendar.value?.closeMenu();\n    }\n  }\n}\n\nfunction handleEndDateChange(value: Date) {\n  if (value != null) {\n    if (value.getTime() !== endDateObj.value?.getTime()) {\n      endDateObj.value = value;\n      // Convert to timestamp and update composable\n      const timestamp = setToEndOfDay(value);\n      setEndTimestampInternal(timestamp);\n      endDateCalendar.value?.closeMenu();\n    }\n  }\n}\n\n// Formatting functions\n// Formatting functions moved to useTimezone composable\n\n// === LIFECYCLE HOOKS ===\nonMounted(() => {\n  // Initialize default dates\n  if (props.defaultStartDate) {\n    startDateObj.value = props.defaultStartDate;\n    const timestamp = setToMidnight(props.defaultStartDate);\n    setStartTimestampInternal(timestamp);\n  }\n  if (props.defaultEndDate) {\n    endDateObj.value = props.defaultEndDate;\n    const timestamp = setToEndOfDay(props.defaultEndDate);\n    setEndTimestampInternal(timestamp);\n  } else {\n    // Default end date to today\n    const today = new Date();\n    endDateObj.value = today;\n    const timestamp = setToEndOfDay(today);\n    setEndTimestampInternal(timestamp);\n  }\n  \n  // Initialize weekday start date\n  if (weekdayStartDate.value) {\n    weekdayStartDateObj.value = new Date(weekdayStartDate.value + 'T00:00:00');\n  }\n});\n\n// === WATCHERS ===\n// Watch for prop changes and update refs\nwatch(() => props.currentDate, (newDate) => {\n  currentDateRef.value = newDate;\n});\n\nwatch(() => props.selectedTimezone, (newTimezone) => {\n  timezoneRef.value = newTimezone;\n});\n\n// Keep weekdayStartDateObj in sync with the composable's weekdayStartDate\nwatch(() => weekdayStartDate.value, (newDateString) => {\n  const newDate = newDateString ? new Date(newDateString + 'T00:00:00') : null;\n  if (newDate?.getTime() !== weekdayStartDateObj.value?.getTime()) {\n    weekdayStartDateObj.value = newDate;\n  }\n});\n\n// Sync date objects with composable timestamps (one-way: composable → UI)\nwatch(() => startDate.value, (newTimestamp) => {\n  const newDate = newTimestamp > 0 ? new Date(newTimestamp) : null;\n  if (newDate?.getTime() !== startDateObj.value?.getTime()) {\n    startDateObj.value = newDate;\n  }\n});\n\nwatch(() => endDate.value, (newTimestamp) => {\n  const newDate = newTimestamp > 0 ? new Date(newTimestamp) : null;\n  if (newDate?.getTime() !== endDateObj.value?.getTime()) {\n    endDateObj.value = newDate;\n  }\n});\n\n// Ranges are now only emitted when the Update Custom Range button is clicked\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_card_title = _resolveComponent(\"v-card-title\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_radio = _resolveComponent(\"v-radio\")!\n  const _component_v_radio_group = _resolveComponent(\"v-radio-group\")!\n  const _component_v_select = _resolveComponent(\"v-select\")!\n  const _component_v_chip = _resolveComponent(\"v-chip\")!\n  const _component_v_number_input = _resolveComponent(\"v-number-input\")!\n  const _component_v_expand_transition = _resolveComponent(\"v-expand-transition\")!\n  const _component_v_divider = _resolveComponent(\"v-divider\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n\n  return (_openBlock(), _createBlock(_component_v_card, {\n    class: \"datetime-range-selector\",\n    elevation: \"2\"\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_card_title, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[5] || (_cache[5] = [\n              _createTextVNode(\"mdi-clock-outline\")\n            ])),\n            _: 1,\n            __: [5]\n          }),\n          _cache[6] || (_cache[6] = _createTextVNode(\" DateTime Range Selector \"))\n        ]),\n        _: 1,\n        __: [6]\n      }),\n      _createVNode(_component_v_card_text, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_btn, {\n            color: \"primary\",\n            variant: \"elevated\",\n            class: \"mb-4\",\n            onClick: updateCustomRange\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_icon, { class: \"mr-2\" }, {\n                default: _withCtx(() => _cache[7] || (_cache[7] = [\n                  _createTextVNode(\"mdi-update\")\n                ])),\n                _: 1,\n                __: [7]\n              }),\n              _cache[8] || (_cache[8] = _createTextVNode(\" Update Custom Range \"))\n            ]),\n            _: 1,\n            __: [8]\n          }),\n          _createVNode(_component_v_radio_group, {\n            modelValue: _unref(selectionType),\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(selectionType) ? (selectionType).value = $event : null)),\n            row: \"\",\n            density: \"compact\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_radio, {\n                label: \"Weekday Pattern\",\n                value: \"weekday\",\n                density: \"compact\"\n              }),\n              _createVNode(_component_v_radio, {\n                label: \"Date Range\",\n                value: \"daterange\",\n                density: \"compact\"\n              })\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"]),\n          _createVNode(_component_v_expand_transition, null, {\n            default: _withCtx(() => [\n              (_unref(selectionType) === 'weekday')\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", _hoisted_2, [\n                      _cache[9] || (_cache[9] = _createElementVNode(\"label\", { class: \"text-subtitle-2 mb-2 d-block\" }, \"Reference Date\", -1)),\n                      _createVNode(_unref(DatePicker), {\n                        ref_key: \"weekdayCalendar\",\n                        ref: weekdayCalendar,\n                        \"model-value\": weekdayStartDateObj.value,\n                        onInternalModelChange: handleWeekdayDateChange,\n                        \"allowed-dates\": _ctx.allowedDates,\n                        format: _unref(formatDateDisplay),\n                        \"preview-format\": _unref(formatDateDisplay),\n                        clearable: false,\n                        \"text-input\": \"\",\n                        teleport: true,\n                        dark: \"\"\n                      }, null, 8, [\"model-value\", \"allowed-dates\", \"format\", \"preview-format\"])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                      _createVNode(_component_v_select, {\n                        modelValue: _unref(selectedDayOfWeek),\n                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => (_isRef(selectedDayOfWeek) ? (selectedDayOfWeek).value = $event : null)),\n                        items: dayOptions.value,\n                        label: \"Day of Week\",\n                        \"prepend-inner-icon\": \"mdi-calendar-week\",\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"hide-details\": \"\"\n                      }, null, 8, [\"modelValue\", \"items\"])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                      _cache[10] || (_cache[10] = _createElementVNode(\"label\", { class: \"text-subtitle-2 mb-2 d-block\" }, \"Time\", -1)),\n                      _createElementVNode(\"div\", _hoisted_5, [\n                        _withDirectives(_createElementVNode(\"input\", {\n                          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => (_isRef(selectedTime) ? (selectedTime).value = $event : null)),\n                          type: \"time\",\n                          class: \"time-input\"\n                        }, null, 512), [\n                          [_vModelText, _unref(selectedTime)]\n                        ]),\n                        _createVNode(_component_v_chip, {\n                          size: \"small\",\n                          color: \"primary\",\n                          variant: \"tonal\"\n                        }, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(_ctx.selectedTimezone), 1)\n                          ]),\n                          _: 1\n                        }),\n                        _withDirectives(_createElementVNode(\"input\", {\n                          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => (_isRef(timePlusMinus) ? (timePlusMinus).value = $event : null)),\n                          type: \"number\",\n                          min: \"-12\",\n                          max: \"12\",\n                          step: \"0.5\",\n                          class: \"time-input\",\n                          style: {\"width\":\"80px\"},\n                          placeholder: \"± hours\"\n                        }, null, 512), [\n                          [_vModelText, _unref(timePlusMinus)]\n                        ])\n                      ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                      _createVNode(_component_v_number_input, {\n                        modelValue: _unref(instancesBack),\n                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => (_isRef(instancesBack) ? (instancesBack).value = $event : null)),\n                        label: \"Number of Instances\",\n                        rules: instanceRules.value,\n                        min: 1,\n                        max: 10,\n                        density: \"compact\",\n                        variant: \"outlined\",\n                        \"control-variant\": \"split\"\n                      }, null, 8, [\"modelValue\", \"rules\"])\n                    ])\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_expand_transition, null, {\n            default: _withCtx(() => [\n              (_unref(selectionType) === 'daterange')\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                    _createElementVNode(\"div\", _hoisted_8, [\n                      _cache[11] || (_cache[11] = _createElementVNode(\"label\", { class: \"text-subtitle-2 mb-2 d-block\" }, \"Start Date\", -1)),\n                      _createVNode(_unref(DatePicker), {\n                        ref_key: \"startDateCalendar\",\n                        ref: startDateCalendar,\n                        \"model-value\": startDateObj.value,\n                        onInternalModelChange: handleStartDateChange,\n                        \"allowed-dates\": _ctx.allowedDates,\n                        \"max-date\": endDateObj.value ?? new Date(),\n                        format: _unref(formatDateDisplay),\n                        \"preview-format\": _unref(formatDateDisplay),\n                        \"text-input\": \"\",\n                        teleport: true,\n                        dark: \"\"\n                      }, null, 8, [\"model-value\", \"allowed-dates\", \"max-date\", \"format\", \"preview-format\"])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_9, [\n                      _cache[12] || (_cache[12] = _createElementVNode(\"label\", { class: \"text-subtitle-2 mb-2 d-block\" }, \"End Date\", -1)),\n                      _createVNode(_unref(DatePicker), {\n                        ref_key: \"endDateCalendar\",\n                        ref: endDateCalendar,\n                        \"model-value\": endDateObj.value,\n                        onInternalModelChange: handleEndDateChange,\n                        \"allowed-dates\": _ctx.allowedDates,\n                        \"min-date\": startDateObj.value ?? new Date(0),\n                        format: _unref(formatDateDisplay),\n                        \"preview-format\": _unref(formatDateDisplay),\n                        \"text-input\": \"\",\n                        teleport: true,\n                        dark: \"\"\n                      }, null, 8, [\"model-value\", \"allowed-dates\", \"min-date\", \"format\", \"preview-format\"])\n                    ])\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_divider, { class: \"my-4\" }),\n          _createVNode(TimelineVisualization, {\n            ranges: ranges.value,\n            \"selected-timezone\": _ctx.selectedTimezone,\n            mode: _unref(selectionType)\n          }, null, 8, [\"ranges\", \"selected-timezone\", \"mode\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n  <v-card class=\"datetime-range-selector\" elevation=\"2\">\n    <!-- Header -->\n    <v-card-title>\n      <v-icon>mdi-clock-outline</v-icon>\n      DateTime Range Selector\n    </v-card-title>\n\n    <v-card-text>\n      <!-- Update Custom Range Button -->\n      <v-btn\n        color=\"primary\"\n        variant=\"elevated\"\n        class=\"mb-4\"\n        @click=\"updateCustomRange\"\n      >\n        <v-icon class=\"mr-2\">mdi-update</v-icon>\n        Update Custom Range\n      </v-btn>\n\n      <!-- Selection Type Radio Buttons -->\n      <v-radio-group \n        v-model=\"selectionType\" \n        row \n        density=\"compact\"\n      >\n        <v-radio \n          label=\"Weekday Pattern\" \n          value=\"weekday\"\n          density=\"compact\"\n        />\n        <v-radio \n          label=\"Date Range\" \n          value=\"daterange\"\n          density=\"compact\"\n        />\n      </v-radio-group>\n\n      <!-- Weekday Pattern Section -->\n      <v-expand-transition>\n        <div v-if=\"selectionType === 'weekday'\" class=\"weekday-pattern-section\">\n          <!-- Reference Date -->\n          <div class=\"mb-4\">\n            <label class=\"text-subtitle-2 mb-2 d-block\">Reference Date</label>\n            <date-picker\n              ref=\"weekdayCalendar\"\n              :model-value=\"weekdayStartDateObj\"\n              @internal-model-change=\"handleWeekdayDateChange\"\n              :allowed-dates=\"allowedDates\"\n              :format=\"formatDateDisplay\"\n              :preview-format=\"formatDateDisplay\"\n              :clearable=\"false\"\n              text-input\n              :teleport=\"true\"\n              dark\n            />\n          </div>\n\n          <!-- Day of Week Selection -->\n          <div class=\"mb-4\">\n            <v-select\n              v-model=\"selectedDayOfWeek\"\n              :items=\"dayOptions\"\n              label=\"Day of Week\"\n              prepend-inner-icon=\"mdi-calendar-week\"\n              density=\"compact\"\n              variant=\"outlined\"\n              hide-details\n            />\n          </div>\n\n          <!-- Time Selection -->\n          <div class=\"mb-4\">\n            <label class=\"text-subtitle-2 mb-2 d-block\">Time</label>\n            <div class=\"d-flex align-center ga-2\">\n              <input\n                v-model=\"selectedTime\"\n                type=\"time\"\n                class=\"time-input\"\n              />\n              <v-chip size=\"small\" color=\"primary\" variant=\"tonal\">\n                {{ selectedTimezone }}\n              </v-chip>\n              <!-- add time plus minus number input. use +- icon and should step in .5 hour increments -->\n              \n              <input \n                v-model=\"timePlusMinus\"\n                type=\"number\"\n                min=\"-12\"\n                max=\"12\"\n                step=\"0.5\"\n                class=\"time-input\"\n                style=\"width: 80px;\"\n                placeholder=\"± hours\"\n              />\n            </div>\n          </div>\n\n          <!-- Number of Instances -->\n          <div class=\"mb-4\">\n            <v-number-input\n              v-model=\"instancesBack\"\n              label=\"Number of Instances\"\n              :rules=\"instanceRules\"\n              :min=\"1\"\n              :max=\"10\"\n              density=\"compact\"\n              variant=\"outlined\"\n              control-variant=\"split\"\n            />\n          </div>\n        </div>\n      </v-expand-transition>\n\n      <!-- Date Range Section -->\n      <v-expand-transition>\n        <div v-if=\"selectionType === 'daterange'\" class=\"date-range-section\">\n          <!-- Start Date -->\n          <div class=\"mb-4\">\n            <label class=\"text-subtitle-2 mb-2 d-block\">Start Date</label>\n            <date-picker\n              ref=\"startDateCalendar\"\n              :model-value=\"startDateObj\"\n              @internal-model-change=\"handleStartDateChange\"\n              :allowed-dates=\"allowedDates\"\n              :max-date=\"endDateObj ?? new Date()\"\n              :format=\"formatDateDisplay\"\n              :preview-format=\"formatDateDisplay\"\n              text-input\n              :teleport=\"true\"\n              dark\n            />\n          </div>\n\n          <!-- End Date -->\n          <div class=\"mb-4\">\n            <label class=\"text-subtitle-2 mb-2 d-block\">End Date</label>\n            <date-picker\n              ref=\"endDateCalendar\"\n              :model-value=\"endDateObj\"\n              @internal-model-change=\"handleEndDateChange\"\n              :allowed-dates=\"allowedDates\"\n              :min-date=\"startDateObj ?? new Date(0)\"\n              :format=\"formatDateDisplay\"\n              :preview-format=\"formatDateDisplay\"\n              text-input\n              :teleport=\"true\"\n              dark\n            />\n          </div>\n        </div>\n      </v-expand-transition>\n\n      <!-- Timeline Visualization -->\n      <v-divider class=\"my-4\" />\n      \n      <TimelineVisualization\n        :ranges=\"ranges\"\n        :selected-timezone=\"selectedTimezone\"\n        :mode=\"selectionType\"\n      />\n    </v-card-text>\n  </v-card>\n</template>\n\n<script setup lang=\"ts\">\n// === IMPORTS ===\nimport { watch, computed, ref, onMounted } from 'vue';\nimport DatePicker from '@vuepic/vue-datepicker';\nimport '@vuepic/vue-datepicker/dist/main.css';\nimport { useTimezone } from './useTimezone';\nimport { useDateTimeSelector } from './useDateTimeSelector';\nimport TimelineVisualization from './TimelineVisualization.vue';\nimport type { MillisecondRange } from '../types/datetime';\n\n// === INTERFACES === \n// === PROPS ===\nconst props = defineProps<{\n  currentDate: Date;\n  selectedTimezone: string;\n  defaultStartDate?: Date;\n  defaultEndDate?: Date;\n  allowedDates?: Date[];\n  validTimes?: string[];\n}>();\n\n// === EMITS ===\nconst emit = defineEmits<{\n  'ranges-change': [ranges: MillisecondRange[]]\n}>();\n\n// === COMPOSABLE SETUP ===\n// Create refs for the current date and timezone to pass to the composable\nconst currentDateRef = ref(props.currentDate);\nconst timezoneRef = ref(props.selectedTimezone);\n\n// Initialize timezone handling\nconst { setToMidnight, setToEndOfDay, formatDateDisplay } = useTimezone(timezoneRef);\n\n// Initialize the datetime selector composable with optional parameters\nconst {\n  selectionType,\n  selectedDayOfWeek,\n  selectedTime,\n  instancesBack,\n  timePlusMinus,\n  weekdayStartDate,\n  startDate,\n  endDate,\n  setWeekdayStartTimestamp,\n  setStartTimestamp: setStartTimestampInternal,\n  setEndTimestamp: setEndTimestampInternal,\n  dayNames,\n  generateMillisecondRanges,\n} = useDateTimeSelector({\n  currentDate: currentDateRef,\n  selectedTimezone: timezoneRef\n});\n\n// === REFS ===\nconst weekdayCalendar = ref();\nconst startDateCalendar = ref();\nconst endDateCalendar = ref();\n\n// === COMPUTED PROPERTIES ===\n// Direct date objects for date pickers - no unnecessary timestamp conversion\nconst weekdayStartDateObj = ref<Date | null>(null);\nconst startDateObj = ref<Date | null>(null);\nconst endDateObj = ref<Date | null>(null);\n\n// Day options for v-select\nconst dayOptions = computed(() => \n  dayNames.map((day, index) => ({ title: day, value: index }))\n);\n\n// Generate ranges for visualization\nconst ranges = computed(() => {\n  return generateMillisecondRanges();\n});\n\n// Validation rules\nconst instanceRules = computed(() => [\n  (v: number) => v >= 1 && v <= 10 || 'Must be between 1 and 10'\n]);\n\n// === METHODS ===\n// Update custom range button handler\nfunction updateCustomRange() {\n  const currentRanges = generateMillisecondRanges();\n  emit('ranges-change', currentRanges);\n}\n\n// Date change handlers\nfunction handleWeekdayDateChange(value: Date) {\n  if (value != null) {\n    if (value.getTime() !== weekdayStartDateObj.value?.getTime()) {\n      weekdayStartDateObj.value = value;\n      // Update composable state directly\n      setWeekdayStartTimestamp(value.getTime());\n      weekdayCalendar.value?.closeMenu();\n    }\n  }\n}\n\nfunction handleStartDateChange(value: Date) {\n  if (value != null) {\n    if (value.getTime() !== startDateObj.value?.getTime()) {\n      startDateObj.value = value;\n      // Convert to timestamp and update composable\n      const timestamp = setToMidnight(value);\n      setStartTimestampInternal(timestamp);\n      startDateCalendar.value?.closeMenu();\n    }\n  }\n}\n\nfunction handleEndDateChange(value: Date) {\n  if (value != null) {\n    if (value.getTime() !== endDateObj.value?.getTime()) {\n      endDateObj.value = value;\n      // Convert to timestamp and update composable\n      const timestamp = setToEndOfDay(value);\n      setEndTimestampInternal(timestamp);\n      endDateCalendar.value?.closeMenu();\n    }\n  }\n}\n\n// Formatting functions\n// Formatting functions moved to useTimezone composable\n\n// === LIFECYCLE HOOKS ===\nonMounted(() => {\n  // Initialize default dates\n  if (props.defaultStartDate) {\n    startDateObj.value = props.defaultStartDate;\n    const timestamp = setToMidnight(props.defaultStartDate);\n    setStartTimestampInternal(timestamp);\n  }\n  if (props.defaultEndDate) {\n    endDateObj.value = props.defaultEndDate;\n    const timestamp = setToEndOfDay(props.defaultEndDate);\n    setEndTimestampInternal(timestamp);\n  } else {\n    // Default end date to today\n    const today = new Date();\n    endDateObj.value = today;\n    const timestamp = setToEndOfDay(today);\n    setEndTimestampInternal(timestamp);\n  }\n  \n  // Initialize weekday start date\n  if (weekdayStartDate.value) {\n    weekdayStartDateObj.value = new Date(weekdayStartDate.value + 'T00:00:00');\n  }\n});\n\n// === WATCHERS ===\n// Watch for prop changes and update refs\nwatch(() => props.currentDate, (newDate) => {\n  currentDateRef.value = newDate;\n});\n\nwatch(() => props.selectedTimezone, (newTimezone) => {\n  timezoneRef.value = newTimezone;\n});\n\n// Keep weekdayStartDateObj in sync with the composable's weekdayStartDate\nwatch(() => weekdayStartDate.value, (newDateString) => {\n  const newDate = newDateString ? new Date(newDateString + 'T00:00:00') : null;\n  if (newDate?.getTime() !== weekdayStartDateObj.value?.getTime()) {\n    weekdayStartDateObj.value = newDate;\n  }\n});\n\n// Sync date objects with composable timestamps (one-way: composable → UI)\nwatch(() => startDate.value, (newTimestamp) => {\n  const newDate = newTimestamp > 0 ? new Date(newTimestamp) : null;\n  if (newDate?.getTime() !== startDateObj.value?.getTime()) {\n    startDateObj.value = newDate;\n  }\n});\n\nwatch(() => endDate.value, (newTimestamp) => {\n  const newDate = newTimestamp > 0 ? new Date(newTimestamp) : null;\n  if (newDate?.getTime() !== endDateObj.value?.getTime()) {\n    endDateObj.value = newDate;\n  }\n});\n\n// Ranges are now only emitted when the Update Custom Range button is clicked\n</script>\n\n<style scoped>\n/* === COMPONENT STYLES === */\n.datetime-range-selector {\n  /* Component-specific styles can be added here */\n}\n\n/* === SECTION STYLES === */\n.weekday-pattern-section,\n.date-range-section {\n  /* Section-specific styles */\n}\n\n\n/* === INPUT STYLES === */\n.time-input {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid rgba(255, 255, 255, 0.23);\n  border-radius: 4px;\n  background: transparent;\n  color: inherit;\n  font-family: inherit;\n  font-size: 14px;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n\n.time-input:focus {\n  outline: none;\n  border-color: rgb(var(--v-theme-primary));\n  box-shadow: 0 0 0 2px rgba(var(--v-theme-primary), 0.2);\n}\n\n</style>\n","import script from \"./DateTimeRangeSelection.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DateTimeRangeSelection.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./DateTimeRangeSelection.vue?vue&type=style&index=0&id=30b632c8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-30b632c8\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"time-chips-container\" }\nconst _hoisted_2 = { class: \"chips-grid\" }\nconst _hoisted_3 = [\"onClick\"]\nconst _hoisted_4 = { class: \"chip-content\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"chip-date\"\n}\nconst _hoisted_6 = {\n  key: 1,\n  class: \"chip-time\"\n}\n\nimport { computed } from 'vue';\n\ninterface Props {\n  timestamps: number[]\n  selectedIndex?: number\n  reverse?: boolean,\n  useUtc?: boolean,\n  dateOnly?: boolean\n  hourOnly?: boolean\n}\n\ninterface Emits {\n  (e: 'select', payload: { value: number; index: number }): void\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TimeChips',\n  props: {\n    timestamps: {},\n    selectedIndex: { default: -1 },\n    reverse: { type: Boolean, default: false },\n    useUtc: { type: Boolean, default: false },\n    dateOnly: { type: Boolean, default: false },\n    hourOnly: { type: Boolean, default: false }\n  },\n  emits: [\"select\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\n\nconst formatDate = (timestamp: number): string => {\n  if (props.useUtc) {\n    const date = new Date(timestamp);\n    timestamp = date.getTime() + date.getTimezoneOffset() * 60*1000; // Adjust for UTC offset\n  }\n  const date = new Date(timestamp);\n  return date.toLocaleDateString('en-US', {\n    month: 'short',\n    year: 'numeric'\n  });\n};\n\nconst formatTime = (timestamp: number): string => {\n  if (props.useUtc) {\n    const date = new Date(timestamp);\n    timestamp = date.getTime() + date.getTimezoneOffset() * 60*1000; // Adjust for UTC offset\n  }\n  const date = new Date(timestamp);\n  return date.toLocaleTimeString('en-US', {\n    hour: '2-digit',\n    minute: '2-digit',\n    hour12: true\n  });\n};\n\n\n\nconst timestampsComputed = computed(() => \n  props.reverse ? [...props.timestamps].sort((a,b) => b-a) : [...props.timestamps].sort((a,b) => a-b)\n);\n\nconst formattedDates = computed(() => \n  timestampsComputed.value.map(timestamp => formatDate(timestamp))\n);\n\nconst formattedTimes = computed(() => \n  timestampsComputed.value.map(timestamp => formatTime(timestamp))\n);\nconst handleChipClick = (value: number, index: number) => {\n  emit('select', { value, index });\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(timestampsComputed.value, (timestamp, index) => {\n        return (_openBlock(), _createElementBlock(\"button\", {\n          key: timestamp,\n          class: _normalizeClass([\n          'time-chip',\n          { 'active': index === _ctx.selectedIndex }\n        ]),\n          onClick: ($event: any) => (handleChipClick(timestamp, index))\n        }, [\n          _createElementVNode(\"div\", _hoisted_4, [\n            (!_ctx.hourOnly)\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString(formattedDates.value[index]), 1))\n              : _createCommentVNode(\"\", true),\n            (!_ctx.dateOnly)\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(formattedTimes.value[index]), 1))\n              : _createCommentVNode(\"\", true)\n          ])\n        ], 10, _hoisted_3))\n      }), 128))\n    ])\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\nimport { computed } from 'vue';\n\ninterface Props {\n  timestamps: number[]\n  selectedIndex?: number\n  reverse?: boolean,\n  useUtc?: boolean,\n  dateOnly?: boolean\n  hourOnly?: boolean\n}\n\ninterface Emits {\n  (e: 'select', payload: { value: number; index: number }): void\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  selectedIndex: -1,\n  reverse: false,\n  useUtc: false,\n  dateOnly: false,\n  hourOnly: false\n});\n\nconst emit = defineEmits<Emits>();\n\n\nconst formatDate = (timestamp: number): string => {\n  if (props.useUtc) {\n    const date = new Date(timestamp);\n    timestamp = date.getTime() + date.getTimezoneOffset() * 60*1000; // Adjust for UTC offset\n  }\n  const date = new Date(timestamp);\n  return date.toLocaleDateString('en-US', {\n    month: 'short',\n    year: 'numeric'\n  });\n};\n\nconst formatTime = (timestamp: number): string => {\n  if (props.useUtc) {\n    const date = new Date(timestamp);\n    timestamp = date.getTime() + date.getTimezoneOffset() * 60*1000; // Adjust for UTC offset\n  }\n  const date = new Date(timestamp);\n  return date.toLocaleTimeString('en-US', {\n    hour: '2-digit',\n    minute: '2-digit',\n    hour12: true\n  });\n};\n\n\n\nconst timestampsComputed = computed(() => \n  props.reverse ? [...props.timestamps].sort((a,b) => b-a) : [...props.timestamps].sort((a,b) => a-b)\n);\n\nconst formattedDates = computed(() => \n  timestampsComputed.value.map(timestamp => formatDate(timestamp))\n);\n\nconst formattedTimes = computed(() => \n  timestampsComputed.value.map(timestamp => formatTime(timestamp))\n);\nconst handleChipClick = (value: number, index: number) => {\n  emit('select', { value, index });\n};\n</script>\n\n<template>\n  <div class=\"time-chips-container\">\n    <div class=\"chips-grid\">\n      <button\n        v-for=\"(timestamp, index) in timestampsComputed\"\n        :key=\"timestamp\"\n        :class=\"[\n          'time-chip',\n          { 'active': index === selectedIndex }\n        ]\"\n        @click=\"handleChipClick(timestamp, index)\"\n      >\n        <div class=\"chip-content\">\n          <span \n            v-if=\"!hourOnly\"\n            class=\"chip-date\">{{ formattedDates[index] }}</span>\n          <span \n            v-if=\"!dateOnly\"\n            class=\"chip-time\">{{ formattedTimes[index] }}</span>\n        </div>\n      </button>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.time-chips-container {\n  width: 100%;\n  max-height: 300px;\n  background: transparent;\n  border-radius: 8px;\n  padding: 12px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e5e7eb;\n  overflow: hidden;\n}\n\n.chips-grid {\n  display: grid;\n  grid-template-columns: repeat(5, 1fr);\n  gap: 8px;\n  max-height: 276px;\n  overflow-y: auto;\n}\n\n\n\n.time-chip {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 70px;\n  padding: 8px;\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  color: #475569;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  outline: none;\n  user-select: none;\n}\n\n.time-chip:hover {\n  background: #8cc5ff;\n  border-color: #cbd5e1;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.time-chip:active {\n  transform: translateY(0);\n  background: #8cc5ff;\n}\n\n.time-chip.active {\n  background: #3b82f6;\n  border-color: #3b82f6;\n  color: #ffffff;\n  box-shadow: 0 2px 12px rgba(59, 130, 246, 0.3);\n}\n\n.time-chip.active:hover {\n  background: #2563eb;\n  border-color: #2563eb;\n}\n\n.chip-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2px;\n  text-align: center;\n  line-height: 1.2;\n}\n\n.chip-date {\n  font-size: 11px;\n  font-weight: 600;\n  opacity: 0.9;\n}\n\n.chip-time {\n  font-size: 10px;\n  font-weight: 500;\n  opacity: 0.8;\n}\n\n.time-chip.active .chip-date,\n.time-chip.active .chip-time {\n  opacity: 1;\n}\n\n@media (max-width: 768px) {\n  .time-chips-container {\n    padding: 8px;\n    max-height: 250px;\n  }\n  \n  .chips-grid {\n    grid-template-columns: repeat(3, 1fr);\n    gap: 6px;\n    max-height: 234px;\n  }\n  \n  .time-chip {\n    height: 48px;\n    padding: 6px;\n  }\n  \n  .chip-date {\n    font-size: 10px;\n  }\n  \n  .chip-time {\n    font-size: 9px;\n  }\n}\n</style>","import script from \"./TimeChips.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TimeChips.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TimeChips.vue?vue&type=style&index=0&id=e2f9dedc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e2f9dedc\"]])\n\nexport default __exports__","import { Ref, ref, onMounted, onUnmounted } from 'vue';\nimport M, { Map, AttributionControl } from 'maplibre-gl';\nimport { InitMapOptions, LatLngPair } from '@/types';\n\n\nconst scale = window.devicePixelRatio;\nconst retinaParam = scale > 1 ? '@2x' : '';\n\nexport interface MapLibreComposable {\n    map: Ref<M.Map | null>;\n    createMap: () => Ref<M.Map>;\n    setView: (latlng: LatLngPair, zoom: number) => void;\n    resetView: () => void;\n    cleanupMap: () => void;\n    getCenter: () => M.LngLat;\n  }\n  \n\n  \nexport function useMap(id=\"map\", options: InitMapOptions, _showRoads: Ref<boolean>, onReady?: (map: M.Map) => void): MapLibreComposable {\n  // Something to know about MatLibre it likes longitude, latitude as opposed\n  // to leaflet which uses latitude, longitude\n  // this is where our map will be\n  const map = ref<M.Map | null>(null);\n  \n  \n  \n  async function addCoastlines(map: M.Map) {\n    fetch(\"coastlines.geojson\")\n      .then(response => response.json())\n      .then(data => {\n        map.addSource('coastline-custom', {\n          'type': 'geojson',\n          'data': data\n        });\n        map.addLayer({\n          'id': 'coastline-custom',\n          'type': 'line',\n          'source': 'coastline-custom',\n          'paint': {\n            'line-color': 'black',\n            'line-width': 1,\n            'line-opacity': 0.8,\n          }\n        });\n      });\n  }\n  \n  function addLabels(map: M.Map) {\n    return; // Stamen does mesh well with current map style\n    map.addSource('stamen-toner-labels', {\n      type: 'raster',\n      tiles: [`https://tiles.stadiamaps.com/tiles/stamen_toner_labels/{z}/{x}/{y}${retinaParam}.png`],\n      tileSize: 256,\n    });\n\n    map.addLayer({\n      id: 'stamen-toner-labels',\n      type: 'raster',\n      source: 'stamen-toner-labels',\n      minzoom: 0,\n      maxzoom: 20\n    });\n  }\n  \n  function setupMap() {\n    if (map.value === null) return;\n    \n    // Need to use weird type assertion to avoid\n    // Type instantiation is excessively deep and possibly infinite.ts(2589)\n    // See discussion here https://github.com/mapbox/mapbox-gl-js/issues/13203#issuecomment-2634013147\n    const libreMap = map.value as unknown as M.Map;\n    addCoastlines(libreMap);\n    addLabels(libreMap);\n    \n    \n    if (onReady !== undefined) {\n      onReady(libreMap);\n    }\n  }\n\n  function cleanupMap() {\n    if (map.value) {\n      map.value.remove();\n      map.value = null;\n    }\n  }\n  \n  // { MapLibre Demo Tiles\n  //   container: id,\n  //   style: 'https://demotiles.maplibre.org/style.json', // style URL\n  //   center: options.loc ? [options.loc[1], options.loc[0]] : [0, 0], // starting position [lng, lat]\n  //   zoom: options.zoom ?? 1 // starting zoom\n  // }\n  \n  // { \n  //   container: id,\n  //   style: 'https://tiles.openfreemap.org/styles/liberty', // style URL\n  //   center: options.loc ? [options.loc[1], options.loc[0]] : [0, 0], // starting position [lng, lat]\n  //   zoom: options.zoom ?? 1, // starting zoom,\n  //   attributionControl: false\n  // }\n  \n  // { CartoDB Positron\n  //   container: id,\n  //   style: 'https://{s}.basemaps.cartocdn.com/mapboxgl/style_tpl.json', // style URL\n  //   center: options.loc ? [options.loc[1], options.loc[0]] : [0, 0], // starting position [lng, lat]\n  //   zoom: options.zoom ?? 1 // starting zoom\n  // }  \n  function createMap(): Ref<M.Map> {\n    const _map = new M.Map({\n      container: id,\n      // style: 'https://tiles.openfreemap.org/styles/liberty', // style URL\n      style: 'https://demotiles.maplibre.org/style.json',\n      center: options.loc ? [options.loc[1], options.loc[0]] : [0, 0], // starting position [lng, lat]\n      zoom: options.zoom ?? 1, // starting zoom,\n      attributionControl: false\n    }).addControl(new AttributionControl({\n      compact: true,\n    }));\n    \n    _map.on('style.load', setupMap);\n    \n    map.value = _map;\n    return map as unknown as Ref<M.Map>;\n  }\n\n  function setView(latlng: LatLngPair, zoom: number) {\n    if (map.value) {\n      map.value.setCenter([latlng[1], latlng[0]]);\n      map.value.setZoom(zoom);\n    }\n  }\n  \n  function getCenter() {\n    if (map.value) {\n      return map.value.getCenter();\n    }\n  }\n  \n  // function getZoom() {\n  //   if (map.value) {\n  //     return map.value.getZoom();\n  //   }\n  // }\n  \n  function resetView() {\n    if (map.value) {\n      setView(options.loc, options.zoom);\n    }\n  }\n  \n  onMounted(() => {\n    \n  });\n\n  onUnmounted(() => {\n    cleanupMap();\n  });\n\n  return {\n    map: map as Ref<M.Map | null>,\n    createMap,\n    setView,\n    resetView,\n    cleanupMap,\n    getCenter\n  } as MapLibreComposable;\n}\n","import { IControl, Map } from \"maplibre-gl\";\nimport { LngLatPair } from \"@/types\";\n\nexport class CDSMaplibreHomeTool implements IControl {\n  private _container: HTMLElement | undefined;\n  private _button: HTMLButtonElement | undefined;\n  private _homeIcon: HTMLImageElement | undefined;\n  private _map: Map | undefined;\n  private _centerLonLat: [number, number];\n  private _zoom: number;\n  private _onHome: CallableFunction;\n    \n  constructor(centerLonLat: LngLatPair, zoom: number, onHome: CallableFunction ) {\n    this._centerLonLat = centerLonLat;\n    this._zoom = zoom;\n    this._onHome = onHome;\n  }\n    \n  onAdd(map: Map): HTMLElement {\n    \n    this._map = map;\n    this._container = document.createElement('div');\n    this._container.className = 'maplibregl-ctrl maplibregl-ctrl-group maplibre-control-cds-home';\n    \n    this._button = document.createElement('button');\n    this._button.className = 'maplibregl-ctrl-icon maplibre-control-cds-home-button';\n    this._button.type = 'button';\n    this._button.title = 'Home';\n    this._button.addEventListener('click', this._goHome.bind(this));\n    \n    this._homeIcon = document.createElement('img');\n    this._homeIcon.style.padding = '5px';\n    // SVG icon from Font Awesome https://fontawesome.com/icons/house?f=classic&s=solid (free one)\n    const svg = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d=\"M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z\"/></svg>';\n    this._homeIcon.src = `data:image/svg+xml,${encodeURIComponent(svg)}`;\n    \n    this._button.appendChild(this._homeIcon);\n    this._container.appendChild(this._button);\n    \n    return this._container;\n  }\n  \n  onRemove(): void {\n    // remove the event listener & element\n    this._container?.removeEventListener('click', this._goHome);\n    if (this._container && this._container.parentNode) {\n      this._container.parentNode.removeChild(this._container);\n    }\n  }\n  \n  _goHome() {\n    if (this._map) {\n      this._map.flyTo({\n        center: this._centerLonLat,\n        zoom: this._zoom\n      });\n      this._onHome();\n    }\n  }\n    \n    \n}","import { Ref, ref, watch } from 'vue';\nimport { Map, NavigationControl } from 'maplibre-gl';\nimport 'maplibre-gl/dist/maplibre-gl.css';\nimport { CDSMaplibreHomeTool } from './MaplibreHomeTool';\nimport { LatLngPair, LngLatPair } from '@/types';\n\nexport function usezoomhome(map: Ref<Map | null>, home: LatLngPair, zoom: number, callback: CallableFunction = () => null) {\n\n  const startingCenter = [home[1], home[0]] as LngLatPair;\n  const zoomHome: Ref<null | CDSMaplibreHomeTool> = ref(null);\n  \n\n  \n  function createControl() {\n    const control = new CDSMaplibreHomeTool(startingCenter, zoom, callback);\n    return control;\n  }\n  \n  \n  if (map.value !== null) {\n    map.value.addControl(new NavigationControl({showCompass: false}), 'top-left');\n    zoomHome.value = createControl();\n    map.value.addControl(zoomHome.value, 'top-left');\n  }\n  \n  watch(map, (newValue) => {\n    if (newValue !== null) {\n      newValue.addControl(new NavigationControl({showCompass: false}), 'top-left');\n      zoomHome.value = createControl();\n      newValue.addControl(zoomHome.value, 'top-left');\n    }\n  });\n  \n  \n  return zoomHome.value;\n\n}\n","import {ref, Ref, watch, onUnmounted, toValue, toRef} from 'vue';\nimport { BoundingBox } from '../../types';\nimport M from 'maplibre-gl';\n\n\n\nexport interface MaplibreImageOverlayComposable {\n  overlay: Ref<M.ImageSource | null>;\n  addTo: (map: M.Map) => void;\n}\n\nexport function useImageOverlay(\n  imageUrl: Ref<string> | string, \n  opacity: Ref<number> | number,\n  imageBounds: Ref<BoundingBox>,\n  overlayId='image-overlay',\n): MaplibreImageOverlayComposable {\n  \n  imageUrl = toRef(imageUrl);\n  opacity = toRef(opacity);\n  imageBounds = toRef(imageBounds);\n  const overlay = ref<M.ImageSource | null>(null);\n  \n  const layer: M.LayerSpecification = {\n    id: overlayId,\n    type: \"raster\",\n    source: overlayId,\n    paint: {\n      'raster-opacity': toValue(opacity),\n      'raster-fade-duration': 0,\n      'raster-resampling': 'nearest',\n    }\n  };\n  \n  \n  function toMaplibreBounds(boundingBox: BoundingBox): M.Coordinates {\n    // Four geographical coordinates, represented as arrays of \n    // longitude and latitude numbers, which define the corners of the image. \n    // The coordinates start at the top left corner of the image and proceed in \n    // clockwise order. They do not have to represent a rectangle.\n    // TL -> TR -> BR -> BL (NW, NE, SE, NW) [long, lat]\n    return [\n      [\n        boundingBox.west, \n        boundingBox.north\n      ], // top-left\n      [\n        boundingBox.east, \n        boundingBox.north\n      ], // top-right\n      [\n        boundingBox.east, \n        boundingBox.south\n      ], // bottom-right\n      [\n        boundingBox.west, \n        boundingBox.south\n      ], // bottom-left\n    ];\n  }\n  \n  function addSource(map: M.Map) {\n    map.addSource(overlayId,\n      {\n        type: \"image\",\n        url: toValue(imageUrl),\n        coordinates: toMaplibreBounds(imageBounds.value),\n      } \n    );\n    return map.getSource(overlayId);\n  }\n  \n  function addLayer(map: M.Map) {\n    map.addLayer(layer);\n    return map.getLayer(overlayId);\n  }\n  \n  function addTo(map: M.Map) {\n    map.on('style.load', () => {\n      const source = addSource(map);\n      addLayer(map);\n      \n      if (source !== undefined) {\n        overlay.value = source as M.ImageSource;\n        configureOverlay();\n      }\n    });\n  }\n  \n  function updateOrClearImage(url: string) {\n    if (url && overlay.value) {\n      overlay.value.updateImage({url: url});\n      if (!overlay.value.map.getLayer(overlayId)) {\n        overlay.value.map.addLayer(layer);\n      }\n    } else if (overlay.value) {\n      overlay.value.map.removeLayer(overlayId);\n    }\n    \n  }\n  \n  watch(imageUrl, (url: string) => {\n    updateOrClearImage(url);\n  });\n\n  watch(opacity, (value: number) => {\n    if (overlay.value) {\n      overlay.value.map.setPaintProperty(overlayId, 'raster-opacity', value);\n    }\n  });\n\n  watch(imageBounds, (bounds: BoundingBox) => {\n    if (overlay.value) {\n      overlay.value.setCoordinates(toMaplibreBounds(bounds));\n    }\n  });\n  \n  function configureOverlay() {\n    if (overlay.value) {\n      overlay.value.map.setPaintProperty(overlayId, 'raster-fade-duration', 0);\n    }\n  }\n  \n  \n  \n  \n\n  onUnmounted(() => {\n    if (overlay.value) {\n      overlay.value.map.removeLayer(overlayId).removeSource(overlayId);\n    }\n  });\n  \n  return { overlay, addTo} as MaplibreImageOverlayComposable;\n\n}","import {ref, watch, Ref, onUnmounted} from 'vue';\n\n\nimport fieldOfRegard from \"@/assets/TEMPO_FOR.json\";\nimport augustFieldOfRegard from \"@/assets/august_for.json\";\n\n\nimport M from 'maplibre-gl';\n\nexport interface MaplibreFieldOfRegardComposable {\n  addFieldOfRegard: () => void;\n  showFieldOfRegard: Ref<boolean>;\n  updateFieldOfRegard: () => void;\n  fieldOfRegardLayer: Ref<M.GeoJSONSource | null>;\n}\n\nexport function useFieldOfRegard(\n  date: Ref<Date>,\n  map: Ref<M.Map | null>\n): MaplibreFieldOfRegardComposable {\n\n  const showFieldOfRegard = ref(true);\n  let usingAugust = true as boolean | null;\n  const fieldOfRegardLayer = ref<M.GeoJSONSource | null>(null);\n  const fieldOfRegardLayerId = 'field-of-regard';\n\n\n  function createFoRLayer() {\n    if (!map.value) {\n      console.warn(\"Map is not initialized, cannot create Field of Regard layer.\");\n      return;\n    }\n    // Create the Source if it doesn't exist\n    let source = map.value.getSource(fieldOfRegardLayerId);\n    if (source === undefined) {\n      map.value.addSource(fieldOfRegardLayerId, {\n        'type': 'geojson',\n        data: fieldOfRegard as GeoJSON.GeometryCollection,\n      });\n\n      source = map.value.getSource(fieldOfRegardLayerId);\n    }\n\n    // Create the layer if it doesn't exist\n    let layer = map.value.getLayer(fieldOfRegardLayerId);\n    if (layer === undefined) {\n      map.value.addLayer({\n        id: fieldOfRegardLayerId,\n        type: 'line',\n        source: fieldOfRegardLayerId,\n        paint: {\n          \"line-color\": \"#c10124\",\n          \"line-width\": 1,\n          \"line-opacity\": 0.8,\n        }\n      });\n\n      layer = map.value.getLayer(fieldOfRegardLayerId);\n    }\n\n    if (source) {\n      fieldOfRegardLayer.value = source as M.GeoJSONSource;\n    }\n  }\n\n  function clearFoR() {\n    if (fieldOfRegardLayer.value) {\n      if (fieldOfRegardLayer.value.map.getLayer(fieldOfRegardLayerId)) {\n        fieldOfRegardLayer.value.map\n          .removeLayer(fieldOfRegardLayerId)\n          .removeSource(fieldOfRegardLayerId);\n      }\n    }\n  }\n\n\n  function updateFieldOfRegard() {\n\n    if (date.value.getUTCFullYear() === 2023 && date.value.getUTCMonth() === 7) {\n      fieldOfRegardLayer.value?.setData(augustFieldOfRegard as GeoJSON.GeometryCollection);\n      usingAugust = true;\n    } else {\n      if (usingAugust) { // only want this to run if it has to\n        fieldOfRegardLayer.value?.setData(fieldOfRegard as GeoJSON.GeometryCollection);\n        usingAugust = false;\n      }\n    }\n  }\n\n  function addFieldOfRegard() {\n    if (showFieldOfRegard.value && map.value) {\n      if (map.value.loaded()) {\n        createFoRLayer();\n      } else {\n        map.value.on('style.load', () => {\n          createFoRLayer();\n        });\n      }\n    }\n  }\n\n  watch(showFieldOfRegard, (show: boolean) => {\n    if (show) {\n      createFoRLayer();\n    } else if (map.value) {\n      clearFoR();\n    }\n  });\n\n  watch(date, updateFieldOfRegard);\n\n\n  onUnmounted(() => {\n    if (map.value) {\n      clearFoR();\n    }\n  });\n\n  return {\n    addFieldOfRegard,\n    showFieldOfRegard,\n    updateFieldOfRegard,\n    fieldOfRegardLayer: fieldOfRegardLayer as Ref<M.GeoJSONSource | null>,\n  };\n}\n","import {Ref, ref, watch} from 'vue';\nimport M, {Marker} from 'maplibre-gl';\nimport { LatLngPair } from '@/types';\n\n\nexport interface MaplibreLocationMarker {\n  locationMarker: Ref<M.Marker | null>;\n  setMarker: (latlng: LatLngPair) => void;\n  removeMarker: () => void;\n  showLocationMarker: Ref<boolean>;\n}\n\nexport function useLocationMarker( map: Ref<M.Map | null>, show: boolean): MaplibreLocationMarker {\n  \n  const showLocationMarker = ref(show);\n  const locationMarker = ref<null | Marker>(null);\n  \n  \n  const addToMap = () => {\n    if (locationMarker.value !== null && map.value !== null) {\n      locationMarker.value.addTo(map.value);\n    }\n  };\n  \n  function setMarker(latlng: LatLngPair) {\n    if (!map.value) return ;\n    \n    const lnglat = [latlng[1], latlng[0]] as M.LngLatLike;\n    \n    if (locationMarker.value == null) {\n      \n      locationMarker.value = new M.Marker()\n        .setLngLat(lnglat);\n      \n    } else {\n      locationMarker.value.setLngLat(lnglat);\n    }\n    \n    if (showLocationMarker.value) {\n      addToMap();\n    }\n  }\n  \n  function removeMarker() {\n    locationMarker.value?.remove();\n  }\n  \n  watch(showLocationMarker, (show: boolean) => {\n    if (show) {\n      addToMap();\n    } else {\n      removeMarker();\n    }\n  });\n  \n  return {\n    locationMarker: locationMarker as Ref<M.Marker | null>,\n    setMarker,\n    removeMarker,\n    showLocationMarker\n  };\n}","import { onMounted, onUnmounted, ref, watch, type Ref } from \"vue\";\nimport { GeoJSONSource, LngLat, Map, MapMouseEvent } from \"maplibre-gl\";\nimport { v4 } from \"uuid\";\n\nimport type { RectangleSelectionInfo } from \"../../types\";\nimport type { LayerType } from \"./utils\";\n\n\nexport function useRectangleSelection(\n  map: Ref<Map | null>,\n  interactColor: string = \"yellow\",\n  startActive: boolean = false,\n) {\n\n  let rectangleSource: GeoJSONSource | null = null;\n  let rectangleLayer: LayerType | undefined = undefined;\n  let startCoords: LngLat | null = null;\n  let geoJson: GeoJSON.FeatureCollection;\n  const selectionInfo = ref<RectangleSelectionInfo | null>(null);\n  const active = ref(startActive);\n  const uuid = v4();\n\n  onMounted(() => {\n    const mMap = map.value;\n    if (active.value && mMap) {\n      updateListeners(mMap, active.value);\n    }\n  });\n\n  function onMousedown(event: MapMouseEvent) {\n    const mMap = map.value;\n    if (!mMap) {\n      return;\n    }\n\n    startCoords = event.lngLat;\n    geoJson = {\n      type: \"FeatureCollection\",\n      features: [{\n        type: \"Feature\",\n        geometry: {\n          type: \"Polygon\",\n          coordinates: [[\n            [startCoords.lng, startCoords.lat],\n            [startCoords.lng, startCoords.lat],\n            [startCoords.lng, startCoords.lat],\n            [startCoords.lng, startCoords.lat],\n          ]],\n        },\n        properties: {},\n      }],\n    };\n\n    mMap.addSource(uuid, {\n      type: \"geojson\",\n      data: geoJson,\n    });\n\n    const source = mMap.getSource(uuid);\n    if (!source) {\n      return;\n    }\n\n    rectangleSource = source as GeoJSONSource;\n\n    mMap.addLayer({\n      id: uuid,\n      type: \"line\",\n      source: uuid,\n      paint: {\n        \"line-color\": interactColor,\n        \"line-width\": 2,\n        \"line-dasharray\": [2, 1],\n      }\n    });\n\n    const layer = mMap.getLayer(uuid);\n    if (layer) {\n      rectangleLayer = layer;\n    }\n  }\n\n  function onMouseup(event: MapMouseEvent) {\n    const mMap = map.value;\n    if (!mMap || startCoords === null) {\n      return;\n    }\n\n    const eventCoords = event.lngLat;\n    selectionInfo.value = {\n      xmin: startCoords.lng,\n      ymin: startCoords.lat,\n      xmax: eventCoords.lng,\n      ymax: eventCoords.lat,\n    };\n\n    if (rectangleLayer) {\n      mMap.removeLayer(rectangleLayer.id);\n    }\n    if (rectangleSource) {\n      mMap.removeSource(rectangleSource.id);\n    }\n    startCoords = null;\n\n  }\n\n  function onMousemove(event: MapMouseEvent) {\n    const mMap = map.value;\n    if (!mMap || (startCoords === null) || (!geoJson)) {\n      return;\n    }\n\n    const eventCoords = event.lngLat;\n    const coordinates = [[\n      [startCoords.lng, startCoords.lat],\n      [eventCoords.lng, startCoords.lat],\n      [eventCoords.lng, eventCoords.lat],\n      [startCoords.lng, eventCoords.lat],\n      [startCoords.lng, startCoords.lat],\n    ]];\n\n    geoJson.features[0] = {\n      ...geoJson.features[0],\n      geometry: {\n        type: \"Polygon\",\n        coordinates,\n      }\n    };\n\n    rectangleSource?.setData(geoJson);\n  }\n\n  function updateListeners(map: Map, active: boolean) {\n    if (active) {\n      map.dragPan.disable();\n      map.scrollZoom.disable();\n      map.on(\"mousedown\", onMousedown);\n      map.on(\"mouseup\", onMouseup);\n      map.on(\"mousemove\", onMousemove);\n    } else {\n      map.dragPan.enable();\n      map.scrollZoom.enable();\n      map.off(\"mousedown\", onMousedown);\n      map.off(\"mouseup\", onMouseup);\n      map.off(\"mousemove\", onMousemove);\n    }\n  }\n\n  watch(active, (nowActive: boolean) => {\n    const mMap = map.value;\n    if (mMap !== null) {\n      updateListeners(mMap, nowActive);\n    }\n  });\n\n  // If we're going to take in the map as a ref,\n  // we might as well update if its value does\n  watch(map, (newMap: Map | null) => {\n    if (newMap !== null) {\n      updateListeners(newMap, active.value);\n    }\n  });\n\n  onUnmounted(() => {\n    // The map will probably be destroyed along with the component using this composable\n    // But if not, we should remove handlers\n    const mMap = map.value;\n    if (mMap !== null && active.value) {\n      updateListeners(mMap, false);\n    }\n  });\n\n  return {\n    selectionInfo,\n    active,\n  };\n\n}\n","import { GeoJSONSource, Map } from \"maplibre-gl\";\nimport { v4 } from \"uuid\";\n\nimport { RectangleSelectionInfo } from \"../../types\";\n\nconst layerGetter = (m: Map, id: string) => m.getLayer(id);\nexport type LayerType = Exclude<ReturnType<typeof layerGetter>, undefined>;\n\nfunction createBounds(info: RectangleSelectionInfo) {\n  return [\n    [info.xmin, info.ymin],\n    [info.xmax, info.ymin],\n    [info.xmax, info.ymax],\n    [info.xmin, info.ymax],\n    [info.xmin, info.ymin],\n  ];\n}\n\n\nexport function addRectangleLayer(\n  map: Map,\n  info: RectangleSelectionInfo,\n  color: string,\n) {\n  \n  const uuid = v4();\n  const geoJson: GeoJSON.FeatureCollection = {\n    type: \"FeatureCollection\",\n    features: [{\n      type: \"Feature\",\n      geometry: {\n        type: \"Polygon\",\n        coordinates: [\n          createBounds(info),\n        ],\n      },\n      properties: {},\n    }],\n  };\n\n  map.addSource(uuid, {\n    type: \"geojson\",\n    data: geoJson,\n  });\n  const source = map.getSource(uuid) as GeoJSONSource;\n\n  map.addLayer({\n    id: uuid,\n    type: \"fill\",\n    source: uuid,\n    paint: {\n      \"fill-color\": color,\n      \"fill-opacity\": 0.7,\n    }\n  });\n\n  return { layer: source };\n}\n\nexport function updateRectangleBounds(\n  source: GeoJSONSource,\n  info: RectangleSelectionInfo,\n) {\n  source.getData().then(data => {\n    const geoJson = data as GeoJSON.FeatureCollection;\n    geoJson.features[0] = {\n      ...geoJson.features[0],\n      geometry: {\n        type: \"Polygon\",\n        coordinates: [createBounds(info)],\n      }\n    };\n\n    source.setData(geoJson);\n  });\n}\n\nexport function removeRectangleLayer(\n  map: Map,\n  layer: LayerType,\n) {\n  map.removeLayer(layer.id);\n  map.removeSource(layer.id);\n}\n","import { Ref } from 'vue';\nimport maplibregl from 'maplibre-gl';\n\nexport interface MultiMarkerOptions {\n  color?: string;\n  fillColor?: string;\n  fillOpacity?: number;\n  opacity?: number;\n  radius?: number;\n  outlineColor?: string;\n  paint?: maplibregl.CircleLayerSpecification['paint'];\n  layout?: maplibregl.CircleLayerSpecification['layout'];\n  shape?: 'circle' | 'marker';\n}\n\nfunction toGeoJSON(points: Array<{ x: number; y: number }>): GeoJSON.FeatureCollection<GeoJSON.Point> {\n  return {\n    type: 'FeatureCollection',\n    features: points.map(pt => ({\n      type: 'Feature',\n      geometry: { type: 'Point', coordinates: [pt.x, pt.y] } as GeoJSON.Point,\n      properties: {},\n    })),\n  };\n}\n\nexport function useMultiMarker(map: Ref<maplibregl.Map | null>, options: MultiMarkerOptions = {}) {\n  const sourceId = 'multi-marker-source';\n  const layerId = 'multi-marker-layer';\n  \n  function optionsToPaint() {\n    return {\n      'circle-radius': options.radius ?? 8,\n      'circle-color': options.fillColor ?? options.color ?? '#ff0000',\n      'circle-opacity': options.fillOpacity ?? options.opacity ?? 0.8,\n      'circle-stroke-color': options.outlineColor ?? options.color ?? '#000',\n      'circle-stroke-width': 2\n    };\n  }\n\n  function addMarkers(points: Array<{ x: number; y: number }>) {\n    if (!map.value) return;\n    clearMarkers();\n    const geojson = toGeoJSON(points);\n    if (map.value.getSource(sourceId)) {\n      (map.value.getSource(sourceId) as maplibregl.GeoJSONSource).setData(geojson);\n    } else {\n      map.value.addSource(sourceId, {\n        type: 'geojson',\n        data: geojson,\n      });\n    }\n    if (!map.value.getLayer(layerId)) {\n      map.value.addLayer({\n        id: layerId,\n        type: 'circle',\n        source: sourceId,\n        paint: {\n          ...optionsToPaint(),\n          ...(options.paint ?? {}),\n        },\n        layout: options.layout ?? {\n          'visibility': 'visible',\n        },\n      } as maplibregl.CircleLayerSpecification);\n    }\n  }\n\n  function clearMarkers() {\n    if (!map.value) return;\n    if (map.value.getLayer(layerId)) {\n      map.value.removeLayer(layerId);\n    }\n    if (map.value.getSource(sourceId)) {\n      map.value.removeSource(sourceId);\n    }\n  }\n\n  return { addMarkers, clearMarkers };\n}","/* eslint-disable @typescript-eslint/naming-convention */\n// import L from 'leaflet';\n// import * as esri from 'esri-leaflet';\n\n// const earthdataRestSerivceURL = \"https://gis.earthdata.nasa.gov/image/rest/services/C2930763263-LARC_CLOUD/TEMPO_NO2_L3_V03_HOURLY_TROPOSPHERIC_VERTICAL_COLUMN/ImageServer\";\nimport { type ImageMapLayer } from 'esri-leaflet';\nimport { Variables } from './types';\n\ntype ColorRamps = \"Magma\" | \"Inferno\" | \"Plasma\" | \"Viridis\" | \"Gray\" | \"Hillshade\";\n\ntype PixelType = Parameters<ImageMapLayer['setPixelType']>[0];\n\ninterface RasterFunctionObject {\n  rasterFunction: string;\n  variableName?: string; // Optional, as it might be implied or set by composition\n  rasterFunctionArguments?: {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any;\n    Raster?: RasterFunctionObject | { variableName: string }; // Input can be another function or the base 'Raster'\n  };\n  outputPixelType?: PixelType;\n}\n\n// https://developers.arcgis.com/rest/services-reference/enterprise/raster-function-objects/\n// https://developers.arcgis.com/rest/services-reference/enterprise/raster-function-objects/#resample\nexport function _stretchRule(min: number, max: number): RasterFunctionObject {\n  return {\n    'rasterFunction': 'Stretch',\n    'outputPixelType': 'U8' as PixelType, \n    'variableName': 'Raster',\n    'rasterFunctionArguments': {\n      'StretchType': 5,\n      'Statistics': [[\n        min, // max\n        max, // min\n        0,0\n      ]],\n      'DRA': false,\n      'UseGamma': false,\n      'Gamma': [1],\n      'ComputeGamma': true,\n      'Min': 255,\n      'Max': 0\n    },\n  };\n}\n\nexport const stretches = {\n  'NO2_Troposphere': [100000000000000, 15000000000000000],\n  'Ozone_Column_Amount': [260, 400],\n  'HCHO': [0, 300000000000000000],\n} as Record<Variables, [number, number]>;\n  \nexport const _colorMapRule: RasterFunctionObject = {\n  'rasterFunction': 'Colormap',\n  'variableName': 'Raster',\n  'rasterFunctionArguments': {\n    'ColormapName': \"Magma\" as ColorRamps,\n  },\n};\n\nexport const _resampleRule: RasterFunctionObject =  {\n  'rasterFunction': 'Resample',\n  'variableName': 'Raster',\n  'rasterFunctionArguments': {\n    'ResamplingType': '0', // Nearest Neighbor\n  },\n};\n\n\nexport function composeRasterRules(\n  baseRule: RasterFunctionObject,\n  additionalRules: RasterFunctionObject[]\n): RasterFunctionObject {\n  let currentRule: RasterFunctionObject = { ...baseRule }; \n\n  \n  for (let i = 0; i < additionalRules.length; i++) {\n    const nextOuterRule = { ...additionalRules[i] }; // Copy to avoid modifying original rule objects\n\n    // Ensure rasterFunctionArguments exists\n    if (!nextOuterRule.rasterFunctionArguments) {\n      nextOuterRule.rasterFunctionArguments = {};\n    }\n\n    // Assign the current (inner) rule as the 'Raster' input to the next outer rule.\n    nextOuterRule.rasterFunctionArguments.Raster = currentRule;\n\n    currentRule = nextOuterRule; // The newly composed rule becomes the current one for the next iteration\n  }\n\n  return currentRule;\n}\n\nexport const renderingRule = (range: [number, number]) => composeRasterRules(_stretchRule(Math.min(...range), Math.max(...range)), [_colorMapRule, _resampleRule]);\n\n\n\ninterface MultidimensionalDefinition {\n  variableName: string;\n  dimensionName: string;\n  values: number[] | Array<number[]>;\n}\n\n\n\nexport interface EsriSlice {\n  sliceId: number;\n  multidimensionalDefinition: MultidimensionalDefinition[];\n}\n\nexport interface EsriSliceResponse {\n  slices: EsriSlice[];\n}\n\n\nexport type VariableNames = 'NO2_Troposphere' | 'Ozone_Column_Amount' | 'HCHO';\n\nexport async function fetchEsriTimeSteps(esriUrl: string, variableName: VariableNames, dimensionName = \"StdTime\"): Promise<EsriSliceResponse> {\n  const url = esriUrl + '/slices';\n  const format = \"json\";\n  const multidimensionalDefinition = { variableName: variableName, dimensionName: dimensionName };\n  const params = { f: format, multidimensionalDefinition: JSON.stringify(multidimensionalDefinition) };\n  const fetchURL = new URL(url);\n  fetchURL.search = new URLSearchParams(params).toString();\n  return fetch(fetchURL).then(res => {\n    return res.json();\n  });\n}\n\n\nexport function extractTimeSteps(data: EsriSliceResponse): number[] {\n  const slices = data.slices;\n  const timesteps = slices.map(slice => slice.multidimensionalDefinition[0].values[0]);\n  // check if timesteps are arrays or numbers. if arrays take first element of each\n  \n\n  return timesteps.reduce((acc: number[], val) => {\n    if (Array.isArray(val)) {\n      return acc.concat(val[0]);\n    } else {\n      acc.push(val);\n      return acc;\n    }\n  }, []);\n}\n","import { ref, watch, Ref, MaybeRef, toRef, nextTick } from 'vue';\nimport { renderingRule, fetchEsriTimeSteps, extractTimeSteps, VariableNames, stretches } from '../ImageLayerConfig';\nimport { Map } from 'maplibre-gl';\n\nimport { ImageService } from 'mapbox-gl-esri-sources';\n\n\ninterface UseEsriLayer {\n  esriImageSource: Ref<maplibregl.RasterTileSource | null>;\n  opacity: Ref<number>;\n  noEsriData: Ref<boolean>;\n  esriTimesteps: Ref<number[]>;\n  getEsriTimeSteps: () => void;\n  updateEsriOpacity: (value?: number | null | undefined) => void;\n  updateEsriTimeRange: () => void;\n  addEsriSource: (Map) => void;\n  changeUrl: (newUrl: string, variableName: VariableNames) => void;\n}\n\nexport function useEsriLayer(url: string, variableName: VariableNames, timestamp: Ref<number>, opacity: MaybeRef<number>): UseEsriLayer {\n\n  const esriLayerId = 'esri-source';\n  const esriImageSource = ref<maplibregl.RasterTileSource | null>(null);\n  const map = ref<Map | null>(null);\n\n  const esriTimesteps = ref([] as number[]);\n  const opacityRef = toRef(opacity);\n  const noEsriData = ref(false);\n  const variableNameRef = toRef(variableName);\n  const urlRef = toRef(url);\n  \n  const options = {\n    'format': 'png',\n    'pixelType': 'U8',\n    'size': '256,256',\n    'transparent': true,\n    'bboxSR': 3857,\n    'imageSR': 3857,\n    'bbox': '{bbox-epsg-3857}',\n    'interpolation': 'RSP_NearestNeighbor',\n    'renderingRule': renderingRule(stretches[variableNameRef.value]),\n  };\n  const _esriImageOptions = Object.entries(options).map(([key, value]) => `${key}=${value}`).join('&');\n  \n  function addLayer(map: Map | null | undefined) {\n\n    if (map && !map.getLayer(esriLayerId)) {\n      map.addLayer({\n        id: esriLayerId,\n        type: 'raster',\n        source: esriLayerId,\n        paint: {\n          'raster-resampling': 'nearest',\n          'raster-opacity': opacityRef.value ?? 0.8,\n        },\n      });\n    }\n  }\n  \n  function removeLayer(map: Map | null | undefined) {\n    if (map && map.getLayer(esriLayerId)) {\n      map.removeLayer(esriLayerId);\n    }\n  }\n  \n  const dynamicMapService = ref<ImageService | null>(null);\n  \n  function createImageService(map: Map, url: string, options) {\n    return new ImageService(\n      esriLayerId,\n      map,\n      {\n        url: url,\n        ...options\n      },\n      {\n        tileSize: 256,\n      }\n    );\n    \n  }\n\n  function addEsriSource(_map: Map) {\n    if (!_map) return;\n    map.value = _map;\n    \n    dynamicMapService.value = createImageService(_map, urlRef.value, options);\n\n    addLayer(_map);\n  }\n  \n\n  \n  function updateEsriTimeRange() {\n    if (!map.value) return;\n\n    const time = timestamp.value;\n\n    const nearest = esriTimesteps.value.length > 0 \n      ? esriTimesteps.value.reduce((a, b) => Math.abs(b - time) < Math.abs(a - time) ? b : a)\n      : time - 1000 * 60 * 15; \n    noEsriData.value = Math.abs((nearest - time) / (1000 * 60)) > 60;\n    // noEsriData.value = nearest > 1752595200000; // Example condition (July 15, 2025 12pm ET for testing)\n    if (noEsriData.value) {\n      console.error('No ESRI data available for the selected time');\n    }\n\n    if (dynamicMapService.value && !noEsriData.value) {\n      dynamicMapService.value.setDate(new Date(nearest), new Date(nearest * 2));\n    } else if (!noEsriData.value) {\n      // if there is esri coverage, then this is the issue\n      console.error('Dynamic Map Service is not initialized');\n    }\n  }\n  \n  async function getEsriTimeSteps() {\n    fetchEsriTimeSteps(urlRef.value, variableNameRef.value)\n      .then((json) => {\n        esriTimesteps.value = extractTimeSteps(json);\n      }).then(() => {\n        nextTick(updateEsriTimeRange);\n      }).catch((error) => {\n        console.error('Error fetching ESRI time steps:', error);\n      });\n  }\n  \n\n\n  watch(timestamp, (_value) => {\n    updateEsriTimeRange();\n  });\n\n  \n  \n  function updateEsriOpacity(value: number | null | undefined = undefined) {\n    if (map.value) {\n      map.value.setPaintProperty(esriLayerId, 'raster-opacity', value ?? opacityRef.value ?? 0.8);\n    }\n  }\n  \n  function changeUrl(newUrl: string, variableName: VariableNames) {\n    if (dynamicMapService.value) {\n      variableNameRef.value = variableName; // Default to NO2 if not provided\n      urlRef.value = newUrl;\n      dynamicMapService.value.esriServiceOptions.url = newUrl;\n      dynamicMapService.value.esriServiceOptions.renderingRule = renderingRule(stretches[variableName]);\n      // console.log(dynamicMapService.value.esriServiceOptions);\n    }\n  }\n\n\n  watch(opacityRef, (_value: number) => {\n    updateEsriOpacity(_value);\n  });\n\n  watch(noEsriData, (value: boolean) => {\n    if (value) {\n      updateEsriOpacity(0);\n      removeLayer(map.value as Map | null);\n    } else {\n      addLayer(map.value as Map | null);\n    }\n  });\n\n  return {\n    esriImageSource,\n    opacity: opacityRef,\n    noEsriData,\n    esriTimesteps,\n    getEsriTimeSteps,\n    updateEsriOpacity,\n    updateEsriTimeRange,\n    addEsriSource,\n    changeUrl,\n  } as UseEsriLayer;\n}\n\n\n","export type EsriGeometryType = 'esriGeometryPoint' | 'esriGeometryMultipoint' | 'esriGeometryPolyline' | 'esriGeometryPolygon' | 'esriGeometryEnvelope';\n\nexport type RectBounds = {\n  xmin: number;\n  ymin: number;\n  xmax: number;\n  ymax: number;\n};\n\nexport type PointBounds = {\n  x: number;\n  y: number;\n};\nexport function rectangleToGeometry(rect: RectBounds) {\n  const { xmin, ymin, xmax, ymax } = rect;\n  return {\n    rings: [[\n      [xmin, ymin],\n      [xmin, ymax],\n      [xmax, ymax],\n      [xmax, ymin],\n      [xmin, ymin]\n    ]],\n    spatialReference: { wkid: 4326 } // Assuming WGS 84\n    // spatialReference: { wkid: 3857 } // Web Mercator. idk if this really matters for points\n  };\n}\n\nexport function pointToGeometry(point: PointBounds) {\n  const { x, y } = point;\n  return {\n    x: x,\n    y: y,\n    spatialReference: { wkid: 4326 } // Assuming WGS 84\n    // spatialReference: { wkid: 3857 } // Web Mercator. idk if this really matters for points\n  };\n}","/* eslint-disable @typescript-eslint/naming-convention */\nimport { rectangleToGeometry, pointToGeometry } from '../geometry';\nimport type { RectBounds, PointBounds, EsriGeometryType } from '../geometry';\nimport type { \n  EsriGetSamplesReturn, \n  EsriGetSamplesReturnError, \n  EsriGetSamplesSample, \n  Variables, \n  EsriInterpolationMethod, \n  CEsriTimeseries \n} from '../types';\nimport type { AggValue, DataPointError } from \"../../types\";\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface FetchOptions {\n  sampleCount?: number;\n  interpolation?: EsriInterpolationMethod;\n  returnFirstValueOnly?: boolean;\n  outFields?: string | string[];\n  sliceID?: string | number;\n}\n\nexport interface TimeRange {\n  start: number;\n  end: number;\n}\n\nexport type TimeRanges = TimeRange | TimeRange[];\n\nexport interface RawSampleData {\n  samples: CEsriTimeseries[];\n  metadata: {\n    totalSamples: number;\n    timeRange: TimeRange | TimeRange[];\n    geometry: RectBounds | PointBounds;\n    geometryType: 'rectangle' | 'point';\n  };\n}\n\nexport interface TimeSeriesData {\n  values: Record<number, AggValue>;\n  errors: Record<number, DataPointError>;\n  locations: Array<{ x: number; y: number }>;\n  geometryType: 'rectangle' | 'point';\n}\n\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n\nfunction safeParseNumber(value: string | null | undefined): number | null {\n  if (value === null || value === '' || value === undefined) return null;\n  const parsed = parseFloat(value);\n  return isNaN(parsed) ? null : parsed;\n}\n\nfunction stringifyEsriGetSamplesParameters(params: {\n  geometry: ReturnType<typeof rectangleToGeometry> | ReturnType<typeof pointToGeometry>;\n  geometryType: EsriGeometryType;\n  sampleDistance?: number;\n  sampleCount?: number;\n  mosaicRule?: string | Record<string, unknown>;\n  pixelSize?: number;\n  returnFirstValueOnly?: boolean;\n  interpolation: EsriInterpolationMethod;\n  outFields?: string | string[];\n  sliceID?: string | number;\n  time?: string | [number, number] | [Date, Date];\n  f: 'pjson';\n}): URLSearchParams {\n  const {\n    geometry,\n    geometryType,\n    sampleDistance,\n    sampleCount,\n    mosaicRule,\n    pixelSize,\n    returnFirstValueOnly,\n    interpolation,\n    outFields,\n    sliceID,\n    time,\n  } = params;\n  \n  const options: Record<string, string> = {\n    f: 'pjson',\n    geometry: JSON.stringify(geometry),\n    geometryType: geometryType,\n    interpolation: interpolation,\n  };\n\n  if (sampleDistance) options.sampleDistance = sampleDistance.toString();\n  if (sampleCount) options.sampleCount = sampleCount.toString();\n  if (mosaicRule) options.mosaicRule = JSON.stringify(mosaicRule);\n  if (pixelSize) options.pixelSize = pixelSize.toString();\n  if (returnFirstValueOnly !== undefined) options.returnFirstValueOnly = returnFirstValueOnly.toString();\n  if (outFields) options.outFields = Array.isArray(outFields) ? outFields.join(',') : outFields;\n  if (sliceID !== undefined) options.sliceID = sliceID.toString();\n  if (time) {\n    const timeStr = Array.isArray(time)\n      ? time.map((t) => (t instanceof Date ? t.getTime() : t)).join(',')\n      : time;\n    options.time = timeStr;\n  }\n\n  return new URLSearchParams(options);\n}\n\n// ============================================================================\n// TEMPO DATA SERVICE\n// ============================================================================\n\nexport class TempoDataService {\n  private baseUrl: string;\n  private variable: Variables;\n  \n  constructor(baseUrl: string, variable: Variables = \"NO2_Troposphere\") {\n    this.baseUrl = baseUrl;\n    this.variable = variable;\n  }\n\n  // ============================================================================\n  // CONFIGURATION\n  // ============================================================================\n\n  setVariable(variable: Variables): void {\n    this.variable = variable;\n  }\n\n  getVariable(): Variables {\n    return this.variable;\n  }\n\n  setBaseUrl(baseUrl: string): void {\n    this.baseUrl = baseUrl;\n  }\n\n  getBaseUrl(): string {\n    return this.baseUrl;\n  }\n\n  // ============================================================================\n  // CORE DATA FETCHING\n  // ============================================================================\n  /**\n   * Fetch raw samples from the ESRI Image Server\n   */\n  async fetchSample(\n    geometry: RectBounds | PointBounds,\n    timeRange: TimeRange,\n    options: FetchOptions = {}\n  ): Promise<RawSampleData> {\n    const esriGeometry = this.isRectBounds(geometry) \n      ? rectangleToGeometry(geometry as RectBounds)\n      : pointToGeometry(geometry as PointBounds);\n\n    const geometryType: EsriGeometryType = this.isRectBounds(geometry)\n      ? 'esriGeometryPolygon'\n      : 'esriGeometryPoint';\n\n    // Handle multiple time ranges by combining them\n    const timeString = `${timeRange.start},${timeRange.end}`;\n\n    const params = {\n      f: 'pjson' as const,\n      interpolation: 'RSP_NearestNeighbor' as EsriInterpolationMethod,\n      returnFirstValueOnly: false,\n      geometry: esriGeometry,\n      geometryType: geometryType,\n      time: timeString,\n      sampleCount: options.sampleCount || 30,\n      ...options\n    };\n\n    const urlWithParams = `${this.baseUrl}/getSamples/?${stringifyEsriGetSamplesParameters(params).toString()}`;\n    \n    try {\n      const response = await fetch(urlWithParams);\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n      \n      const data: EsriGetSamplesReturn | EsriGetSamplesReturnError = await response.json();\n      \n      if ('error' in data) {\n        throw new Error(`Error fetching samples (${data.error.code}): ${data.error.message} ${data.error.details}`);\n      }\n\n      const processedSamples = data.samples.map((sample: EsriGetSamplesSample) => ({\n        x: sample.location.x,\n        y: sample.location.y,\n        time: sample.attributes.StdTime,\n        date: new Date(sample.attributes.StdTime),\n        variable: safeParseNumber(sample.attributes[this.variable] ?? ''),\n        value: safeParseNumber(sample.value),\n        locationId: sample.locationId,\n        geometryType: this.isRectBounds(geometry) ? 'rectangle' : 'point' as 'rectangle' | 'point'\n      })); // this is a CEsriTimeseries[]\n      console.log(`Fetched ${processedSamples.length} samples for time range ${timeRange.start}-${timeRange.end}`);\n      return {\n        samples: processedSamples,\n        metadata: {\n          totalSamples: processedSamples.length,\n          timeRange: timeRange,\n          geometry,\n          geometryType: this.isRectBounds(geometry) ? 'rectangle' : 'point'\n        }\n      };\n    } catch (error) {\n      console.error('Error in TempoDataService.fetchSamples:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * Fetch raw samples from the ESRI Image Server\n   */\n  async fetchSamples(\n    geometry: RectBounds | PointBounds,\n    timeRanges: TimeRanges,\n    options: FetchOptions = {}\n  ): Promise<RawSampleData> {\n    \n    if (!Array.isArray(timeRanges)) {\n      return this.fetchSample(geometry, timeRanges, options);\n    }\n    \n    const promises = timeRanges.map(async (tr) => {\n      try {\n        return await this.fetchSample(geometry, tr, options);\n      } catch (error) {\n        console.error(`Error fetching sample for time range ${tr.start}-${tr.end}:`, error);\n        return null;\n      }\n    });\n\n    return Promise.all(promises).then((results) => {\n      const validResults = results.filter((result): result is RawSampleData => result !== null);\n      const samples = validResults.map((result) => result.samples).flat();\n      return {\n        samples,\n        metadata: {\n          totalSamples: samples.length,\n          timeRange: timeRanges,\n          geometry: geometry,\n          geometryType: this.isRectBounds(geometry) ? 'rectangle' : 'point',\n        }\n      } as RawSampleData;\n    });\n  }\n\n  // ============================================================================\n  // AGGREGATION METHODS\n  // ============================================================================\n\n  /**\n   * Aggregate samples by time (for rectangle areas)\n   */\n  aggregateByTime(samples: CEsriTimeseries[]): TimeSeriesData {\n    // Group samples by time\n    const grouped = new Map<number, CEsriTimeseries[]>();\n    samples.forEach((sample) => {\n      if (!grouped.has(sample.time)) {\n        grouped.set(sample.time, []);\n      }\n      grouped.get(sample.time)?.push(sample);\n    });\n\n    // Calculate aggregated values\n    const values: Record<number, AggValue> = {};\n    const errors: Record<number, DataPointError> = {};\n    \n    grouped.forEach((samples, time) => {\n      const sampleValues = samples.map(s => s.value);\n      values[time] = this.calculateMean(sampleValues, time);\n      errors[time] = this.calculateError(sampleValues);\n    });\n\n    // Collect unique locations\n    const seen = new Set<string>();\n    const locations: Array<{ x: number; y: number }> = [];\n    for (const sample of samples) {\n      const key = `${sample.x},${sample.y}`;\n      if (!seen.has(key)) {\n        seen.add(key);\n        locations.push({ x: sample.x, y: sample.y });\n      }\n    }\n\n    return { values, errors, locations, geometryType: samples[0].geometryType };\n  }\n\n  /**\n   * Get single point data (for center points or individual points)\n   */\n  // aggregatePoint(samples: CEsriTimeseries[]): TimeSeriesData | null {\n  //   if (samples.length === 0) return null;\n    \n  //   // For point data, we typically expect one sample per time\n  //   // Group by time and aggregate\n  //   const grouped = new Map<number, CEsriTimeseries[]>();\n  //   samples.forEach((sample) => {\n  //     if (!grouped.has(sample.time)) {\n  //       grouped.set(sample.time, []);\n  //     }\n  //     grouped.get(sample.time)?.push(sample);\n  //   });\n\n  //   // Calculate aggregated values\n  //   const values: Record<number, AggValue> = {};\n  //   const errors: Record<number, DataPointError> = {};\n    \n  //   grouped.forEach((samples, time) => {\n  //     const sampleValues = samples.map(s => s.value);\n  //     values[time] = this.calculateMean(sampleValues, time);\n  //     errors[time] = this.calculateError(sampleValues);\n  //   });\n\n  //   // For point data, we expect only one location\n  //   const locations: Array<{ x: number; y: number }> = [];\n  //   if (samples.length > 0) {\n  //     const sample = samples[0];\n  //     locations.push({ x: sample.x, y: sample.y });\n  //   }\n\n  //   return { values, errors, locations };\n  // }\n\n  // ============================================================================\n  // CONVENIENCE METHODS\n  // ============================================================================\n\n  \n  /**\n   * Fetch and aggragate any valid geometry data (rectangle or point)\n   */\n  async fetchTimeseriesData(\n    geometry: RectBounds | PointBounds,\n    timeRanges: TimeRanges,\n    options: FetchOptions = {}\n  ): Promise<TimeSeriesData> {\n    const rawData = await this.fetchSamples(geometry, timeRanges, options);\n    return this.aggregateByTime(rawData.samples);\n  }\n  \n  /**\n   * Fetch and aggregate rectangle data (current fetchRectangleSamples equivalent)\n   */\n  // async fetchRectangleTimeseries(\n  //   rectangle: RectBounds,\n  //   timeRanges: TimeRanges,\n  //   options: FetchOptions = {}\n  // ): Promise<TimeSeriesData> {\n  //   const rawData = await this.fetchSamples(rectangle, timeRanges, options);\n  //   return this.aggregateByTime(rawData.samples);\n  // }\n\n  /**\n   * Fetch and aggregate point data (current fetchCenterPointSample equivalent)\n   */\n  // async fetchPointTimeseries(\n  //   point: PointBounds,\n  //   timeRanges: TimeRanges,\n  //   options: FetchOptions = {}\n  // ): Promise<TimeSeriesData | null> {\n  //   const rawData = await this.fetchSamples(point, timeRanges, options);\n  //   return this.aggregatePoint(rawData.samples);\n  // }\n\n  /**\n   * Get center point of rectangle and fetch data for it\n   */\n  async fetchCenterPointData(\n    rectangle: RectBounds,\n    timeRanges: TimeRanges,\n    options: FetchOptions = {}\n  ): Promise<TimeSeriesData | null> {\n    const center: PointBounds = {\n      x: (rectangle.xmin + rectangle.xmax) / 2,\n      y: (rectangle.ymin + rectangle.ymax) / 2\n    };\n    \n    return this.fetchTimeseriesData(center, timeRanges, options);\n  }\n\n  // ============================================================================\n  // UTILITY METHODS\n  // ============================================================================\n\n  private isRectBounds(geometry: RectBounds | PointBounds): geometry is RectBounds {\n    return 'xmin' in geometry && 'xmax' in geometry && 'ymin' in geometry && 'ymax' in geometry;\n  }\n\n  private calculateMean(samples: (number | null)[], time: number): AggValue {\n    const validSamples = samples.filter((sample) => sample !== null);\n    if (validSamples.length === 0) return { value: null, date: new Date(time) };\n    const sum = validSamples.reduce((acc, val) => acc + (val ?? 0), 0);\n    return { value: sum / validSamples.length, date: new Date(time) };\n  }\n\n  private calculateError(samples: (number | null)[]): DataPointError {\n    const validSamples = samples.filter((sample) => sample !== null);\n    if (validSamples.length === 0) return { lower: null, upper: null };\n    \n    const mean = validSamples.reduce((acc, val) => acc + (val ?? 0), 0) / validSamples.length;\n    const squaredDiffs = validSamples.map((sample) => {\n      if (sample === null) return 0;\n      return Math.pow(sample - mean, 2);\n    });\n    const variance = squaredDiffs.reduce((acc, val) => acc + val, 0) / validSamples.length;\n    \n    return { lower: Math.sqrt(variance), upper: Math.sqrt(variance) };\n  }\n} ","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, withKeys as _withKeys, createVNode as _createVNode, createElementVNode as _createElementVNode, unref as _unref, createTextVNode as _createTextVNode, withCtx as _withCtx, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, isRef as _isRef, mergeProps as _mergeProps } from \"vue\"\nimport _imports_0 from './assets/TEMPO-Logo-Small.png'\nimport _imports_1 from './assets/smithsonian.png'\n\n\nconst _hoisted_1 = {\n  key: 0,\n  id: \"introduction-overlay\",\n  class: \"elevation-10 gradient-background\"\n}\nconst _hoisted_2 = { id: \"intro-window-close-button\" }\nconst _hoisted_3 = { id: \"splash-screen-acknowledgements\" }\nconst _hoisted_4 = { id: \"splash-screen-logos\" }\nconst _hoisted_5 = { class: \"intro-text mb-3\" }\nconst _hoisted_6 = { id: \"intro-bottom-controls\" }\nconst _hoisted_7 = { id: \"main-content\" }\nconst _hoisted_8 = { class: \"content-with-sidebars\" }\nconst _hoisted_9 = { id: \"logo-title\" }\nconst _hoisted_10 = { class: \"snackbar-alert-ul\" }\nconst _hoisted_11 = [\"data-date\"]\nconst _hoisted_12 = [\"innerHTML\"]\nconst _hoisted_13 = { id: \"menu-area\" }\nconst _hoisted_14 = {\n  style: {\"font-weight\":\"normal\"},\n  tabindex: \"0\",\n  href: \"https://www.cosmicds.cfa.harvard.edu/resources/tempo\",\n  target: \"_blank\",\n  rel: \"noopener\"\n}\nconst _hoisted_15 = { id: \"map-container\" }\nconst _hoisted_16 = { id: \"map\" }\nconst _hoisted_17 = {\n  id: \"loading-circle-progress-container\",\n  class: \"d-flex flex-column align-center justify-center ga-2\"\n}\nconst _hoisted_18 = {\n  key: 0,\n  id: \"map-legend\"\n}\nconst _hoisted_19 = { id: \"map-show-hide-controls\" }\nconst _hoisted_20 = {\n  id: \"opacity-slider-container\",\n  class: \"mt-5\"\n}\nconst _hoisted_21 = { class: \"d-flex flex-row align-center justify-space-between\" }\nconst _hoisted_22 = { class: \"d-flex flex-row align-center justify-space-between\" }\nconst _hoisted_23 = { class: \"d-flex flex-row align-center justify-space-between\" }\nconst _hoisted_24 = { class: \"d-flex flex-row align-center justify-space-between\" }\nconst _hoisted_25 = { class: \"d-flex flex-row align-center justify-space-between\" }\nconst _hoisted_26 = {\n  key: 0,\n  class: \"d-flex flex-row align-center justify-space-between\"\n}\nconst _hoisted_27 = { id: \"location-and-sharing\" }\nconst _hoisted_28 = { id: \"la-fires\" }\nconst _hoisted_29 = { id: \"slider-row\" }\nconst _hoisted_30 = { class: \"thumb-label\" }\nconst _hoisted_31 = { id: \"user-options\" }\nconst _hoisted_32 = { id: \"all-dates\" }\nconst _hoisted_33 = { class: \"d-flex flex-row align-center\" }\nconst _hoisted_34 = [\"disabled\"]\nconst _hoisted_35 = { class: \"d-flex flex-row align-center my-2\" }\nconst _hoisted_36 = { key: 0 }\nconst _hoisted_37 = { key: 1 }\nconst _hoisted_38 = {\n  key: 0,\n  id: \"sample-info\",\n  style: {\"margin-top\":\"1em\"}\n}\nconst _hoisted_39 = {\n  key: 0,\n  class: \"text-caption\"\n}\nconst _hoisted_40 = { class: \"time-range-selection mt-3\" }\nconst _hoisted_41 = { class: \"mt-2\" }\nconst _hoisted_42 = {\n  key: 0,\n  class: \"mt-2\"\n}\nconst _hoisted_43 = { id: \"bottom-options\" }\nconst _hoisted_44 = { key: 0 }\nconst _hoisted_45 = {\n  key: 1,\n  class: \"text-red\"\n}\nconst _hoisted_46 = {\n  key: 2,\n  class: \"mt-2\"\n}\nconst _hoisted_47 = {\n  key: 3,\n  class: \"mt-2 text-red\"\n}\nconst _hoisted_48 = {\n  key: 4,\n  class: \"mt-2\"\n}\nconst _hoisted_49 = { id: \"information\" }\nconst _hoisted_50 = { id: \"body-logos\" }\n\nimport { ref, computed, watch, onMounted, nextTick } from \"vue\";\nimport { API_BASE_URL, blurActiveElement } from \"@cosmicds/vue-toolkit\";\nimport { useDisplay } from 'vuetify';\nimport { DatePickerInstance } from \"@vuepic/vue-datepicker\";\nimport { v4 } from \"uuid\";\nimport { getTimezoneOffset } from \"date-fns-tz\";\nimport { cbarNO2 } from \"./revised_cmap\";\nimport { MapBoxFeature, MapBoxFeatureCollection, geocodingInfoForSearch } from \"./mapbox\";\nimport { _preloadImages } from \"./PreloadImages\";\nimport changes from \"./changes\";\nimport { useBounds } from './composables/useBounds';\nimport { interestingEvents } from \"./interestingEvents\";\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { AggValue, LatLngPair, InitMapOptions, RectangleSelectionInfo, RectangleSelection, RectangleType, MappingBackends } from \"./types\";\nimport type { MillisecondRange } from \"./types/datetime\";\nimport ListComponent from \"./components/ListComponent.vue\";\nimport UserGuide from \"./components/UserGuide.vue\";\nimport SampleTable from \"./components/SampleTable.vue\";\nimport { atleast1d } from \"./utils/atleast1d\";\n\nimport { useUniqueTimeSelection } from \"./composables/useUniqueTimeSelection\";\n\nimport DateTimeRangeSelection from \"./date_time_range_selection/DateTimeRangeSelection.vue\";\nimport TimeChips from \"./components/TimeChips.vue\";\n// Import Leaflet Composables\n// import { useMap } from \"./composables/leaflet/useMap\";\n// import { usezoomhome } from './composables/leaflet/useZoomHome';\n// import { useImageOverlay } from \"./composables/leaflet/useImageOverlay\";\n// import { useFieldOfRegard} from \"./composables/leaflet/useFieldOfRegard\";\n// import { useLocationMarker } from \"./composables/leaflet/useMarker\";\n// import { useRectangleSelection } from \"./composables/leaflet/useRectangleSelection\";\n// import { addRectangleLayer, updateRectangleBounds, removeRectangleLayer } from \"./composables/leaflet/utils\";\n// import { useMultiMarker } from './composables/leaflet/useMultiMarker';\n// import { useEsriLayer } from \"./esri/leaflet/useEsriImageLayer\";\n// const zoomScale = 1; \n\n// Import Maplibre Composables\nimport { useMap } from \"./composables/maplibre/useMap\";\nimport { usezoomhome } from './composables/maplibre/useZoomHome';\nimport { useImageOverlay } from \"./composables/maplibre/useImageOverlay\";\nimport { useFieldOfRegard} from \"./composables/maplibre/useFieldOfRegard\";\nimport { useLocationMarker } from \"./composables/maplibre/useMarker\";\nimport { useRectangleSelection } from \"./composables/maplibre/useRectangleSelection\";\nimport { addRectangleLayer, updateRectangleBounds, removeRectangleLayer } from \"./composables/maplibre/utils\";\nimport { useMultiMarker } from './composables/maplibre/useMultiMarker';\nimport { useEsriLayer } from \"./esri/maplibre/useEsriImageLayer\";\n// import { useEsriLayer } from \"./esri/maplibre/useEsriImageLayerPlain\"; // do not use\nimport { TempoDataService } from \"./esri/services/TempoDataService\";\n\n\n\n// const zoomScale = 0.5; // for maplibre-gl\n\n\nimport { getTimestamps, getExtendedRangeTimestamps } from \"./timestamps\";\nimport { VariableNames } from \"./esri/ImageLayerConfig\";\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst zoomScale = 0.5; // for matplibre-gl\n\nconst BACKEND: MappingBackends = \"maplibre\" as const;\n\ntype RectangleSelectionType = RectangleSelection<typeof BACKEND>;\n\n\ntype SheetType = \"text\" | \"video\" | null;\ntype Timeout = ReturnType<typeof setTimeout>;\n\n\n/**************\n * UI Setup\n *************/\n// const hash = window.location.hash;\nconst showExtendedRangeFeatures = true; //hash.includes(\"extreme-events\");\nconst OPT_OUT_KEY = \"tempo-lite-optout\" as const;\nconst UUID_KEY = \"tempo-lite-uuid\" as const;\nconst infoColor = \"#092088\";\nconst homeLat = 40.044;\nconst homeLon = -98.789;\ntype MoleculeType = keyof typeof esriUrls;\n\ntype SelectionOption = RectangleSelectionType | null;\nconst testErrorAmount = 0.25e15;\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TempoLite',\n  setup(__props) {\n\nconst showImage = ref(false);\n\nconst display = useDisplay();\nconst calendar = ref<DatePickerInstance | null>(null);\nconst urlParams = new URLSearchParams(window.location.search);\nconst showSplashScreen = ref(new URLSearchParams(window.location.search).get(\"splash\")?.toLowerCase() !== \"false\");\nconst extendedRange = ref(window.location.hash.includes(\"extreme-events\") || urlParams.get('extendedRange') === \"true\"); //showExtendedRangeFeatures || urlParams.get('extendedRange') === \"true\";\nconst hideIntro = urlParams.get(\"hideintro\") === \"true\";\nconst WINDOW_DONTSHOWINTRO = hideIntro ? true : window.localStorage.getItem(\"dontShowIntro\") === 'true';\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore --> msPointerEnabled may not be defined in window.navigator\nconst touchscreen = ref(('ontouchstart' in window) || ('ontouchstart' in document.documentElement) || !!window.navigator.msPointerEnabled);\n\n\n\nconst STORY_VISIT_URL = `${API_BASE_URL}/tempo-lite/visit`;\nfunction pingServer(venue: string) {\n\n  fetch(STORY_VISIT_URL, {\n    \n    method: \"POST\",\n    \n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? ''\n    },\n    \n    body: JSON.stringify({\n      info: { venue }\n    })\n    \n  })\n    .then((response) => {\n      if (!response.ok) {\n        console.error(\"Error pinging server\", response.status, response.statusText);\n      } \n    }).\n    catch((error) => {\n      console.error(\"Error pinging server\", error);\n    });\n}\n\nconst venue = (urlParams.get(\"venue\") ?? '').replace(/,/g, '-');\n\nif (venue !== '') {\n  // get current value of venue\n  const venues =  window.localStorage.getItem(\"venues\") ?? '';\n  // if they haven't visited this venue before, ping the server & save it\n  if (!venues.includes(venue)) {\n    pingServer(venue);\n    window.localStorage.setItem(\"venues\", venues ? `${venues},${venue}` : venue);\n  }\n}\n\n\nfunction clearUrl(hash = false) {\n  const newUrl = location.origin + location.pathname + (hash ? location.hash : '');\n  window.history.replaceState({}, '', newUrl);\n}\nclearUrl(true);\n\n\nconst introSlide = ref(1);\nconst inIntro = ref(!WINDOW_DONTSHOWINTRO);\nconst dontShowIntro = ref(WINDOW_DONTSHOWINTRO);\nconst showNotice = ref(true);\nconst sheet = ref<SheetType>(null);\nconst accentColor = ref(\"#068ede\");\nconst accentColor2 = ref(\"#ffcc33\");\n\nlet hasOptOutBeenOpened = false;\nconst introductionOpen = computed(() => inIntro.value && (introSlide.value === 1));\nconst userGuideOpen = computed(() => inIntro.value && (introSlide.value === 4));\n\nlet whatsNewOpenedCount = 0;\nlet whatsNewTimestamp = null as number | null;\nlet whatsNewOpenTimeMs = 0;\nlet introductionOpenedCount = 0;\nlet introductionTimestamp = null as number | null;\nlet introductionOpenTimeMs = 0;\nlet userGuideOpenedCount = 0;\nlet userGuideTimestamp = null as number | null;\nlet userGuideOpenTimeMs = 0;\nlet aboutDataOpenedCount = 0;\nlet aboutDataTimestamp = null as number | null;\nlet aboutDataOpenTimeMs = 0;\nlet creditsOpenedCount = 0;\nlet creditsTimestamp = null as number | null;\nlet creditsOpenTimeMs = 0;\nlet shareButtonClickedCount = 0;\nlet playButtonClickedCount = 0;\nlet timeSliderUsedCount = 0;\nlet opacitySliderUsedCount = 0;\nlet fieldOfRegardToggled = false;\nlet cloudMaskToggled = false;\nlet hiResDataToggled = false;\n\nlet userSelectedCalendarDates: number[] = [];\nlet userSelectedTimezones: string[] = [];\nlet userSelectedLocations: string[] = [];\nlet userSelectedNotableEvents: [string, string][] = [];\n\nconst STORY_DATA_URL = `${API_BASE_URL}/tempo-lite/data`;\nconst storedOptOut = window.localStorage.getItem(OPT_OUT_KEY);\nconst maybeUUID = window.localStorage.getItem(UUID_KEY);\nconst optOut = typeof storedOptOut === \"string\" ? storedOptOut === \"true\" : null;\nconst showPrivacyDialog = ref(false);\nconst responseOptOut = ref(optOut);\nconst existingUser = maybeUUID !== null;\nconst uuid = maybeUUID ?? v4();\nif (!existingUser) {\n  window.localStorage.setItem(UUID_KEY, uuid);\n}\n\nfunction selectSheet(name: SheetType) {\n  if (sheet.value === name) {\n    sheet.value = null;\n    nextTick(() => {\n      blurActiveElement();\n    });\n  } else {\n    sheet.value = name;\n  }\n}\n\nconst showTextSheet = computed({\n  get() {\n    return sheet.value === 'text';\n  },\n  set(_value: boolean) {\n    selectSheet('text');\n  }\n});\n\nconst cssVars = computed(() => {\n  return {\n    '--accent-color': accentColor.value,\n    '--accent-color-2': accentColor2.value,\n    '--app-content-height': showTextSheet.value ? '66%' : '100%',\n    '--info-background': infoColor,\n  };\n});\n\nconst smallSize = computed(() => {\n  return display.smAndDown.value;\n});\n\nconst mobile = computed(() => {\n  return smallSize.value && touchscreen.value;\n});\n\n\nfunction zpad(n: number, width: number = 2, character: string = \"0\"): string {\n  return n.toString().padStart(width, character);\n}\n\n/************\n * TIMESTAMP SETUP\n ************/\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst erdTimestamps = ref<number[]>([]);\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst newTimestamps = ref<number[]>([]);\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst cloudTimestamps = ref<number[]>([]);\nconst fosterTimestamps = ref<number[]>([\n  1698838920000,\n  1698841320000,\n  1698843720000,\n  1698846120000,\n  1698848520000,\n  1698852120000,\n  1698855720000,\n  1698859320000,\n  1698862920000,\n  1698866520000,\n  1698870120000,\n  1698873720000,\n  1698876120000,\n  1698878520000,\n  1698880920000,\n  1699011720000,\n  1699014120000,\n  1699016520000,\n  1699018920000,\n  1699021320000,\n  1699024920000,\n  1699028520000,\n  1699032120000,\n  1699035720000,\n  1699039320000,\n  1699042920000,\n  1699046520000,\n  1699048920000,\n  1699051320000,\n  1699053720000,\n  1711626180000,\n  1711628640000,\n  1711631040000,\n  1711633440000,\n  1711637040000,\n  1711640640000,\n  1711644240000,\n  1711647840000,\n  1711651440000,\n  1711655040000,\n  1711658640000,\n  1711662240000,\n  1711665840000,\n  1711668240000,\n]);\n\n\nconst timestamps = ref<number[]>(fosterTimestamps.value);\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst extendedRangeTimestamps = ref<number[]>([]);\nconst showExtendedRange = ref(extendedRange.value);\nconst useHighRes = ref(false);\nconst {\n  timeIndex,\n  timestamp,\n  date,\n  singleDateSelected,\n  maxIndex,\n  minIndex,\n  uniqueDays,\n  uniqueDaysIndex,\n  setNearestDate,\n  moveBackwardOneDay,\n  moveForwardOneDay,\n  nearestDateIndex } = useUniqueTimeSelection(timestamps);\n\nconst timestampsLoaded = ref(false);\nconst fosterTimestampsSet = ref(new Set(fosterTimestamps.value));\nconst erdTimestampsSet = ref(new Set());\nconst newTimestampsSet = ref(new Set());\nconst cloudTimestampsSet = ref(new Set());\nconst extendedRangeTimestampsSet = ref(new Set());\nconst timestampsSet = ref(new Set(fosterTimestamps.value));\nconst preprocessedTimestampSet = ref(new Set(fosterTimestamps.value));\n// append and Set timestamps\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction appendTimestamps(newTimestamps: number[][]) {\n  if (newTimestamps.length > 0) {\n    timestamps.value = timestamps.value.concat(...newTimestamps).sort();\n    timestampsSet.value = new Set(timestamps.value);\n  }\n}\nasync function updateTimestamps() {\n  return Promise.all([\n    // getExtendedRangeTimestamps().then(ts => {\n    //   extendedRangeTimestamps.value = ts;\n    //   extendedRangeTimestampsSet.value = new Set(ts);\n    // }),\n    // getTimestamps().then((ts) => {\n    //   erdTimestamps.value = ts.early_release;\n    //   erdTimestampsSet.value = new Set(ts.early_release);\n    //   newTimestamps.value = ts.released;\n    //   newTimestampsSet.value = new Set(ts.released);\n    //   timestamps.value = timestamps.value.concat(erdTimestamps.value, newTimestamps.value).sort();\n    //   const _set = new Set(timestamps.value);\n    //   timestampsSet.value = _set;\n    //   preprocessedTimestampSet.value = _set;\n      \n    //   cloudTimestamps.value = ts.clouds;\n    //   cloudTimestampsSet.value = new Set(ts.clouds);\n    // })\n  ]);\n}\n\n\nupdateTimestamps().then(() => { timestampsLoaded.value = true; })\n  .then(() => {\n    if (window.location.hash.includes(\"extreme-events\")) {\n      nextTick(() => {\n        activateExtremeEvents();\n      });\n    }\n  });\n\n\n/************\n * INITIAL LOCATIONS SETUP\n ************/\n\n\nconst initLat = parseFloat(urlParams.get(\"lat\") || '40.044');\nconst initLon = parseFloat(urlParams.get(\"lon\") || '-98.789');\nconst initZoom = parseFloat(urlParams.get(\"zoom\") || `${4 * zoomScale}`); // 4 is the default zoom level for the map, multiplied by zoomScale for maplibre\nconst initTime = urlParams.get(\"t\");\nconst initState = ref<InitMapOptions>({\n  loc: [initLat, initLon] as LatLngPair,\n  zoom: initZoom,\n  t: initTime ? +initTime : null\n});\n\n\nconst homeZoom = 4 * zoomScale; // 4 is the default zoom level for the map, multiplied by zoomScale for maplibre\nconst homeState = ref({\n  loc: [homeLat, homeLon] as LatLngPair,\n  zoom: homeZoom,\n  t: null as number | null\n});\n\n\nconst radio = ref<number | null>(null);\nconst sublocationRadio = ref<number | null>(null);\n\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst { currentBounds: imageBounds } = useBounds(date);\n\n\n\n\n\nconst selectedTimezone = ref(\"US/Eastern\");\nconst playing = ref(false);\nconst playInterval = ref<Timeout | null>(null);\nconst searchOpen = ref(true);\nconst searchErrorMessage = ref<string | null>(null);\nconst showControls = ref(false);\nconst showCredits = ref(false);\nconst showAboutData = ref(false);\nconst loadedImagesProgress = ref(0);\nconst showUserGuide = ref(false);\n\nconst showLocationMarker = ref(true);\nconst currentUrl = ref(window.location.href);\nconst showChanges = ref(false);\nconst showLADialog = ref(false);\n\n\nconst imageName = computed(() => {\n  return getTempoFilename(date.value);\n});\n\nconst imageUrl = computed(() => {\n  if (!showImage.value) {\n    return '';\n  }\n  \n  if (customImageUrl.value) {\n    return customImageUrl.value;\n  }\n  const url = getTempoDataUrl(timestamp.value);\n  if (url === null) { return ''; }\n  return url + imageName.value;\n});\n\nconst showClouds = ref(false);\nconst cloudUrl = computed(() => {\n  if (!showClouds.value) {\n    return '';\n  }\n\n  if (cloudTimestampsSet.value.has(timestamp.value)) {\n    return getCloudFilename(date.value);\n  }\n  return '';\n});\n\n\nconst opacity = ref(0.9);\nconst preload = ref(true);\nconst customImageUrl = ref(\"\");\nconst cloudOverlay = useImageOverlay(cloudUrl, opacity, imageBounds, 'cloud-overlay');\nconst imageOverlay = useImageOverlay(imageUrl, opacity, imageBounds, 'image-overlay');\n\nconst cloudDataAvailable = computed(() => {\n  return cloudTimestampsSet.value.has(timestamp.value);\n});\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst whichDataSet = computed(() => {\n  if (fosterTimestampsSet.value.has(timestamp.value)) {\n    return 'TEMPO-lite';\n  }\n\n  if (erdTimestampsSet.value.has(timestamp.value)) {\n    return 'Early Release (V01)';\n  }\n\n  if (newTimestampsSet.value.has(timestamp.value)) {\n    return 'Level 3 (V03)';\n  }\n\n  return 'Unknown';\n});\n\n\nconst highresAvailable = computed(() => {\n  return newTimestampsSet.value.has(timestamp.value);\n});\n\nconst extendedRangeAvailable = computed(() => {\n  return extendedRangeTimestampsSet.value.has(timestamp.value);\n});\n\nconst showingExtendedRange = computed(() => {\n  return showExtendedRangeFeatures && showExtendedRange.value && extendedRangeAvailable.value;\n});\n\nconst esriUrls = {\n  'no2': {\n    url: \"https://gis.earthdata.nasa.gov/image/rest/services/C2930763263-LARC_CLOUD/TEMPO_NO2_L3_V03_HOURLY_TROPOSPHERIC_VERTICAL_COLUMN/ImageServer\",\n    variable: \"NO2_Troposphere\",\n  },\n  'no2Monthly': {\n    url: \"https://gis.earthdata.nasa.gov/gp/rest/services/Hosted/TEMPO_NO2_L3_V03_Monthly_Mean/ImageServer\",\n    variable: \"NO2_Troposphere\",\n  },\n  'no2DailyMax' : {\n    url: \"https://gis.earthdata.nasa.gov/gp/rest/services/Hosted/TEMPO_NO2_L3_V03_Daily_Maximum/ImageServer\",\n    variable: \"NO2_Troposphere\",\n  },\n  'o3': {\n    url: \"https://gis.earthdata.nasa.gov/image/rest/services/C2930764281-LARC_CLOUD/TEMPO_O3TOT_L3_V03_HOURLY_OZONE_COLUMN_AMOUNT/ImageServer\",\n    variable: \"Ozone_Column_Amount\",\n  },\n  'hcho': {\n    url: \"https://gis.earthdata.nasa.gov/image/rest/services/C2930761273-LARC_CLOUD/TEMPO_HCHO_L3_V03_HOURLY_VERTICAL_COLUMN/ImageServer\",\n    variable: \"HCHO\",\n  },\n  'hchoMonthly': {\n    url: \"https://gis.earthdata.nasa.gov/gp/rest/services/Hosted/TEMPO_HCHO_L3_V03_Monthly_Mean/ImageServer\",\n    variable: \"HCHO\",\n  },\n  'hchoDailyMax': {\n    url: \"https://gis.earthdata.nasa.gov/gp/rest/services/Hosted/TEMPO_HCHO_L3_V03_Daily_Maximum/ImageServer\",\n    variable: \"HCHO\",\n  },\n} as Record<string, { url: string; variable: VariableNames }>;\n\nconst whichMolecule = ref<MoleculeType>('no2');\n\nconst moleculeOptions = [\n  { title: 'NO₂', value: 'no2' },\n  { title: 'Monthly Mean NO₂', value: 'no2Monthly' },\n  { title: 'Daily Max NO₂', value: 'no2DailyMax' },\n  { title: 'O₃', value: 'o3' },\n  { title: 'HCHO', value: 'hcho' },\n  { title: 'Monthly Mean HCHO', value: 'hchoMonthly' },\n  { title: 'Daily Max HCHO', value: 'hchoDailyMax' },\n];\n\n// computed\nconst esriUrl = computed(() => {\n  return esriUrls[whichMolecule.value].url;\n});\nconst esriVariable = computed(() => {\n  return esriUrls[whichMolecule.value].variable;\n});\n\n// Create TempoDataService instance\nconst tempoDataService = new TempoDataService(esriUrl.value, esriVariable.value);\n\n\nconst {getEsriTimeSteps, addEsriSource, esriTimesteps, changeUrl} = useEsriLayer(\n  esriUrl.value,\n  esriVariable.value,\n  timestamp,\n  opacity,\n);\ngetEsriTimeSteps();\nwatch(esriTimesteps, (newSteps, _oldSteps) => {\n  if (newSteps.length > 0) {\n    timestamps.value = newSteps.sort();\n    // remove old steps from timestamps and timestampsSet\n    // const oldSet = new Set(oldSteps);\n    // const filtered = timestamps.value.filter(t => !oldSet.has(t));\n    // timestamps.value = filtered;\n    // timestampsSet.value = new Set(timestamps.value);\n    // appendTimestamps([newSteps]);\n  }\n});\n\nfunction handleEsriTimeSelected(timestamp:number, _index: number) {\n  const idx = timestamps.value.indexOf(timestamp);\n  console.log(`ESRI time selected: ${new Date(timestamp)} (nearest index ${idx})`);\n  if (idx >= 0) {\n    timeIndex.value = idx;\n  }\n  singleDateSelected.value = new Date(timestamp);\n}\n\nwatch(whichMolecule, (newMolecule) => {\n  changeUrl(esriUrls[newMolecule].url, esriUrls[newMolecule].variable);\n  // Update TempoDataService with new URL and variable\n  tempoDataService.setBaseUrl(esriUrls[newMolecule].url);\n  tempoDataService.setVariable(esriUrls[newMolecule].variable);\n  getEsriTimeSteps();\n});\n\nconst onMapReady = (map) => {\n  map.on('moveend', updateURL);\n  map.on('zoomend', updateURL);\n  addEsriSource(map);\n};\nconst showRoads = ref(true);\nconst { map, createMap, setView } = useMap(\"map\", initState.value, showRoads, onMapReady);\n\nconst { \n  addFieldOfRegard,\n  showFieldOfRegard,\n  updateFieldOfRegard \n} = useFieldOfRegard(singleDateSelected, map);\n\nconst {\n  setMarker,\n  removeMarker,\n  locationMarker\n} = useLocationMarker(map,  showLocationMarker.value);\n\n\nconst selections = ref<RectangleSelectionType[]>([]);\nfunction updateSelections() {\n  selections.value = [...selections.value];\n}\nfunction addToSelections(sel: RectangleSelectionType) {\n  (selections.value as RectangleSelectionType[]).push(sel);\n  updateSelections(); // to trigger reactivity in watchers\n  return selections.value[selections.value.length - 1];\n}\nconst selection = ref<SelectionOption>(null);\nconst selectedIndex = computed({\n  get() {\n    const selectedID = selection.value?.id;\n    const idx = selections.value.findIndex(s => s.id == selectedID);\n    return idx >= 0 ? idx : null;\n  },\n  set(index: number | null) {\n    if (typeof index === \"number\") {\n      selection.value = selections.value[index] ?? null;\n    } else {\n      selection.value = null;\n    }\n  }\n});\nfunction  setSelection(sel: RectangleSelectionType | null) {\n  // returns the correspondin selection from within the selections array\n  // maybe this is unecessary. we don't use the returned value\n  // but maybe somewhere we would want it. idk if the input \"sel\" is\n  // identical to the value from the array (I arrays just store a reference)\n  if (sel === null) {\n    selection.value = null;\n    selectedIndex.value = null;\n    return null;\n  } else {\n    selection.value = sel;\n    const idx = selections.value.findIndex(s => s.id === sel.id);\n    if (idx == -1) {\n      // must already be in selections, so throw an error if that is not true\n      throw new Error(`Selection with ID ${sel.id} and name ${sel.name} not found in selections.`);\n    }\n    selectedIndex.value = idx;\n    return selections.value[selectedIndex.value] ?? null;\n  }\n}\nconst selectionOptions = computed<SelectionOption[]>(() => ([null] as SelectionOption[]).concat(selections.value as SelectionOption[]));\nlet selectionCount = 0;\nconst samplesGraph = ref(false);\nconst haveSamples = computed(() => selections.value.some(s => s.samples));\n\n// I stole this from here: https://sashamaps.net/docs/resources/20-colors/\nconst COLORS = [\n  '#e6194b', '#3cb44b', '#ffe119', '#4363d8', '#f58231', '#911eb4', '#46f0f0',\n  '#f032e6', '#bcf60c', '#fabebe', '#008080', '#e6beff', '#9a6324', '#fffac8',\n  '#800000', '#aaffc3', '#808000', '#ffd8b1', '#000075', '#808080', '#ffffff',\n  '#000000'\n];\n\n// implement rectangle and point\nconst { active: selectionActive, selectionInfo } = useRectangleSelection(map, \"red\");\nconst loadingSamples = ref<string | false>(false);\n\n\n\nconst _testError = { lower: testErrorAmount, upper: testErrorAmount };\n\nconst sampleError = ref<string | null>(null);\nconst sampleDialog = ref(false);\nconst pointSampleResult = ref<Record<number, { value: number | null; date: Date }> | null>(null);\nconst pointSampleError = ref<string | null>(null);\nconst loadingPointSample = ref<string | false>(false);\n\n// UI state for time range management\n\nconst useCustomTimeRange = ref(false); // Binary choice: false = current day, true = custom range\n\n// Store markers for timeseries locations\nconst timeseriesMarkerApi = useMultiMarker(map, {\n  shape: 'circle',\n  color: '#ff0000',\n  fillColor: '#ff0000',\n  fillOpacity: 0.8,\n  opacity: 1,\n  radius: 10,\n  outlineColor: '#ff0000',\n});\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction clearTimeseriesMarkers() {\n  timeseriesMarkerApi.clearMarkers();\n}\n\nfunction addTimeseriesLocationsToMap(timeseries: Array<{ x: number; y: number }>) {\n  // timeseriesMarkerApi.addMarkers(timeseries);\n  console.log(`Adding ${timeseries.length} timeseries locations to map`);\n}\n\nfunction selectionHasSamples(sel: RectangleSelectionType): boolean {\n  console.log(`Checking if selection ${sel.name} has samples:`, sel.samples);\n  const has = (sel.samples !== undefined) && Object.keys(sel.samples).length > 0;\n  if (has) {\n    console.log(`Selection ${sel.name} has samples.`);\n  } else {\n    console.log(`Selection ${sel.name} does not have samples.`);\n  }\n  return has;\n}\n\nfunction setCurrentSelectionTimeRange(timeRange: MillisecondRange | MillisecondRange[]) {\n  console.log(`Setting time range for current selection:`);\n  if (selection.value && selectedIndex.value !== null) {\n    if (selectionHasSamples(selection.value as RectangleSelectionType)) {\n      console.error(\"Cannot set time range for selection with existing samples. Please clear samples first (disabled).\");\n      return;\n    } else {\n      // Store the time range in the selection\n      selection.value.timeRange = timeRange;\n      selections.value[selectedIndex.value].timeRange = timeRange; // Update the selection in the array too\n      console.log(`Set time range for selection ${selection.value.name}:`, timeRange);\n      updateSelections();\n      return;\n    }\n  } else {\n    console.error(\"No current selection to set time range for.\");\n    return;\n  }\n  // eslint-disable-next-line no-unreachable\n  console.error(\"how did i get here???\");\n}\n\n\n// Add custom time range ref\nconst customTimeRange = ref<MillisecondRange | MillisecondRange[] | null>(null);\n\n// This only handles the the change event from the DateTimeRangeSelection component.\n// We always want it's output in customTimeRange so we can use it if ncessary\nfunction handleDateTimeRangeSelectionChange(timeRanges: MillisecondRange[]) {\n  if (timeRanges.length === 0) {\n    console.error('No time ranges received from DateTimeRangeSelection');\n    return;\n  }\n  \n  console.log(`Received ${timeRanges.length} time range(s) from DateTimeRangeSelection:`, timeRanges);\n  // with this set, effectiveTimeRange will check if we are using a custom time range\n  // and if so, will update the current selection time (if samples have not been fetched yet)\n  // else will get the option to add a new time series\n  customTimeRange.value = timeRanges; \n  timeRanges.forEach((range, index) => {\n    console.log(`  Range ${index + 1}: ${new Date(range.start).toLocaleDateString()} to ${new Date(range.end).toLocaleDateString()}`);\n  });\n}\n\n// Computed property for effective time range based on user selection\nconst effectiveTimeRange = computed<MillisecondRange[]>(() => {\n  if (useCustomTimeRange.value && customTimeRange.value) {\n    return atleast1d(customTimeRange.value);\n  } else {\n    // Use current day as default\n    const day = new Date(singleDateSelected.value);\n    const start = day.setHours(0, 0, 0, 0);\n    const end = day.setHours(23, 59, 59, 999);\n    return [{ start, end }];\n  }\n});\n\nwatch(effectiveTimeRange, (newRange) => {\n  console.log(`Effective time range changed: ${newRange.length} range(s). Attempting to set current selection time range.`);\n  setCurrentSelectionTimeRange(newRange);\n});\n\n\n// Selection management handlers\nfunction activateSelectionMode() {\n  // Activate selection mode\n  selectionActive.value = !selectionActive.value;\n}\n\n// clear all the data from the current selection\n// This is not used right now, but it is useful to have\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction clearSelectionSamples(sel: RectangleSelectionType) {\n  sel.samples = undefined;\n  sel.errors = undefined;\n  sel.timeRange = undefined;\n}\n\n// edit the region of the given selection.\nfunction editSelection(sel: RectangleSelectionType) {\n  if (selectionHasSamples(sel)) {\n    console.error(\"Cannot edit selection with existing samples.\");\n    return;\n  }\n  // Set the selection to edit\n  setSelection(sel);\n  \n  // Activate selection mode to allow editing\n  selectionActive.value = true;\n  \n  console.log(`Editing selection: ${sel.name}`);\n}\n\nfunction createNewSelection() {\n  // Clear current selection to force new selection creation\n  setSelection(null);\n  \n  // Activate selection mode\n  selectionActive.value = true;\n  \n  console.log('Creating new selection');\n}\n\n// Unified fetching methods\nasync function fetchDataForSelection(sel: RectangleSelectionType) {\n  loadingSamples.value = sel.name;\n  sampleError.value = null;\n  \n  // we want to always have a timeRange set here.\n  if (!sel.timeRange) {\n    throw new Error(`No time range set for selection ${sel.name}`);\n  }\n  // because of the thrown error above, sel.timeRange is guaranteed to be set here. \n  // so we will never use the effectiveTimeRange fallback, but we keep it here for safety.\n  const timeRanges = atleast1d(sel.timeRange) ?? effectiveTimeRange.value;\n  \n  try {\n    const data = await tempoDataService.fetchTimeseriesData(sel.rectangle, timeRanges);\n    sel.samples = data.values;\n    sel.errors = data.errors;\n    loadingSamples.value = \"finished\";\n    console.log(`Fetched data for ${timeRanges.length} time range(s)`);\n    addTimeseriesLocationsToMap(data.locations);\n  } catch (error) {\n    sampleError.value = error instanceof Error ? error.message : String(error);\n    loadingSamples.value = \"error\";\n  }\n}\n\nasync function fetchCenterPointDataForSelection(_sel: RectangleSelectionType) {\n  loadingSamples.value = _sel.name;\n  sampleError.value = null;\n  \n  if (!_sel.timeRange) {\n    throw new Error(`No time range set for selection ${_sel.name}`);\n  }\n  \n  const sel = copyAndUseSelection(_sel);\n  sel.name = `${_sel.name} (Center Point)`;\n  \n  if (!sel.timeRange) { // have to do the check again for type checker\n    throw new Error(`No time range set for selection ${sel.name}`);\n  }\n  loadingSamples.value = sel.name;\n  const timeRanges = atleast1d(sel.timeRange) ?? effectiveTimeRange.value;\n  \n  \n  try {\n    const data = await tempoDataService.fetchCenterPointData(sel.rectangle, timeRanges);\n    if (data) {\n      sel.samples = data.values;\n      loadingSamples.value = \"finished\";\n      console.log(`Fetched center point data for ${timeRanges.length} time range(s)`);\n      addTimeseriesLocationsToMap(data.locations);\n    }\n  } catch (error) {\n    sampleError.value = error instanceof Error ? error.message : String(error);\n    loadingSamples.value = \"error\";\n  }\n}\n\n\n\n// Create a new selection with a time range\nfunction createSelectionWithTimeRange(rectangle: RectangleSelectionInfo, timeRanges?: MillisecondRange | MillisecondRange[]): RectangleSelectionType {\n  const color = COLORS[selectionCount % COLORS.length];\n  selectionCount += 1;\n  \n  const _timeRanges = (timeRanges ? atleast1d(timeRanges) : timeRanges)  ?? effectiveTimeRange.value;\n  \n  console.log(`Creating selection with ${_timeRanges.length} time range(s)`);\n  _timeRanges.forEach((range, index) => {\n    console.log(`  Range ${index + 1}: ${new Date(range.start)} to ${new Date(range.end)}`);\n  });\n  \n  const { layer } = addRectangleLayer(map.value!, rectangle, color);\n  const newSelection: RectangleSelectionType = {\n    id: v4(),\n    name: `Selection ${selectionCount}`,\n    rectangle,\n    layer,\n    color,\n    timeRange: _timeRanges.length === 1 ? _timeRanges[0] : _timeRanges,\n  };\n\n  // Add to selections array\n  addToSelections(newSelection);\n  \n  // set this as the current selection\n  setSelection(newSelection);\n  \n  console.log(`Created new selection ${newSelection.name} with ${_timeRanges.length} time range(s)`);\n  return selections.value[selections.value.length - 1] as RectangleSelectionType;\n}\n\n\n// Add time series to existing selection - copy the selection and set a new time range\n// TODO: contains a lot of the createSelectionWithTimeRange. Should be possible to refactor these to use a common api\nfunction copySelectionWithNewTimeRange(existingSelection: RectangleSelectionType, timeRanges?: MillisecondRange | MillisecondRange[], name?: string): RectangleSelectionType {\n  const color = COLORS[selectionCount % COLORS.length];\n  selectionCount += 1;\n  \n  // allow the user to pass in a time range manually\n  const _timeRanges = (timeRanges ? atleast1d(timeRanges) : timeRanges)  ?? effectiveTimeRange.value;\n  \n  const newSelection: RectangleSelectionType = {\n    id: v4(),\n    name: name ?? `${existingSelection.name} (Copy)`,\n    rectangle: existingSelection.rectangle,\n    layer: existingSelection.layer, // Share the same layer\n    color,\n    timeRange: _timeRanges.length === 1 ? _timeRanges[0] : _timeRanges,\n  };\n\n  // Add to selections array\n  addToSelections(newSelection);\n  \n  // set this as the current selection\n  setSelection(newSelection);\n  \n  console.log(`Added time series to selection ${newSelection.name} with ${_timeRanges.length} time range(s)`);\n  return newSelection;\n}\n\nfunction copyAndUseSelection(sel: RectangleSelectionType) {\n  // Create a new selection with the same rectangle and time range\n  const copiedSelection = copySelectionWithNewTimeRange(sel, sel.timeRange, `${sel.name} (Center Point)`);\n  \n  // Set the new selection as current\n  setSelection(copiedSelection);\n  \n  console.log(`Copied and using selection: ${copiedSelection.name}`);\n  return copiedSelection;\n}\n\n\nwatch(selections, (newSelections, oldSelections) => {\n  // just log out the length difference\n  console.log(`Selections changed: ${oldSelections.length} -> ${newSelections.length}`);\n});\n\n\n// Utility function to get time range display string\nfunction formatTimeRange(ranges: MillisecondRange | MillisecondRange[]): string {\n  if (Array.isArray(ranges)) {\n    if (ranges.length === 0) {\n      return 'No time range set';\n    }\n    \n    if (ranges.length === 1) {\n      const range = ranges[0];\n      return `${new Date(range.start).toLocaleDateString()} - ${new Date(range.end).toLocaleDateString()}`;\n    } else {\n      // For multiple ranges, show the full span\n      const allStarts = ranges.map(r => r.start);\n      const allEnds = ranges.map(r => r.end);\n      const minStart = Math.min(...allStarts);\n      const maxEnd = Math.max(...allEnds);\n      return `${new Date(minStart).toLocaleDateString()} - ${new Date(maxEnd).toLocaleDateString()} (${ranges.length} ranges)`;\n    }\n  } else {\n    return `${new Date(ranges.start).toLocaleDateString()} - ${new Date(ranges.end).toLocaleDateString()}`;\n  }\n}\nfunction getTimeRangeDisplay(sel: RectangleSelectionType): string {\n  if (!sel.timeRange) {\n    return `No time range set for selection ${sel.name}`;\n  }\n  return formatTimeRange(sel.timeRange);\n}\n\n// Computed property for effective time range display\nconst effectiveTimeRangeDisplay = computed(() => {\n  return formatTimeRange(effectiveTimeRange.value);\n});\n\n\n\nfunction deleteSelection(sel: RectangleSelectionType) {\n  const index = selections.value.findIndex(s => s.id == sel.id);\n  if (index < 0) {\n    return;\n  }\n  const isSelected = selectedIndex.value === index;\n  if (map.value && sel.layer) {\n    // @ts-expect-error -- sel.layer has the correct type\n    removeRectangleLayer(map.value, sel.layer);\n  }\n  selections.value.splice(index, 1);\n  if (isSelected) {\n    if (index > 0) {\n      selection.value = selections.value[index - 1];\n    } else if (selections.value.length > 0) { \n      selection.value = selections.value[0];\n    } else {\n      selection.value = null;\n    }\n  }\n}\n\n\n\nonMounted(() => {\n  window.addEventListener(\"hashchange\", updateHash);\n  showSplashScreen.value = false;\n  createMap();\n  \n  usezoomhome(map, homeState.value.loc, homeState.value.zoom, (_e: Event) => {\n    sublocationRadio.value = null;\n    // check if location marker is not null and on map. if so remove it\n    if (locationMarker.value !== null) {\n      removeMarker();\n    }\n  });\n\n\n  singleDateSelected.value = uniqueDays.value[uniqueDays.value.length - 1];\n  if (map.value !== null) {\n    imageOverlay.addTo(map.value); \n    cloudOverlay.addTo(map.value);\n  }\n\n  updateFieldOfRegard();\n  addFieldOfRegard();\n\n  createUserEntry();\n  window.addEventListener(\"visibilitychange\", () => {\n    if (document.visibilityState === \"hidden\") {\n      updateUserData();\n    } else {\n      resetData();\n    }\n  });\n  \n});\n\n\n\nconst datesOfInterest = computed(() => {\n  return interestingEvents.map(event => event.date);\n});\n\nconst dateIsDST = computed(() => {\n  const standardOffset = getTimezoneOffset(selectedTimezone.value, new Date(date.value.getUTCFullYear(), 0, 1));\n  const currentOffset = getTimezoneOffset(selectedTimezone.value, date.value);\n  if (standardOffset === currentOffset) {\n    return false;\n  }\n  return true;\n});\n\nconst timezoneOptions = computed(() => {\n  return [\n    { tz: 'US/Eastern', name: dateIsDST.value ? 'Eastern Daylight' : 'Eastern Standard' },\n    { tz: 'US/Central', name: dateIsDST.value ? 'Central Daylight' : 'Central Standard' },\n    { tz: 'US/Mountain', name: dateIsDST.value ? 'Mountain Daylight' : 'Mountain Standard' },\n    { tz: 'US/Arizona', name: 'Mountain Standard' },\n    { tz: 'US/Pacific', name: dateIsDST.value ? 'Pacific Daylight' : 'Pacific Standard' },\n    { tz: 'US/Alaska', name: dateIsDST.value ? 'Alaska Daylight' : 'Alaska Standard' },\n    { tz: 'UTC', name: 'UTC' },\n  ];\n});\n\n// TODO: Maybe there's a built-in Date function to get this formatting?\nconst thumbLabel = computed(() => {\n  const offset = getTimezoneOffset(selectedTimezone.value, date.value);\n  const dateObj = new Date(timestamp.value + offset);\n  const hours = dateObj.getUTCHours();\n  const amPm = hours >= 12 ? \"PM\" : \"AM\";\n  let hourValue = hours % 12;\n  if (hourValue === 0) {\n    hourValue = 12;\n  }\n  return `${date.value.getUTCMonth() + 1}/${dateObj.getUTCDate()}/${dateObj.getUTCFullYear()} ${hourValue}:${dateObj.getUTCMinutes().toString().padStart(2, '0')} ${amPm}`;\n});\n\n\n\n\nfunction updateHash() {\n  if (window.location.hash.includes(\"extreme-events\")) {\n    activateExtremeEvents();\n  }\n}\n\n\nfunction updateURL() {\n  if (map.value) {\n    const center = map.value.getCenter();\n    let stateObj = null as Record<string, string> | null;\n    if (showExtendedRangeFeatures) {\n      stateObj = {\n        lat: `${center.lat.toFixed(4)}`,\n        lon: `${center.lng.toFixed(4)}`,\n        zoom: `${map.value.getZoom()}`,\n        t: `${timestamp.value}`,\n        extendedRange: `${showExtendedRange.value}`\n      };\n    } else {\n      stateObj = {\n        lat: `${center.lat.toFixed(4)}`,\n        lon: `${center.lng.toFixed(4)}`,\n        zoom: `${map.value.getZoom()}`,\n        t: `${timestamp.value}`\n      };\n    }\n    const url = new URL(location.origin);\n    const searchParams = new URLSearchParams(stateObj ?? {});\n    // const hash = window.location.hash;\n    // url.hash = hash;\n    url.pathname = location.pathname;\n    window.history.replaceState(null, '', url.toString());\n    url.search = searchParams.toString();\n    currentUrl.value = url.toString();\n    // window.history.replaceState(stateObj, '', url);\n  }\n}\n\nfunction cmapNO2(x: number): string {\n  const rgb = cbarNO2(0, 1, x);\n  return `rgba(${rgb[0]}, ${rgb[1]}, ${rgb[2]},1)`;\n}\n\nasync function geocodingInfoForSearchLimited(searchText: string): Promise<MapBoxFeatureCollection | null> {\n  return geocodingInfoForSearch(searchText, {\n    countries: [\"US\", \"CA\", \"MX\", \"CU\", \"BM\", \"HT\", \"DO\"],\n    limit: 10,\n  }).catch(_err => null);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction resetMapBounds() {\n  setView([40.044, -98.789] as LatLngPair, 4);\n}\n\nfunction setLocationFromSearch(items: [MapBoxFeature | null, string]) {\n  const [feature, text] = items;\n  if (feature !== null) {\n    // Latitude, Longitude order\n    const coordinates: LatLngPair = [feature.center[1], feature.center[0]] as LatLngPair;\n    setView(coordinates, 12);\n    setMarker(coordinates);\n    userSelectedLocations.push(text);\n  }\n}\n\nfunction play() {\n  playInterval.value = setInterval(() => {\n    if (timeIndex.value >= maxIndex.value) {\n      if (playInterval.value) {\n        // clearInterval(this.playInterval);\n        // this.playInterval = null;\n        // let it loop\n        timeIndex.value = minIndex.value;\n      }\n    } else {\n      timeIndex.value += 1;\n    }\n  }, 1000);\n}\n\n\nfunction pause() {\n  if (playInterval.value) {\n    clearInterval(playInterval.value);\n  }\n}\n\n\nfunction getCloudFilename(date: Date): string {\n  const filename = getTempoFilename(date);\n  if (useHighRes.value) {\n    return 'https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/clouds/images/' + filename;\n  } else {\n    return 'https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/clouds/images/resized_images/' + filename;\n  }\n}\n\nfunction findNearestImageTimestamp(esriTimestamp: number, toleranceMinutes: number = 2): number | null {\n  const toleranceMs = toleranceMinutes * 60 * 1000;\n  \n  // Check all timestamp sets for the nearest match within tolerance\n  \n  // Find the nearest timestamp within tolerance\n  let nearestTimestamp: number | null = null;\n  let minDifference = Infinity;\n  \n  for (const imageTimestamp of preprocessedTimestampSet.value) {\n    const difference = Math.abs(imageTimestamp - esriTimestamp);\n    if (difference <= toleranceMs && difference < minDifference) {\n      minDifference = difference;\n      nearestTimestamp = imageTimestamp;\n    }\n  }\n  \n  return nearestTimestamp;\n}\n\nfunction getTempoFilename(_date: Date): string {\n  const ts = findNearestImageTimestamp(_date.getTime());\n  if (ts === null) {\n    return '';\n  }\n  const date = new Date(ts);\n  return `tempo_${date.getUTCFullYear()}-${zpad(date.getUTCMonth() + 1)}-${zpad(date.getUTCDate())}T${zpad(date.getUTCHours())}h${zpad(date.getUTCMinutes())}m.png`;\n}\n\n\n\nfunction getTempoDataUrl(_timestamp: number): string | null {\n  const timestamp = findNearestImageTimestamp(_timestamp);\n  if (timestamp === null) {\n    return null;\n  }\n  if (showExtendedRange.value && extendedRangeTimestampsSet.value.has(timestamp)) {\n    if (useHighRes.value) {\n      return 'https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/data_range_0_300/released/images/';\n    }\n    return 'https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/data_range_0_300/released/images/resized_images/';\n  }\n  if (fosterTimestampsSet.value.has(timestamp)) {\n    return 'https://tempo-images-bucket.s3.amazonaws.com/tempo-lite/';\n  }\n\n  if (erdTimestampsSet.value.has(timestamp)) {\n    return 'https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/early_release/images/';\n  }\n\n  if (newTimestampsSet.value.has(timestamp)) {\n    if (useHighRes.value) {\n      return 'https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/released/images/';\n    }\n    return \"https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/released/images/resized_images/\";\n  }\n\n  return null;\n}\n\n\n\n\nfunction imagePreload() {\n  if (!preload.value) {\n    return;\n  }\n  // console.log('preloading images for ', this.thumbLabel);\n  const times = timestamps.value.slice(minIndex.value, maxIndex.value + 1).filter(ts => getTempoDataUrl(ts) !== null);\n  const images = times.map(ts => getTempoDataUrl(ts) + getTempoFilename(new Date(ts)));\n  const cloudImages = times.reduce((acc: string[], ts) => {\n    if (cloudTimestampsSet.value.has(ts)) {\n      acc.push(getCloudFilename(new Date(ts)));\n    }\n    return acc;\n  }, []);\n  images.push(...cloudImages);\n  if (images.length === 0) {\n    console.error('No images to preload');\n    return;\n  }\n  const promises = _preloadImages(images);\n  let loaded = 0;\n  loadedImagesProgress.value = 0;\n  promises.forEach((promise) => {\n    promise.then(() => {\n      loaded += 1;\n      loadedImagesProgress.value = (loaded / promises.length) * 100;\n    }).catch((err) => {\n      console.error('error loading image', err);\n    });\n  });\n}\n\nconst locationsOfInterest = ref<Array<Array<{ latlng: LatLngPair; zoom: number; index?: number }>>>([]);\nfunction goToLocationOfInterst(index: number, subindex: number) {\n  if (index < 0 || index >= locationsOfInterest.value.length) {\n    console.error('Invalid index for location of interest');\n    return;\n  }\n  const loi = locationsOfInterest.value[index][subindex];\n  setView(loi.latlng, loi.zoom * zoomScale); // Adjust zoom level for maplibre\n  if (loi.index !== undefined) {\n    timeIndex.value = loi.index;\n  } else {\n    console.error('No index found for location of interest');\n  }\n}\n\n\nfunction goToLA() {\n  showLADialog.value = false;\n  const event = interestingEvents.filter(e => e.label == 'LA Wildfires (Jan 8, 2025)');\n  if (event !== undefined && map.value) {\n    const loi = event[0].locations;\n    setView(loi[0].latlng, loi[0].zoom * zoomScale); // Adjust zoom level for maplibre\n  }\n}\n\n\nfunction activateLAViewer() {\n  showLADialog.value = true;\n}\n\n\nfunction activateExtremeEvents() {\n  // Find the LA Wildfires event\n  const laWildfireIndex = interestingEvents.findIndex(\n    event => event.label?.includes(\"LA Wildfires\")\n  );\n\n  if (laWildfireIndex !== -1) {\n    // Set the radio to select this event\n    radio.value = laWildfireIndex;\n    // Make sure extended range is on\n    showExtendedRange.value = true;\n  }\n}\n\nfunction onTimeSliderEnd(_value: number) {\n  timeSliderUsedCount += 1; \n}\n\nfunction onOpacitySliderEnd(_value: number) {\n  opacitySliderUsedCount += 1;\n}\n\nasync function createUserEntry() {\n  if (responseOptOut.value) {\n    return;\n  }\n\n  const response = await fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"GET\",\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    headers: { \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\" }\n  });\n  const content = await response.json();\n  const exists = response.status === 200 && content.response?.user_uuid != undefined;\n  if (exists) {\n    return;\n  }\n\n  fetch(`${STORY_DATA_URL}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\",\n    },\n    body: JSON.stringify({\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_uuid: uuid,\n    }),\n  });\n}\n\nfunction resetData() {\n  whatsNewOpenedCount = 0;\n  introductionOpenedCount = 0;\n  userGuideOpenedCount = 0;\n  aboutDataOpenedCount = 0;\n  creditsOpenedCount = 0;\n  shareButtonClickedCount = 0;\n  playButtonClickedCount = 0;\n  timeSliderUsedCount = 0;\n  opacitySliderUsedCount = 0;\n  userSelectedCalendarDates = [];\n  userSelectedTimezones = [];\n  userSelectedLocations = [];\n  userSelectedNotableEvents = [];\n\n  aboutDataOpenTimeMs = 0;\n  userGuideOpenTimeMs = 0;\n  introductionOpenTimeMs = 0;\n  whatsNewOpenTimeMs = 0;\n  creditsOpenTimeMs = 0;\n  fieldOfRegardToggled = false;\n  cloudMaskToggled = false;\n  hiResDataToggled = false;\n\n  const now = Date.now();\n  creditsTimestamp = showCredits.value ? now : null;\n  aboutDataTimestamp = showAboutData.value ? now : null;\n}\n\nasync function updateUserData() {\n  if (responseOptOut.value) {\n    return;\n  }\n\n  const now = Date.now();\n  const creditsTime = (showCredits.value && creditsTimestamp !== null) ? now - creditsTimestamp : creditsOpenTimeMs;\n  const aboutDataTime = (showAboutData.value && aboutDataTimestamp !== null) ? now - aboutDataTimestamp: aboutDataOpenTimeMs;\n  const whatsNewTime = (showChanges.value && whatsNewTimestamp !== null) ? now  - whatsNewTimestamp : whatsNewOpenTimeMs;\n  const introductionTime = (introductionOpen.value && introductionTimestamp !== null) ? now - introductionTimestamp : introductionOpenTimeMs;\n  const userGuideTime = (userGuideOpen.value && userGuideTimestamp !== null) ? now - userGuideTimestamp : userGuideOpenTimeMs;\n\n  fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\",\n    },\n    body: JSON.stringify({\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_whats_new_opened_count: whatsNewOpenedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_whats_new_open_time_ms: whatsNewTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_introduction_opened_count: introductionOpenedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_introduction_open_time_ms: introductionTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_user_guide_opened_count: userGuideOpenedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_user_guide_open_time_ms: userGuideTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_about_data_opened_count: aboutDataOpenedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_about_data_open_time_ms: aboutDataTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_credits_opened_count: creditsOpenedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_credits_open_time_ms: creditsTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_share_button_clicked_count: shareButtonClickedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_calendar_dates: userSelectedCalendarDates,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_timezones: userSelectedTimezones,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_locations: userSelectedLocations,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_notable_events: userSelectedNotableEvents,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_play_clicked_count: playButtonClickedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_time_slider_used_count: timeSliderUsedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_opacity_slider_used_count: opacitySliderUsedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      field_of_regard_toggled: fieldOfRegardToggled,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      cloud_mask_toggled: cloudMaskToggled,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      high_res_data_toggled: hiResDataToggled,\n    }),\n    keepalive: true,\n  }).then(() => {\n    resetData();\n  });\n}\n\nwatch(timestampsLoaded, (loaded: boolean) => {\n  if (loaded) {\n    console.log('timestamps loaded');\n    if (initState.value.t) {\n      let index = uniqueDaysIndex(initState.value.t);\n      if (index == -1) {\n        return;\n      }\n      console.log('set the date');\n      singleDateSelected.value = uniqueDays.value[index];\n      index = nearestDateIndex(new Date(initState.value.t));\n      if (index == -1) {\n        return;\n      }\n      timeIndex.value = index;\n      // FIXME if needed. if we find the time is not being set, use nextTick\n      // this.$nextTick(() => { this.timeIndex = index;});\n    }\n  }\n});\n\nwatch(timestamp, (_val: number) => {\n  updateURL();\n});\n\nwatch(introSlide, (val: number) => {\n  inIntro.value = val < 5;\n});\n\nwatch(dontShowIntro, (val: boolean) => {\n  window.localStorage.setItem(\"dontShowIntro\", val.toString());\n  if (!val) {\n    inIntro.value = true;\n  }\n});\n\nwatch(inIntro, (value: boolean) => {\n  if (!value) {\n    if (responseOptOut.value === null && !hasOptOutBeenOpened) {\n      showPrivacyDialog.value = true;\n    }\n  }\n});\n\nwatch(showPrivacyDialog, (show: boolean) => {\n  if (show) {\n    hasOptOutBeenOpened = true;\n  }\n});\n\nwatch(responseOptOut, (optOut: boolean | null) => {\n  if (responseOptOut.value !== null) {\n    window.localStorage.setItem(OPT_OUT_KEY, String(optOut));\n  }\n});\n\nwatch(loadedImagesProgress, (val: number) => {\n  playing.value = false;\n  const btn = document.querySelector('#play-pause-button');\n  if (btn) {\n    if (val < 100) {\n      btn.setAttribute('disabled', 'true');\n    } else {\n      btn.removeAttribute('disabled');\n    }\n  }\n});\n\nwatch(playing, (val: boolean) => {\n  if (val) {\n    play();\n    playButtonClickedCount += 1;\n  } else {\n    pause();\n  }\n});\n\nwatch(imageUrl, (_url: string) => {\n  updateFieldOfRegard();\n});\n\n// watch(cloudUrl, (_url: string) => {\n//   // nothing to do here.\n// });\n\nwatch(useHighRes, () => {\n  hiResDataToggled = true;\n  imagePreload();\n});\n\n\n\nwatch(showFieldOfRegard, (_show: boolean) => {\n  fieldOfRegardToggled = true;\n});\n\nwatch(showClouds, (_show: boolean) => {\n  cloudMaskToggled = true;\n});\n\nwatch(showLocationMarker, (show: boolean) => {\n  if (locationMarker.value) {\n    if (show && map.value) {\n      locationMarker.value.addTo(map.value);\n      return;\n    } else {\n      locationMarker.value.remove();\n      return;\n    }\n  }\n});\n\nwatch(timestamps, () => {\n  singleDateSelected.value = uniqueDays.value[uniqueDays.value.length - 1];\n});\n\nwatch(radio, (value: number | null) => {\n  if (value == null) {\n    setNearestDate(singleDateSelected.value.getTime());\n    sublocationRadio.value = null;\n    return;\n  }\n  const date = datesOfInterest.value[value] ?? singleDateSelected.value;\n  singleDateSelected.value = date;\n  setNearestDate(date.getTime());\n  if (sublocationRadio.value == 0 && value !== null) {\n    // run this manually as the watcher wouldn't trigger\n    goToLocationOfInterst(value, 0);\n  } else {\n    sublocationRadio.value = 0;\n  }\n});\n\nwatch(singleDateSelected, (value: Date) => {\n  // console.log(`singleDateSelected ${value}`);\n  const timestamp = value.getTime();\n  setNearestDate(timestamp);\n  if (radio.value !== null) {\n    const index = datesOfInterest.value.map(d => d.getTime()).indexOf(timestamp);\n    radio.value = index < 0 ? null : index;\n  }\n  imagePreload();\n});\n\nwatch(sublocationRadio, (value: number | null) => {\n  if (value !== null && radio.value != null) {\n    goToLocationOfInterst(radio.value, value);\n  }\n});\n\n\nwatch(showChanges, (_value: boolean) => {\n  if (showNotice.value) {\n    showNotice.value = false;\n  }\n});\n\nwatch(showExtendedRange, (_value: boolean) => {\n  updateURL();\n  imagePreload();\n});\n\nwatch(showChanges, (show: boolean) => {\n  const now = Date.now();\n  if (show) {\n    whatsNewTimestamp = now;\n    whatsNewOpenedCount += 1;\n  } else if (whatsNewTimestamp !== null) {\n    whatsNewOpenTimeMs += (now - whatsNewTimestamp);\n    whatsNewTimestamp = null;\n  }\n});\n\nwatch(showAboutData, (show: boolean) => {\n  const now = Date.now();\n  if (show) {\n    aboutDataTimestamp = now;\n    aboutDataOpenedCount += 1;\n  } else if (aboutDataTimestamp !== null) {\n    aboutDataOpenTimeMs += (now - aboutDataTimestamp);\n    aboutDataTimestamp = null;\n  }\n});\n\nwatch(showCredits, (show: boolean) => {\n  const now = Date.now();\n  if (show) {\n    creditsTimestamp = now;\n    creditsOpenedCount += 1;\n  } else if (creditsTimestamp !== null) {\n    creditsOpenTimeMs += (now - creditsTimestamp);\n    creditsTimestamp = null;\n  }\n});\n\nwatch(introductionOpen, (open: boolean) => {\n  const now = Date.now();\n  if (open) {\n    introductionTimestamp = now;\n    introductionOpenedCount += 1;\n  } else if (introductionTimestamp !== null) {\n    introductionOpenTimeMs += (now - introductionTimestamp);\n    introductionTimestamp = null;\n  }\n});\n\nwatch(userGuideOpen, (open: boolean) => {\n  const now = Date.now();\n  if (open) {\n    userGuideTimestamp = now;\n    userGuideOpenedCount += 1;\n  } else if (userGuideTimestamp !== null) {\n    userGuideOpenTimeMs += (now - userGuideTimestamp);\n    userGuideTimestamp = null;\n  }\n});\n\nwatch(selectedTimezone, (timezone: string) => {\n  userSelectedTimezones.push(timezone);\n});\n\nwatch(singleDateSelected, (date: Date) => {\n  if (!timestampsLoaded.value ) return;\n  userSelectedCalendarDates.push(date.getTime());\n});\n\nwatch(selectionInfo, (info: RectangleSelectionInfo | null) => {\n  if (info === null || map.value === null) {\n    return;\n  }\n  \n  if (selection.value === null || selectedIndex.value === null) {\n    // Create a new selection with time range using the unified function\n    createSelectionWithTimeRange(info);\n  } else {\n    // Update the existing selection\n    const currentSelection = selections.value[selectedIndex.value];\n    currentSelection.rectangle = info;\n    currentSelection.samples = undefined; // Clear existing data\n    // explicit type\n    const rect = currentSelection.layer as RectangleSelectionType['layer'];\n    if (rect) {\n      updateRectangleBounds(rect, info);\n    }\n    \n    console.log(`Updated existing selection: ${currentSelection.name} (time range unchanged)`);\n  }\n  \n  // Deactivate selection mode\n  selectionActive.value = false;\n});\n\n// Watch for time range mode changes and update custom time range if needed\nwatch(useCustomTimeRange, (useCustom) => {\n  console.log(`Time range mode changed to: ${useCustom ? 'Custom Range' : 'Current Day'}`);\n  if (useCustom && !customTimeRange.value) {\n    // If switching to custom but no custom range is set, set a default\n    const start = singleDateSelected.value.setHours(0, 0, 0, 0);\n    const end = singleDateSelected.value.setHours(23, 59, 59, 999);\n    customTimeRange.value = { start, end };\n  }\n});\n\n// Watch for custom time range input changes\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_credit_logos = _resolveComponent(\"credit-logos\")!\n  const _component_v_window_item = _resolveComponent(\"v-window-item\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_checkbox = _resolveComponent(\"v-checkbox\")!\n  const _component_v_window = _resolveComponent(\"v-window\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n  const _component_v_overlay = _resolveComponent(\"v-overlay\")!\n  const _component_marquee_alert = _resolveComponent(\"marquee-alert\")!\n  const _component_cds_dialog = _resolveComponent(\"cds-dialog\")!\n  const _component_v_tooltip = _resolveComponent(\"v-tooltip\")!\n  const _component_share_button = _resolveComponent(\"share-button\")!\n  const _component_v_list_item = _resolveComponent(\"v-list-item\")!\n  const _component_v_list = _resolveComponent(\"v-list\")!\n  const _component_v_menu = _resolveComponent(\"v-menu\")!\n  const _component_colorbar_horizontal = _resolveComponent(\"colorbar-horizontal\")!\n  const _component_v_toolbar_title = _resolveComponent(\"v-toolbar-title\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_select = _resolveComponent(\"v-select\")!\n  const _component_v_toolbar = _resolveComponent(\"v-toolbar\")!\n  const _component_v_progress_circular = _resolveComponent(\"v-progress-circular\")!\n  const _component_v_slider = _resolveComponent(\"v-slider\")!\n  const _component_info_button = _resolveComponent(\"info-button\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_location_search = _resolveComponent(\"location-search\")!\n  const _component_v_col = _resolveComponent(\"v-col\")!\n  const _component_v_row = _resolveComponent(\"v-row\")!\n  const _component_colorbar = _resolveComponent(\"colorbar\")!\n  const _component_icon_button = _resolveComponent(\"icon-button\")!\n  const _component_date_picker = _resolveComponent(\"date-picker\")!\n  const _component_v_radio_group = _resolveComponent(\"v-radio-group\")!\n  const _component_v_progress_linear = _resolveComponent(\"v-progress-linear\")!\n  const _component_v_card_title = _resolveComponent(\"v-card-title\")!\n  const _component_v_radio = _resolveComponent(\"v-radio\")!\n  const _component_v_chip = _resolveComponent(\"v-chip\")!\n  const _component_timeseries_graph = _resolveComponent(\"timeseries-graph\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\")!\n  const _component_v_app = _resolveComponent(\"v-app\")!\n\n  return (_openBlock(), _createBlock(_component_v_app, {\n    id: \"app\",\n    style: _normalizeStyle(cssVars.value)\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_overlay, {\n        \"model-value\": inIntro.value,\n        style: _normalizeStyle(cssVars.value),\n        id: \"intro-background\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_dialog, {\n            modelValue: inIntro.value,\n            \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((inIntro).value = $event))\n          }, {\n            default: _withCtx(() => [\n              (inIntro.value)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                    _createVNode(_component_v_window, {\n                      modelValue: introSlide.value,\n                      \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((introSlide).value = $event))\n                    }, {\n                      additional: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_2, [\n                          _createVNode(_component_font_awesome_icon, {\n                            size: \"xl\",\n                            class: \"ma-3\",\n                            color: \"#b3d5e6\",\n                            icon: \"square-xmark\",\n                            onClick: _cache[0] || (_cache[0] = ($event: any) => (inIntro.value = !inIntro.value)),\n                            onKeyup: _cache[1] || (_cache[1] = _withKeys(($event: any) => (inIntro.value = !inIntro.value), [\"enter\"])),\n                            tabindex: \"0\",\n                            \"tooltip-location\": \"start\"\n                          })\n                        ])\n                      ]),\n                      default: _withCtx(() => [\n                        _createVNode(_component_v_window_item, {\n                          value: 1,\n                          id: \"splash-screen\"\n                        }, {\n                          default: _withCtx(() => [\n                            _cache[78] || (_cache[78] = _createElementVNode(\"div\", { id: \"first-splash-row\" }, [\n                              _createElementVNode(\"div\", { id: \"splash-screen-text\" }, \" What Is in the Air You Breathe? \"),\n                              _createElementVNode(\"div\", null, \" Explore daily pollution maps over North America and find out. \")\n                            ], -1)),\n                            _createElementVNode(\"div\", null, [\n                              _createVNode(_component_v_btn, {\n                                class: \"splash-get-started\",\n                                onClick: _cache[2] || (_cache[2] = ($event: any) => (introSlide.value++)),\n                                onKeyup: _cache[3] || (_cache[3] = _withKeys(($event: any) => (introSlide.value++), [\"enter\"])),\n                                color: accentColor.value,\n                                density: _unref(display).smAndDown ? 'compact' : 'default',\n                                size: \"x-large\",\n                                variant: \"elevated\",\n                                rounded: \"lg\"\n                              }, {\n                                default: _withCtx(() => _cache[73] || (_cache[73] = [\n                                  _createTextVNode(\" Get Started \")\n                                ])),\n                                _: 1,\n                                __: [73]\n                              }, 8, [\"color\", \"density\"])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                              _cache[75] || (_cache[75] = _createTextVNode(\" Brought to you by \")),\n                              _cache[76] || (_cache[76] = _createElementVNode(\"a\", {\n                                href: \"https://www.cosmicds.cfa.harvard.edu/\",\n                                target: \"_blank\",\n                                rel: \"noopener noreferrer\"\n                              }, \"Cosmic Data Stories\", -1)),\n                              _cache[77] || (_cache[77] = _createTextVNode(\". \")),\n                              _createElementVNode(\"div\", _hoisted_4, [\n                                _cache[74] || (_cache[74] = _createElementVNode(\"a\", {\n                                  href: \"https://www.si.edu/\",\n                                  target: \"_blank\",\n                                  rel: \"noopener noreferrer\"\n                                }, [\n                                  _createElementVNode(\"img\", {\n                                    alt: \"Smithsonian Logo\",\n                                    src: \"220px-Smithsonian_sun_logo_no_text.svg.png\"\n                                  })\n                                ], -1)),\n                                _createVNode(_component_credit_logos)\n                              ])\n                            ])\n                          ]),\n                          _: 1,\n                          __: [78]\n                        }),\n                        _createVNode(_component_v_window_item, { value: 2 }, {\n                          default: _withCtx(() => _cache[79] || (_cache[79] = [\n                            _createElementVNode(\"div\", { class: \"intro-text\" }, [\n                              _createElementVNode(\"p\", { class: \"mb-5\" }, \" The TEMPO satellite mission (Tropospheric Emissions: Monitoring Pollution), launched in April 2023, is the first space-based instrument to measure major air pollutants across the North American continent every daylight hour at high spatial resolution. A collaboration between NASA and the Smithsonian Astrophysical Observatory, the TEMPO instrument gathers hourly daytime scans of the atmosphere over North America from the Atlantic Ocean to the Pacific Coast and from the Yucatán Peninsula to central Canada. \")\n                            ], -1)\n                          ])),\n                          _: 1,\n                          __: [79]\n                        }),\n                        _createVNode(_component_v_window_item, { value: 3 }, {\n                          default: _withCtx(() => _cache[80] || (_cache[80] = [\n                            _createElementVNode(\"div\", { class: \"intro-text mb-3\" }, [\n                              _createElementVNode(\"p\", { class: \"mb-3\" }, [\n                                _createTextVNode(\" This Data Story provides an introduction to what can be learned from TEMPO’s data, which became publicly available May 20, 2024. The map here visualizes hourly Nitrogen Dioxide (NO\"),\n                                _createElementVNode(\"sub\", null, \"2\"),\n                                _createTextVNode(\") data over time. NO\"),\n                                _createElementVNode(\"sub\", null, \"2\"),\n                                _createTextVNode(\" can be produced by: \")\n                              ]),\n                              _createElementVNode(\"ul\", null, [\n                                _createElementVNode(\"li\", null, \"Burning of fossil fuels—for example from vehicles, power plants, manufacturing sites, and oil refineries\"),\n                                _createElementVNode(\"li\", null, \"Fires and biomass burning—including wildfires and prescribed burns, as well as burning of vegetation for land clearing\"),\n                                _createElementVNode(\"li\", null, [\n                                  _createTextVNode(\"Bacteria, which naturally convert nitrogen in soil into compounds that can form NO\"),\n                                  _createElementVNode(\"sub\", null, \"2\"),\n                                  _createTextVNode(\". Agricultural use of nitrogen-based fertilizers increases the amount of NO\"),\n                                  _createElementVNode(\"sub\", null, \"2\"),\n                                  _createTextVNode(\" produced by these bacteria.\")\n                                ]),\n                                _createElementVNode(\"li\", null, [\n                                  _createTextVNode(\"Lightning, which triggers a chemical reaction that turns harmless N\"),\n                                  _createElementVNode(\"sub\", null, \"2\"),\n                                  _createTextVNode(\" in the atmosphere into NO\"),\n                                  _createElementVNode(\"sub\", null, \"2\"),\n                                  _createTextVNode(\". \")\n                                ])\n                              ]),\n                              _createElementVNode(\"p\", { class: \"mt-3\" }, \" For each date, you can see the scans beginning on the East Coast in the morning, and ending on the West Coast as the Sun sets. \")\n                            ], -1)\n                          ])),\n                          _: 1,\n                          __: [80]\n                        }),\n                        _createVNode(_component_v_window_item, { value: 4 }, {\n                          default: _withCtx(() => [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                              _cache[91] || (_cache[91] = _createElementVNode(\"p\", { class: \"mb-3\" }, \" In this interactive page you can: \", -1)),\n                              _createElementVNode(\"ul\", null, [\n                                _cache[87] || (_cache[87] = _createElementVNode(\"li\", null, \" Use the search box to navigate a location of your choice. \", -1)),\n                                _cache[88] || (_cache[88] = _createElementVNode(\"li\", null, [\n                                  _createTextVNode(\" Select a date and press the “Play” button or scroll the time slider to view the changing concentrations of NO\"),\n                                  _createElementVNode(\"sub\", null, \"2\"),\n                                  _createTextVNode(\" on those dates. \")\n                                ], -1)),\n                                _createElementVNode(\"li\", null, [\n                                  _cache[82] || (_cache[82] = _createTextVNode(\" Click \")),\n                                  _createVNode(_component_v_icon, { style: {\"color\":\"#ffcc33\"} }, {\n                                    default: _withCtx(() => _cache[81] || (_cache[81] = [\n                                      _createTextVNode(\"mdi-share-variant\")\n                                    ])),\n                                    _: 1,\n                                    __: [81]\n                                  }),\n                                  _cache[83] || (_cache[83] = _createTextVNode(\" to share your selected location, date, and time with others. \"))\n                                ]),\n                                _createElementVNode(\"li\", {\n                                  style: _normalizeStyle(cssVars.value)\n                                }, [\n                                  _cache[85] || (_cache[85] = _createTextVNode(\" Press the \")),\n                                  _createVNode(_component_v_icon, {\n                                    style: {\"font-size\":\"1.3em\",\"color\":\"var(--accent-color)\"},\n                                    elevation: \"1\"\n                                  }, {\n                                    default: _withCtx(() => _cache[84] || (_cache[84] = [\n                                      _createTextVNode(\"mdi-information-variant-circle-outline\")\n                                    ])),\n                                    _: 1,\n                                    __: [84]\n                                  }),\n                                  _cache[86] || (_cache[86] = _createTextVNode(\" button next to each Notable Date to get an overview of what to look for on that date \"))\n                                ], 4),\n                                _cache[89] || (_cache[89] = _createElementVNode(\"li\", null, \" For each Notable Date, select one of two zoomed-in Locations to investigate specific pollution events. \", -1)),\n                                _cache[90] || (_cache[90] = _createElementVNode(\"li\", null, \" You can use the “Timezone” setting to investigate how pollution evolves over the day in different parts of the country, for example as rush hour progresses in large cities. \", -1))\n                              ]),\n                              _createVNode(_component_v_checkbox, {\n                                modelValue: dontShowIntro.value,\n                                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((dontShowIntro).value = $event)),\n                                onKeyup: _cache[5] || (_cache[5] = _withKeys(($event: any) => (dontShowIntro.value = !dontShowIntro.value), [\"enter\"])),\n                                label: \"Don't show this introduction at launch\",\n                                color: \"#c10124\",\n                                \"hide-details\": \"\"\n                              }, null, 8, [\"modelValue\"])\n                            ])\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    }, 8, [\"modelValue\"]),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                      _createElementVNode(\"div\", null, [\n                        ((introSlide.value > 1))\n                          ? (_openBlock(), _createBlock(_component_v_btn, {\n                              key: 0,\n                              id: \"intro-next-button\",\n                              color: accentColor.value,\n                              onClick: _cache[7] || (_cache[7] = ($event: any) => (introSlide.value--)),\n                              onKeyup: _cache[8] || (_cache[8] = _withKeys(($event: any) => (introSlide.value--), [\"enter\"])),\n                              elevation: \"0\"\n                            }, {\n                              default: _withCtx(() => _cache[92] || (_cache[92] = [\n                                _createTextVNode(\" Back \")\n                              ])),\n                              _: 1,\n                              __: [92]\n                            }, 8, [\"color\"]))\n                          : _createCommentVNode(\"\", true)\n                      ]),\n                      ((introSlide.value > 1))\n                        ? (_openBlock(), _createBlock(_component_v_btn, {\n                            key: 0,\n                            id: \"intro-next-button\",\n                            color: accentColor.value,\n                            onClick: _cache[9] || (_cache[9] = ($event: any) => (introSlide.value++)),\n                            onKeyup: _cache[10] || (_cache[10] = _withKeys(($event: any) => (introSlide.value++), [\"enter\"])),\n                            elevation: \"0\"\n                          }, {\n                            default: _withCtx(() => [\n                              _createTextVNode(_toDisplayString(introSlide.value < 4 ? 'Next' : 'Get Started'), 1)\n                            ]),\n                            _: 1\n                          }, 8, [\"color\"]))\n                        : _createCommentVNode(\"\", true)\n                    ])\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"])\n        ]),\n        _: 1\n      }, 8, [\"model-value\", \"style\"]),\n      _createElementVNode(\"div\", _hoisted_7, [\n        (smallSize.value && showExtendedRangeFeatures && extendedRangeAvailable.value)\n          ? (_openBlock(), _createBlock(_component_marquee_alert, {\n              key: 0,\n              timeout: \"30000\",\n              message: \"You can view data with an extend range for the \\n            duration of the LA fires. See the 🔥 button on the map\"\n            }))\n          : _createCommentVNode(\"\", true),\n        _createElementVNode(\"div\", _hoisted_8, [\n          _createElementVNode(\"div\", _hoisted_9, [\n            _cache[104] || (_cache[104] = _createElementVNode(\"a\", {\n              href: \"https://tempo.si.edu\",\n              target: \"_blank\",\n              rel: \"noopener noreferrer\"\n            }, [\n              _createElementVNode(\"img\", {\n                src: _imports_0,\n                alt: \"TEMPO Logo\",\n                style: {\"width\":\"100px\",\"height\":\"100px\"}\n              })\n            ], -1)),\n            _cache[105] || (_cache[105] = _createElementVNode(\"h1\", { id: \"title\" }, \"What is in the Air You Breathe?\", -1)),\n            _createVNode(_component_cds_dialog, {\n              title: \"What's new\",\n              modelValue: showChanges.value,\n              \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event: any) => ((showChanges).value = $event)),\n              color: accentColor2.value\n            }, {\n              default: _withCtx(() => [\n                _createElementVNode(\"ul\", _hoisted_10, [\n                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(changes), (change) => {\n                    return (_openBlock(), _createElementBlock(\"li\", {\n                      class: \"change-item mb-5\",\n                      key: change.date,\n                      \"data-date\": change.date\n                    }, [\n                      _createElementVNode(\"span\", {\n                        style: _normalizeStyle({\"font-weight\":\"bold\", \"color\": `${change.highlight ? \"var(--smithsonian-yellow)\" : \"currentColor\"}` })\n                      }, _toDisplayString(change.date), 5),\n                      _cache[93] || (_cache[93] = _createElementVNode(\"br\", null, null, -1)),\n                      _cache[94] || (_cache[94] = _createTextVNode()),\n                      _createElementVNode(\"span\", {\n                        innerHTML: change.html\n                      }, null, 8, _hoisted_12),\n                      _createTextVNode(_toDisplayString(change.text), 1)\n                    ], 8, _hoisted_11))\n                  }), 128))\n                ])\n              ]),\n              _: 1\n            }, 8, [\"modelValue\", \"color\"]),\n            _createElementVNode(\"div\", _hoisted_13, [\n              ((new Date('2025-05-7 00:00:00') > new Date()))\n                ? (_openBlock(), _createBlock(_component_v_btn, {\n                    key: 0,\n                    class: \"whats-new-button pulse\",\n                    \"aria-label\": \"What's new\",\n                    onClick: _cache[13] || (_cache[13] = ($event: any) => (showChanges.value = true)),\n                    onKeyup: _cache[14] || (_cache[14] = _withKeys(($event: any) => (showChanges.value = true), [\"enter\"])),\n                    variant: \"outlined\",\n                    rounded: \"lg\",\n                    color: accentColor2.value,\n                    elevation: \"0\",\n                    size: \"lg\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_v_tooltip, {\n                        location: \"bottom\",\n                        activator: \"parent\",\n                        disabled: mobile.value,\n                        text: \"What's new\"\n                      }, null, 8, [\"disabled\"]),\n                      _createVNode(_component_v_icon, null, {\n                        default: _withCtx(() => _cache[95] || (_cache[95] = [\n                          _createTextVNode(\"mdi-creation\")\n                        ])),\n                        _: 1,\n                        __: [95]\n                      })\n                    ]),\n                    _: 1\n                  }, 8, [\"color\"]))\n                : _createCommentVNode(\"\", true),\n              _createVNode(_component_share_button, {\n                source: currentUrl.value,\n                buttonColor: \"black\",\n                iconColor: accentColor2.value,\n                elevation: \"0\",\n                size: \"small\",\n                rounded: \"1\",\n                \"tooltip-disabled\": mobile.value,\n                onClick: _cache[15] || (_cache[15] = ($event: any) => (_isRef(shareButtonClickedCount) //@ts-ignore\n ? shareButtonClickedCount.value += 1 : shareButtonClickedCount += 1)),\n                alert: \"\"\n              }, null, 8, [\"source\", \"iconColor\", \"tooltip-disabled\"]),\n              _createVNode(_component_v_btn, {\n                \"aria-role\": \"menu\",\n                \"aria-label\": \"Show menu\",\n                class: \"menu-button\",\n                variant: \"outlined\",\n                rounded: \"lg\",\n                color: accentColor2.value,\n                elevation: \"5\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_icon, { size: \"x-large\" }, {\n                    default: _withCtx(() => _cache[96] || (_cache[96] = [\n                      _createTextVNode(\"mdi-menu\")\n                    ])),\n                    _: 1,\n                    __: [96]\n                  }),\n                  _createVNode(_component_v_menu, { activator: \"parent\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_v_list, null, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_v_list_item, {\n                            tabindex: \"0\",\n                            \"aria-label\": \"See recent changes\",\n                            onClick: _cache[16] || (_cache[16] = ($event: any) => (showChanges.value = true)),\n                            onKeyup: _cache[17] || (_cache[17] = _withKeys(($event: any) => (showChanges.value = true), [\"enter\"]))\n                          }, {\n                            default: _withCtx(() => _cache[97] || (_cache[97] = [\n                              _createTextVNode(\" What's New \")\n                            ])),\n                            _: 1,\n                            __: [97]\n                          }),\n                          _createVNode(_component_v_list_item, {\n                            tabindex: \"0\",\n                            \"aria-label\": \"Show introduction\",\n                            onClick: _cache[18] || (_cache[18] = () => {introSlide.value = 1; inIntro.value = true;}),\n                            onKeyup: _cache[19] || (_cache[19] = _withKeys(() => {introSlide.value = 1; inIntro.value = true;}, [\"enter\"]))\n                          }, {\n                            default: _withCtx(() => _cache[98] || (_cache[98] = [\n                              _createTextVNode(\" Introduction \")\n                            ])),\n                            _: 1,\n                            __: [98]\n                          }),\n                          _createVNode(_component_v_list_item, {\n                            tabindex: \"0\",\n                            \"aria-label\": \"Show user guide\",\n                            onClick: _cache[20] || (_cache[20] = () => {introSlide.value = 4; inIntro.value = true;}),\n                            onKeyup: _cache[21] || (_cache[21] = _withKeys(() => {introSlide.value = 4; inIntro.value = true;}, [\"enter\"]))\n                          }, {\n                            default: _withCtx(() => _cache[99] || (_cache[99] = [\n                              _createTextVNode(\" User Guide \")\n                            ])),\n                            _: 1,\n                            __: [99]\n                          }),\n                          _createVNode(_component_v_list_item, {\n                            tabindex: \"0\",\n                            \"aria-label\": \"Show dialog telling about the data\",\n                            onClick: _cache[22] || (_cache[22] = ($event: any) => (showAboutData.value = true)),\n                            onKeyup: _cache[23] || (_cache[23] = _withKeys(($event: any) => (showAboutData.value = true), [\"enter\"]))\n                          }, {\n                            default: _withCtx(() => _cache[100] || (_cache[100] = [\n                              _createTextVNode(\" About the Data \")\n                            ])),\n                            _: 1,\n                            __: [100]\n                          }),\n                          _createVNode(_component_v_list_item, { \"aria-label\": \"Leave Page to Educator Resources\" }, {\n                            default: _withCtx(() => [\n                              _createElementVNode(\"a\", _hoisted_14, [\n                                _cache[102] || (_cache[102] = _createTextVNode(\"Educator Resources\")),\n                                _createVNode(_component_v_icon, null, {\n                                  default: _withCtx(() => _cache[101] || (_cache[101] = [\n                                    _createTextVNode(\"mdi-open-in-new\")\n                                  ])),\n                                  _: 1,\n                                  __: [101]\n                                })\n                              ])\n                            ]),\n                            _: 1\n                          }),\n                          _createVNode(_component_v_list_item, {\n                            tabindex: \"0\",\n                            \"aria-label\": \"Show credits\",\n                            onClick: _cache[24] || (_cache[24] = ($event: any) => (showCredits.value = true)),\n                            onKeyup: _cache[25] || (_cache[25] = _withKeys(($event: any) => (showCredits.value = true), [\"enter\"]))\n                          }, {\n                            default: _withCtx(() => _cache[103] || (_cache[103] = [\n                              _createTextVNode(\" Credits \")\n                            ])),\n                            _: 1,\n                            __: [103]\n                          })\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"color\"])\n            ])\n          ]),\n          _cache[137] || (_cache[137] = _createElementVNode(\"div\", {\n            id: \"where\",\n            class: \"big-label\"\n          }, \"where\", -1)),\n          _createElementVNode(\"div\", _hoisted_15, [\n            (_unref(display).width.value <= 750)\n              ? (_openBlock(), _createBlock(_component_colorbar_horizontal, {\n                  key: 0,\n                  label: \"Amount of NO2\",\n                  backgroundColor: \"transparent\",\n                  nsteps: 255,\n                  cmap: cmapNO2,\n                  \"start-value\": \"1\",\n                  \"end-value\": showingExtendedRange.value ? '300' : '150',\n                  extend: true\n                }, {\n                  label: _withCtx(() => _cache[106] || (_cache[106] = [\n                    _createElementVNode(\"div\", { style: {\"text-align\":\"center\"} }, [\n                      _createTextVNode(\"Amount of NO₂ \"),\n                      _createElementVNode(\"span\", { class: \"unit-label\" }, \"(10¹⁴ mol/cm²)\")\n                    ], -1)\n                  ])),\n                  _: 1\n                }, 8, [\"end-value\"]))\n              : _createCommentVNode(\"\", true),\n            _createVNode(_component_v_card, {\n              id: \"map-contents\",\n              style: {\"width\":\"100%\",\"height\":\"100%\"}\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_toolbar, { density: \"compact\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_toolbar_title, { text: \"TEMPO Data Viewer\" }),\n                    _createVNode(_component_v_spacer),\n                    _createVNode(_component_v_select, {\n                      modelValue: whichMolecule.value,\n                      \"onUpdate:modelValue\": _cache[26] || (_cache[26] = ($event: any) => ((whichMolecule).value = $event)),\n                      items: moleculeOptions,\n                      \"item-title\": \"title\",\n                      \"item-value\": \"value\",\n                      label: \"Molecule\",\n                      \"hide-details\": \"\",\n                      dense: \"\"\n                    }, null, 8, [\"modelValue\"]),\n                    _createVNode(_component_v_tooltip, {\n                      text: _unref(selectionActive) ? 'Cancel selection' : 'Select a region'\n                    }, {\n                      activator: _withCtx(({ props }) => [\n                        _createVNode(_component_v_btn, _mergeProps(props, {\n                          icon: \"mdi-select\",\n                          color: _unref(selectionActive) ? 'info' : 'default',\n                          variant: _unref(selectionActive) ? 'tonal' : 'text',\n                          onClick: activateSelectionMode\n                        }), null, 16, [\"color\", \"variant\"])\n                      ]),\n                      _: 1\n                    }, 8, [\"text\"])\n                  ]),\n                  _: 1\n                }),\n                _createElementVNode(\"div\", _hoisted_16, [\n                  _createVNode(_component_v_overlay, {\n                    modelValue: loadedImagesProgress.value < 100,\n                    style: {\"z-index\":\"1000\"},\n                    class: \"align-center justify-center\",\n                    contained: \"\",\n                    opacity: \".8\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"div\", _hoisted_17, [\n                        _cache[107] || (_cache[107] = _createElementVNode(\"label\", {\n                          class: \"text-black\",\n                          for: \"loading-circle-progress\"\n                        }, \"Loading Data...\", -1)),\n                        _createVNode(_component_v_progress_circular, {\n                          id: \"loading-circle-progress\",\n                          style: {\"z-index\":\"1000\"},\n                          size: 100,\n                          width: 15,\n                          \"model-value\": loadedImagesProgress.value,\n                          color: \"#092088\"\n                        }, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(loadedImagesProgress.value.toFixed(0)) + \"% \", 1)\n                          ]),\n                          _: 1\n                        }, 8, [\"model-value\"])\n                      ])\n                    ]),\n                    _: 1\n                  }, 8, [\"modelValue\"])\n                ]),\n                (_unref(showFieldOfRegard))\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, _cache[108] || (_cache[108] = [\n                      _createElementVNode(\"hr\", { class: \"line-legend\" }, null, -1),\n                      _createTextVNode(\"TEMPO Field of Regard\")\n                    ])))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_component_v_menu, {\n                  id: \"map-controls\",\n                  modelValue: showControls.value,\n                  \"onUpdate:modelValue\": _cache[42] || (_cache[42] = ($event: any) => ((showControls).value = $event)),\n                  \"close-on-content-click\": false\n                }, {\n                  activator: _withCtx(({ props }) => [\n                    _createElementVNode(\"div\", _hoisted_19, [\n                      _createVNode(_component_v_btn, _mergeProps(props, {\n                        class: \"mx-2 mt-5\",\n                        elevation: \"2\",\n                        color: \"white\",\n                        icon: \"\",\n                        style: {\"outline\":\"2px solid #b6b6b6\"},\n                        rounded: \"0\",\n                        size: \"x-small\"\n                      }), {\n                        default: _withCtx(() => [\n                          _createVNode(_component_v_icon, {\n                            color: \"black\",\n                            size: \"x-large\"\n                          }, {\n                            default: _withCtx(() => _cache[109] || (_cache[109] = [\n                              _createTextVNode(\"mdi-tune-variant\")\n                            ])),\n                            _: 1,\n                            __: [109]\n                          })\n                        ]),\n                        _: 2\n                      }, 1040)\n                    ])\n                  ]),\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_card, { class: \"controls-card\" }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_font_awesome_icon, {\n                          style: {\"position\":\"absolute\",\"right\":\"16px\",\"cursor\":\"pointer\"},\n                          icon: \"square-xmark\",\n                          size: \"xl\",\n                          onClick: _cache[27] || (_cache[27] = ($event: any) => (showControls.value = false)),\n                          onKeyup: _cache[28] || (_cache[28] = _withKeys(($event: any) => (showControls.value = false), [\"enter\"])),\n                          color: accentColor2.value,\n                          tabindex: \"0\"\n                        }, null, 8, [\"color\"]),\n                        _createElementVNode(\"div\", _hoisted_20, [\n                          _cache[110] || (_cache[110] = _createElementVNode(\"div\", { id: \"opacity-slider-label\" }, \"TEMPO data opacity\", -1)),\n                          _createVNode(_component_v_slider, {\n                            modelValue: opacity.value,\n                            \"onUpdate:modelValue\": _cache[29] || (_cache[29] = ($event: any) => ((opacity).value = $event)),\n                            min: 0,\n                            max: 1,\n                            color: \"#c10124\",\n                            density: \"compact\",\n                            \"hide-details\": \"\",\n                            class: \"mb-4\",\n                            onEnd: onOpacitySliderEnd\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_21, [\n                          _createVNode(_component_v_checkbox, {\n                            modelValue: showRoads.value,\n                            \"onUpdate:modelValue\": _cache[30] || (_cache[30] = ($event: any) => ((showRoads).value = $event)),\n                            onKeyup: _cache[31] || (_cache[31] = _withKeys(($event: any) => (showRoads.value = !showRoads.value), [\"enter\"])),\n                            label: \"Show Roads\",\n                            color: \"#c10124\",\n                            \"hide-details\": \"\"\n                          }, null, 8, [\"modelValue\"])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_22, [\n                          _createVNode(_component_v_checkbox, {\n                            modelValue: _unref(showFieldOfRegard),\n                            \"onUpdate:modelValue\": _cache[32] || (_cache[32] = ($event: any) => (_isRef(showFieldOfRegard) ? (showFieldOfRegard).value = $event : null)),\n                            onKeyup: _cache[33] || (_cache[33] = _withKeys(($event: any) => (showFieldOfRegard.value = !_unref(showFieldOfRegard)), [\"enter\"])),\n                            label: \"TEMPO Field of Regard\",\n                            color: \"#c10124\",\n                            \"hide-details\": \"\"\n                          }, null, 8, [\"modelValue\"]),\n                          _createVNode(_component_info_button, null, {\n                            default: _withCtx(() => [\n                              _cache[115] || (_cache[115] = _createElementVNode(\"p\", null, \" The TEMPO satellite observes the atmosphere over North America, from the Atlantic Ocean to the Pacific Coast, and from roughly Mexico City to central Canada. \", -1)),\n                              _createElementVNode(\"p\", null, [\n                                _cache[111] || (_cache[111] = _createTextVNode(\" The TEMPO Field of Regard (in \")),\n                                _cache[112] || (_cache[112] = _createElementVNode(\"span\", { class: \"text-red\" }, \"red\", -1)),\n                                _cache[113] || (_cache[113] = _createTextVNode(\", currently \")),\n                                _createElementVNode(\"em\", null, _toDisplayString(_unref(showFieldOfRegard) ? 'visible' : \"hidden\"), 1),\n                                _cache[114] || (_cache[114] = _createTextVNode(\") is the area over which the satellite takes measurements. \"))\n                              ])\n                            ]),\n                            _: 1,\n                            __: [115]\n                          })\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_23, [\n                          _createVNode(_component_v_checkbox, {\n                            modelValue: showClouds.value,\n                            \"onUpdate:modelValue\": _cache[34] || (_cache[34] = ($event: any) => ((showClouds).value = $event)),\n                            onKeyup: _cache[35] || (_cache[35] = _withKeys(($event: any) => (showClouds.value = !showClouds.value), [\"enter\"])),\n                            disabled: !cloudDataAvailable.value,\n                            label: cloudDataAvailable.value ? 'Show Cloud Mask' : 'No Cloud Data Available',\n                            color: \"#c10124\",\n                            \"hide-details\": \"\"\n                          }, null, 8, [\"modelValue\", \"disabled\", \"label\"]),\n                          _createVNode(_component_info_button, null, {\n                            default: _withCtx(() => _cache[116] || (_cache[116] = [\n                              _createElementVNode(\"p\", null, [\n                                _createTextVNode(\" The cloud mask shows where the satellite could not measure NO\"),\n                                _createElementVNode(\"sub\", null, \"2\"),\n                                _createTextVNode(\" because of cloud cover. \")\n                              ], -1)\n                            ])),\n                            _: 1,\n                            __: [116]\n                          })\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_24, [\n                          _createVNode(_component_v_checkbox, {\n                            modelValue: showImage.value,\n                            \"onUpdate:modelValue\": _cache[36] || (_cache[36] = ($event: any) => ((showImage).value = $event)),\n                            onKeyup: _cache[37] || (_cache[37] = _withKeys(($event: any) => (showImage.value = !showImage.value), [\"enter\"])),\n                            color: \"#c10124\",\n                            label: \"Show CDS Images (when available)\",\n                            \"hide-details\": \"\"\n                          }, null, 8, [\"modelValue\"]),\n                          _createVNode(_component_info_button, null, {\n                            default: _withCtx(() => _cache[117] || (_cache[117] = [\n                              _createElementVNode(\"p\", null, [\n                                _createTextVNode(\" Show or hide the post-processed NO\"),\n                                _createElementVNode(\"sub\", null, \"2\"),\n                                _createTextVNode(\" data layer. \")\n                              ], -1)\n                            ])),\n                            _: 1,\n                            __: [117]\n                          })\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_25, [\n                          _createVNode(_component_v_checkbox, {\n                            disabled: !highresAvailable.value,\n                            modelValue: useHighRes.value,\n                            \"onUpdate:modelValue\": _cache[38] || (_cache[38] = ($event: any) => ((useHighRes).value = $event)),\n                            onKeyup: _cache[39] || (_cache[39] = _withKeys(($event: any) => (useHighRes.value = !useHighRes.value), [\"enter\"])),\n                            label: \"Use High Resolution Data\",\n                            color: \"#c10124\",\n                            \"hide-details\": \"\"\n                          }, null, 8, [\"disabled\", \"modelValue\"]),\n                          _createVNode(_component_info_button, null, {\n                            default: _withCtx(() => _cache[118] || (_cache[118] = [\n                              _createElementVNode(\"p\", null, \" By default we show data at 1/2 resolution for performance. \", -1)\n                            ])),\n                            _: 1,\n                            __: [118]\n                          })\n                        ]),\n                        (showExtendedRangeFeatures && extendedRangeAvailable.value)\n                          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, [\n                              _createVNode(_component_v_checkbox, {\n                                disabled: !extendedRangeAvailable.value,\n                                modelValue: showExtendedRange.value,\n                                \"onUpdate:modelValue\": _cache[40] || (_cache[40] = ($event: any) => ((showExtendedRange).value = $event)),\n                                onKeyup: _cache[41] || (_cache[41] = _withKeys(($event: any) => (showExtendedRange.value = !showExtendedRange.value), [\"enter\"])),\n                                label: \"Use Extended NO2 range\",\n                                color: \"#c10124\",\n                                \"hide-details\": \"\"\n                              }, null, 8, [\"disabled\", \"modelValue\"]),\n                              _createVNode(_component_info_button, null, {\n                                default: _withCtx(() => _cache[119] || (_cache[119] = [\n                                  _createElementVNode(\"p\", null, [\n                                    _createTextVNode(\" If data is available, show map with extended range of NO\"),\n                                    _createElementVNode(\"sub\", null, \"2\"),\n                                    _createTextVNode(\" values. \")\n                                  ], -1)\n                                ])),\n                                _: 1,\n                                __: [119]\n                              })\n                            ]))\n                          : _createCommentVNode(\"\", true)\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"]),\n                _createElementVNode(\"div\", _hoisted_27, [\n                  _createVNode(_component_location_search, {\n                    modelValue: searchOpen.value,\n                    \"onUpdate:modelValue\": _cache[43] || (_cache[43] = ($event: any) => ((searchOpen).value = $event)),\n                    small: \"\",\n                    \"stay-open\": \"\",\n                    buttonSize: \"xl\",\n                    \"persist-selected\": \"\",\n                    \"search-provider\": geocodingInfoForSearchLimited,\n                    onSetLocation: setLocationFromSearch,\n                    onError: _cache[44] || (_cache[44] = (error) => searchErrorMessage.value = error)\n                  }, null, 8, [\"modelValue\"])\n                ]),\n                _createElementVNode(\"div\", _hoisted_28, [\n                  (!smallSize.value && extendedRangeAvailable.value)\n                    ? (_openBlock(), _createBlock(_component_v_btn, {\n                        key: 0,\n                        onClick: activateLAViewer,\n                        onKeyup: _withKeys(activateLAViewer, [\"enter\"])\n                      }, {\n                        default: _withCtx(() => [\n                          _createTextVNode(_toDisplayString(extendedRangeAvailable.value ? (showExtendedRange.value ? \"Showing extended range\" : \"Use extreme events range\") : \"No extended range images available for this date\"), 1)\n                        ]),\n                        _: 1\n                      }))\n                    : _createCommentVNode(\"\", true),\n                  (smallSize.value && showExtendedRangeFeatures && extendedRangeAvailable.value)\n                    ? (_openBlock(), _createBlock(_component_v_btn, {\n                        key: 1,\n                        onClick: activateLAViewer,\n                        onKeyup: _withKeys(activateLAViewer, [\"enter\"]),\n                        icon: \"\"\n                      }, {\n                        default: _withCtx(() => _cache[120] || (_cache[120] = [\n                          _createTextVNode(\" 🔥 \")\n                        ])),\n                        _: 1,\n                        __: [120]\n                      }))\n                    : _createCommentVNode(\"\", true),\n                  _createVNode(_component_cds_dialog, {\n                    title: \"Extreme Events\",\n                    modelValue: showLADialog.value,\n                    \"onUpdate:modelValue\": _cache[46] || (_cache[46] = ($event: any) => ((showLADialog).value = $event)),\n                    color: accentColor2.value\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_v_row, null, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_v_col, null, {\n                            default: _withCtx(() => [\n                              _cache[121] || (_cache[121] = _createElementVNode(\"p\", null, [\n                                _createTextVNode(\" Some events like the January 2025 Los Angeles fires generate so much smoke and pollution that NO\"),\n                                _createElementVNode(\"sub\", null, \"2\"),\n                                _createTextVNode(\" levels can greatly exceed the default range used in the color scale for the TEMPO-lite viewer. To show more clearly where the very highest levels of NO\"),\n                                _createElementVNode(\"sub\", null, \"2\"),\n                                _createTextVNode(\" are present, you can use an extended color stretch. \")\n                              ], -1)),\n                              _cache[122] || (_cache[122] = _createElementVNode(\"p\", null, [\n                                _createTextVNode(\" By default we display values from 0.01-1.5×10\"),\n                                _createElementVNode(\"sup\", null, \"16\"),\n                                _createTextVNode(\" molecules per square centimeter, check the box here to double the max of the range to 3×10\"),\n                                _createElementVNode(\"sup\", null, \"16\"),\n                                _createTextVNode(\" molecules per square centimeter. The extended range will be available on dates with extreme events like the Los Angeles fire outbreaks. \")\n                              ], -1)),\n                              _createVNode(_component_v_checkbox, {\n                                modelValue: showExtendedRange.value,\n                                \"onUpdate:modelValue\": _cache[45] || (_cache[45] = ($event: any) => ((showExtendedRange).value = $event)),\n                                label: \"Use extended data range\"\n                              }, null, 8, [\"modelValue\"])\n                            ]),\n                            _: 1,\n                            __: [121,122]\n                          })\n                        ]),\n                        _: 1\n                      }),\n                      _createVNode(_component_v_row, { class: \"justify-center\" }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_v_btn, {\n                            color: accentColor2.value,\n                            onClick: goToLA,\n                            onKeyup: _withKeys(goToLA, [\"enter\"])\n                          }, {\n                            default: _withCtx(() => _cache[123] || (_cache[123] = [\n                              _createTextVNode(\" Go To Los Angeles\")\n                            ])),\n                            _: 1,\n                            __: [123]\n                          }, 8, [\"color\"])\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  }, 8, [\"modelValue\", \"color\"])\n                ])\n              ]),\n              _: 1\n            }),\n            (_unref(display).width.value > 750)\n              ? (_openBlock(), _createBlock(_component_colorbar, {\n                  key: 1,\n                  label: \"Amount of NO2\",\n                  backgroundColor: \"transparent\",\n                  nsteps: 255,\n                  cmap: cmapNO2,\n                  \"start-value\": \"1\",\n                  \"end-value\": showingExtendedRange.value ? '300' : '150',\n                  extend: true\n                }, {\n                  label: _withCtx(() => _cache[124] || (_cache[124] = [\n                    _createElementVNode(\"div\", { style: {\"text-align\":\"center\"} }, [\n                      _createTextVNode(\"Amount of NO₂\"),\n                      _createElementVNode(\"br\"),\n                      _createElementVNode(\"span\", { class: \"unit-label\" }, \"(10¹⁴ molecules/cm²)\")\n                    ], -1)\n                  ])),\n                  _: 1\n                }, 8, [\"end-value\"]))\n              : _createCommentVNode(\"\", true)\n          ]),\n          _cache[138] || (_cache[138] = _createElementVNode(\"div\", {\n            id: \"when\",\n            class: \"big-label\"\n          }, \"when\", -1)),\n          _createElementVNode(\"div\", _hoisted_29, [\n            _createVNode(_component_v_slider, {\n              class: \"time-slider\",\n              modelValue: _unref(timeIndex),\n              \"onUpdate:modelValue\": _cache[47] || (_cache[47] = ($event: any) => (_isRef(timeIndex) ? (timeIndex).value = $event : null)),\n              min: _unref(minIndex),\n              max: _unref(maxIndex),\n              step: 1,\n              color: \"#068ede95\",\n              \"thumb-label\": \"always\",\n              \"track-size\": 10,\n              \"show-ticks\": \"always\",\n              \"hide-details\": \"\",\n              onEnd: onTimeSliderEnd\n            }, {\n              \"thumb-label\": _withCtx(() => [\n                _createElementVNode(\"div\", _hoisted_30, _toDisplayString(thumbLabel.value), 1)\n              ]),\n              _: 1\n            }, 8, [\"modelValue\", \"min\", \"max\"]),\n            _createVNode(_component_icon_button, {\n              id: \"play-pause\",\n              \"fa-icon\": playing.value ? 'pause' : 'play',\n              \"fa-size\": \"sm\",\n              onActivate: _cache[48] || (_cache[48] = ($event: any) => (playing.value = !playing.value))\n            }, null, 8, [\"fa-icon\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_31, [\n            _createElementVNode(\"div\", _hoisted_32, [\n              _cache[128] || (_cache[128] = _createElementVNode(\"h2\", null, \"Select a Date\", -1)),\n              _createElementVNode(\"div\", _hoisted_33, [\n                _createVNode(_component_v_radio_group, {\n                  modelValue: radio.value,\n                  \"onUpdate:modelValue\": _cache[53] || (_cache[53] = ($event: any) => ((radio).value = $event))\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_date_picker, {\n                      ref_key: \"calendar\",\n                      ref: calendar,\n                      \"model-value\": _unref(singleDateSelected),\n                      onInternalModelChange: _cache[51] || (_cache[51] = (value) => {\n                  if (value != null && value.getTime() != _unref(singleDateSelected).getTime()) {\n                    radio.value = null;\n                    singleDateSelected.value = value;\n                    calendar.value?.closeMenu();\n                  }\n                }),\n                      \"allowed-dates\": _unref(uniqueDays),\n                      clearable: false,\n                      \"enable-time-picker\": false,\n                      \"multi-dates\": false,\n                      transitions: false,\n                      format: (date) => date?.toDateString(),\n                      \"preview-format\": (date) => date?.toDateString(),\n                      \"no-today\": \"\",\n                      dark: \"\"\n                    }, {\n                      \"action-buttons\": _withCtx(() => [\n                        _createElementVNode(\"button\", {\n                          class: \"dp__action_button dp__action-latest\",\n                          onClick: _cache[49] || (_cache[49] = () => singleDateSelected.value = _unref(uniqueDays)[_unref(uniqueDays).length - 1]),\n                          onKeyup: _cache[50] || (_cache[50] = _withKeys(() => singleDateSelected.value = _unref(uniqueDays)[_unref(uniqueDays).length - 1], [\"enter\"])),\n                          disabled: _unref(singleDateSelected) === _unref(uniqueDays)[_unref(uniqueDays).length - 1],\n                          elevation: \"0\",\n                          size: \"sm\"\n                        }, \" Latest \", 40, _hoisted_34)\n                      ]),\n                      _: 1\n                    }, 8, [\"model-value\", \"allowed-dates\", \"format\", \"preview-format\"]),\n                    (whichMolecule.value.toLowerCase().includes('month'))\n                      ? (_openBlock(), _createBlock(TimeChips, {\n                          key: 0,\n                          timestamps: _unref(esriTimesteps),\n                          onSelect: _cache[52] || (_cache[52] = ($event: any) => (handleEsriTimeSelected($event.value, $event.index))),\n                          reverse: \"\",\n                          \"use-utc\": \"\",\n                          \"date-only\": \"\"\n                        }, null, 8, [\"timestamps\"]))\n                      : _createCommentVNode(\"\", true)\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"])\n              ]),\n              _createElementVNode(\"div\", _hoisted_35, [\n                _createVNode(_component_v_tooltip, {\n                  disabled: touchscreen.value,\n                  text: \"Previous Date\"\n                }, {\n                  activator: _withCtx(({ props }) => [\n                    _createVNode(_component_v_btn, _mergeProps(props, {\n                      class: \"rounded-icon-wrapper\",\n                      onClick: _unref(moveBackwardOneDay),\n                      onKeyup: _withKeys(_unref(moveBackwardOneDay), [\"enter\"]),\n                      disabled: _unref(singleDateSelected) === _unref(uniqueDays)[0],\n                      color: \"#009ade\",\n                      variant: \"outlined\",\n                      elevation: \"0\",\n                      size: \"md\"\n                    }), {\n                      default: _withCtx(() => [\n                        _createVNode(_component_v_icon, null, {\n                          default: _withCtx(() => _cache[125] || (_cache[125] = [\n                            _createTextVNode(\"mdi-chevron-double-left\")\n                          ])),\n                          _: 1,\n                          __: [125]\n                        })\n                      ]),\n                      _: 2\n                    }, 1040, [\"onClick\", \"onKeyup\", \"disabled\"])\n                  ]),\n                  _: 1\n                }, 8, [\"disabled\"]),\n                _createVNode(_component_v_spacer),\n                _createVNode(_component_v_tooltip, {\n                  disabled: touchscreen.value,\n                  text: \"Get Data for latest available day\"\n                }, {\n                  activator: _withCtx(({ props }) => [\n                    _createVNode(_component_v_btn, _mergeProps(props, {\n                      style: {\"padding-inline\":\"4px\"},\n                      onClick: _cache[54] || (_cache[54] = () => singleDateSelected.value = _unref(uniqueDays)[_unref(uniqueDays).length - 1]),\n                      onKeyup: _cache[55] || (_cache[55] = _withKeys(() => singleDateSelected.value = _unref(uniqueDays)[_unref(uniqueDays).length - 1], [\"enter\"])),\n                      disabled: _unref(singleDateSelected) === _unref(uniqueDays)[_unref(uniqueDays).length - 1],\n                      color: \"#009ade\",\n                      variant: \"outlined\",\n                      elevation: \"0\",\n                      size: \"md\"\n                    }), {\n                      default: _withCtx(() => _cache[126] || (_cache[126] = [\n                        _createTextVNode(\" Latest Data \")\n                      ])),\n                      _: 2,\n                      __: [126]\n                    }, 1040, [\"disabled\"])\n                  ]),\n                  _: 1\n                }, 8, [\"disabled\"]),\n                _createVNode(_component_v_spacer),\n                _createVNode(_component_v_tooltip, {\n                  disabled: touchscreen.value,\n                  text: \"Next Date\"\n                }, {\n                  activator: _withCtx(({ props }) => [\n                    _createVNode(_component_v_btn, _mergeProps(props, {\n                      class: \"rounded-icon-wrapper\",\n                      onClick: _unref(moveForwardOneDay),\n                      onKeyup: _withKeys(_unref(moveForwardOneDay), [\"enter\"]),\n                      disabled: _unref(singleDateSelected) === _unref(uniqueDays)[_unref(uniqueDays).length - 1],\n                      color: \"#009ade\",\n                      variant: \"outlined\",\n                      elevation: \"0\",\n                      size: \"md\"\n                    }), {\n                      default: _withCtx(() => [\n                        _createVNode(_component_v_icon, null, {\n                          default: _withCtx(() => _cache[127] || (_cache[127] = [\n                            _createTextVNode(\"mdi-chevron-double-right\")\n                          ])),\n                          _: 1,\n                          __: [127]\n                        })\n                      ]),\n                      _: 2\n                    }, 1040, [\"onClick\", \"onKeyup\", \"disabled\"])\n                  ]),\n                  _: 1\n                }, 8, [\"disabled\"])\n              ]),\n              (loadedImagesProgress.value < 101)\n                ? (_openBlock(), _createBlock(_component_v_progress_linear, {\n                    key: 0,\n                    modelValue: loadedImagesProgress.value,\n                    \"onUpdate:modelValue\": _cache[56] || (_cache[56] = ($event: any) => ((loadedImagesProgress).value = $event)),\n                    color: \"#092088\",\n                    height: \"20\"\n                  }, {\n                    default: _withCtx(() => [\n                      (loadedImagesProgress.value < 100)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_36, \"Loading Data (\" + _toDisplayString(loadedImagesProgress.value.toFixed(0)) + \"%)\", 1))\n                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_37, \"Data Loaded\"))\n                    ]),\n                    _: 1\n                  }, 8, [\"modelValue\"]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _cache[134] || (_cache[134] = _createElementVNode(\"hr\", { style: {\"border-color\":\"grey\"} }, null, -1)),\n            (selections.value)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_38, [\n                  _createVNode(_component_cds_dialog, {\n                    modelValue: showUserGuide.value,\n                    \"onUpdate:modelValue\": _cache[57] || (_cache[57] = ($event: any) => ((showUserGuide).value = $event)),\n                    title: \"User Guide\",\n                    button: \"\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(UserGuide)\n                    ]),\n                    _: 1\n                  }, 8, [\"modelValue\"]),\n                  _createVNode(ListComponent, {\n                    selectionOptions: selectionOptions.value,\n                    modelValue: selection.value as RectangleSelectionType,\n                    \"onUpdate:modelValue\": _cache[58] || (_cache[58] = ($event: any) => ((selection.value as RectangleSelectionType) = $event)),\n                    selectionActive: _unref(selectionActive),\n                    onEditSelection: editSelection,\n                    onCreateNew: createNewSelection\n                  }, null, 8, [\"selectionOptions\", \"modelValue\", \"selectionActive\"]),\n                  (selection.value && selectionHasSamples(selection.value as RectangleSelectionType))\n                    ? (_openBlock(), _createBlock(_component_v_btn, {\n                        key: 0,\n                        size: \"small\",\n                        color: \"success\",\n                        onClick: _cache[59] || (_cache[59] = ($event: any) => (copySelectionWithNewTimeRange(selection.value as RectangleSelectionType))),\n                        disabled: loadingSamples.value === 'loading'\n                      }, {\n                        default: _withCtx(() => _cache[129] || (_cache[129] = [\n                          _createTextVNode(\" + New Time Series \"),\n                          _createElementVNode(\"br\", null, null, -1),\n                          _createTextVNode(\"for Current Selection \")\n                        ])),\n                        _: 1,\n                        __: [129]\n                      }, 8, [\"disabled\"]))\n                    : _createCommentVNode(\"\", true),\n                  _createVNode(_component_v_select, {\n                    modelValue: selection.value,\n                    \"onUpdate:modelValue\": _cache[60] || (_cache[60] = ($event: any) => ((selection).value = $event)),\n                    items: selectionOptions.value,\n                    label: \"Selection\",\n                    \"return-object\": \"\"\n                  }, {\n                    selection: _withCtx(({ item }) => [\n                      _createTextVNode(_toDisplayString(item.value == null ? \"None\" : item.value.name), 1)\n                    ]),\n                    item: _withCtx(({ item, props }) => [\n                      _createVNode(_component_v_list_item, {\n                        title: item.value == null ? 'None' : item.value.name,\n                        onClick: ($event: any) => (typeof props.onClick === 'function' ? props.onClick($event) : undefined)\n                      }, null, 8, [\"title\", \"onClick\"])\n                    ]),\n                    _: 1\n                  }, 8, [\"modelValue\", \"items\"]),\n                  _createVNode(_component_v_list, null, {\n                    default: _withCtx(() => [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(selections.value, (sel, index) => {\n                        return (_openBlock(), _createBlock(_component_v_list_item, {\n                          title: sel.name,\n                          key: index,\n                          color: sel.color\n                        }, {\n                          subtitle: _withCtx(() => [\n                            (sel.timeRange)\n                              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_39, _toDisplayString(getTimeRangeDisplay(sel as RectangleSelectionType)), 1))\n                              : _createCommentVNode(\"\", true)\n                          ]),\n                          append: _withCtx(() => [\n                            _createVNode(_component_v_tooltip, {\n                              text: \"Edit selection\",\n                              location: \"top\"\n                            }, {\n                              activator: _withCtx(({ props }) => [\n                                _createVNode(_component_v_btn, _mergeProps({ ref_for: true }, props, {\n                                  size: \"x-small\",\n                                  icon: \"mdi-pencil\",\n                                  onClick: () => editSelection(sel as RectangleSelectionType)\n                                }), null, 16, [\"onClick\"])\n                              ]),\n                              _: 2\n                            }, 1024),\n                            _createVNode(_component_v_tooltip, {\n                              text: \"Get NO₂ Samples\",\n                              location: \"top\"\n                            }, {\n                              activator: _withCtx(({ props }) => [\n                                _createVNode(_component_v_btn, _mergeProps({ ref_for: true }, props, {\n                                  size: \"x-small\",\n                                  loading: loadingSamples.value === sel.name,\n                                  disabled: sel.samples != null,\n                                  icon: \"mdi-download\",\n                                  onClick: () => fetchDataForSelection(sel as RectangleSelectionType)\n                                }), null, 16, [\"loading\", \"disabled\", \"onClick\"])\n                              ]),\n                              _: 2\n                            }, 1024),\n                            _createVNode(_component_v_tooltip, {\n                              text: \"Get Center Point NO₂ Sample\",\n                              location: \"top\"\n                            }, {\n                              activator: _withCtx(({ props }) => [\n                                _createVNode(_component_v_btn, _mergeProps({ ref_for: true }, props, {\n                                  size: \"x-small\",\n                                  loading: loadingPointSample.value === sel.name,\n                                  icon: \"mdi-image-filter-center-focus\",\n                                  onClick: () => fetchCenterPointDataForSelection(sel as RectangleSelectionType)\n                                }), null, 16, [\"loading\", \"onClick\"])\n                              ]),\n                              _: 2\n                            }, 1024),\n                            _createVNode(_component_v_tooltip, {\n                              text: \"Remove selection\",\n                              location: \"top\"\n                            }, {\n                              activator: _withCtx(({ props }) => [\n                                _createVNode(_component_v_btn, _mergeProps({ ref_for: true }, props, {\n                                  size: \"x-small\",\n                                  icon: \"mdi-trash-can\",\n                                  onClick: () => deleteSelection(sel as RectangleSelectionType)\n                                }), null, 16, [\"onClick\"])\n                              ]),\n                              _: 2\n                            }, 1024)\n                          ]),\n                          _: 2\n                        }, 1032, [\"title\", \"color\"]))\n                      }), 128))\n                    ]),\n                    _: 1\n                  }),\n                  _createVNode(_component_v_btn, {\n                    size: \"small\",\n                    color: \"primary\",\n                    onClick: _cache[61] || (_cache[61] = ($event: any) => (samplesGraph.value = true)),\n                    disabled: !haveSamples.value\n                  }, {\n                    default: _withCtx(() => _cache[130] || (_cache[130] = [\n                      _createTextVNode(\" Show Timeseries \")\n                    ])),\n                    _: 1,\n                    __: [130]\n                  }, 8, [\"disabled\"]),\n                  _createVNode(_component_v_btn, {\n                    size: \"small\",\n                    color: \"primary\",\n                    onClick: _cache[62] || (_cache[62] = ($event: any) => (sampleDialog.value = true)),\n                    disabled: !haveSamples.value\n                  }, {\n                    default: _withCtx(() => _cache[131] || (_cache[131] = [\n                      _createTextVNode(\" Show Tables \")\n                    ])),\n                    _: 1,\n                    __: [131]\n                  }, 8, [\"disabled\"]),\n                  _createElementVNode(\"div\", _hoisted_40, [\n                    _createVNode(_component_v_card, {\n                      variant: \"outlined\",\n                      class: \"pa-3\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_v_card_title, { class: \"text-subtitle-1 pa-0 mb-2\" }, {\n                          default: _withCtx(() => _cache[132] || (_cache[132] = [\n                            _createTextVNode(\"Time Range for New Selections\")\n                          ])),\n                          _: 1,\n                          __: [132]\n                        }),\n                        _createVNode(_component_v_radio_group, {\n                          modelValue: useCustomTimeRange.value,\n                          \"onUpdate:modelValue\": _cache[63] || (_cache[63] = ($event: any) => ((useCustomTimeRange).value = $event)),\n                          row: \"\",\n                          density: \"compact\",\n                          class: \"mb-3\"\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_v_radio, {\n                              value: false,\n                              label: \"Current Day\",\n                              density: \"compact\"\n                            }),\n                            _createVNode(_component_v_radio, {\n                              value: true,\n                              label: \"Custom Range\",\n                              density: \"compact\"\n                            })\n                          ]),\n                          _: 1\n                        }, 8, [\"modelValue\"]),\n                        _createElementVNode(\"div\", _hoisted_41, [\n                          _createVNode(_component_v_chip, {\n                            size: \"small\",\n                            color: useCustomTimeRange.value ? 'success' : 'info'\n                          }, {\n                            default: _withCtx(() => [\n                              _createTextVNode(_toDisplayString(useCustomTimeRange.value ? 'Custom' : 'Current Day') + \": \" + _toDisplayString(effectiveTimeRangeDisplay.value), 1)\n                            ]),\n                            _: 1\n                          }, 8, [\"color\"])\n                        ]),\n                        (selection.value)\n                          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_42, [\n                              _createVNode(_component_v_chip, {\n                                size: \"small\",\n                                color: \"info\"\n                              }, {\n                                default: _withCtx(() => [\n                                  _createTextVNode(\" Selection: \" + _toDisplayString(getTimeRangeDisplay(selection.value as RectangleSelectionType)), 1)\n                                ]),\n                                _: 1\n                              })\n                            ]))\n                          : _createCommentVNode(\"\", true)\n                      ]),\n                      _: 1\n                    })\n                  ])\n                ]))\n              : _createCommentVNode(\"\", true),\n            _cache[135] || (_cache[135] = _createElementVNode(\"hr\", { style: {\"border-color\":\"grey\"} }, null, -1)),\n            _createElementVNode(\"div\", _hoisted_43, [\n              _cache[133] || (_cache[133] = _createElementVNode(\"br\", null, null, -1)),\n              _createVNode(_component_v_select, {\n                modelValue: selectedTimezone.value,\n                \"onUpdate:modelValue\": _cache[64] || (_cache[64] = ($event: any) => ((selectedTimezone).value = $event)),\n                label: \"Timezone\",\n                items: timezoneOptions.value,\n                \"item-title\": \"name\",\n                \"item-value\": \"tz\"\n              }, null, 8, [\"modelValue\", \"items\"]),\n              false\n                ? (_openBlock(), _createBlock(_component_v_checkbox, {\n                    key: 0,\n                    disabled: !highresAvailable.value,\n                    modelValue: useHighRes.value,\n                    \"onUpdate:modelValue\": _cache[65] || (_cache[65] = ($event: any) => ((useHighRes).value = $event)),\n                    onKeyup: _cache[66] || (_cache[66] = _withKeys(($event: any) => (useHighRes.value = !useHighRes.value), [\"enter\"])),\n                    label: \"Use High Resolution Data\",\n                    color: \"#c10124\",\n                    \"hide-details\": \"\"\n                  }, null, 8, [\"disabled\", \"modelValue\"]))\n                : _createCommentVNode(\"\", true),\n              (showExtendedRangeFeatures && extendedRangeAvailable.value)\n                ? (_openBlock(), _createBlock(_component_v_checkbox, {\n                    key: 1,\n                    disabled: !extendedRangeAvailable.value,\n                    modelValue: showExtendedRange.value,\n                    \"onUpdate:modelValue\": _cache[67] || (_cache[67] = ($event: any) => ((showExtendedRange).value = $event)),\n                    onKeyup: _cache[68] || (_cache[68] = _withKeys(($event: any) => (showExtendedRange.value = !showExtendedRange.value), [\"enter\"])),\n                    label: \"Use Extended NO2 range\",\n                    color: \"#c10124\",\n                    \"hide-details\": \"\"\n                  }, null, 8, [\"disabled\", \"modelValue\"]))\n                : _createCommentVNode(\"\", true)\n            ])\n          ]),\n          _createVNode(_component_cds_dialog, {\n            title: \"NO₂ Samples\",\n            modelValue: sampleDialog.value,\n            \"onUpdate:modelValue\": _cache[69] || (_cache[69] = ($event: any) => ((sampleDialog).value = $event))\n          }, {\n            default: _withCtx(() => [\n              (loadingSamples.value === 'loading')\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_44, [\n                    _cache[136] || (_cache[136] = _createTextVNode(\"Loading rectangle samples... \")),\n                    _createVNode(_component_v_progress_linear, {\n                      indeterminate: \"\",\n                      height: \"20\"\n                    })\n                  ]))\n                : _createCommentVNode(\"\", true),\n              (sampleError.value)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_45, \"Error: \" + _toDisplayString(sampleError.value), 1))\n                : _createCommentVNode(\"\", true),\n              _createVNode(SampleTable, {\n                samples: selection.value?.samples ?? null,\n                error: sampleError.value\n              }, null, 8, [\"samples\", \"error\"]),\n              (loadingPointSample.value === 'loading')\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_46, \"Loading center point sample...\"))\n                : _createCommentVNode(\"\", true),\n              (pointSampleError.value)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_47, \"Error: \" + _toDisplayString(pointSampleError.value), 1))\n                : _createCommentVNode(\"\", true),\n              _createVNode(SampleTable, {\n                samples: pointSampleResult.value,\n                error: pointSampleError.value\n              }, null, 8, [\"samples\", \"error\"]),\n              (pointSampleResult.value && Object.keys(pointSampleResult.value).length === 0)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_48, \"No data for this point/time.\"))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"]),\n          _createElementVNode(\"div\", _hoisted_49, [\n            (selections.value.length > 0)\n              ? (_openBlock(), _createBlock(_component_timeseries_graph, {\n                  key: 0,\n                  data: selections.value\n                }, null, 8, [\"data\"]))\n              : _createCommentVNode(\"\", true),\n            _createVNode(DateTimeRangeSelection, {\n              \"current-date\": _unref(singleDateSelected),\n              \"selected-timezone\": selectedTimezone.value,\n              \"allowed-dates\": _unref(uniqueDays),\n              onRangesChange: handleDateTimeRangeSelectionChange\n            }, null, 8, [\"current-date\", \"selected-timezone\", \"allowed-dates\"])\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_50, [\n          _cache[139] || (_cache[139] = _createElementVNode(\"a\", {\n            href: \"https://www.si.edu/\",\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            class: \"mr-1\"\n          }, [\n            _createElementVNode(\"img\", {\n              alt: \"Smithsonian Logo\",\n              src: _imports_1\n            })\n          ], -1)),\n          _createVNode(_component_credit_logos)\n        ])\n      ]),\n      _createVNode(_component_v_dialog, {\n        scrim: \"false\",\n        modelValue: showPrivacyDialog.value,\n        \"onUpdate:modelValue\": _cache[72] || (_cache[72] = ($event: any) => ((showPrivacyDialog).value = $event)),\n        \"max-width\": \"400px\",\n        id: \"privacy-popup-dialog\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_card, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_card_text, null, {\n                default: _withCtx(() => _cache[140] || (_cache[140] = [\n                  _createTextVNode(\" To evaluate usage of this app, \"),\n                  _createElementVNode(\"strong\", null, \"anonymized\", -1),\n                  _createTextVNode(\" data may be collected, including locations viewed and map quiz responses. \\\"My Location\\\" data is NEVER collected. \")\n                ])),\n                _: 1,\n                __: [140]\n              }),\n              _createVNode(_component_v_card_actions, { class: \"pt-3\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_spacer),\n                  _createVNode(_component_v_btn, {\n                    color: \"#BDBDBD\",\n                    href: \"https://www.cfa.harvard.edu/privacy-statement\",\n                    target: \"_blank\",\n                    rel: \"noopener noreferrer\"\n                  }, {\n                    default: _withCtx(() => _cache[141] || (_cache[141] = [\n                      _createTextVNode(\" Privacy Policy \")\n                    ])),\n                    _: 1,\n                    __: [141]\n                  }),\n                  _createVNode(_component_v_btn, {\n                    color: \"#ff6666\",\n                    onClick: _cache[70] || (_cache[70] = () => {\n              responseOptOut.value = true;\n              showPrivacyDialog.value = false;\n            })\n                  }, {\n                    default: _withCtx(() => _cache[142] || (_cache[142] = [\n                      _createTextVNode(\" Opt out \")\n                    ])),\n                    _: 1,\n                    __: [142]\n                  }),\n                  _createVNode(_component_v_btn, {\n                    color: \"green\",\n                    onClick: _cache[71] || (_cache[71] = () => {\n              responseOptOut.value = false;\n              showPrivacyDialog.value = false;\n            })\n                  }, {\n                    default: _withCtx(() => _cache[143] || (_cache[143] = [\n                      _createTextVNode(\" Allow \")\n                    ])),\n                    _: 1,\n                    __: [143]\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"])\n    ]),\n    _: 1\n  }, 8, [\"style\"]))\n}\n}\n\n})","<template>\n<v-app\n  id=\"app\"\n  :style=\"cssVars\"\n>\n\n<v-overlay\n  :model-value=\"inIntro\"\n  :style=\"cssVars\"\n  id=\"intro-background\"\n>\n\n<v-dialog \n  v-model=\"inIntro\"\n        >\n        <div v-if=\"inIntro\" id=\"introduction-overlay\" class=\"elevation-10 gradient-background\">\n          <v-window v-model=\"introSlide\">\n            <template v-slot:additional>\n              <div id=\"intro-window-close-button\">\n              <font-awesome-icon\n                size=\"xl\"\n                class=\"ma-3\"\n                color=\"#b3d5e6\"\n                icon='square-xmark'\n                @click=\"inIntro = !inIntro\"\n                @keyup.enter=\"inIntro = !inIntro\"\n                tabindex=\"0\"\n                tooltip-location=\"start\"\n              /> \n            </div>\n            </template>\n\n            <v-window-item :value=\"1\"\n              id=\"splash-screen\"\n            >\n              <div\n                id=\"first-splash-row\"\n              >\n                <div id=\"splash-screen-text\">\n                  What Is in the Air You Breathe?\n                </div>\n                <div>\n                  Explore daily pollution maps over North America and find out.\n                </div>\n              </div>\n\n              <div>\n                <v-btn\n                  class=\"splash-get-started\"\n                  @click=\"introSlide++\"\n                  @keyup.enter=\"introSlide++\"\n                  :color=\"accentColor\"\n                  :density=\"display.smAndDown ? 'compact' : 'default'\"\n                  size=\"x-large\"\n                  variant=\"elevated\"\n                  rounded=\"lg\"\n                >\n                  Get Started\n                </v-btn>\n              </div>\n            \n              <div id=\"splash-screen-acknowledgements\">\n                Brought to you by <a href=\"https://www.cosmicds.cfa.harvard.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">Cosmic Data Stories</a>.\n                \n                <div id=\"splash-screen-logos\">\n                  <a href=\"https://www.si.edu/\" target=\"_blank\" rel=\"noopener noreferrer\"\n                  ><img alt=\"Smithsonian Logo\" src=\"220px-Smithsonian_sun_logo_no_text.svg.png\"></a>\n                  <credit-logos/>\n                </div>\n              </div>\n            </v-window-item>\n            \n            <v-window-item :value=\"2\">\n              <div class=\"intro-text\">\n                <p class=\"mb-5\">\n                  The TEMPO satellite mission (Tropospheric Emissions: Monitoring Pollution), launched in April 2023, is the first space-based instrument to measure major air pollutants across the North American continent every daylight hour at high spatial resolution. A collaboration between NASA and the Smithsonian Astrophysical Observatory, the TEMPO instrument gathers hourly daytime scans of the atmosphere over North America from the Atlantic Ocean to the Pacific Coast and from the Yucatán Peninsula to central Canada.\n                </p>\n              </div>\n            </v-window-item>\n            \n            <v-window-item :value=\"3\">\n              <div class=\"intro-text mb-3\">\n                <p class=\"mb-3\">\n                  This Data Story provides an introduction to what can be learned from TEMPO’s data, which became publicly available May 20, 2024. The map here visualizes hourly Nitrogen Dioxide (NO<sub>2</sub>) data over time. NO<sub>2</sub> can be produced by:\n                </p> \n                <ul>\n                  <li>Burning of fossil fuels&#8212;for example from vehicles, power plants, manufacturing sites, and oil refineries</li>\n                  <li>Fires and biomass burning&#8212;including wildfires and prescribed burns, as well as burning of vegetation for land clearing</li>\n                  <li>Bacteria, which naturally convert nitrogen in soil into compounds that can form NO<sub>2</sub>. Agricultural use of nitrogen-based fertilizers increases the amount of NO<sub>2</sub> produced by these bacteria.</li>\n                  <li>Lightning, which triggers a chemical reaction that turns harmless N<sub>2</sub> in the atmosphere into NO<sub>2</sub>.\n</li>\n                </ul>\n                <p class=\"mt-3\">\n                For each date, you can see the scans beginning on the East Coast in the morning, and ending on the West Coast as the Sun sets.\n                </p> \n              </div>\n            </v-window-item>\n            <v-window-item :value=\"4\">\n              <div class=\"intro-text mb-3\">      \n                <p class=\"mb-3\">\n                  In this interactive page you can:\n                </p>\n                <ul>\n                  <li>\n                    Use the search box to navigate a location of your choice.\n                  </li>\n                  <li>\n                    Select a date and press the “Play” button or scroll the time slider to view the changing concentrations of NO<sub>2</sub> on those dates. \n                  </li>\n                  <li>\n                    Click <v-icon style=\"color: #ffcc33\">mdi-share-variant</v-icon> to share your selected location, date, and time with others.\n                  </li>\n                  <li v-bind:style=\"cssVars\">\n                    Press the <v-icon style=\"font-size: 1.3em; color: var(--accent-color)\" elevation=\"1\">mdi-information-variant-circle-outline</v-icon> button next to each Notable Date to get an overview of what to look for on that date\n                  </li>\n                  <li>\n                    For each Notable Date, select one of two zoomed-in Locations to investigate specific pollution events.\n                  </li>\n                  <li>\n                    You can use the “Timezone” setting to investigate how pollution evolves over the day in different parts of the country, for example as rush hour progresses in large cities.\n                  </li>\n                </ul>\n                <!-- add do not show introduction again button -->\n                <v-checkbox\n                  v-model=\"dontShowIntro\"\n                  @keyup.enter=\"dontShowIntro = !dontShowIntro\"\n                  label=\"Don't show this introduction at launch\"\n                  color=\"#c10124\"\n                  hide-details\n                />\n              </div>\n            </v-window-item>\n          </v-window>\n\n          <div id=\"intro-bottom-controls\">\n            <div>\n              <v-btn\n                v-if=\"(introSlide > 1)\"\n                id=\"intro-next-button\"\n                :color=\"accentColor\"\n                @click=\"introSlide--\"\n                @keyup.enter=\"introSlide--\"\n                elevation=\"0\"\n                >\n                Back\n              </v-btn>\n            </div>\n            \n            <v-btn\n              v-if=\"(introSlide > 1)\"\n              id=\"intro-next-button\"\n              :color=\"accentColor\"\n              @click=\"introSlide++\"\n              @keyup.enter=\"introSlide++\"\n              elevation=\"0\"\n              >\n              {{ introSlide < 4 ? 'Next' : 'Get Started' }}\n            </v-btn>\n          </div>\n        </div>\n      </v-dialog>\n    </v-overlay>\n  <div\n    id=\"main-content\"\n  > \n  <marquee-alert \n    v-if=\"smallSize && showExtendedRangeFeatures && extendedRangeAvailable\" \n    timeout=\"30000\"\n    message=\"You can view data with an extend range for the \n            duration of the LA fires. See the 🔥 button on the map\"\n    />\n    <div class=\"content-with-sidebars\">\n      <!-- tempo logo -->\n      <div id=\"logo-title\">\n      <a href=\"https://tempo.si.edu\" target=\"_blank\" rel=\"noopener noreferrer\" >\n        <img \n          src=\"./assets/TEMPO-Logo-Small.png\"\n          alt=\"TEMPO Logo\"\n          style=\"width: 100px; height: 100px;\"\n        >\n      </a>\n\n      <h1 id=\"title\">What is in the Air You Breathe?</h1>\n      <!-- <cds-dialog\n        title=\"Timeseries\"\n        v-model=\"samplesGraph\"\n        :color=\"accentColor2\"\n        draggable\n        :scrim=\"false\"\n        :drag-predicate=\"(element: HTMLElement) => element.closest('.plotly') == null\"\n      >\n        <timeseries-graph\n          v-if=\"selections.length > 0\"\n          :data=\"selections\"\n        />\n      </cds-dialog> -->\n\n      <!-- </div> -->\n      <cds-dialog title=\"What's new\" v-model=\"showChanges\" :color=\"accentColor2\">\n        <ul class=\"snackbar-alert-ul\">\n          <li class=\"change-item mb-5\" v-for=\"change in changes\" :key=\"change.date\" :data-date=\"change.date\">\n            <span :style='{\"font-weight\":\"bold\", \"color\": `${change.highlight ? \"var(--smithsonian-yellow)\" : \"currentColor\"}` }'>{{ change.date }}</span><br> <span v-html=\"change.html\">  </span>{{ change.text }}\n          </li>\n        </ul>\n        <!-- <template v-slot:activator=\"{ onClick, id }\">\n          <v-btn :id=\"id\" @click=\"onClick\" color=\"primary\">\n            Custom Activator\n          </v-btn>\n        </template>  -->\n      </cds-dialog>\n\n      <div id=\"menu-area\">\n        <v-btn \n          v-if=\"(new Date('2025-05-7 00:00:00') > new Date())\"\n          class='whats-new-button pulse' \n          aria-label=\"What's new\" \n          @click=\"showChanges = true\" \n          @keyup.enter=\"showChanges = true\" \n          variant=\"outlined\" \n          rounded=\"lg\" \n          :color=\"accentColor2\" \n          elevation=\"0\"\n          size=\"lg\"\n          >\n          <v-tooltip location=\"bottom\" activator=\"parent\" :disabled=\"mobile\" text=\"What's new\"></v-tooltip>\n          <v-icon>mdi-creation</v-icon>\n        </v-btn>\n        <share-button\n            :source=\"currentUrl\"\n            buttonColor=\"black\"\n            :iconColor=\"accentColor2\"\n            elevation=\"0\"\n            size=\"small\"\n            rounded=\"1\"\n            :tooltip-disabled=\"mobile\"\n            @click=\"shareButtonClickedCount += 1\"\n            alert\n          />\n        <v-btn aria-role=\"menu\" aria-label=\"Show menu\" class=\"menu-button\" variant=\"outlined\" rounded=\"lg\" :color=\"accentColor2\" elevation=\"5\">\n          <v-icon size=\"x-large\">mdi-menu</v-icon>\n          <v-menu\n            activator=\"parent\"\n            >\n            <v-list>\n              <v-list-item \n                tabindex=\"0\"\n                aria-label=\"See recent changes\"\n                @click=\"showChanges = true\"\n                @keyup.enter=\"showChanges = true\"\n                >\n                What's New\n              </v-list-item>\n\n              <v-list-item \n                tabindex=\"0\" \n                aria-label=\"Show introduction\"\n                @click=\"() => {introSlide = 1; inIntro = true;}\"\n                @keyup.enter=\"() => {introSlide = 1; inIntro = true;}\"\n                >\n                  Introduction\n              </v-list-item>\n              \n              <v-list-item \n                tabindex=\"0\"\n                aria-label=\"Show user guide\"\n                @click=\"() => {introSlide = 4; inIntro = true;}\"\n                @keyup.enter=\"() => {introSlide = 4; inIntro = true;}\"\n                >\n                User Guide\n              </v-list-item>\n              \n              <v-list-item \n                tabindex=\"0\"\n                aria-label=\"Show dialog telling about the data\"\n                @click=\"showAboutData = true\"\n                @keyup.enter=\"showAboutData = true\"\n                >\n                About the Data\n              </v-list-item>\n              \n              <v-list-item \n                \n                aria-label=\"Leave Page to Educator Resources\"\n                >\n                <a style=\"font-weight: normal;\" tabindex=\"0\"  href=\"https://www.cosmicds.cfa.harvard.edu/resources/tempo\" target=\"_blank\" rel=\"noopener\">Educator Resources<v-icon>mdi-open-in-new</v-icon></a>\n              </v-list-item>\n              \n              <v-list-item \n                tabindex=\"0\" \n                aria-label=\"Show credits\"\n                @click=\"showCredits = true\"\n                @keyup.enter=\"showCredits = true\"\n                >\n                  Credits\n              </v-list-item>\n              \n            </v-list>\n          </v-menu>\n        </v-btn>\n      </div>\n    </div>\n      <div id=\"where\" class=\"big-label\">where</div>\n      <div id=\"map-container\">\n        <colorbar-horizontal\n          v-if=\"display.width.value <= 750\"\n          label=\"Amount of NO2\"\n          backgroundColor=\"transparent\"\n          :nsteps=\"255\"\n          :cmap=\"cmapNO2\"\n          start-value=\"1\"\n          :end-value=\"showingExtendedRange ? '300' : '150'\"\n          :extend=\"true\"\n        >\n        <template v-slot:label>\n              <div style=\"text-align: center;\">Amount of NO&#x2082;&nbsp;<span class=\"unit-label\">(10&sup1;&#x2074; mol/cm&sup2;)</span></div>\n        </template>\n        </colorbar-horizontal>\n        <v-card id=\"map-contents\" style=\"width:100%; height: 100%;\">\n          <v-toolbar\n            density=\"compact\"\n          >\n            <v-toolbar-title text=\"TEMPO Data Viewer\"></v-toolbar-title>\n            <v-spacer></v-spacer>\n            <v-select\n              v-model=\"whichMolecule\"\n              :items=\"moleculeOptions\"\n              item-title=\"title\"\n              item-value=\"value\"\n              label=\"Molecule\"\n              hide-details\n              dense\n            ></v-select>\n            <v-tooltip :text=\"selectionActive ? 'Cancel selection' : 'Select a region'\">\n              <template #activator=\"{ props }\">\n                <v-btn\n                  v-bind=\"props\"\n                  icon=\"mdi-select\"\n                  :color=\"selectionActive ? 'info' : 'default'\"\n                  :variant=\"selectionActive ? 'tonal' : 'text'\"\n                  @click=\"activateSelectionMode\"\n                ></v-btn>\n              </template>\n            </v-tooltip>\n          </v-toolbar>\n          <div id=\"map\">\n            <v-overlay\n              :modelValue=\"loadedImagesProgress < 100\"\n              style=\"z-index: 1000;\"\n              class=\"align-center justify-center\"\n              contained\n              opacity=\".8\"\n              >\n              <div id=\"loading-circle-progress-container\" class=\"d-flex flex-column align-center justify-center ga-2\">\n                <label class=\"text-black\" for=\"loading-circle-progress\">Loading Data...</label>\n                <v-progress-circular\n                  id=\"loading-circle-progress\"\n                  style=\"z-index: 1000;\"\n                  :size=\"100\"\n                  :width=\"15\"\n                  :model-value=\"loadedImagesProgress\"\n                  color=\"#092088\"\n                >\n                {{ loadedImagesProgress.toFixed(0) }}%\n              </v-progress-circular>\n              </div>\n            </v-overlay>\n          </div>\n\n          <div v-if=\"showFieldOfRegard\" id=\"map-legend\"><hr class=\"line-legend\">TEMPO Field of Regard</div>\n          <!-- show hide cloud data, disable if none is available -->\n\n          <v-menu\n            id=\"map-controls\"\n            v-model=\"showControls\"\n            :close-on-content-click=\"false\"\n          >\n            <template v-slot:activator=\"{ props }\">\n              <div id=\"map-show-hide-controls\">\n                <v-btn\n                  v-bind=\"props\"\n                  class=\"mx-2 mt-5\"\n                  elevation=\"2\"\n                  color=\"white\"\n                  icon\n                  style=\"outline: 2px solid #b6b6b6;\"\n                  rounded=\"0\"\n                  size=\"x-small\"\n                >\n                  <template v-slot:default>\n                    <v-icon\n                      color=\"black\"\n                      size=\"x-large\"\n                    >mdi-tune-variant</v-icon>\n                  </template>\n                </v-btn>\n              </div>\n            </template>\n            <v-card class=\"controls-card\">\n              <font-awesome-icon\n                style=\"position:absolute;right:16px;cursor:pointer\"\n                icon=\"square-xmark\"\n                size=\"xl\"\n                @click=\"showControls = false\"\n                @keyup.enter=\"showControls = false\"\n                :color=\"accentColor2\"\n                tabindex=\"0\"\n              ></font-awesome-icon>\n              <div\n                id=\"opacity-slider-container\"\n                class=\"mt-5\"\n              >\n                <div id=\"opacity-slider-label\">TEMPO data opacity</div>\n                <v-slider\n                    v-model=\"opacity\"\n                    :min=\"0\"\n                    :max=\"1\"\n                    color=\"#c10124\"\n                    density=\"compact\"\n                    hide-details\n                    class=\"mb-4\"\n                    @end=\"onOpacitySliderEnd\"\n                  >\n                </v-slider>\n              </div>\n              <div\n                class=\"d-flex flex-row align-center justify-space-between\"\n              >\n                <v-checkbox\n                  v-model=\"showRoads\"\n                  @keyup.enter=\"showRoads = !showRoads\"\n                  label=\"Show Roads\"\n                  color=\"#c10124\"\n                  hide-details\n                />\n              </div>\n              <div\n                class=\"d-flex flex-row align-center justify-space-between\"\n              >\n                <v-checkbox\n                  v-model=\"showFieldOfRegard\"\n                  @keyup.enter=\"showFieldOfRegard = !showFieldOfRegard\"\n                  label=\"TEMPO Field of Regard\"\n                  color=\"#c10124\"\n                  hide-details\n                />\n                <info-button>\n                  <p>\n                    The TEMPO satellite observes the atmosphere over North America, from the Atlantic Ocean to the Pacific Coast, and from roughly Mexico City to central Canada. \n                  </p>\n                  <p>\n                    The TEMPO Field of Regard (in <span class=\"text-red\">red</span>, currently <em>{{ showFieldOfRegard ? 'visible' : \"hidden\" }}</em>)\n                    is the area over which the satellite takes measurements. \n                  </p>\n                  </info-button>\n                </div>\n                <div class=\"d-flex flex-row align-center justify-space-between\">\n                <v-checkbox\n                  v-model=\"showClouds\"\n                  @keyup.enter=\"showClouds = !showClouds\"\n                  :disabled=\"!cloudDataAvailable\"\n                  :label=\"cloudDataAvailable ? 'Show Cloud Mask' : 'No Cloud Data Available'\"\n                  color=\"#c10124\"\n                  hide-details\n                />\n                <info-button>\n                  <p>\n                    The cloud mask shows where the satellite could not measure NO<sub>2</sub> because of cloud cover. \n                  </p>\n                </info-button>\n              </div>\n                <div class=\"d-flex flex-row align-center justify-space-between\">\n                  <v-checkbox\n                  v-model=\"showImage\"\n                  @keyup.enter=\"showImage = !showImage\"\n                  color=\"#c10124\"\n                  label=\"Show CDS Images (when available)\"\n                  hide-details\n                />\n                <info-button>\n                  <p>\n                    Show or hide the post-processed NO<sub>2</sub> data layer.\n                  </p>\n                </info-button>\n              </div>\n                <div class=\"d-flex flex-row align-center justify-space-between\">\n                  <v-checkbox\n                  :disabled=\"!highresAvailable\"\n                  v-model=\"useHighRes\"\n                  @keyup.enter=\"useHighRes = !useHighRes\"\n                  label=\"Use High Resolution Data\"\n                  color=\"#c10124\"\n                  hide-details\n                />\n                <info-button>\n                  <p>\n                    By default we show data at 1/2 resolution for performance. \n                  </p>\n                </info-button>\n              </div>\n                <div v-if=\"showExtendedRangeFeatures && extendedRangeAvailable\" class=\"d-flex flex-row align-center justify-space-between\">\n                  <v-checkbox\n                  :disabled=\"!extendedRangeAvailable\"\n                  v-model=\"showExtendedRange\"\n                  @keyup.enter=\"showExtendedRange = !showExtendedRange\"\n                  label=\"Use Extended NO2 range\"\n                  color=\"#c10124\"\n                  hide-details\n                />\n                <info-button>\n                  <p>\n                    If data is available, show map with extended range of NO<sub>2</sub> values.\n                  </p>\n                </info-button>\n              </div>\n            </v-card>\n          </v-menu>\n          <div id=\"location-and-sharing\">\n          <location-search\n            v-model=\"searchOpen\"\n            small\n            stay-open\n            buttonSize=\"xl\"\n            persist-selected\n            :search-provider=\"geocodingInfoForSearchLimited\"\n            @set-location=\"setLocationFromSearch\"\n            @error=\"(error: string) => searchErrorMessage = error\"\n          ></location-search>\n        </div>\n        \n        <div id=\"la-fires\">\n          <v-btn v-if=\"!smallSize && extendedRangeAvailable\" @click=\"activateLAViewer\" @keyup.enter=\"activateLAViewer\" >\n            {{ extendedRangeAvailable ? (showExtendedRange ? \"Showing extended range\" : \"Use extreme events range\") : \"No extended range images available for this date\" }}\n          </v-btn>\n          <v-btn v-if=\"smallSize && showExtendedRangeFeatures && extendedRangeAvailable\" @click=\"activateLAViewer\" @keyup.enter=\"activateLAViewer\" icon >\n            🔥\n          </v-btn>\n          <cds-dialog title=\"Extreme Events\" v-model=\"showLADialog\" :color=\"accentColor2\">\n            <v-row>\n              <v-col>\n                <p>\n                  Some events like the January 2025 Los Angeles fires generate so much smoke \n                  and pollution that NO<sub>2</sub> levels can greatly\n                    exceed the default range used in the color scale \n                    for the TEMPO-lite viewer. To show more clearly where \n                    the very highest levels of NO<sub>2</sub> are present, \n                    you can use an extended color stretch.   \n                </p>\n                <p>\n                  By default we display values from 0.01-1.5&times;10<sup>16</sup> molecules per square centimeter, \n                  check the box here to double the max of the range to 3&times;10<sup>16</sup> molecules per square centimeter. \n                  The extended range will be available on dates with extreme events like the Los Angeles fire outbreaks.\n                </p>\n            \n            <v-checkbox v-model=\"showExtendedRange\" label=\"Use extended data range\"/>\n            \n            <!-- Note on clouds. Some times (such as January 19th) smoke is detected as \"clouds\" and so those pixels get removed. \n            We (CosmicDS) currently do not have an algorithmic way retrieve the nitrogen dioxide column in these cases and so \n            those pixels are masked out in the \"cloud mask\". -->\n        \n              </v-col>\n            </v-row>\n            <v-row class=\"justify-center\">\n\n              <v-btn :color=\"accentColor2\" @click=\"goToLA\" @keyup.enter=\"goToLA\"> Go To Los Angeles</v-btn>\n\n            </v-row>\n          </cds-dialog>\n        </div>\n        \n        </v-card>\n        <colorbar \n          v-if=\"display.width.value > 750\"\n          label=\"Amount of NO2\"\n          backgroundColor=\"transparent\"\n          :nsteps=\"255\"\n          :cmap=\"cmapNO2\"\n          start-value=\"1\"\n          :end-value=\"showingExtendedRange ? '300' : '150'\"\n          :extend=\"true\"\n        >\n          <template v-slot:label>\n              <div style=\"text-align: center;\">Amount of NO&#x2082;<br><span class=\"unit-label\">(10&sup1;&#x2074; molecules/cm&sup2;)</span></div>\n          </template>\n        </colorbar>\n        \n\n      </div>\n        <div id=\"when\" class=\"big-label\">when</div>\n        <div id=\"slider-row\">\n          <v-slider\n            class=\"time-slider\"\n            v-model=\"timeIndex\"\n            :min=\"minIndex\"\n            :max=\"maxIndex\"\n            :step=\"1\"\n            color=\"#068ede95\"\n            thumb-label=\"always\"\n            :track-size=\"10\"\n            show-ticks=\"always\"\n            hide-details\n            @end=\"onTimeSliderEnd\"\n          >\n            <template v-slot:thumb-label>\n              <div class=\"thumb-label\">\n                {{ thumbLabel }}\n              </div>\n            </template>\n          </v-slider>\n          <icon-button\n            id=\"play-pause\"\n            :fa-icon=\"playing ? 'pause' : 'play'\"\n            fa-size=\"sm\"\n            @activate=\"playing = !playing\"\n          ></icon-button>\n        </div>\n\n        \n\n        <div id=\"user-options\">\n        <div id=\"all-dates\">\n          <h2>Select a Date</h2>  \n          <div class=\"d-flex flex-row align-center\">\n            <v-radio-group v-model=\"radio\">\n              <date-picker\n                ref=\"calendar\"\n                :model-value=\"singleDateSelected\"\n                @internal-model-change=\"(value: Date) => {\n                  if (value != null && value.getTime() != singleDateSelected.getTime()) {\n                    radio = null;\n                    singleDateSelected = value;\n                    calendar?.closeMenu();\n                  }\n                }\"\n                :allowed-dates=\"uniqueDays\"\n                :clearable=\"false\"\n                :enable-time-picker=\"false\"\n                :multi-dates=\"false\"\n                :transitions=\"false\"\n                :format=\"(date: Date | null) => date?.toDateString()\"\n                :preview-format=\"(date: Date | null) => date?.toDateString()\"\n                no-today\n                dark\n              >\n                <template #action-buttons>\n                  <button\n                    class=\"dp__action_button dp__action-latest\"\n                    @click=\"() => singleDateSelected = uniqueDays[uniqueDays.length - 1]\"\n                    @keyup.enter=\"() => singleDateSelected = uniqueDays[uniqueDays.length - 1]\"\n                    :disabled=\"singleDateSelected === uniqueDays[uniqueDays.length - 1]\"\n                    elevation=\"0\"\n                    size=\"sm\"\n                  >\n                    Latest\n                </button>\n                </template>\n                <!-- <template #action-extra=\"{ selectCurrentDate }\">\n                \n                </template> -->\n              </date-picker>\n              <!-- time chips to select time specifically for esri times -->\n              <time-chips\n                v-if=\"whichMolecule.toLowerCase().includes('month')\"\n                :timestamps=\"esriTimesteps\"\n                @select=\"handleEsriTimeSelected($event.value, $event.index)\"\n                reverse\n                use-utc\n                date-only\n              />\n            </v-radio-group>\n          </div>        \n          <!-- create a list of the uniqueDays -->\n          <!-- <v-select\n            :modelValue=\"singleDateSelected\"\n            :disabled=\"radio !== 0\"\n            :items=\"uniqueDays\"\n            item-title=\"title\"\n            item-value=\"value\"\n            label=\"Select a Date\"\n            @update:model-value=\"(e) => { singleDateSelected = e;}\"\n            hide-details\n            variant=\"solo\"\n          ></v-select> -->\n          <!-- add buttons to increment and decrement the singledateselected -->\n          <div class=\"d-flex flex-row align-center my-2\">\n            <v-tooltip :disabled=\"touchscreen\" text=\"Previous Date\">\n              <template v-slot:activator=\"{ props }\">\n                <v-btn\n                  v-bind=\"props\"\n                  class=\"rounded-icon-wrapper\"\n                  @click=\"moveBackwardOneDay\"\n                  @keyup.enter=\"moveBackwardOneDay\"\n                  :disabled=\"singleDateSelected === uniqueDays[0]\"\n                  color=\"#009ade\"\n                  variant=\"outlined\"\n                  elevation=\"0\"\n                  size=\"md\"\n                >\n                  <v-icon>mdi-chevron-double-left</v-icon>\n                </v-btn>\n              </template>\n            </v-tooltip>\n            <v-spacer></v-spacer>\n            <v-tooltip :disabled=\"touchscreen\" text=\"Get Data for latest available day\">\n              <template v-slot:activator=\"{ props }\">\n                <v-btn\n                  v-bind=\"props\"\n                  style=\"padding-inline: 4px;\"\n                  @click=\"() => singleDateSelected = uniqueDays[uniqueDays.length - 1]\"\n                  @keyup.enter=\"() => singleDateSelected = uniqueDays[uniqueDays.length - 1]\"\n                  :disabled=\"singleDateSelected === uniqueDays[uniqueDays.length - 1]\"\n                  color=\"#009ade\"\n                  variant=\"outlined\"\n                  elevation=\"0\"\n                  size=\"md\"\n                >\n                  Latest Data\n                </v-btn>\n              </template>\n            </v-tooltip>\n            <v-spacer></v-spacer>\n            <v-tooltip :disabled=\"touchscreen\" text=\"Next Date\">\n              <template v-slot:activator=\"{ props }\">\n                <v-btn\n                  v-bind=\"props\"\n                  class=\"rounded-icon-wrapper\"\n                  @click=\"moveForwardOneDay\"\n                  @keyup.enter=\"moveForwardOneDay\"\n                  :disabled=\"singleDateSelected === uniqueDays[uniqueDays.length - 1]\"\n                  color=\"#009ade\"\n                  variant=\"outlined\"\n                  elevation=\"0\"\n                  size=\"md\"\n                >\n                  <v-icon>mdi-chevron-double-right</v-icon>\n                </v-btn>\n              </template>\n            </v-tooltip>\n          </div>\n          <v-progress-linear\n            v-if=\"loadedImagesProgress < 101\"\n            v-model=\"loadedImagesProgress\"\n            color=\"#092088\"\n            height=\"20\"\n          >\n          <span v-if=\"loadedImagesProgress < 100\">Loading Data ({{ loadedImagesProgress.toFixed(0) }}%)</span>\n          <span v-else>Data Loaded</span>\n          </v-progress-linear>\n          <!-- <v-switch label=\"LA fires\" v-model=\"showExtendedRange\" /> -->\n        </div>\n\n        <hr style=\"border-color: grey\">\n\n        <div id=\"sample-info\" v-if=\"selections\" style=\"margin-top: 1em;\">\n          <cds-dialog\n            v-model=\"showUserGuide\"\n            title=\"User Guide\"\n            button\n            >\n          <UserGuide/>\n          </cds-dialog>\n          <ListComponent \n            :selectionOptions=\"selectionOptions\" \n            v-model=\"selection as RectangleSelectionType\" \n            :selectionActive=\"selectionActive\" \n            @edit-selection=\"editSelection\" \n            @create-new=\"createNewSelection\" \n          />\n          <!-- Add Time Series button -->\n          <v-btn \n            v-if=\"selection && selectionHasSamples(selection as RectangleSelectionType)\" \n            size=\"small\" \n            color=\"success\" \n            @click=\"copySelectionWithNewTimeRange(selection as RectangleSelectionType)\"\n            :disabled=\"loadingSamples === 'loading'\"\n          >\n            + New Time Series <br/>for Current Selection\n          </v-btn>\n          \n          <v-select\n            v-model=\"selection\"\n            :items=\"selectionOptions\"\n            label=\"Selection\"\n            return-object\n          >\n            <template #selection=\"{ item }\">\n              {{ item.value == null ? \"None\" : item.value.name }}\n            </template>\n            <template #item=\"{ item, props }\">\n              <v-list-item :title=\"item.value == null ? 'None' : item.value.name\" @click=\"typeof props.onClick === 'function' ? props.onClick($event) : undefined\"></v-list-item>\n            </template>\n          </v-select>\n\n          <v-list>\n            <v-list-item\n              v-for=\"(sel, index) in selections\"\n              :title=\"sel.name\"\n              :key=\"index\"\n              :color=\"sel.color\"\n            >\n              <template #subtitle>\n                <span v-if=\"sel.timeRange\" class=\"text-caption\">\n                  {{ getTimeRangeDisplay(sel as RectangleSelectionType) }}\n                </span>\n              </template>\n              <template #append>\n                <v-tooltip\n                  text=\"Edit selection\"\n                  location=\"top\"\n                >\n                  <template #activator=\"{ props }\">\n                    <v-btn\n                      v-bind=\"props\"\n                      size=\"x-small\"\n                      icon=\"mdi-pencil\"\n                      @click=\"() => editSelection(sel as RectangleSelectionType)\"\n                    ></v-btn>\n                  </template>\n                </v-tooltip>\n                <v-tooltip\n                  text=\"Get NO₂ Samples\"\n                  location=\"top\"\n                >\n                  <template #activator=\"{ props }\">\n                    <v-btn\n                      v-bind=\"props\"\n                      size=\"x-small\"\n                      :loading=\"loadingSamples === sel.name\"\n                      :disabled=\"sel.samples != null\"\n                      icon=\"mdi-download\"\n                      @click=\"() => fetchDataForSelection(sel as RectangleSelectionType)\"\n                    ></v-btn>\n                  </template>\n                </v-tooltip>\n                <v-tooltip\n                  text=\"Get Center Point NO₂ Sample\"\n                  location=\"top\"\n                >\n                  <template #activator=\"{ props }\">\n                    <v-btn\n                      v-bind=\"props\"\n                      size=\"x-small\"\n                      :loading=\"loadingPointSample === sel.name\"\n                      icon=\"mdi-image-filter-center-focus\"\n                      @click=\"() => fetchCenterPointDataForSelection(sel as RectangleSelectionType)\"\n                    ></v-btn>\n                  </template>\n                </v-tooltip>\n                <v-tooltip\n                  text=\"Remove selection\"\n                  location=\"top\"\n                >\n                  <template #activator=\"{ props }\">\n                    <v-btn\n                      v-bind=\"props\"\n                      size=\"x-small\"\n                      icon=\"mdi-trash-can\"\n                      @click=\"() => deleteSelection(sel as RectangleSelectionType)\"\n                    ></v-btn>\n                  </template>\n                </v-tooltip>\n              </template>\n            </v-list-item>\n          </v-list>\n\n          <v-btn size=\"small\" color=\"primary\" @click=\"samplesGraph = true\" :disabled=\"!haveSamples\">\n            Show Timeseries\n          </v-btn>\n          \n          <v-btn size=\"small\" color=\"primary\" @click=\"sampleDialog = true\" :disabled=\"!haveSamples\">\n            Show Tables\n          </v-btn>\n          \n          \n          \n          <!-- Time Range Selection -->\n          <div class=\"time-range-selection mt-3\">\n            <v-card variant=\"outlined\" class=\"pa-3\">\n              <v-card-title class=\"text-subtitle-1 pa-0 mb-2\">Time Range for New Selections</v-card-title>\n              \n                            <!-- Binary choice radio buttons -->\n              <v-radio-group v-model=\"useCustomTimeRange\" row density=\"compact\" class=\"mb-3\">\n                <v-radio \n                  :value=\"false\" \n                  label=\"Current Day\"\n                  density=\"compact\"\n                />\n                <v-radio \n                  :value=\"true\" \n                  label=\"Custom Range\"\n                  density=\"compact\"\n                />\n              </v-radio-group>\n              \n              <!-- Effective time range display -->\n              <div class=\"mt-2\">\n                <v-chip size=\"small\" :color=\"useCustomTimeRange ? 'success' : 'info'\">\n                  {{ useCustomTimeRange ? 'Custom' : 'Current Day' }}: {{ effectiveTimeRangeDisplay }}\n                </v-chip>\n              </div>\n              \n              <!-- Current selection info -->\n              <div v-if=\"selection\" class=\"mt-2\">\n                <v-chip size=\"small\" color=\"info\">\n                  Selection: {{ getTimeRangeDisplay(selection as RectangleSelectionType) }}\n                </v-chip>\n              </div>\n            </v-card>\n          </div>\n  \n        </div>\n\n        <hr style=\"border-color: grey;\">\n        <div id=\"bottom-options\">\n          <br>\n          <v-select\n            v-model=\"selectedTimezone\"\n            label=\"Timezone\"\n            :items=\"timezoneOptions\"\n            item-title=\"name\"\n            item-value=\"tz\"\n          ></v-select>\n          \n          <v-checkbox\n            v-if=\"false\"\n            :disabled=\"!highresAvailable\"\n            v-model=\"useHighRes\"\n            @keyup.enter=\"useHighRes = !useHighRes\"\n            label=\"Use High Resolution Data\"\n            color=\"#c10124\"\n            hide-details\n          />\n          <v-checkbox\n            v-if=\"showExtendedRangeFeatures && extendedRangeAvailable\"\n            :disabled=\"!extendedRangeAvailable\"\n            v-model=\"showExtendedRange\"\n            @keyup.enter=\"showExtendedRange = !showExtendedRange\"\n            label=\"Use Extended NO2 range\"\n            color=\"#c10124\"\n            hide-details\n          />\n        </div>\n      </div>\n      \n\n        <cds-dialog \n          title=\"NO₂ Samples\" \n          v-model=\"sampleDialog\" \n          >\n          <div \n            v-if=\"loadingSamples === 'loading'\" \n            >Loading rectangle samples...\n            <v-progress-linear\n              indeterminate\n              height=\"20\"\n            >\n            </v-progress-linear>\n          </div>\n          \n          <div v-if=\"sampleError\" class=\"text-red\">Error: {{ sampleError }}</div>\n          <SampleTable :samples=\"selection?.samples ?? null\" :error=\"sampleError\" />\n          <div v-if=\"loadingPointSample === 'loading'\" class=\"mt-2\">Loading center point sample...</div>\n          <div v-if=\"pointSampleError\" class=\"mt-2 text-red\">Error: {{ pointSampleError }}</div>\n          <SampleTable :samples=\"pointSampleResult\" :error=\"pointSampleError\" />\n          <div v-if=\"pointSampleResult && Object.keys(pointSampleResult).length === 0\" class=\"mt-2\">No data for this point/time.</div>\n        </cds-dialog>\n      \n      <div id=\"information\">\n        <timeseries-graph\n          v-if=\"selections.length > 0\"\n          :data=\"selections\"\n        />\n        \n\n        \n        <date-time-range-selection\n          :current-date=\"singleDateSelected\"\n          :selected-timezone=\"selectedTimezone\"\n          :allowed-dates=\"uniqueDays\"\n          @ranges-change=\"handleDateTimeRangeSelectionChange\"\n        />\n      </div>\n      \n    </div>\n    <div id=\"body-logos\">\n      <a href=\"https://www.si.edu/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"mr-1\" \n      ><img alt=\"Smithsonian Logo\" src=\"./assets/smithsonian.png\"\n        /></a>\n      <credit-logos/>\n    </div>\n  </div>\n\n  <!-- Data collection opt-out dialog -->\n    <v-dialog\n      scrim=\"false\"\n      v-model=\"showPrivacyDialog\"\n      max-width=\"400px\"\n      id=\"privacy-popup-dialog\"\n    >\n      <v-card>\n        <v-card-text>\n          To evaluate usage of this app, <strong>anonymized</strong> data may be collected, including locations viewed and map quiz responses. \"My Location\" data is NEVER collected.\n        </v-card-text>\n        <v-card-actions class=\"pt-3\">\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"#BDBDBD\"\n            href=\"https://www.cfa.harvard.edu/privacy-statement\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n          Privacy Policy\n          </v-btn>\n          <v-btn\n            color=\"#ff6666\"\n            @click=\"() => {\n              responseOptOut = true;\n              showPrivacyDialog = false;\n            }\"\n          >\n          Opt out\n          </v-btn>\n          <v-btn \n            color=\"green\"\n            @click=\"() => {\n              responseOptOut = false;\n              showPrivacyDialog = false;\n            }\"\n          >\n            Allow\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n\n</v-app>\n</template>\n  \n<script setup lang=\"ts\">\nimport { ref, computed, watch, onMounted, nextTick } from \"vue\";\nimport { API_BASE_URL, blurActiveElement } from \"@cosmicds/vue-toolkit\";\nimport { useDisplay } from 'vuetify';\nimport { DatePickerInstance } from \"@vuepic/vue-datepicker\";\nimport { v4 } from \"uuid\";\nimport { getTimezoneOffset } from \"date-fns-tz\";\nimport { cbarNO2 } from \"./revised_cmap\";\nimport { MapBoxFeature, MapBoxFeatureCollection, geocodingInfoForSearch } from \"./mapbox\";\nimport { _preloadImages } from \"./PreloadImages\";\nimport changes from \"./changes\";\nimport { useBounds } from './composables/useBounds';\nimport { interestingEvents } from \"./interestingEvents\";\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { AggValue, LatLngPair, InitMapOptions, RectangleSelectionInfo, RectangleSelection, RectangleType, MappingBackends } from \"./types\";\nimport type { MillisecondRange } from \"./types/datetime\";\nimport ListComponent from \"./components/ListComponent.vue\";\nimport UserGuide from \"./components/UserGuide.vue\";\nimport SampleTable from \"./components/SampleTable.vue\";\nimport { atleast1d } from \"./utils/atleast1d\";\n\nimport { useUniqueTimeSelection } from \"./composables/useUniqueTimeSelection\";\n\nimport DateTimeRangeSelection from \"./date_time_range_selection/DateTimeRangeSelection.vue\";\nimport TimeChips from \"./components/TimeChips.vue\";\n// Import Leaflet Composables\n// import { useMap } from \"./composables/leaflet/useMap\";\n// import { usezoomhome } from './composables/leaflet/useZoomHome';\n// import { useImageOverlay } from \"./composables/leaflet/useImageOverlay\";\n// import { useFieldOfRegard} from \"./composables/leaflet/useFieldOfRegard\";\n// import { useLocationMarker } from \"./composables/leaflet/useMarker\";\n// import { useRectangleSelection } from \"./composables/leaflet/useRectangleSelection\";\n// import { addRectangleLayer, updateRectangleBounds, removeRectangleLayer } from \"./composables/leaflet/utils\";\n// import { useMultiMarker } from './composables/leaflet/useMultiMarker';\n// import { useEsriLayer } from \"./esri/leaflet/useEsriImageLayer\";\n// const zoomScale = 1; \n\n// Import Maplibre Composables\nimport { useMap } from \"./composables/maplibre/useMap\";\nimport { usezoomhome } from './composables/maplibre/useZoomHome';\nimport { useImageOverlay } from \"./composables/maplibre/useImageOverlay\";\nimport { useFieldOfRegard} from \"./composables/maplibre/useFieldOfRegard\";\nimport { useLocationMarker } from \"./composables/maplibre/useMarker\";\nimport { useRectangleSelection } from \"./composables/maplibre/useRectangleSelection\";\nimport { addRectangleLayer, updateRectangleBounds, removeRectangleLayer } from \"./composables/maplibre/utils\";\nimport { useMultiMarker } from './composables/maplibre/useMultiMarker';\nimport { useEsriLayer } from \"./esri/maplibre/useEsriImageLayer\";\n// import { useEsriLayer } from \"./esri/maplibre/useEsriImageLayerPlain\"; // do not use\nconst zoomScale = 0.5; // for matplibre-gl\n\nconst showImage = ref(false);\n\nconst BACKEND: MappingBackends = \"maplibre\" as const;\n\ntype RectangleSelectionType = RectangleSelection<typeof BACKEND>;\n\n\nimport { TempoDataService } from \"./esri/services/TempoDataService\";\n\n\n\n// const zoomScale = 0.5; // for maplibre-gl\n\n\nconst display = useDisplay();\nconst calendar = ref<DatePickerInstance | null>(null);\ntype SheetType = \"text\" | \"video\" | null;\ntype Timeout = ReturnType<typeof setTimeout>;\n\n\n/**************\n * UI Setup\n *************/\n// const hash = window.location.hash;\nconst urlParams = new URLSearchParams(window.location.search);\nconst showExtendedRangeFeatures = true; //hash.includes(\"extreme-events\");\nconst showSplashScreen = ref(new URLSearchParams(window.location.search).get(\"splash\")?.toLowerCase() !== \"false\");\nconst extendedRange = ref(window.location.hash.includes(\"extreme-events\") || urlParams.get('extendedRange') === \"true\"); //showExtendedRangeFeatures || urlParams.get('extendedRange') === \"true\";\nconst hideIntro = urlParams.get(\"hideintro\") === \"true\";\nconst WINDOW_DONTSHOWINTRO = hideIntro ? true : window.localStorage.getItem(\"dontShowIntro\") === 'true';\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore --> msPointerEnabled may not be defined in window.navigator\nconst touchscreen = ref(('ontouchstart' in window) || ('ontouchstart' in document.documentElement) || !!window.navigator.msPointerEnabled);\n\n\n\nconst STORY_VISIT_URL = `${API_BASE_URL}/tempo-lite/visit`;\nfunction pingServer(venue: string) {\n\n  fetch(STORY_VISIT_URL, {\n    \n    method: \"POST\",\n    \n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? ''\n    },\n    \n    body: JSON.stringify({\n      info: { venue }\n    })\n    \n  })\n    .then((response) => {\n      if (!response.ok) {\n        console.error(\"Error pinging server\", response.status, response.statusText);\n      } \n    }).\n    catch((error) => {\n      console.error(\"Error pinging server\", error);\n    });\n}\n\nconst venue = (urlParams.get(\"venue\") ?? '').replace(/,/g, '-');\n\nif (venue !== '') {\n  // get current value of venue\n  const venues =  window.localStorage.getItem(\"venues\") ?? '';\n  // if they haven't visited this venue before, ping the server & save it\n  if (!venues.includes(venue)) {\n    pingServer(venue);\n    window.localStorage.setItem(\"venues\", venues ? `${venues},${venue}` : venue);\n  }\n}\n\n\nfunction clearUrl(hash = false) {\n  const newUrl = location.origin + location.pathname + (hash ? location.hash : '');\n  window.history.replaceState({}, '', newUrl);\n}\nclearUrl(true);\n\n\nconst introSlide = ref(1);\nconst inIntro = ref(!WINDOW_DONTSHOWINTRO);\nconst dontShowIntro = ref(WINDOW_DONTSHOWINTRO);\nconst showNotice = ref(true);\nconst sheet = ref<SheetType>(null);\nconst accentColor = ref(\"#068ede\");\nconst accentColor2 = ref(\"#ffcc33\");\n\nlet hasOptOutBeenOpened = false;\nconst introductionOpen = computed(() => inIntro.value && (introSlide.value === 1));\nconst userGuideOpen = computed(() => inIntro.value && (introSlide.value === 4));\n\nlet whatsNewOpenedCount = 0;\nlet whatsNewTimestamp = null as number | null;\nlet whatsNewOpenTimeMs = 0;\nlet introductionOpenedCount = 0;\nlet introductionTimestamp = null as number | null;\nlet introductionOpenTimeMs = 0;\nlet userGuideOpenedCount = 0;\nlet userGuideTimestamp = null as number | null;\nlet userGuideOpenTimeMs = 0;\nlet aboutDataOpenedCount = 0;\nlet aboutDataTimestamp = null as number | null;\nlet aboutDataOpenTimeMs = 0;\nlet creditsOpenedCount = 0;\nlet creditsTimestamp = null as number | null;\nlet creditsOpenTimeMs = 0;\nlet shareButtonClickedCount = 0;\nlet playButtonClickedCount = 0;\nlet timeSliderUsedCount = 0;\nlet opacitySliderUsedCount = 0;\nlet fieldOfRegardToggled = false;\nlet cloudMaskToggled = false;\nlet hiResDataToggled = false;\n\nlet userSelectedCalendarDates: number[] = [];\nlet userSelectedTimezones: string[] = [];\nlet userSelectedLocations: string[] = [];\nlet userSelectedNotableEvents: [string, string][] = [];\n\nconst STORY_DATA_URL = `${API_BASE_URL}/tempo-lite/data`;\nconst OPT_OUT_KEY = \"tempo-lite-optout\" as const;\nconst UUID_KEY = \"tempo-lite-uuid\" as const;\nconst storedOptOut = window.localStorage.getItem(OPT_OUT_KEY);\nconst maybeUUID = window.localStorage.getItem(UUID_KEY);\nconst optOut = typeof storedOptOut === \"string\" ? storedOptOut === \"true\" : null;\nconst showPrivacyDialog = ref(false);\nconst responseOptOut = ref(optOut);\nconst existingUser = maybeUUID !== null;\nconst uuid = maybeUUID ?? v4();\nif (!existingUser) {\n  window.localStorage.setItem(UUID_KEY, uuid);\n}\n\nfunction selectSheet(name: SheetType) {\n  if (sheet.value === name) {\n    sheet.value = null;\n    nextTick(() => {\n      blurActiveElement();\n    });\n  } else {\n    sheet.value = name;\n  }\n}\n\nconst showTextSheet = computed({\n  get() {\n    return sheet.value === 'text';\n  },\n  set(_value: boolean) {\n    selectSheet('text');\n  }\n});\n\nconst infoColor = \"#092088\";\nconst cssVars = computed(() => {\n  return {\n    '--accent-color': accentColor.value,\n    '--accent-color-2': accentColor2.value,\n    '--app-content-height': showTextSheet.value ? '66%' : '100%',\n    '--info-background': infoColor,\n  };\n});\n\nconst smallSize = computed(() => {\n  return display.smAndDown.value;\n});\n\nconst mobile = computed(() => {\n  return smallSize.value && touchscreen.value;\n});\n\n\nfunction zpad(n: number, width: number = 2, character: string = \"0\"): string {\n  return n.toString().padStart(width, character);\n}\n\n/************\n * TIMESTAMP SETUP\n ************/\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport { getTimestamps, getExtendedRangeTimestamps } from \"./timestamps\";\nimport { VariableNames } from \"./esri/ImageLayerConfig\";\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst erdTimestamps = ref<number[]>([]);\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst newTimestamps = ref<number[]>([]);\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst cloudTimestamps = ref<number[]>([]);\nconst fosterTimestamps = ref<number[]>([\n  1698838920000,\n  1698841320000,\n  1698843720000,\n  1698846120000,\n  1698848520000,\n  1698852120000,\n  1698855720000,\n  1698859320000,\n  1698862920000,\n  1698866520000,\n  1698870120000,\n  1698873720000,\n  1698876120000,\n  1698878520000,\n  1698880920000,\n  1699011720000,\n  1699014120000,\n  1699016520000,\n  1699018920000,\n  1699021320000,\n  1699024920000,\n  1699028520000,\n  1699032120000,\n  1699035720000,\n  1699039320000,\n  1699042920000,\n  1699046520000,\n  1699048920000,\n  1699051320000,\n  1699053720000,\n  1711626180000,\n  1711628640000,\n  1711631040000,\n  1711633440000,\n  1711637040000,\n  1711640640000,\n  1711644240000,\n  1711647840000,\n  1711651440000,\n  1711655040000,\n  1711658640000,\n  1711662240000,\n  1711665840000,\n  1711668240000,\n]);\n\n\nconst timestamps = ref<number[]>(fosterTimestamps.value);\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst extendedRangeTimestamps = ref<number[]>([]);\nconst showExtendedRange = ref(extendedRange.value);\nconst useHighRes = ref(false);\nconst {\n  timeIndex,\n  timestamp,\n  date,\n  singleDateSelected,\n  maxIndex,\n  minIndex,\n  uniqueDays,\n  uniqueDaysIndex,\n  setNearestDate,\n  moveBackwardOneDay,\n  moveForwardOneDay,\n  nearestDateIndex } = useUniqueTimeSelection(timestamps);\n\nconst timestampsLoaded = ref(false);\nconst fosterTimestampsSet = ref(new Set(fosterTimestamps.value));\nconst erdTimestampsSet = ref(new Set());\nconst newTimestampsSet = ref(new Set());\nconst cloudTimestampsSet = ref(new Set());\nconst extendedRangeTimestampsSet = ref(new Set());\nconst timestampsSet = ref(new Set(fosterTimestamps.value));\nconst preprocessedTimestampSet = ref(new Set(fosterTimestamps.value));\n// append and Set timestamps\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction appendTimestamps(newTimestamps: number[][]) {\n  if (newTimestamps.length > 0) {\n    timestamps.value = timestamps.value.concat(...newTimestamps).sort();\n    timestampsSet.value = new Set(timestamps.value);\n  }\n}\nasync function updateTimestamps() {\n  return Promise.all([\n    // getExtendedRangeTimestamps().then(ts => {\n    //   extendedRangeTimestamps.value = ts;\n    //   extendedRangeTimestampsSet.value = new Set(ts);\n    // }),\n    // getTimestamps().then((ts) => {\n    //   erdTimestamps.value = ts.early_release;\n    //   erdTimestampsSet.value = new Set(ts.early_release);\n    //   newTimestamps.value = ts.released;\n    //   newTimestampsSet.value = new Set(ts.released);\n    //   timestamps.value = timestamps.value.concat(erdTimestamps.value, newTimestamps.value).sort();\n    //   const _set = new Set(timestamps.value);\n    //   timestampsSet.value = _set;\n    //   preprocessedTimestampSet.value = _set;\n      \n    //   cloudTimestamps.value = ts.clouds;\n    //   cloudTimestampsSet.value = new Set(ts.clouds);\n    // })\n  ]);\n}\n\n\nupdateTimestamps().then(() => { timestampsLoaded.value = true; })\n  .then(() => {\n    if (window.location.hash.includes(\"extreme-events\")) {\n      nextTick(() => {\n        activateExtremeEvents();\n      });\n    }\n  });\n\n\n/************\n * INITIAL LOCATIONS SETUP\n ************/\n\n\nconst initLat = parseFloat(urlParams.get(\"lat\") || '40.044');\nconst initLon = parseFloat(urlParams.get(\"lon\") || '-98.789');\nconst initZoom = parseFloat(urlParams.get(\"zoom\") || `${4 * zoomScale}`); // 4 is the default zoom level for the map, multiplied by zoomScale for maplibre\nconst initTime = urlParams.get(\"t\");\nconst initState = ref<InitMapOptions>({\n  loc: [initLat, initLon] as LatLngPair,\n  zoom: initZoom,\n  t: initTime ? +initTime : null\n});\n\n\nconst homeLat = 40.044;\nconst homeLon = -98.789;\nconst homeZoom = 4 * zoomScale; // 4 is the default zoom level for the map, multiplied by zoomScale for maplibre\nconst homeState = ref({\n  loc: [homeLat, homeLon] as LatLngPair,\n  zoom: homeZoom,\n  t: null as number | null\n});\n\n\nconst radio = ref<number | null>(null);\nconst sublocationRadio = ref<number | null>(null);\n\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst { currentBounds: imageBounds } = useBounds(date);\n\n\n\n\n\nconst selectedTimezone = ref(\"US/Eastern\");\nconst playing = ref(false);\nconst playInterval = ref<Timeout | null>(null);\nconst searchOpen = ref(true);\nconst searchErrorMessage = ref<string | null>(null);\nconst showControls = ref(false);\nconst showCredits = ref(false);\nconst showAboutData = ref(false);\nconst loadedImagesProgress = ref(0);\nconst showUserGuide = ref(false);\n\nconst showLocationMarker = ref(true);\nconst currentUrl = ref(window.location.href);\nconst showChanges = ref(false);\nconst showLADialog = ref(false);\n\n\nconst imageName = computed(() => {\n  return getTempoFilename(date.value);\n});\n\nconst imageUrl = computed(() => {\n  if (!showImage.value) {\n    return '';\n  }\n  \n  if (customImageUrl.value) {\n    return customImageUrl.value;\n  }\n  const url = getTempoDataUrl(timestamp.value);\n  if (url === null) { return ''; }\n  return url + imageName.value;\n});\n\nconst showClouds = ref(false);\nconst cloudUrl = computed(() => {\n  if (!showClouds.value) {\n    return '';\n  }\n\n  if (cloudTimestampsSet.value.has(timestamp.value)) {\n    return getCloudFilename(date.value);\n  }\n  return '';\n});\n\n\nconst opacity = ref(0.9);\nconst preload = ref(true);\nconst customImageUrl = ref(\"\");\nconst cloudOverlay = useImageOverlay(cloudUrl, opacity, imageBounds, 'cloud-overlay');\nconst imageOverlay = useImageOverlay(imageUrl, opacity, imageBounds, 'image-overlay');\n\nconst cloudDataAvailable = computed(() => {\n  return cloudTimestampsSet.value.has(timestamp.value);\n});\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst whichDataSet = computed(() => {\n  if (fosterTimestampsSet.value.has(timestamp.value)) {\n    return 'TEMPO-lite';\n  }\n\n  if (erdTimestampsSet.value.has(timestamp.value)) {\n    return 'Early Release (V01)';\n  }\n\n  if (newTimestampsSet.value.has(timestamp.value)) {\n    return 'Level 3 (V03)';\n  }\n\n  return 'Unknown';\n});\n\n\nconst highresAvailable = computed(() => {\n  return newTimestampsSet.value.has(timestamp.value);\n});\n\nconst extendedRangeAvailable = computed(() => {\n  return extendedRangeTimestampsSet.value.has(timestamp.value);\n});\n\nconst showingExtendedRange = computed(() => {\n  return showExtendedRangeFeatures && showExtendedRange.value && extendedRangeAvailable.value;\n});\n\nconst esriUrls = {\n  'no2': {\n    url: \"https://gis.earthdata.nasa.gov/image/rest/services/C2930763263-LARC_CLOUD/TEMPO_NO2_L3_V03_HOURLY_TROPOSPHERIC_VERTICAL_COLUMN/ImageServer\",\n    variable: \"NO2_Troposphere\",\n  },\n  'no2Monthly': {\n    url: \"https://gis.earthdata.nasa.gov/gp/rest/services/Hosted/TEMPO_NO2_L3_V03_Monthly_Mean/ImageServer\",\n    variable: \"NO2_Troposphere\",\n  },\n  'no2DailyMax' : {\n    url: \"https://gis.earthdata.nasa.gov/gp/rest/services/Hosted/TEMPO_NO2_L3_V03_Daily_Maximum/ImageServer\",\n    variable: \"NO2_Troposphere\",\n  },\n  'o3': {\n    url: \"https://gis.earthdata.nasa.gov/image/rest/services/C2930764281-LARC_CLOUD/TEMPO_O3TOT_L3_V03_HOURLY_OZONE_COLUMN_AMOUNT/ImageServer\",\n    variable: \"Ozone_Column_Amount\",\n  },\n  'hcho': {\n    url: \"https://gis.earthdata.nasa.gov/image/rest/services/C2930761273-LARC_CLOUD/TEMPO_HCHO_L3_V03_HOURLY_VERTICAL_COLUMN/ImageServer\",\n    variable: \"HCHO\",\n  },\n  'hchoMonthly': {\n    url: \"https://gis.earthdata.nasa.gov/gp/rest/services/Hosted/TEMPO_HCHO_L3_V03_Monthly_Mean/ImageServer\",\n    variable: \"HCHO\",\n  },\n  'hchoDailyMax': {\n    url: \"https://gis.earthdata.nasa.gov/gp/rest/services/Hosted/TEMPO_HCHO_L3_V03_Daily_Maximum/ImageServer\",\n    variable: \"HCHO\",\n  },\n} as Record<string, { url: string; variable: VariableNames }>;\n\ntype MoleculeType = keyof typeof esriUrls;\n\nconst whichMolecule = ref<MoleculeType>('no2');\n\nconst moleculeOptions = [\n  { title: 'NO₂', value: 'no2' },\n  { title: 'Monthly Mean NO₂', value: 'no2Monthly' },\n  { title: 'Daily Max NO₂', value: 'no2DailyMax' },\n  { title: 'O₃', value: 'o3' },\n  { title: 'HCHO', value: 'hcho' },\n  { title: 'Monthly Mean HCHO', value: 'hchoMonthly' },\n  { title: 'Daily Max HCHO', value: 'hchoDailyMax' },\n];\n\n// computed\nconst esriUrl = computed(() => {\n  return esriUrls[whichMolecule.value].url;\n});\nconst esriVariable = computed(() => {\n  return esriUrls[whichMolecule.value].variable;\n});\n\n// Create TempoDataService instance\nconst tempoDataService = new TempoDataService(esriUrl.value, esriVariable.value);\n\n\nconst {getEsriTimeSteps, addEsriSource, esriTimesteps, changeUrl} = useEsriLayer(\n  esriUrl.value,\n  esriVariable.value,\n  timestamp,\n  opacity,\n);\ngetEsriTimeSteps();\nwatch(esriTimesteps, (newSteps, _oldSteps) => {\n  if (newSteps.length > 0) {\n    timestamps.value = newSteps.sort();\n    // remove old steps from timestamps and timestampsSet\n    // const oldSet = new Set(oldSteps);\n    // const filtered = timestamps.value.filter(t => !oldSet.has(t));\n    // timestamps.value = filtered;\n    // timestampsSet.value = new Set(timestamps.value);\n    // appendTimestamps([newSteps]);\n  }\n});\n\nfunction handleEsriTimeSelected(timestamp:number, _index: number) {\n  const idx = timestamps.value.indexOf(timestamp);\n  console.log(`ESRI time selected: ${new Date(timestamp)} (nearest index ${idx})`);\n  if (idx >= 0) {\n    timeIndex.value = idx;\n  }\n  singleDateSelected.value = new Date(timestamp);\n}\n\nwatch(whichMolecule, (newMolecule) => {\n  changeUrl(esriUrls[newMolecule].url, esriUrls[newMolecule].variable);\n  // Update TempoDataService with new URL and variable\n  tempoDataService.setBaseUrl(esriUrls[newMolecule].url);\n  tempoDataService.setVariable(esriUrls[newMolecule].variable);\n  getEsriTimeSteps();\n});\n\nconst onMapReady = (map) => {\n  map.on('moveend', updateURL);\n  map.on('zoomend', updateURL);\n  addEsriSource(map);\n};\nconst showRoads = ref(true);\nconst { map, createMap, setView } = useMap(\"map\", initState.value, showRoads, onMapReady);\n\nconst { \n  addFieldOfRegard,\n  showFieldOfRegard,\n  updateFieldOfRegard \n} = useFieldOfRegard(singleDateSelected, map);\n\nconst {\n  setMarker,\n  removeMarker,\n  locationMarker\n} = useLocationMarker(map,  showLocationMarker.value);\n\n\ntype SelectionOption = RectangleSelectionType | null;\nconst selections = ref<RectangleSelectionType[]>([]);\nfunction updateSelections() {\n  selections.value = [...selections.value];\n}\nfunction addToSelections(sel: RectangleSelectionType) {\n  (selections.value as RectangleSelectionType[]).push(sel);\n  updateSelections(); // to trigger reactivity in watchers\n  return selections.value[selections.value.length - 1];\n}\nconst selection = ref<SelectionOption>(null);\nconst selectedIndex = computed({\n  get() {\n    const selectedID = selection.value?.id;\n    const idx = selections.value.findIndex(s => s.id == selectedID);\n    return idx >= 0 ? idx : null;\n  },\n  set(index: number | null) {\n    if (typeof index === \"number\") {\n      selection.value = selections.value[index] ?? null;\n    } else {\n      selection.value = null;\n    }\n  }\n});\nfunction  setSelection(sel: RectangleSelectionType | null) {\n  // returns the correspondin selection from within the selections array\n  // maybe this is unecessary. we don't use the returned value\n  // but maybe somewhere we would want it. idk if the input \"sel\" is\n  // identical to the value from the array (I arrays just store a reference)\n  if (sel === null) {\n    selection.value = null;\n    selectedIndex.value = null;\n    return null;\n  } else {\n    selection.value = sel;\n    const idx = selections.value.findIndex(s => s.id === sel.id);\n    if (idx == -1) {\n      // must already be in selections, so throw an error if that is not true\n      throw new Error(`Selection with ID ${sel.id} and name ${sel.name} not found in selections.`);\n    }\n    selectedIndex.value = idx;\n    return selections.value[selectedIndex.value] ?? null;\n  }\n}\nconst selectionOptions = computed<SelectionOption[]>(() => ([null] as SelectionOption[]).concat(selections.value as SelectionOption[]));\nlet selectionCount = 0;\nconst samplesGraph = ref(false);\nconst haveSamples = computed(() => selections.value.some(s => s.samples));\n\n// I stole this from here: https://sashamaps.net/docs/resources/20-colors/\nconst COLORS = [\n  '#e6194b', '#3cb44b', '#ffe119', '#4363d8', '#f58231', '#911eb4', '#46f0f0',\n  '#f032e6', '#bcf60c', '#fabebe', '#008080', '#e6beff', '#9a6324', '#fffac8',\n  '#800000', '#aaffc3', '#808000', '#ffd8b1', '#000075', '#808080', '#ffffff',\n  '#000000'\n];\n\n// implement rectangle and point\nconst { active: selectionActive, selectionInfo } = useRectangleSelection(map, \"red\");\nconst loadingSamples = ref<string | false>(false);\n\n\n\nconst testErrorAmount = 0.25e15;\nconst _testError = { lower: testErrorAmount, upper: testErrorAmount };\n\nconst sampleError = ref<string | null>(null);\nconst sampleDialog = ref(false);\nconst pointSampleResult = ref<Record<number, { value: number | null; date: Date }> | null>(null);\nconst pointSampleError = ref<string | null>(null);\nconst loadingPointSample = ref<string | false>(false);\n\n// UI state for time range management\n\nconst useCustomTimeRange = ref(false); // Binary choice: false = current day, true = custom range\n\n// Store markers for timeseries locations\nconst timeseriesMarkerApi = useMultiMarker(map, {\n  shape: 'circle',\n  color: '#ff0000',\n  fillColor: '#ff0000',\n  fillOpacity: 0.8,\n  opacity: 1,\n  radius: 10,\n  outlineColor: '#ff0000',\n});\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction clearTimeseriesMarkers() {\n  timeseriesMarkerApi.clearMarkers();\n}\n\nfunction addTimeseriesLocationsToMap(timeseries: Array<{ x: number; y: number }>) {\n  // timeseriesMarkerApi.addMarkers(timeseries);\n  console.log(`Adding ${timeseries.length} timeseries locations to map`);\n}\n\nfunction selectionHasSamples(sel: RectangleSelectionType): boolean {\n  console.log(`Checking if selection ${sel.name} has samples:`, sel.samples);\n  const has = (sel.samples !== undefined) && Object.keys(sel.samples).length > 0;\n  if (has) {\n    console.log(`Selection ${sel.name} has samples.`);\n  } else {\n    console.log(`Selection ${sel.name} does not have samples.`);\n  }\n  return has;\n}\n\nfunction setCurrentSelectionTimeRange(timeRange: MillisecondRange | MillisecondRange[]) {\n  console.log(`Setting time range for current selection:`);\n  if (selection.value && selectedIndex.value !== null) {\n    if (selectionHasSamples(selection.value as RectangleSelectionType)) {\n      console.error(\"Cannot set time range for selection with existing samples. Please clear samples first (disabled).\");\n      return;\n    } else {\n      // Store the time range in the selection\n      selection.value.timeRange = timeRange;\n      selections.value[selectedIndex.value].timeRange = timeRange; // Update the selection in the array too\n      console.log(`Set time range for selection ${selection.value.name}:`, timeRange);\n      updateSelections();\n      return;\n    }\n  } else {\n    console.error(\"No current selection to set time range for.\");\n    return;\n  }\n  // eslint-disable-next-line no-unreachable\n  console.error(\"how did i get here???\");\n}\n\n\n// Add custom time range ref\nconst customTimeRange = ref<MillisecondRange | MillisecondRange[] | null>(null);\n\n// This only handles the the change event from the DateTimeRangeSelection component.\n// We always want it's output in customTimeRange so we can use it if ncessary\nfunction handleDateTimeRangeSelectionChange(timeRanges: MillisecondRange[]) {\n  if (timeRanges.length === 0) {\n    console.error('No time ranges received from DateTimeRangeSelection');\n    return;\n  }\n  \n  console.log(`Received ${timeRanges.length} time range(s) from DateTimeRangeSelection:`, timeRanges);\n  // with this set, effectiveTimeRange will check if we are using a custom time range\n  // and if so, will update the current selection time (if samples have not been fetched yet)\n  // else will get the option to add a new time series\n  customTimeRange.value = timeRanges; \n  timeRanges.forEach((range, index) => {\n    console.log(`  Range ${index + 1}: ${new Date(range.start).toLocaleDateString()} to ${new Date(range.end).toLocaleDateString()}`);\n  });\n}\n\n// Computed property for effective time range based on user selection\nconst effectiveTimeRange = computed<MillisecondRange[]>(() => {\n  if (useCustomTimeRange.value && customTimeRange.value) {\n    return atleast1d(customTimeRange.value);\n  } else {\n    // Use current day as default\n    const day = new Date(singleDateSelected.value);\n    const start = day.setHours(0, 0, 0, 0);\n    const end = day.setHours(23, 59, 59, 999);\n    return [{ start, end }];\n  }\n});\n\nwatch(effectiveTimeRange, (newRange) => {\n  console.log(`Effective time range changed: ${newRange.length} range(s). Attempting to set current selection time range.`);\n  setCurrentSelectionTimeRange(newRange);\n});\n\n\n// Selection management handlers\nfunction activateSelectionMode() {\n  // Activate selection mode\n  selectionActive.value = !selectionActive.value;\n}\n\n// clear all the data from the current selection\n// This is not used right now, but it is useful to have\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction clearSelectionSamples(sel: RectangleSelectionType) {\n  sel.samples = undefined;\n  sel.errors = undefined;\n  sel.timeRange = undefined;\n}\n\n// edit the region of the given selection.\nfunction editSelection(sel: RectangleSelectionType) {\n  if (selectionHasSamples(sel)) {\n    console.error(\"Cannot edit selection with existing samples.\");\n    return;\n  }\n  // Set the selection to edit\n  setSelection(sel);\n  \n  // Activate selection mode to allow editing\n  selectionActive.value = true;\n  \n  console.log(`Editing selection: ${sel.name}`);\n}\n\nfunction createNewSelection() {\n  // Clear current selection to force new selection creation\n  setSelection(null);\n  \n  // Activate selection mode\n  selectionActive.value = true;\n  \n  console.log('Creating new selection');\n}\n\n// Unified fetching methods\nasync function fetchDataForSelection(sel: RectangleSelectionType) {\n  loadingSamples.value = sel.name;\n  sampleError.value = null;\n  \n  // we want to always have a timeRange set here.\n  if (!sel.timeRange) {\n    throw new Error(`No time range set for selection ${sel.name}`);\n  }\n  // because of the thrown error above, sel.timeRange is guaranteed to be set here. \n  // so we will never use the effectiveTimeRange fallback, but we keep it here for safety.\n  const timeRanges = atleast1d(sel.timeRange) ?? effectiveTimeRange.value;\n  \n  try {\n    const data = await tempoDataService.fetchTimeseriesData(sel.rectangle, timeRanges);\n    sel.samples = data.values;\n    sel.errors = data.errors;\n    loadingSamples.value = \"finished\";\n    console.log(`Fetched data for ${timeRanges.length} time range(s)`);\n    addTimeseriesLocationsToMap(data.locations);\n  } catch (error) {\n    sampleError.value = error instanceof Error ? error.message : String(error);\n    loadingSamples.value = \"error\";\n  }\n}\n\nasync function fetchCenterPointDataForSelection(_sel: RectangleSelectionType) {\n  loadingSamples.value = _sel.name;\n  sampleError.value = null;\n  \n  if (!_sel.timeRange) {\n    throw new Error(`No time range set for selection ${_sel.name}`);\n  }\n  \n  const sel = copyAndUseSelection(_sel);\n  sel.name = `${_sel.name} (Center Point)`;\n  \n  if (!sel.timeRange) { // have to do the check again for type checker\n    throw new Error(`No time range set for selection ${sel.name}`);\n  }\n  loadingSamples.value = sel.name;\n  const timeRanges = atleast1d(sel.timeRange) ?? effectiveTimeRange.value;\n  \n  \n  try {\n    const data = await tempoDataService.fetchCenterPointData(sel.rectangle, timeRanges);\n    if (data) {\n      sel.samples = data.values;\n      loadingSamples.value = \"finished\";\n      console.log(`Fetched center point data for ${timeRanges.length} time range(s)`);\n      addTimeseriesLocationsToMap(data.locations);\n    }\n  } catch (error) {\n    sampleError.value = error instanceof Error ? error.message : String(error);\n    loadingSamples.value = \"error\";\n  }\n}\n\n\n\n// Create a new selection with a time range\nfunction createSelectionWithTimeRange(rectangle: RectangleSelectionInfo, timeRanges?: MillisecondRange | MillisecondRange[]): RectangleSelectionType {\n  const color = COLORS[selectionCount % COLORS.length];\n  selectionCount += 1;\n  \n  const _timeRanges = (timeRanges ? atleast1d(timeRanges) : timeRanges)  ?? effectiveTimeRange.value;\n  \n  console.log(`Creating selection with ${_timeRanges.length} time range(s)`);\n  _timeRanges.forEach((range, index) => {\n    console.log(`  Range ${index + 1}: ${new Date(range.start)} to ${new Date(range.end)}`);\n  });\n  \n  const { layer } = addRectangleLayer(map.value!, rectangle, color);\n  const newSelection: RectangleSelectionType = {\n    id: v4(),\n    name: `Selection ${selectionCount}`,\n    rectangle,\n    layer,\n    color,\n    timeRange: _timeRanges.length === 1 ? _timeRanges[0] : _timeRanges,\n  };\n\n  // Add to selections array\n  addToSelections(newSelection);\n  \n  // set this as the current selection\n  setSelection(newSelection);\n  \n  console.log(`Created new selection ${newSelection.name} with ${_timeRanges.length} time range(s)`);\n  return selections.value[selections.value.length - 1] as RectangleSelectionType;\n}\n\n\n// Add time series to existing selection - copy the selection and set a new time range\n// TODO: contains a lot of the createSelectionWithTimeRange. Should be possible to refactor these to use a common api\nfunction copySelectionWithNewTimeRange(existingSelection: RectangleSelectionType, timeRanges?: MillisecondRange | MillisecondRange[], name?: string): RectangleSelectionType {\n  const color = COLORS[selectionCount % COLORS.length];\n  selectionCount += 1;\n  \n  // allow the user to pass in a time range manually\n  const _timeRanges = (timeRanges ? atleast1d(timeRanges) : timeRanges)  ?? effectiveTimeRange.value;\n  \n  const newSelection: RectangleSelectionType = {\n    id: v4(),\n    name: name ?? `${existingSelection.name} (Copy)`,\n    rectangle: existingSelection.rectangle,\n    layer: existingSelection.layer, // Share the same layer\n    color,\n    timeRange: _timeRanges.length === 1 ? _timeRanges[0] : _timeRanges,\n  };\n\n  // Add to selections array\n  addToSelections(newSelection);\n  \n  // set this as the current selection\n  setSelection(newSelection);\n  \n  console.log(`Added time series to selection ${newSelection.name} with ${_timeRanges.length} time range(s)`);\n  return newSelection;\n}\n\nfunction copyAndUseSelection(sel: RectangleSelectionType) {\n  // Create a new selection with the same rectangle and time range\n  const copiedSelection = copySelectionWithNewTimeRange(sel, sel.timeRange, `${sel.name} (Center Point)`);\n  \n  // Set the new selection as current\n  setSelection(copiedSelection);\n  \n  console.log(`Copied and using selection: ${copiedSelection.name}`);\n  return copiedSelection;\n}\n\n\nwatch(selections, (newSelections, oldSelections) => {\n  // just log out the length difference\n  console.log(`Selections changed: ${oldSelections.length} -> ${newSelections.length}`);\n});\n\n\n// Utility function to get time range display string\nfunction formatTimeRange(ranges: MillisecondRange | MillisecondRange[]): string {\n  if (Array.isArray(ranges)) {\n    if (ranges.length === 0) {\n      return 'No time range set';\n    }\n    \n    if (ranges.length === 1) {\n      const range = ranges[0];\n      return `${new Date(range.start).toLocaleDateString()} - ${new Date(range.end).toLocaleDateString()}`;\n    } else {\n      // For multiple ranges, show the full span\n      const allStarts = ranges.map(r => r.start);\n      const allEnds = ranges.map(r => r.end);\n      const minStart = Math.min(...allStarts);\n      const maxEnd = Math.max(...allEnds);\n      return `${new Date(minStart).toLocaleDateString()} - ${new Date(maxEnd).toLocaleDateString()} (${ranges.length} ranges)`;\n    }\n  } else {\n    return `${new Date(ranges.start).toLocaleDateString()} - ${new Date(ranges.end).toLocaleDateString()}`;\n  }\n}\nfunction getTimeRangeDisplay(sel: RectangleSelectionType): string {\n  if (!sel.timeRange) {\n    return `No time range set for selection ${sel.name}`;\n  }\n  return formatTimeRange(sel.timeRange);\n}\n\n// Computed property for effective time range display\nconst effectiveTimeRangeDisplay = computed(() => {\n  return formatTimeRange(effectiveTimeRange.value);\n});\n\n\n\nfunction deleteSelection(sel: RectangleSelectionType) {\n  const index = selections.value.findIndex(s => s.id == sel.id);\n  if (index < 0) {\n    return;\n  }\n  const isSelected = selectedIndex.value === index;\n  if (map.value && sel.layer) {\n    // @ts-expect-error -- sel.layer has the correct type\n    removeRectangleLayer(map.value, sel.layer);\n  }\n  selections.value.splice(index, 1);\n  if (isSelected) {\n    if (index > 0) {\n      selection.value = selections.value[index - 1];\n    } else if (selections.value.length > 0) { \n      selection.value = selections.value[0];\n    } else {\n      selection.value = null;\n    }\n  }\n}\n\n\n\nonMounted(() => {\n  window.addEventListener(\"hashchange\", updateHash);\n  showSplashScreen.value = false;\n  createMap();\n  \n  usezoomhome(map, homeState.value.loc, homeState.value.zoom, (_e: Event) => {\n    sublocationRadio.value = null;\n    // check if location marker is not null and on map. if so remove it\n    if (locationMarker.value !== null) {\n      removeMarker();\n    }\n  });\n\n\n  singleDateSelected.value = uniqueDays.value[uniqueDays.value.length - 1];\n  if (map.value !== null) {\n    imageOverlay.addTo(map.value); \n    cloudOverlay.addTo(map.value);\n  }\n\n  updateFieldOfRegard();\n  addFieldOfRegard();\n\n  createUserEntry();\n  window.addEventListener(\"visibilitychange\", () => {\n    if (document.visibilityState === \"hidden\") {\n      updateUserData();\n    } else {\n      resetData();\n    }\n  });\n  \n});\n\n\n\nconst datesOfInterest = computed(() => {\n  return interestingEvents.map(event => event.date);\n});\n\nconst dateIsDST = computed(() => {\n  const standardOffset = getTimezoneOffset(selectedTimezone.value, new Date(date.value.getUTCFullYear(), 0, 1));\n  const currentOffset = getTimezoneOffset(selectedTimezone.value, date.value);\n  if (standardOffset === currentOffset) {\n    return false;\n  }\n  return true;\n});\n\nconst timezoneOptions = computed(() => {\n  return [\n    { tz: 'US/Eastern', name: dateIsDST.value ? 'Eastern Daylight' : 'Eastern Standard' },\n    { tz: 'US/Central', name: dateIsDST.value ? 'Central Daylight' : 'Central Standard' },\n    { tz: 'US/Mountain', name: dateIsDST.value ? 'Mountain Daylight' : 'Mountain Standard' },\n    { tz: 'US/Arizona', name: 'Mountain Standard' },\n    { tz: 'US/Pacific', name: dateIsDST.value ? 'Pacific Daylight' : 'Pacific Standard' },\n    { tz: 'US/Alaska', name: dateIsDST.value ? 'Alaska Daylight' : 'Alaska Standard' },\n    { tz: 'UTC', name: 'UTC' },\n  ];\n});\n\n// TODO: Maybe there's a built-in Date function to get this formatting?\nconst thumbLabel = computed(() => {\n  const offset = getTimezoneOffset(selectedTimezone.value, date.value);\n  const dateObj = new Date(timestamp.value + offset);\n  const hours = dateObj.getUTCHours();\n  const amPm = hours >= 12 ? \"PM\" : \"AM\";\n  let hourValue = hours % 12;\n  if (hourValue === 0) {\n    hourValue = 12;\n  }\n  return `${date.value.getUTCMonth() + 1}/${dateObj.getUTCDate()}/${dateObj.getUTCFullYear()} ${hourValue}:${dateObj.getUTCMinutes().toString().padStart(2, '0')} ${amPm}`;\n});\n\n\n\n\nfunction updateHash() {\n  if (window.location.hash.includes(\"extreme-events\")) {\n    activateExtremeEvents();\n  }\n}\n\n\nfunction updateURL() {\n  if (map.value) {\n    const center = map.value.getCenter();\n    let stateObj = null as Record<string, string> | null;\n    if (showExtendedRangeFeatures) {\n      stateObj = {\n        lat: `${center.lat.toFixed(4)}`,\n        lon: `${center.lng.toFixed(4)}`,\n        zoom: `${map.value.getZoom()}`,\n        t: `${timestamp.value}`,\n        extendedRange: `${showExtendedRange.value}`\n      };\n    } else {\n      stateObj = {\n        lat: `${center.lat.toFixed(4)}`,\n        lon: `${center.lng.toFixed(4)}`,\n        zoom: `${map.value.getZoom()}`,\n        t: `${timestamp.value}`\n      };\n    }\n    const url = new URL(location.origin);\n    const searchParams = new URLSearchParams(stateObj ?? {});\n    // const hash = window.location.hash;\n    // url.hash = hash;\n    url.pathname = location.pathname;\n    window.history.replaceState(null, '', url.toString());\n    url.search = searchParams.toString();\n    currentUrl.value = url.toString();\n    // window.history.replaceState(stateObj, '', url);\n  }\n}\n\nfunction cmapNO2(x: number): string {\n  const rgb = cbarNO2(0, 1, x);\n  return `rgba(${rgb[0]}, ${rgb[1]}, ${rgb[2]},1)`;\n}\n\nasync function geocodingInfoForSearchLimited(searchText: string): Promise<MapBoxFeatureCollection | null> {\n  return geocodingInfoForSearch(searchText, {\n    countries: [\"US\", \"CA\", \"MX\", \"CU\", \"BM\", \"HT\", \"DO\"],\n    limit: 10,\n  }).catch(_err => null);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction resetMapBounds() {\n  setView([40.044, -98.789] as LatLngPair, 4);\n}\n\nfunction setLocationFromSearch(items: [MapBoxFeature | null, string]) {\n  const [feature, text] = items;\n  if (feature !== null) {\n    // Latitude, Longitude order\n    const coordinates: LatLngPair = [feature.center[1], feature.center[0]] as LatLngPair;\n    setView(coordinates, 12);\n    setMarker(coordinates);\n    userSelectedLocations.push(text);\n  }\n}\n\nfunction play() {\n  playInterval.value = setInterval(() => {\n    if (timeIndex.value >= maxIndex.value) {\n      if (playInterval.value) {\n        // clearInterval(this.playInterval);\n        // this.playInterval = null;\n        // let it loop\n        timeIndex.value = minIndex.value;\n      }\n    } else {\n      timeIndex.value += 1;\n    }\n  }, 1000);\n}\n\n\nfunction pause() {\n  if (playInterval.value) {\n    clearInterval(playInterval.value);\n  }\n}\n\n\nfunction getCloudFilename(date: Date): string {\n  const filename = getTempoFilename(date);\n  if (useHighRes.value) {\n    return 'https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/clouds/images/' + filename;\n  } else {\n    return 'https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/clouds/images/resized_images/' + filename;\n  }\n}\n\nfunction findNearestImageTimestamp(esriTimestamp: number, toleranceMinutes: number = 2): number | null {\n  const toleranceMs = toleranceMinutes * 60 * 1000;\n  \n  // Check all timestamp sets for the nearest match within tolerance\n  \n  // Find the nearest timestamp within tolerance\n  let nearestTimestamp: number | null = null;\n  let minDifference = Infinity;\n  \n  for (const imageTimestamp of preprocessedTimestampSet.value) {\n    const difference = Math.abs(imageTimestamp - esriTimestamp);\n    if (difference <= toleranceMs && difference < minDifference) {\n      minDifference = difference;\n      nearestTimestamp = imageTimestamp;\n    }\n  }\n  \n  return nearestTimestamp;\n}\n\nfunction getTempoFilename(_date: Date): string {\n  const ts = findNearestImageTimestamp(_date.getTime());\n  if (ts === null) {\n    return '';\n  }\n  const date = new Date(ts);\n  return `tempo_${date.getUTCFullYear()}-${zpad(date.getUTCMonth() + 1)}-${zpad(date.getUTCDate())}T${zpad(date.getUTCHours())}h${zpad(date.getUTCMinutes())}m.png`;\n}\n\n\n\nfunction getTempoDataUrl(_timestamp: number): string | null {\n  const timestamp = findNearestImageTimestamp(_timestamp);\n  if (timestamp === null) {\n    return null;\n  }\n  if (showExtendedRange.value && extendedRangeTimestampsSet.value.has(timestamp)) {\n    if (useHighRes.value) {\n      return 'https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/data_range_0_300/released/images/';\n    }\n    return 'https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/data_range_0_300/released/images/resized_images/';\n  }\n  if (fosterTimestampsSet.value.has(timestamp)) {\n    return 'https://tempo-images-bucket.s3.amazonaws.com/tempo-lite/';\n  }\n\n  if (erdTimestampsSet.value.has(timestamp)) {\n    return 'https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/early_release/images/';\n  }\n\n  if (newTimestampsSet.value.has(timestamp)) {\n    if (useHighRes.value) {\n      return 'https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/released/images/';\n    }\n    return \"https://raw.githubusercontent.com/johnarban/tempo-data-holdings/main/released/images/resized_images/\";\n  }\n\n  return null;\n}\n\n\n\n\nfunction imagePreload() {\n  if (!preload.value) {\n    return;\n  }\n  // console.log('preloading images for ', this.thumbLabel);\n  const times = timestamps.value.slice(minIndex.value, maxIndex.value + 1).filter(ts => getTempoDataUrl(ts) !== null);\n  const images = times.map(ts => getTempoDataUrl(ts) + getTempoFilename(new Date(ts)));\n  const cloudImages = times.reduce((acc: string[], ts) => {\n    if (cloudTimestampsSet.value.has(ts)) {\n      acc.push(getCloudFilename(new Date(ts)));\n    }\n    return acc;\n  }, []);\n  images.push(...cloudImages);\n  if (images.length === 0) {\n    console.error('No images to preload');\n    return;\n  }\n  const promises = _preloadImages(images);\n  let loaded = 0;\n  loadedImagesProgress.value = 0;\n  promises.forEach((promise) => {\n    promise.then(() => {\n      loaded += 1;\n      loadedImagesProgress.value = (loaded / promises.length) * 100;\n    }).catch((err) => {\n      console.error('error loading image', err);\n    });\n  });\n}\n\nconst locationsOfInterest = ref<Array<Array<{ latlng: LatLngPair; zoom: number; index?: number }>>>([]);\nfunction goToLocationOfInterst(index: number, subindex: number) {\n  if (index < 0 || index >= locationsOfInterest.value.length) {\n    console.error('Invalid index for location of interest');\n    return;\n  }\n  const loi = locationsOfInterest.value[index][subindex];\n  setView(loi.latlng, loi.zoom * zoomScale); // Adjust zoom level for maplibre\n  if (loi.index !== undefined) {\n    timeIndex.value = loi.index;\n  } else {\n    console.error('No index found for location of interest');\n  }\n}\n\n\nfunction goToLA() {\n  showLADialog.value = false;\n  const event = interestingEvents.filter(e => e.label == 'LA Wildfires (Jan 8, 2025)');\n  if (event !== undefined && map.value) {\n    const loi = event[0].locations;\n    setView(loi[0].latlng, loi[0].zoom * zoomScale); // Adjust zoom level for maplibre\n  }\n}\n\n\nfunction activateLAViewer() {\n  showLADialog.value = true;\n}\n\n\nfunction activateExtremeEvents() {\n  // Find the LA Wildfires event\n  const laWildfireIndex = interestingEvents.findIndex(\n    event => event.label?.includes(\"LA Wildfires\")\n  );\n\n  if (laWildfireIndex !== -1) {\n    // Set the radio to select this event\n    radio.value = laWildfireIndex;\n    // Make sure extended range is on\n    showExtendedRange.value = true;\n  }\n}\n\nfunction onTimeSliderEnd(_value: number) {\n  timeSliderUsedCount += 1; \n}\n\nfunction onOpacitySliderEnd(_value: number) {\n  opacitySliderUsedCount += 1;\n}\n\nasync function createUserEntry() {\n  if (responseOptOut.value) {\n    return;\n  }\n\n  const response = await fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"GET\",\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    headers: { \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\" }\n  });\n  const content = await response.json();\n  const exists = response.status === 200 && content.response?.user_uuid != undefined;\n  if (exists) {\n    return;\n  }\n\n  fetch(`${STORY_DATA_URL}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\",\n    },\n    body: JSON.stringify({\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_uuid: uuid,\n    }),\n  });\n}\n\nfunction resetData() {\n  whatsNewOpenedCount = 0;\n  introductionOpenedCount = 0;\n  userGuideOpenedCount = 0;\n  aboutDataOpenedCount = 0;\n  creditsOpenedCount = 0;\n  shareButtonClickedCount = 0;\n  playButtonClickedCount = 0;\n  timeSliderUsedCount = 0;\n  opacitySliderUsedCount = 0;\n  userSelectedCalendarDates = [];\n  userSelectedTimezones = [];\n  userSelectedLocations = [];\n  userSelectedNotableEvents = [];\n\n  aboutDataOpenTimeMs = 0;\n  userGuideOpenTimeMs = 0;\n  introductionOpenTimeMs = 0;\n  whatsNewOpenTimeMs = 0;\n  creditsOpenTimeMs = 0;\n  fieldOfRegardToggled = false;\n  cloudMaskToggled = false;\n  hiResDataToggled = false;\n\n  const now = Date.now();\n  creditsTimestamp = showCredits.value ? now : null;\n  aboutDataTimestamp = showAboutData.value ? now : null;\n}\n\nasync function updateUserData() {\n  if (responseOptOut.value) {\n    return;\n  }\n\n  const now = Date.now();\n  const creditsTime = (showCredits.value && creditsTimestamp !== null) ? now - creditsTimestamp : creditsOpenTimeMs;\n  const aboutDataTime = (showAboutData.value && aboutDataTimestamp !== null) ? now - aboutDataTimestamp: aboutDataOpenTimeMs;\n  const whatsNewTime = (showChanges.value && whatsNewTimestamp !== null) ? now  - whatsNewTimestamp : whatsNewOpenTimeMs;\n  const introductionTime = (introductionOpen.value && introductionTimestamp !== null) ? now - introductionTimestamp : introductionOpenTimeMs;\n  const userGuideTime = (userGuideOpen.value && userGuideTimestamp !== null) ? now - userGuideTimestamp : userGuideOpenTimeMs;\n\n  fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\",\n    },\n    body: JSON.stringify({\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_whats_new_opened_count: whatsNewOpenedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_whats_new_open_time_ms: whatsNewTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_introduction_opened_count: introductionOpenedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_introduction_open_time_ms: introductionTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_user_guide_opened_count: userGuideOpenedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_user_guide_open_time_ms: userGuideTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_about_data_opened_count: aboutDataOpenedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_about_data_open_time_ms: aboutDataTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_credits_opened_count: creditsOpenedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_credits_open_time_ms: creditsTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_share_button_clicked_count: shareButtonClickedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_calendar_dates: userSelectedCalendarDates,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_timezones: userSelectedTimezones,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_locations: userSelectedLocations,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_notable_events: userSelectedNotableEvents,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_play_clicked_count: playButtonClickedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_time_slider_used_count: timeSliderUsedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_opacity_slider_used_count: opacitySliderUsedCount,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      field_of_regard_toggled: fieldOfRegardToggled,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      cloud_mask_toggled: cloudMaskToggled,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      high_res_data_toggled: hiResDataToggled,\n    }),\n    keepalive: true,\n  }).then(() => {\n    resetData();\n  });\n}\n\nwatch(timestampsLoaded, (loaded: boolean) => {\n  if (loaded) {\n    console.log('timestamps loaded');\n    if (initState.value.t) {\n      let index = uniqueDaysIndex(initState.value.t);\n      if (index == -1) {\n        return;\n      }\n      console.log('set the date');\n      singleDateSelected.value = uniqueDays.value[index];\n      index = nearestDateIndex(new Date(initState.value.t));\n      if (index == -1) {\n        return;\n      }\n      timeIndex.value = index;\n      // FIXME if needed. if we find the time is not being set, use nextTick\n      // this.$nextTick(() => { this.timeIndex = index;});\n    }\n  }\n});\n\nwatch(timestamp, (_val: number) => {\n  updateURL();\n});\n\nwatch(introSlide, (val: number) => {\n  inIntro.value = val < 5;\n});\n\nwatch(dontShowIntro, (val: boolean) => {\n  window.localStorage.setItem(\"dontShowIntro\", val.toString());\n  if (!val) {\n    inIntro.value = true;\n  }\n});\n\nwatch(inIntro, (value: boolean) => {\n  if (!value) {\n    if (responseOptOut.value === null && !hasOptOutBeenOpened) {\n      showPrivacyDialog.value = true;\n    }\n  }\n});\n\nwatch(showPrivacyDialog, (show: boolean) => {\n  if (show) {\n    hasOptOutBeenOpened = true;\n  }\n});\n\nwatch(responseOptOut, (optOut: boolean | null) => {\n  if (responseOptOut.value !== null) {\n    window.localStorage.setItem(OPT_OUT_KEY, String(optOut));\n  }\n});\n\nwatch(loadedImagesProgress, (val: number) => {\n  playing.value = false;\n  const btn = document.querySelector('#play-pause-button');\n  if (btn) {\n    if (val < 100) {\n      btn.setAttribute('disabled', 'true');\n    } else {\n      btn.removeAttribute('disabled');\n    }\n  }\n});\n\nwatch(playing, (val: boolean) => {\n  if (val) {\n    play();\n    playButtonClickedCount += 1;\n  } else {\n    pause();\n  }\n});\n\nwatch(imageUrl, (_url: string) => {\n  updateFieldOfRegard();\n});\n\n// watch(cloudUrl, (_url: string) => {\n//   // nothing to do here.\n// });\n\nwatch(useHighRes, () => {\n  hiResDataToggled = true;\n  imagePreload();\n});\n\n\n\nwatch(showFieldOfRegard, (_show: boolean) => {\n  fieldOfRegardToggled = true;\n});\n\nwatch(showClouds, (_show: boolean) => {\n  cloudMaskToggled = true;\n});\n\nwatch(showLocationMarker, (show: boolean) => {\n  if (locationMarker.value) {\n    if (show && map.value) {\n      locationMarker.value.addTo(map.value);\n      return;\n    } else {\n      locationMarker.value.remove();\n      return;\n    }\n  }\n});\n\nwatch(timestamps, () => {\n  singleDateSelected.value = uniqueDays.value[uniqueDays.value.length - 1];\n});\n\nwatch(radio, (value: number | null) => {\n  if (value == null) {\n    setNearestDate(singleDateSelected.value.getTime());\n    sublocationRadio.value = null;\n    return;\n  }\n  const date = datesOfInterest.value[value] ?? singleDateSelected.value;\n  singleDateSelected.value = date;\n  setNearestDate(date.getTime());\n  if (sublocationRadio.value == 0 && value !== null) {\n    // run this manually as the watcher wouldn't trigger\n    goToLocationOfInterst(value, 0);\n  } else {\n    sublocationRadio.value = 0;\n  }\n});\n\nwatch(singleDateSelected, (value: Date) => {\n  // console.log(`singleDateSelected ${value}`);\n  const timestamp = value.getTime();\n  setNearestDate(timestamp);\n  if (radio.value !== null) {\n    const index = datesOfInterest.value.map(d => d.getTime()).indexOf(timestamp);\n    radio.value = index < 0 ? null : index;\n  }\n  imagePreload();\n});\n\nwatch(sublocationRadio, (value: number | null) => {\n  if (value !== null && radio.value != null) {\n    goToLocationOfInterst(radio.value, value);\n  }\n});\n\n\nwatch(showChanges, (_value: boolean) => {\n  if (showNotice.value) {\n    showNotice.value = false;\n  }\n});\n\nwatch(showExtendedRange, (_value: boolean) => {\n  updateURL();\n  imagePreload();\n});\n\nwatch(showChanges, (show: boolean) => {\n  const now = Date.now();\n  if (show) {\n    whatsNewTimestamp = now;\n    whatsNewOpenedCount += 1;\n  } else if (whatsNewTimestamp !== null) {\n    whatsNewOpenTimeMs += (now - whatsNewTimestamp);\n    whatsNewTimestamp = null;\n  }\n});\n\nwatch(showAboutData, (show: boolean) => {\n  const now = Date.now();\n  if (show) {\n    aboutDataTimestamp = now;\n    aboutDataOpenedCount += 1;\n  } else if (aboutDataTimestamp !== null) {\n    aboutDataOpenTimeMs += (now - aboutDataTimestamp);\n    aboutDataTimestamp = null;\n  }\n});\n\nwatch(showCredits, (show: boolean) => {\n  const now = Date.now();\n  if (show) {\n    creditsTimestamp = now;\n    creditsOpenedCount += 1;\n  } else if (creditsTimestamp !== null) {\n    creditsOpenTimeMs += (now - creditsTimestamp);\n    creditsTimestamp = null;\n  }\n});\n\nwatch(introductionOpen, (open: boolean) => {\n  const now = Date.now();\n  if (open) {\n    introductionTimestamp = now;\n    introductionOpenedCount += 1;\n  } else if (introductionTimestamp !== null) {\n    introductionOpenTimeMs += (now - introductionTimestamp);\n    introductionTimestamp = null;\n  }\n});\n\nwatch(userGuideOpen, (open: boolean) => {\n  const now = Date.now();\n  if (open) {\n    userGuideTimestamp = now;\n    userGuideOpenedCount += 1;\n  } else if (userGuideTimestamp !== null) {\n    userGuideOpenTimeMs += (now - userGuideTimestamp);\n    userGuideTimestamp = null;\n  }\n});\n\nwatch(selectedTimezone, (timezone: string) => {\n  userSelectedTimezones.push(timezone);\n});\n\nwatch(singleDateSelected, (date: Date) => {\n  if (!timestampsLoaded.value ) return;\n  userSelectedCalendarDates.push(date.getTime());\n});\n\nwatch(selectionInfo, (info: RectangleSelectionInfo | null) => {\n  if (info === null || map.value === null) {\n    return;\n  }\n  \n  if (selection.value === null || selectedIndex.value === null) {\n    // Create a new selection with time range using the unified function\n    createSelectionWithTimeRange(info);\n  } else {\n    // Update the existing selection\n    const currentSelection = selections.value[selectedIndex.value];\n    currentSelection.rectangle = info;\n    currentSelection.samples = undefined; // Clear existing data\n    // explicit type\n    const rect = currentSelection.layer as RectangleSelectionType['layer'];\n    if (rect) {\n      updateRectangleBounds(rect, info);\n    }\n    \n    console.log(`Updated existing selection: ${currentSelection.name} (time range unchanged)`);\n  }\n  \n  // Deactivate selection mode\n  selectionActive.value = false;\n});\n\n// Watch for time range mode changes and update custom time range if needed\nwatch(useCustomTimeRange, (useCustom) => {\n  console.log(`Time range mode changed to: ${useCustom ? 'Custom Range' : 'Current Day'}`);\n  if (useCustom && !customTimeRange.value) {\n    // If switching to custom but no custom range is set, set a default\n    const start = singleDateSelected.value.setHours(0, 0, 0, 0);\n    const end = singleDateSelected.value.setHours(23, 59, 59, 999);\n    customTimeRange.value = { start, end };\n  }\n});\n\n// Watch for custom time range input changes\n\n</script>\n  \n<style lang=\"less\">\n@font-face {\n  font-family: \"Highway Gothic Narrow\";\n  src: url(\"./assets/HighwayGothicNarrow.ttf\");\n}\n\n// import Lexand from google fonts\n// @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap');\n\n:root {\n  // font-size: clamp(14px, 1.7vw, 16px);\n  // --default-font-size: 1rem; // we don't use this\n  font-size: 16px; // this is the standard browser default\n  --default-line-height: clamp(1rem, min(2.2vh, 2.2vw), 1.6rem); // we don't use this\n  --smithsonian-blue: #009ade;\n  --smithsonian-yellow: #ffcc33;\n  --info-background: #092088;\n  --map-height: 500px;\n}\n\n.dp__theme_dark {\n  --dp-primary-text-color: #fff !important; // selected date text\n  --dp-primary-color: var(--accent-color) !important; // selected date background\n}\n\n.dp__month_year_select,\n.dp__calendar_item {\n  color: #97c8f1 !important; // selectable date text & Month/Year\n  font-weight: 800 !important;\n}\n\n.dp__cell_disabled {\n  color: #888 !important;\n  font-weight: 400;\n}\n\nbutton.dp__action-latest {\n  color: white;\n  background: var(--dp-primary-color);\n}\n\nbutton.dp__action-latest[disabled] {\n  background: var(--dp-disabled-color);\n  color: #ccc;\n  \n}\n\nhtml {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  background-color: #000;\n  overflow: hidden;\n\n\n  -ms-overflow-style: none;\n  // scrollbar-width: none;\n}\n\nbody {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: auto;\n\n  font-family: Verdana, Arial, Helvetica, sans-serif;\n}\n\na {\n  text-decoration: none;\n  color: var(--smithsonian-yellow);\n}\n\nul {\n  margin-left: 1rem;\n}\n\n#intro-background {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100% !important;\n  height: 100% !important;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 100;\n}\n\n.gradient-background {\n  // rotated translucent background gradient\n  background: linear-gradient(45deg,\n      rgb(14, 30, 40),\n      rgb(22, 50, 65),\n      rgb(30 70 90));\n}\n\n#introduction-overlay {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translateX(-50%) translateY(-50%);\n  height: fit-content;\n  // outline: 5px solid var(--accent-color);\n  border-radius: 1em;\n  z-index: 1000;\n\n  @media (max-width: 700px) {\n    width: 95%;\n    padding: 3em 1em 1em;\n  }\n\n  @media (min-width: 701px) {\n    width: 75%;\n    padding: 3em 2em 2em;\n  }\n\n  .span-accent {\n    color: var(--accent-color);\n  }\n\n\n  //font-size: calc(1.1 * var(--default-font-size));\n  // line-height: var(--default-line-height);\n\n  .v-list-item {\n    color: #eee;\n  }\n\n  .intro-text {\n    color: white;\n    font-size: 1em;\n    line-height: 1.5em;\n  }\n\n  strong {\n    color: white;\n  }\n\n  div#intro-bottom-controls {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    align-items: center;\n\n    gap: 1em;\n    margin-top: 0.5em;\n\n    .v-btn.v-btn--density-default {\n      max-height: calc(1.6 * var(--default-line-height));\n    }\n\n    .v-btn--size-default {\n      font-size: calc(0.9 * var(--default-font-size));\n    }\n\n    #intro-next-button {\n      background-color: rgba(18, 18, 18, .5);\n    }\n  }\n}\n\n#privacy-popup-dialog {\n\n  .v-card-text {\n    color: #BDBDBD;\n  }\n\n  .v-overlay__content {\n    font-size: var(--default-font-size);\n    background-color: purple;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n  }\n\n  .v-btn--size-default {\n      font-size: calc(0.9 * var(--default-font-size));\n    }  \n\n  .v-card-actions .v-btn {\n    padding: 0 4px;\n  }\n}\n\n#splash-screen {\n  color: #E0E0E0;\n\n  justify-content: space-around;\n  align-content: center;\n  padding-top: 4rem;\n  padding-bottom: 1rem;\n\n  font-family: 'Highway Gothic Narrow', 'Roboto', sans-serif;\n\n  div {\n    margin-inline: auto;\n    text-align: center;\n  }\n\n  // make a paragraph inside the div centered horizontally and vertically\n  p {\n    font-family: 'Highway Gothic Narrow', 'Roboto', sans-serif;\n    font-weight: bold;\n    vertical-align: middle;\n  }\n\n  #first-splash-row {\n    width: 100%;\n    font-size: 1.25em;\n  }\n\n  #splash-screen-text {\n    // in the grid, the text is in the 2nd column\n    display: flex;\n    flex-direction: column;\n    line-height: 130%;\n    font-size: 2em;\n    color: var(--smithsonian-yellow);\n  }\n\n  .splash-get-started {\n    border: 2px solid white;\n    font-size: 1.5em;\n    margin-top: 10%;\n    margin-bottom: 2%;\n    font-weight: bold !important;\n  }\n\n  #splash-screen-acknowledgements {\n    margin-top: 3rem;\n    font-size: calc(1.7 * var(--default-font-size));\n    line-height: calc(1.5 * var(--default-line-height));\n    width: 80%;\n    color: var(--smithsonian-yellow);\n  }\n\n  #splash-screen-logos {\n    margin-block: 0.75em;\n\n    /* format for including more inline logos */\n    display: flex; // place on same line\n    justify-content: center; // align center\n\n    >* {\n      margin-inline: 0; // counteract margin-inline: auto from #splash-screen div\n    }\n\n    /* ************ */\n\n    img {\n      height: 5vmin;\n      vertical-align: middle;\n      margin: 2px;\n    }\n\n    @media only screen and (max-width: 600px) {\n      img {\n        height: 24px;\n      }\n    }\n\n    svg {\n      vertical-align: middle;\n      height: 24px;\n    }\n  }\n}\n\n#intro-window-close-button {\n  position: absolute;\n  top: 0.25em;\n  right: 0.25em;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n\n#main-content {\n  position: fixed;\n  width: 100%;\n  height: var(--app-content-height);\n  overflow: auto;\n  transition: height 0.1s ease-in-out;\n}\n\n#app {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n}\n\n#map {\n  width: 100%;\n  height: calc(100% - 48px);\n}\n\n// define the layout\n.content-with-sidebars {\n  position: relative;\n  padding: 0;\n\n  display: grid;\n  grid-template-columns: 0 .8fr .3fr;\n  grid-template-rows: 70px var(--map-height) 78px .5fr .5fr;\n  gap: 20px 10px;\n\n  >* {\n    background-color: transparent;\n  }\n\n  >div {\n    outline: 1px solid transparent;\n  }\n\n  #user-options {\n    min-width: 200px;\n    margin-left: 1.5rem;\n    grid-column: 3 / 4;\n    grid-row: 2 / 3;\n  }\n  \n  #sample-info {\n    grid-column: 3 / 4;\n    grid-row: 3 / 5;\n  }\n\n  #logo-title {\n    display: flex;\n    align-items: center;\n    grid-column: 2 / 4;\n    grid-row: 1 / 2;\n    gap: 10px;\n  }\n\n  #menu-area {\n    // grid-column: 3 / 4;\n    // grid-row: 1 / 2;\n    // // border: 1px solid red;\n    display: flex;\n    justify-self: end;\n    gap: 1rem;\n    align-items: center;\n  }\n\n  #where {\n    display: none;\n    grid-column: 1 / 2;\n    grid-row: 2 / 3;\n  }\n\n  #map-container {\n    grid-column: 2 / 3;\n    grid-row: 2 / 3;\n  }\n\n  #when {\n    display: none;\n    grid-column: 1 / 2;\n    grid-row: 3 / 4;\n  }\n\n  #slider-row {\n    grid-column: 2 / 3;\n    grid-row: 3 / 4;\n  }\n\n  #information {\n    padding: 1rem;\n    grid-column: 2 / 3;\n    grid-row: 4 / 6;\n  }\n\n}\n\n// style the content \n#main-content {\n  padding: 2rem;\n}\n\n.content-with-sidebars {\n  font-family: \"Lexend\", sans-serif;\n  font-optical-sizing: auto;\n  font-weight: normal;\n  font-style: normal;\n  background-color: transparent;\n}\n\n#title {\n  color: var(--smithsonian-yellow);\n  font-weight: 600;\n  font-size: 2.5rem;\n  text-align: left;\n  text-wrap: nowrap;\n  flex-grow: 1;\n}\n\na[href=\"https://tempo.si.edu\"]>img {\n  // display: inline;\n  height: 70px !important;\n  width: auto !important;\n}\n\n#information {\n  background-color: var(--info-background);\n  border-radius: 10px;\n  padding-inline: 1rem;\n  // margin-right: 200px;\n}\n\na {\n  text-decoration: underline;\n  font-weight: bold;\n  color: var(--accent-color-2);\n}\n\n\n// prevent overflows of the content\n#user-options {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  gap: 5px;\n}\n\n#sample-info {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  gap: 5px;\n  padding: 0.5rem;\n  border-radius: 10px;\n}\n\n#date-radio {\n  padding-block: 0.5rem;\n}\n\n#date-radio div.highlighted label {\n  font-size: 1.2em;\n  font-weight: bold;\n  border-radius: 5px;\n  color: var(--smithsonian-yellow);\n  opacity: 1;\n}\n\n#all-dates {\n  padding-bottom: 0.5rem;\n}\n\n#locations-of-interest {\n  border: 1px solid black;\n  padding-block: 0.5rem;\n  padding-inline: 1rem;\n  height: fit-content;\n\n  h3 {\n    font-weight: 500;\n  }\n}\n\n.big-label {\n  font-size: 2rem;\n  text-align: right;\n  margin-right: 0.5rem;\n  align-self: end;\n  color: var(--smithsonian-blue);\n}\n\n#when {\n  align-self: start;\n}\n\n#slider-row,\n#when {\n  margin-top: 1.5rem;\n}\n\n#slider-row {\n  margin-left: 3rem;\n}\n\n#map-container {\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  padding-right: 10px;\n\n  #map {\n    flex-basis: 80%;\n    flex-grow: 1;\n    flex-shrink: 1;\n  }\n\n  #location-and-sharing {\n    position: absolute;\n    bottom: 0;\n    z-index: 1000;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    gap: 0.5rem;\n    width: fit-content;\n  }\n\n  .forward-geocoding-container {\n    width: 250px;\n    border: 2px solid black;\n  }\n\n  #map-show-hide-controls {\n    z-index: 1000;\n    position: absolute;\n    top: calc(48px + 1rem);\n    right: 80px;\n  }\n\n  #map-legend {\n    position: absolute;\n    top: 48px;\n    right: 80px;\n    width: fit-content;\n    z-index: 1000;\n\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n\n    color: black;\n    background-color: #fff5;\n    padding-left: 0.5rem;\n    padding-right: 0.25rem;\n\n    backdrop-filter: blur(5px);\n\n    hr.line-legend {\n      display: inline-block;\n      border: 0.5px solid #c10124;\n      width: 3rem;\n    }\n  }\n\n  .colorbar-container {\n    flex-grow: 0;\n    flex-shrink: 1;\n\n    .unit-label {\n      font-size: .95em;\n    }\n  }\n\n  #la-fires {\n    z-index: 1000;\n    position: absolute;\n    right: 80px;\n    bottom: 1rem;\n\n  }\n}\n\n#slider-row {\n  display: flex;\n  flex-direction: row;\n  padding-left: 0;\n\n  >#play-pause-button {\n    height: fit-content;\n    align-self: center;\n    padding-inline: 0.5rem;\n    margin-left: 0.75rem;\n    width: 2.5rem;\n    color: var(--accent-color);\n    border: 2px solid var(--accent-color);\n  }\n\n  #play-pause-button[disabled] {\n    filter: grayscale(100%);\n    cursor: progress;\n    cursor: not-allowed;\n  }\n\n  .icon-wrapper {\n    padding-inline: 0.5rem !important;\n  }\n}\n\n.time-slider {\n\n  .v-slider-thumb {\n\n  .v-slider-thumb__surface::after {\n    background-image: url(\"./assets/smithsonian.png\");\n      background-size: 30px 30px;\n      height: 30px;\n      width: 30px;\n    }\n\n    .v-slider-thumb__label {\n      background-color: var(--accent-color-2);\n      border: 0.25rem solid var(--accent-color);\n      width: max-content;\n      height: 2.5rem;\n      font-size: 1rem;\n\n      &::before {\n        color: var(--accent-color);\n      }\n    }\n  }\n\n  .v-slider-track__tick {\n    background-color: var(--accent-color);\n    /* Change color */\n    height: 15px;\n    /* Change size */\n    width: 4px;\n    margin-top: 0 !important;\n    // top: -10%;\n  }\n\n  .v-slider {\n\n    .v-slider.v-input--horizontal {\n      grid-template-rows: auto 0px;\n    }\n\n    .v-slider.v-input--horizontal .v-slider-thumb__label {\n      // top: calc(var(--v-slider-thumb-size) * 1.5);\n      z-index: 2000;\n    }\n\n    .v-slider.v-input--horizontal .v-slider-thumb__label::before {\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-top: 6px solid currentColor;\n      bottom: -15px;\n    }\n  }\n}\n\n#opacity-slider-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  padding-left: 7%;\n  padding-right: 7%;\n  gap: 2px;\n\n  .v-slider {\n    margin-right: 0;\n    width: 100%;\n  }\n\n  #opacity-slider-label {\n    opacity: 0.7;\n    width: fit-content;\n  }\n}\n\n#body-logos {\n  margin-bottom: -1rem;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n\n  img {\n    height: 35px !important;\n    vertical-align: middle;\n    margin: 2px;\n  }\n}\n\n#icons-container>a[href=\"https://worldwidetelescope.org/home/\"] {\n  display: none;\n}\n\n.v-selection-control {\n  z-index: auto;\n\n}\n\n.v-radio-group .v-input__details {\n  display: none;\n}\n\n.v-radio-group .v-selection-control {\n  label {\n    width: 100%;\n  }\n}\n\n.rounded-icon-wrapper {\n  height: fit-content;\n  align-self: center;\n  padding-inline: 0.5rem;\n  margin-left: 0.75rem;\n  width: 2.5rem;\n  color: var(--accent-color);\n  border: 2px solid var(--accent-color);\n  border-radius: 20px;\n}\n\ni.mdi-menu-down {\n  color: var(--smithsonian-blue);\n}\n\n// From Sara Soueidan (https://www.sarasoueidan.com/blog/focus-indicators/) & Erik Kroes (https://www.erikkroes.nl/blog/the-universal-focus-state/)\n:focus-visible:not(.v-field__input input, .v-overlay__content),\nbutton:focus-visible,\n.focus-visible,\n.v-selection-control--focus-visible .v-selection-control__input {\n  outline: 9px double white !important;\n  box-shadow: 0 0 0 6px black !important;\n  border-radius: .125rem;\n}\n\n.controls-card {\n  padding: 1rem;\n  border: 1px solid #068ede;\n}\n\n//  mobile styles\n\n// ========= DEFINE MOBILE STYLES =========\n// KEEP THEM ALL HERE\n@media (max-width: 1180px) {\n\n  .content-with-sidebars {\n    grid-template-columns: 0px auto auto;\n    grid-template-rows: 3.5rem var(--map-height) 78px .5fr .5fr;\n\n    #when {\n      display: none;\n    }\n\n    #where {\n      display: none;\n    }\n\n    #title {\n      text-wrap: wrap;\n      font-size: 2rem;\n      line-height: 1.25;\n      margin-left: 10px;\n    }\n\n    #slider-row {\n      margin-left: 3rem;\n    }\n\n    a[href=\"https://tempo.si.edu\"]>img {\n      height: 70px !important;\n      width: auto !important;\n    }\n\n    #user-options {\n      width: 250px;\n    }\n\n\n  }\n}\n\n@media (max-width: 750px) {\n  :root {\n    --map-height: 60vh;\n    --map-height: 60dvh;\n    --map-height: 60svh;\n    font-size: 14px;\n  }\n\n  #main-content {\n    padding: 1rem;\n  }\n\n  #introduction-overlay .v-window {\n    max-height: 75vh;\n    max-height: 75dvh;\n    max-height: 75sdvh;\n    overflow-y: scroll;\n  }\n\n  #introduction-overlay .intro-text {\n    font-size: min(1.15em, 2vw);\n  }\n\n  #introduction-overlay ul li {\n    margin-block-start: 1.15em;\n  }\n\n  .content-with-sidebars {\n    grid-template-columns: 1fr;\n    grid-template-rows: auto auto 78px repeat(5, auto);\n    gap: 10px;\n    // padding-inline: 1rem;\n\n\n    #logo-title {\n      min-width: 0;\n      grid-column: 1 / 2;\n      grid-row: 1 / 2;\n    }\n\n    a[href=\"https://tempo.si.edu\"]:has(img) {\n      grid-column: 1 / 2;\n      grid-row: 1 / 2;\n    }\n\n    #menu-area {\n      grid-column: 1 / 2;\n      grid-row: 1 / 2;\n      display: flex;\n      flex-direction: column-reverse;\n      gap: 1rem;\n      align-items: flex-end;\n    }\n\n    #map-container {\n      grid-column: 1 / 2;\n      grid-row: 2 / 3;\n    }\n\n    #map-container #map-show-hide-controls {\n      right: 5px\n    }\n\n    #slider-row {\n      grid-column: 1 / 2;\n      grid-row: 3 / 4;\n    }\n\n    #user-options {\n      grid-column: 1 / 2;\n      grid-row: 4 / 5;\n    }\n\n\n    #where {\n      display: none;\n    }\n\n\n    #when {\n      display: none;\n    }\n\n\n    #bottom-options {\n      grid-column: 1 / 2;\n      grid-row: 5 / 6;\n    }\n\n    #information {\n      grid-column: 1 / 2;\n      grid-row: 6 / 7;\n    }\n\n    // #body-logos {\n    //   grid-column: 1 / 2;\n    //   grid-row: 7 / 8;\n    // }\n  }\n\n  .content-with-sidebars {\n\n    #slider-row {\n      margin-left: 4rem;\n      margin-right: 1rem;\n      padding-top: 10px;\n      align-items: center;\n    }\n\n    #user-options {\n      margin: 0;\n      width: auto;\n    }\n\n    #bottom-options {\n      margin: 0;\n    }\n\n    #information {\n      font-size: 1em;\n    }\n\n\n    #title {\n      font-size: 2rem;\n      margin-left: 15px;\n      text-wrap: wrap;\n\n    }\n\n  }\n\n\n  #map-container {\n    display: flex;\n    flex-direction: column;\n\n\n    #map-contents {\n      position: relative;\n    }\n\n    #map-legend {\n      right: 0;\n    }\n\n    .colorbar-container-horizontal {\n      margin-top: 1rem;\n      margin-bottom: 0.5rem;\n      z-index: 5000;\n      --height: 0.75rem;\n    }\n\n  }\n\n\n}\n\n/* Leaflet crispness override */\n// @JobLeonard - https://github.com/Leaflet/Leaflet/issues/5883#issue-269071844\n// .leaflet-container .leaflet-overlay-pane svg,\n// .leaflet-container .leaflet-marker-pane img,\n// .leaflet-container .leaflet-shadow-pane img,\n// .leaflet-container .leaflet-tile-pane img,\n.leaflet-container img.leaflet-image-layer {\n  max-width: none !important;\n  /* Preserve crisp pixels with scaled up images */\n  image-rendering: optimizeSpeed;\n  /* Legal fallback */\n  image-rendering: -moz-crisp-edges;\n  /* Firefox        */\n  image-rendering: -o-crisp-edges;\n  /* Opera          */\n  image-rendering: -webkit-optimize-contrast;\n  /* Safari         */\n  image-rendering: optimize-contrast;\n  /* CSS3 Proposed  */\n  image-rendering: crisp-edges;\n  /* CSS4 Proposed  */\n  image-rendering: pixelated;\n  /* CSS4 Proposed  */\n  -ms-interpolation-mode: nearest-neighbor;\n  /* IE8+           */\n}\n\n.cds-snackbar-alert {\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  pointer-events: auto;\n  z-index: 999;\n}\n\n.snackbar-alert-ul {\n  margin-left: 1em;\n}\n\n@media (max-width: 750px) {\n  .cds-snackbar-alert {\n    top: -1rem;\n  }\n}\n\n.menu-button,\n.share-button,\n.whats-new-button {\n  outline: 2px solid var(--smithsonian-yellow) !important;\n  height: 2rem !important;\n}\n\n.whats-new-button {\n  padding-inline: 10px;\n}\n\ndiv.callout-wrapper {\n  display: content;\n  // overflow-x: hidden;  \n}\n\n.menu-link {\n  text-decoration: none;\n}\n\n#loading-circle-progress-container {\n  font-size: large;\n}\n\n#la-fires {\n  max-width: 20ch;\n\n  .v-btn {\n    height: fit-content; // calc(var(--v-btn-height) + 18px);\n    padding-block: 5px;\n  }\n\n  .v-btn__content {\n    white-space: normal;\n\n  }\n}\n\n.la-fires-cds-dialog .cds-dialog-card .v-card-text {\n  height: unset;\n}\n\n.pulse {\n  animation-name: pulse;\n  animation-duration: 1.5s;\n  animation-iteration-count: 3;\n}\n\n\n@keyframes pulse {\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(1.2);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n}\n\ncanvas.maplibregl-canvas {\n  background-color: whitesmoke;\n}\n</style>\n\n","import script from \"./TempoLite.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TempoLite.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TempoLite.vue?vue&type=style&index=0&id=f0abeb50&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, renderSlot as _renderSlot, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"id\"]\nconst _hoisted_2 = { class: \"colorbar-labels\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    id: _ctx.id,\n    class: \"colorbar-container\"\n  }, [\n    _createElementVNode(\"div\", {\n      style: _normalizeStyle({'--background-color': _ctx.backgroundColor}),\n      class: \"colorbar\"\n    }, null, 4),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", null, [\n        _renderSlot(_ctx.$slots, \"start\", {}, () => [\n          _createTextVNode(_toDisplayString(_ctx.startValue), 1)\n        ], true)\n      ]),\n      _createElementVNode(\"div\", null, [\n        _renderSlot(_ctx.$slots, \"label\", {}, () => [\n          _createTextVNode(_toDisplayString(_ctx.label), 1)\n        ], true)\n      ]),\n      _createElementVNode(\"div\", null, [\n        _renderSlot(_ctx.$slots, \"end\", {}, () => [\n          _createTextVNode(_toDisplayString(_ctx.endValue), 1)\n        ], true)\n      ])\n    ])\n  ], 8, _hoisted_1))\n}","\n<template>\n<div :id=\"id\" class=\"colorbar-container\">\n  <div \n    :style=\"{'--background-color': backgroundColor}\"\n    class=\"colorbar\">\n  </div>\n  <div class=\"colorbar-labels\"> \n    <div><slot name=\"start\">{{ startValue }}</slot></div>\n    <div>\n      <slot name=\"label\">{{ label }}</slot>\n    </div>\n    <div><slot name=\"end\">{{ endValue }}</slot></div>\n  </div>\n</div>\n</template>\n\n\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\n\n// type for a function that maps to either a  (color, opacity) pair or just a color\ntype ColorFunction = (x: number) => string;\ntype ExtendType = boolean | 'start' | 'end' | 'both';\n\nexport default defineComponent({\n  name: 'ColorBar',\n  props: {\n    \n    name: {\n      type: String,\n      default: null\n    },\n    \n    nsteps: {\n      type: Number,\n      default: 20\n    },\n    label: {\n      type: String,\n      default: 'Colorbar'\n    },\n    \n    cmap: {\n      type: Function as PropType<ColorFunction>,\n      default: (x: number) => `rgb(255,0,${x * 255})`\n    },\n    \n    backgroundColor: {\n      type: String,\n      default: '#5c5229'\n    },\n    \n    startValue: {\n      type: String,\n      default: '0%'\n    },\n    \n    endValue: {\n      type: String,\n      default: '100%'\n    },\n    \n    extend: {\n      type: (Boolean || String) as PropType<ExtendType>,\n      default: () => 'both'\n    }\n    \n  },\n  \n  \n  mounted() {\n    this.colorbarGradient();\n  },\n  \n  computed: {\n    id() {\n      return this.name ? `colorbar-${this.name}` : `colorbar-${Math.random().toString(36).slice(2)}`;\n    },\n    \n    triangles() {\n      return this.extend !== false;\n    },\n    \n    showStartTriangle() {\n      return this.extend === 'both' || this.extend === 'start' || this.extend;\n    },\n    \n    showEndTriangle() {\n      return this.extend === 'both' || this.extend === 'end' || this.extend;\n    }\n  },\n  \n  \n  \n  methods: {\n    \n    cssLinearGradientFromCmap() {\n      const n = this.nsteps;\n      const colors = Array.from({length: n+1}, (_, i) => {\n        const co = this.cmap(i/n);\n        const [color, _opacity] = Array.isArray(co) ? co : [co,1];\n        return `${color} ${i*100/n}%`;\n      });\n      return `linear-gradient(to top, ${colors.join(', ')})`;\n    },\n    \n    colorbarGradient() {\n      const colorbar = document.querySelector('#' + this.id + '> .colorbar');\n      if (!colorbar) {\n        return;\n      }\n      // remove all the children of the colorbar\n      while (colorbar.firstChild) {\n        colorbar.removeChild(colorbar.firstChild);\n      }\n      const div = document.createElement('div');\n      div.className = 'colorbar-chunk';\n      div.style.background = this.cssLinearGradientFromCmap();\n      div.style.height = '100%';\n      \n      \n      // add the start and end triangles\n      if (this.triangles) {\n        const start = document.createElement('div');\n        start.className = 'colorbar-start';\n        const end = document.createElement('div');\n        end.className = 'colorbar-end';\n        colorbar.appendChild(end);\n        colorbar.appendChild(div);\n        colorbar.appendChild(start);\n      \n        if (start && this.showStartTriangle) {\n          start.style.backgroundColor = this.cmap(0);\n          this.styleDownTriangle(start as HTMLDivElement);\n        }\n        if (end && this.showEndTriangle) {\n          end.style.backgroundColor = this.cmap(1);\n          this.styleUpTriangle(end as HTMLDivElement);\n        }\n      } else {\n        colorbar.appendChild(div);\n      }\n    },\n    \n    styleUpTriangle(div: HTMLDivElement) {\n      const width = div.offsetWidth;\n      let height = div.offsetHeight;\n      const color = div.style.backgroundColor;\n      height = Math.min(Math.max(height, 15), 0.86 * width);\n      div.style.backgroundColor = 'transparent';\n      div.style.borderLeft = `${width/2}px solid transparent`;\n      div.style.borderRight = `${width/2}px solid transparent`;\n      div.style.borderBottom = `${height}px solid ${color}`;\n    },\n    \n    styleDownTriangle(div: HTMLDivElement) {\n      const width = div.offsetWidth;\n      let height = div.offsetHeight;\n      const color = div.style.backgroundColor;\n      height = Math.min(Math.max(height, 15), 0.86 * width);\n      div.style.backgroundColor = 'transparent';\n      div.style.borderLeft = `${width/2}px solid transparent`;\n      div.style.borderRight = `${width/2}px solid transparent`;\n      div.style.borderTop = `${height}px solid ${color}`;\n    }\n  },\n  \n  watch: {\n    nsteps() {\n      this.colorbarGradient();\n    },\n    cmap() {\n      this.colorbarGradient();\n    }\n  }\n  \n});\n</script>\n\n<style scoped>\n/*\n* Prefixed by https://autoprefixer.github.io\n* PostCSS: v8.4.14,\n* Autoprefixer: v10.4.7\n* Browsers: last 5 version\n*/\n\n.colorbar-container {\n  position: relative;\n  display: inline-block;\n  --width: 1.25em;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  margin-left: 5px;\n  margin-right: 1em;\n  background: var(--background-color);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n\n.colorbar {\n  height: 100%;\n  width: var(--width);\n  margin-left: 5px;\n  margin-right: 1em;\n  background: var(--background-color);\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-filter: drop-shadow(0 0 0.1rem white);\n          filter: drop-shadow(0 0 0.1rem white);\n}\n\n/* make .colorbar-start and .colorbar-end triangles */\n.colorbar-chunk {\n  \n  -ms-flex-negative: 1;\n  \n      flex-shrink: 1;\n  -webkit-box-flex:1;\n      -ms-flex-positive:1;\n          flex-grow:1;\n}\n\n.colorbar-start {\n  -ms-flex-preferred-size: min-content;\n      flex-basis: min-content;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  -webkit-box-flex:1;\n      -ms-flex-positive:1;\n          flex-grow:1;\n}\n\n.colorbar-end {\n  -ms-flex-preferred-size: min-content;\n      flex-basis: min-content;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  -webkit-box-flex: 1;\n      -ms-flex-positive: 1;\n          flex-grow: 1;\n}\n\n\n\n.colorbar-labels {\n  position: absolute;\n  width: -webkit-max-content;\n  width: -moz-max-content;\n  width: max-content;\n  height: 100%;\n  top: 50%;\n  /* right: -1.5ch; */\n  -webkit-transform-origin: top center;\n      -ms-transform-origin: top center;\n          transform-origin: top center;\n  -webkit-transform: rotate(180deg) translate(-75%,-50%);\n      -ms-transform: rotate(180deg) translate(-75%,-50%);\n          transform: rotate(180deg) translate(-75%,-50%);\n  -webkit-writing-mode: vertical-rl;\n      -ms-writing-mode: tb-rl;\n          writing-mode: vertical-rl;\n  \n  display: -webkit-box;\n  \n  display: -ms-flexbox;\n  \n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  }\n</style>\n","import { render } from \"./ColorBar.vue?vue&type=template&id=0c6bfa77&scoped=true&ts=true\"\nimport script from \"./ColorBar.vue?vue&type=script&lang=ts\"\nexport * from \"./ColorBar.vue?vue&type=script&lang=ts\"\n\nimport \"./ColorBar.vue?vue&type=style&index=0&id=0c6bfa77&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0c6bfa77\"]])\n\nexport default __exports__","import { renderSlot as _renderSlot, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"id\"]\nconst _hoisted_2 = { class: \"colorbar-labels\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    id: _ctx.id,\n    class: \"colorbar-container-horizontal\"\n  }, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", null, [\n        _renderSlot(_ctx.$slots, \"start\", {}, () => [\n          _createTextVNode(_toDisplayString(_ctx.startValue), 1)\n        ], true)\n      ]),\n      _createElementVNode(\"div\", null, [\n        _renderSlot(_ctx.$slots, \"label\", {}, () => [\n          _createTextVNode(_toDisplayString(_ctx.label), 1)\n        ], true)\n      ]),\n      _createElementVNode(\"div\", null, [\n        _renderSlot(_ctx.$slots, \"end\", {}, () => [\n          _createTextVNode(_toDisplayString(_ctx.endValue), 1)\n        ], true)\n      ])\n    ]),\n    _createElementVNode(\"div\", {\n      style: _normalizeStyle({'--background-color': _ctx.backgroundColor}),\n      class: \"colorbar\"\n    }, null, 4)\n  ], 8, _hoisted_1))\n}","\n<template>\n<div :id=\"id\" class=\"colorbar-container-horizontal\">\n  <div class=\"colorbar-labels\"> \n    <div><slot name=\"start\">{{ startValue }}</slot></div>\n    <div>\n      <slot name=\"label\">{{ label }}</slot>\n    </div>\n    <div><slot name=\"end\">{{ endValue }}</slot></div>\n  </div>\n  <div \n    :style=\"{'--background-color': backgroundColor}\"\n    class=\"colorbar\">\n  </div>\n  \n</div>\n</template>\n\n\n\n<script lang=\"ts\">\nimport { defineComponent, PropType } from 'vue';\n\n// type for a function that maps to either a  (color, opacity) pair or just a color\ntype ColorFunction = (x: number) => string;\ntype ExtendType = boolean | 'start' | 'end' | 'both';\n\nexport default defineComponent({\n  name: 'ColorBar',\n  props: {\n    \n    name: {\n      type: String,\n      default: null\n    },\n    \n    nsteps: {\n      type: Number,\n      default: 20\n    },\n    label: {\n      type: String,\n      default: 'Colorbar'\n    },\n    \n    cmap: {\n      type: Function as PropType<ColorFunction>,\n      default: (x: number) => `rgb(255,0,${x * 255})`\n    },\n    \n    backgroundColor: {\n      type: String,\n      default: '#5c5229'\n    },\n    \n    startValue: {\n      type: String,\n      default: '0%'\n    },\n    \n    endValue: {\n      type: String,\n      default: '100%'\n    },\n    \n    extend: {\n      type: (Boolean || String) as PropType<ExtendType>,\n      default: () => 'both'\n    }\n    \n  },\n  \n  \n  mounted() {\n    this.colorbarGradient();\n    // console.log(this.$el);\n  },\n  \n  computed: {\n    id() {\n      return this.name ? `colorbar-${this.name}` : `colorbar-${Math.random().toString(36).slice(2)}`;\n    },\n    \n    triangles() {\n      return this.extend !== false;\n    },\n    \n    showStartTriangle() {\n      return this.extend === 'both' || this.extend === 'start' || this.extend;\n    },\n    \n    showEndTriangle() {\n      return this.extend === 'both' || this.extend === 'end' || this.extend;\n    }\n  },\n  \n  \n  \n  methods: {\n    \n    cssLinearGradientFromCmap() {\n      const n = this.nsteps;\n      const colors = Array.from({length: n+1}, (_, i) => {\n        const co = this.cmap(i/n);\n        const [color, _opacity] = Array.isArray(co) ? co : [co,1];\n        return `${color} ${i*100/n}%`;\n      });\n      return `linear-gradient(to right, ${colors.join(', ')})`;\n    },\n    \n    colorbarGradient() {\n      const colorbar = document.querySelector('#' + this.id + '> .colorbar');\n      if (!colorbar) {\n        return;\n      }\n      // remove all the children of the colorbar\n      // while (colorbar.firstChild) {\n      //   colorbar.removeChild(colorbar.firstChild);\n      // }\n      const div = document.createElement('div');\n      // const div = this.$el.querySelector('.colorbar-chunk');\n      div.className = 'colorbar-chunk';\n      div.style.background = this.cssLinearGradientFromCmap();\n      div.style.height = 'var(--height)';\n      div.style.width = '100%';\n      \n      \n      // add the start and end triangles\n      if (this.triangles) {\n        const start = document.createElement('div');\n        start.className = 'colorbar-start';\n        const end = document.createElement('div');\n        end.className = 'colorbar-end';\n        colorbar.appendChild(start);\n        colorbar.appendChild(div);\n        colorbar.appendChild(end);\n        end && this.showEndTriangle;\n        if (start && this.showStartTriangle) {\n          start.style.backgroundColor = this.cmap(0);\n          this.styleLeftTriangle(start as HTMLDivElement);\n        }\n        if (end && this.showEndTriangle) {\n          end.style.backgroundColor = this.cmap(1);\n          this.styleRightTriangle(end as HTMLDivElement);\n        }\n      } else {\n        colorbar.appendChild(div);\n      }\n    },\n    \n    styleColorbarChunk(div: HTMLDivElement) {\n      div.style.background = this.cssLinearGradientFromCmap();\n      div.style.height = 'var(--height)';\n      div.style.flexGrow = '1';\n      div.style.flexShrink = '1';\n      \n    },\n    \n    styleUpTriangle(div: HTMLDivElement) {\n      const width = div.offsetWidth;\n      let height = div.offsetHeight;\n      const color = div.style.backgroundColor;\n      height = Math.min(Math.max(height, 15), 0.86 * width);\n      div.style.backgroundColor = 'transparent';\n      div.style.borderLeft = `${width/2}px solid transparent`;\n      div.style.borderRight = `${width/2}px solid transparent`;\n      div.style.borderBottom = `${height}px solid ${color}`;\n    },\n    \n    styleDownTriangle(div: HTMLDivElement) {\n      const width = div.offsetWidth;\n      let height = div.offsetHeight;\n      const color = div.style.backgroundColor;\n      height = Math.min(Math.max(height, 15), 0.86 * width);\n      div.style.backgroundColor = 'transparent';\n      div.style.borderLeft = `${width/2}px solid transparent`;\n      div.style.borderRight = `${width/2}px solid transparent`;\n      div.style.borderTop = `${height}px solid ${color}`;\n      div.style.flexShrink = '0';\n      div.style.flexGrow = '1';\n    },\n    \n    styleLeftTriangle(div: HTMLDivElement) {\n      div.style.width=\"var(--height)\";\n      div.style.height=\"var(--height)\";\n      const height = div.offsetHeight;\n      const color = div.style.backgroundColor;\n      div.style.backgroundColor = 'transparent';\n      \n      div.style.borderTop = `${height/2}px solid transparent`;\n      div.style.borderBottom = `${height/2}px solid transparent`;\n      div.style.borderRight = `${height}px solid ${color}`;\n    },\n    \n    styleRightTriangle(div: HTMLDivElement) {\n      div.style.width=\"var(--height)\";\n      div.style.height=\"var(--height)\";\n      const height = div.offsetHeight;\n      const color = div.style.backgroundColor;\n      div.style.backgroundColor = 'transparent';\n      \n      div.style.borderTop = `${height/2}px solid transparent`;\n      div.style.borderBottom = `${height/2}px solid transparent`;\n      div.style.borderLeft = `${height}px solid ${color}`;\n    }\n  },\n  \n  watch: {\n    nsteps() {\n      this.colorbarGradient();\n    },\n    cmap() {\n      this.colorbarGradient();\n    }\n  }\n  \n});\n</script>\n\n<style scoped>\n/*\n* Prefixed by https://autoprefixer.github.io\n* PostCSS: v8.4.14,\n* Autoprefixer: v10.4.7\n* Browsers: last 5 version\n*/\n\n.colorbar-container-horizontal {\n  position: relative;\n  display: block;\n  --height: 1.25em;\n  width: 100%;\n}\n.colorbar {\n  width: 100%;\n  height: var(--height);\n  background: var(--background-color);\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-filter: drop-shadow(0 0 0.1rem white);\n          filter: drop-shadow(0 0 0.1rem white);\n}\n\n\n.colorbar-labels {\n  \n  width: calc(100% - 2*var(--height));\n  height: -webkit-max-content;\n  height: -moz-max-content;\n  height: max-content;\n  /* left: 50%; */\n  -webkit-transform-origin: top center;\n      -ms-transform-origin: top center;\n          transform-origin: top center;\n  -webkit-transform: translate(var(--height), 0);\n      -ms-transform: translate(var(--height), 0);\n          transform: translate(var(--height), 0);\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n</style>\n","import { render } from \"./ColorBarHorizontal.vue?vue&type=template&id=447bfd9f&scoped=true&ts=true\"\nimport script from \"./ColorBarHorizontal.vue?vue&type=script&lang=ts\"\nexport * from \"./ColorBarHorizontal.vue?vue&type=script&lang=ts\"\n\nimport \"./ColorBarHorizontal.vue?vue&type=style&index=0&id=447bfd9f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-447bfd9f\"]])\n\nexport default __exports__","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, mergeProps as _mergeProps, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, renderSlot as _renderSlot, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"info-button-close-icon\" }\nconst _hoisted_2 = { class: \"v-card-info-text ma-3\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_tooltip = _resolveComponent(\"v-tooltip\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_v_dialog, {\n    modelValue: _ctx.dialogVisible,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.dialogVisible) = $event)),\n    \"max-width\": \"500\"\n  }, {\n    activator: _withCtx(({ props: activatorProps }) => [\n      _createVNode(_component_v_tooltip, {\n        text: _ctx.tooltipTextValue,\n        disabled: !_ctx.showTooltip\n      }, {\n        activator: _withCtx(( { props} ) => [\n          _createVNode(_component_v_icon, _mergeProps({...activatorProps, ...props}, {\n            style: {\"margin-left\":\"1em\",\"font-size\":\"1.3em\",\"color\":\"var(--accent-color)\"},\n            elevation: \"1\",\n            onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.dialogVisible = true)),\n            onKeydown: _ctx.handleKeydown\n          }), {\n            default: _withCtx(() => _cache[3] || (_cache[3] = [\n              _createTextVNode(\" mdi-information-variant-circle-outline \")\n            ])),\n            _: 2,\n            __: [3]\n          }, 1040, [\"onKeydown\"])\n        ]),\n        _: 2\n      }, 1032, [\"text\", \"disabled\"])\n    ]),\n    default: _withCtx(() => [\n      _createVNode(_component_v_card, { class: \"gradient-background\" }, {\n        default: _withCtx(() => [\n          _createElementVNode(\"div\", _hoisted_1, [\n            _createVNode(_component_v_icon, {\n              class: \"info-button-close-icon__icon\",\n              onClick: _cache[1] || (_cache[1] = ($event: any) => (_ctx.dialogVisible = false)),\n              onKeydown: _ctx.handleKeydown\n            }, {\n              default: _withCtx(() => _cache[4] || (_cache[4] = [\n                _createTextVNode(\" mdi-close \")\n              ])),\n              _: 1,\n              __: [4]\n            }, 8, [\"onKeydown\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_2, [\n            _renderSlot(_ctx.$slots, \"default\", {}, () => [\n              _createTextVNode(_toDisplayString(_ctx.helpText), 1)\n            ])\n          ])\n        ]),\n        _: 3\n      })\n    ]),\n    _: 3\n  }, 8, [\"modelValue\"]))\n}","<template>\n  <v-dialog v-model=\"dialogVisible\" max-width=\"500\">\n    <template v-slot:activator=\"{ props: activatorProps }\">\n      <v-tooltip :text=\"tooltipTextValue\" :disabled=\"!showTooltip\">\n        <template v-slot:activator=\" { props} \">\n        <v-icon \n          v-bind=\"{...activatorProps, ...props}\" \n          style=\"margin-left: 1em;font-size: 1.3em; color: var(--accent-color);\" elevation=\"1\"\n          @click=\"dialogVisible = true\"\n          @keydown=\"handleKeydown\"\n          >\n          mdi-information-variant-circle-outline\n        </v-icon>\n        </template>\n      </v-tooltip>\n    </template>\n    <v-card class=\"gradient-background\">\n      <div class=\"info-button-close-icon\">\n        <v-icon \n          class=\"info-button-close-icon__icon\"\n          @click=\"dialogVisible = false\"\n          @keydown=\"handleKeydown\"\n        >\n          mdi-close\n        </v-icon>\n      </div>\n      <div class=\"v-card-info-text ma-3\">\n        <slot>{{ helpText }}</slot>\n      </div>\n    </v-card>\n  </v-dialog>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  name: 'InfoButton',\n  props: {\n    helpText: {\n      type: String,\n      required: false\n    },\n    showTooltip: {\n      type: Boolean,\n      required: false,\n      default: true\n    },\n    tooltipText: {\n      type: String,\n      required: false,\n      default: undefined\n    }\n  },\n  \n\n  \n  data() {\n    return {\n      dialogVisible: false,\n      tooltipTextValue: this.tooltipText ?? (this.showTooltip ? 'Learn More' : undefined),\n    };\n  },\n\n  methods: {\n    handleKeydown(event: KeyboardEvent) {\n      if (event.key === 'Enter') {\n        this.dialogVisible = !this.dialogVisible;\n      }\n    },\n  },\n});\n</script>\n\n<style>\n.v-card-info-text {\n  font-size: 1em;\n  line-height: 1.5em;\n  padding-block: 1em;\n  padding-inline: 1.5em;\n  \n  p {\n    margin-block: 0.5em;\n  }\n\n}\n\n.v-card-info-text > p {\n  margin-bottom: 1em;\n}\n\n.info-button-close-icon {\n  position: relative;\n  height: 1em;\n}\n\n.info-button-close-icon__icon {\n  /* position:absolute !important;\n  right:0 !important; */\n  float:right;\n  right: 1em;\n  top: 1em;\n\n  cursor:pointer;\n  \n  padding:1em !important;\n  margin:-1em !important;\n}\n\n.info-button-close-icon__icon:hover {\n  background-color: #f0f0f0;\n  color: black;\n  border-radius: 50%;\n  padding: 0.5em;\n  margin: -0.5em;\n  transition: background-color 0.3s;\n}\n\n</style>","import { render } from \"./InfoButton.vue?vue&type=template&id=5c8d795f&ts=true\"\nimport script from \"./InfoButton.vue?vue&type=script&lang=ts\"\nexport * from \"./InfoButton.vue?vue&type=script&lang=ts\"\n\nimport \"./InfoButton.vue?vue&type=style&index=0&id=5c8d795f&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { aliases, mdi } from 'vuetify/iconsets/mdi';\nimport { createVuetify } from 'vuetify';\n\n// For test use. Do not include createVuetify()\n// see https://next.vuetifyjs.com/en/features/treeshaking/\n//import * as components from 'vuetify/components';\n//import * as directives from 'vuetify/directives';\n\n// Translations provided by Vuetify\nimport { en } from 'vuetify/locale';\n\n// Styles\nimport 'vuetify/styles';\nimport '@mdi/font/css/materialdesignicons.css';\n\nexport default createVuetify({\n  // Icon Fonts\n  icons: {\n    defaultSet: 'mdi',\n    aliases,\n    sets: {\n      mdi,\n    },\n  },\n  locale: {\n    locale: 'en',\n    fallback: 'en',\n    messages: { en },\n  },\n  theme: {\n    defaultTheme: 'dark',\n  },\n});\n\n// Export for test.\n//export { components, directives };\n","import { renderSlot as _renderSlot, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createCommentVNode as _createCommentVNode, withKeys as _withKeys, createElementVNode as _createElementVNode, mergeProps as _mergeProps, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"cds-snackbar-alert ma-2\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_snackbar = _resolveComponent(\"v-snackbar\")!\n\n  return (!_ctx.hide)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        (!_ctx.hideButton)\n          ? _renderSlot(_ctx.$slots, \"activator\", {\n              key: 0,\n              onClick: _ctx.openDialog,\n              id: \"snackbar-activator-slot\"\n            }, () => [\n              _createVNode(_component_v_btn, {\n                onClick: _ctx.openDialog,\n                color: \"#333\",\n                id: \"snackbar-activator\",\n                size: \"small\"\n              }, {\n                prepend: _withCtx(() => [\n                  _createVNode(_component_v_icon, {\n                    color: \"red\",\n                    icon: \"mdi-alert-octagram\"\n                  })\n                ]),\n                default: _withCtx(() => [\n                  _createTextVNode(\" \" + _toDisplayString(_ctx.label), 1)\n                ]),\n                _: 1\n              }, 8, [\"onClick\"])\n            ])\n          : _createCommentVNode(\"\", true),\n        _createVNode(_component_v_snackbar, _mergeProps({\n          modelValue: _ctx.snackbar,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.snackbar) = $event)),\n          location: \"top center\"\n        }, _ctx.$attrs, {\n          \"close-on-back\": \"\",\n          role: \"alert\",\n          \"aria-live\": \"assertive\",\n          timeout: \"-1\"\n        }), {\n          actions: _withCtx(() => [\n            _createVNode(_component_v_btn, {\n              tabindex: \"0\",\n              color: \"red\",\n              variant: \"text\",\n              onClick: _ctx.closeDialog\n            }, {\n              default: _withCtx(() => _cache[2] || (_cache[2] = [\n                _createTextVNode(\" Close \")\n              ])),\n              _: 1,\n              __: [2]\n            }, 8, [\"onClick\"])\n          ]),\n          default: _withCtx(() => [\n            _createElementVNode(\"span\", {\n              ref: \"snackbarMessage\",\n              tabindex: \"0\",\n              onKeydown: _cache[0] || (_cache[0] = _withKeys(\n//@ts-ignore\n(...args) => (_ctx.closeDialog && _ctx.closeDialog(...args)), [\"esc\"]))\n            }, [\n              _renderSlot(_ctx.$slots, \"default\", {}, () => [\n                _createTextVNode(_toDisplayString(_ctx.msg), 1)\n              ])\n            ], 544)\n          ]),\n          _: 3\n        }, 16, [\"modelValue\"])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","<script lang=\"ts\">\n/**\n * v-snackbar wrapper component. The message can be passed\n * as a prop or as as the default slot. Props are passed\n * through to v-snackbar.\n * \n * Example Usage\n * \n * <SnackbarAlert msg=\"Hello there\" />\n * \n * <SnackbarAlert msg=\"Hello there\">\n *  <template v-slot:activator=\"{ onClick, id }\">\n *   <v-btn :id=\"id\" @click=\"onClick\" color=\"primary\">\n *    Custom Activator\n *   </v-btn>\n *  </template>\n * </SnackbarAlert>\n * \n */\nimport { defineComponent } from 'vue';\n\nexport default defineComponent({\n  name: \"SnackbarAlert\",\n  \n  emits: ['update:modelValue'],\n\n  props: {\n    msg: {\n      type: String || undefined || null,\n      required: false,\n      default: undefined,\n    },\n    hide: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    label: {\n      type: String,\n      required: false,\n      default: \"Recent changes\"\n    },\n    modelValue: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    hideButton: {\n      type: Boolean,\n      required: false,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      snackbar: false,\n    };\n  },\n  \n  methods: {\n    openDialog() {\n      if (this.snackbar) return;\n      \n      this.snackbar = true;\n      this.$emit('update:modelValue', true);\n      this.$nextTick(() => {\n        (this.$refs.snackbarMessage as HTMLElement).focus();\n      });\n    },\n    closeDialog() {\n      this.snackbar = false;\n      this.$emit('update:modelValue', false);\n      // make sure the focus goes back to the right place\n      this.$nextTick(() => {\n        this.$el.querySelector('#snackbar-activator')?.focus();\n        this.$el.querySelector('#snackbar-activator-slot')?.focus();\n      });\n    },\n  },\n  \n  watch: {\n    modelValue(val: boolean) {\n      if (val) {\n        this.openDialog();\n      } else {\n        this.closeDialog();\n      }\n    }\n  }\n\n\n});\n</script>\n\n<template>\n  <div class=\"cds-snackbar-alert ma-2\" v-if=\"!hide\">\n    \n    <slot v-if=\"!hideButton\" name=\"activator\" :onClick=\"openDialog\" id=\"snackbar-activator-slot\">\n      <v-btn @click=\"openDialog\" color=\"#333\" id=\"snackbar-activator\" size=\"small\">\n        <template v-slot:prepend>\n          <v-icon color=\"red\" icon=\"mdi-alert-octagram\"></v-icon>\n        </template>\n        {{ label }}\n      </v-btn>\n    </slot>\n    \n    <v-snackbar \n      v-model=\"snackbar\" \n      location=\"top center\" \n      v-bind=\"$attrs\"\n      close-on-back\n      role=\"alert\"\n      aria-live=\"assertive\"\n      timeout=\"-1\"\n      >\n      <span ref=\"snackbarMessage\" tabindex=\"0\" @keydown.esc=\"closeDialog\">\n      <slot> {{ msg }} </slot>\n      </span>\n\n\n      <template v-slot:actions>\n        <v-btn tabindex=\"0\" color=\"red\" variant=\"text\" @click=\"closeDialog\">\n          Close\n        </v-btn>\n      </template>\n    </v-snackbar>\n  </div>\n</template>\n","import { render } from \"./SnackbarAlert.vue?vue&type=template&id=034a6a3c&ts=true\"\nimport script from \"./SnackbarAlert.vue?vue&type=script&lang=ts\"\nexport * from \"./SnackbarAlert.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, withKeys as _withKeys, mergeProps as _mergeProps } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_v_snackbar = _resolveComponent(\"v-snackbar\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_tooltip = _resolveComponent(\"v-tooltip\")!\n  const _component_use_clipboard = _resolveComponent(\"use-clipboard\")!\n\n  return (_openBlock(), _createBlock(_component_use_clipboard, { source: _ctx.source }, {\n    default: _withCtx(({ copy }) => [\n      (_ctx.tooltipDisabled || _ctx.alert)\n        ? (_openBlock(), _createBlock(_component_v_snackbar, {\n            key: 0,\n            class: \"share-button-snackbar\",\n            timeout: \"3500\",\n            location: \"top\",\n            activator: \"#share-button\",\n            text: \"Share link copied to clipboard. Paste to share this view!\",\n            color: \"success\",\n            variant: \"flat\",\n            \"min-height\": \"0px\",\n            \"min-width\": \"0px\",\n            transition: \"slide-y-transition\",\n            \"close-on-content-click\": \"\"\n          }))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_v_tooltip, {\n        disabled: _ctx.tooltipDisabled,\n        text: \"Share selected view\"\n      }, {\n        activator: _withCtx(({ props }) => [\n          _createVNode(_component_v_btn, _mergeProps({\n            id: \"share-button\",\n            \"aria-label\": \"Get link to share selected view\",\n            class: \"share-button\",\n            icon: \"\",\n            onClick: () => {\n            copy(_ctx.source);\n            _ctx.$emit('share');\n          }\n          ,\n            onKeyup: _withKeys(() => {\n            copy(_ctx.source);\n            _ctx.$emit('share');\n          }, [\"enter\"])\n          }, props, {\n            color: _ctx.buttonColor,\n            elevation: _ctx.elevation,\n            size: _ctx.size,\n            rounded: _ctx.rounded\n          }), {\n            default: _withCtx(() => [\n              _createVNode(_component_v_icon, { color: _ctx.iconColor }, {\n                default: _withCtx(() => _cache[0] || (_cache[0] = [\n                  _createTextVNode(\"mdi-share-variant\")\n                ])),\n                _: 1,\n                __: [0]\n              }, 8, [\"color\"])\n            ]),\n            _: 2\n          }, 1040, [\"onClick\", \"onKeyup\", \"color\", \"elevation\", \"size\", \"rounded\"])\n        ]),\n        _: 2\n      }, 1032, [\"disabled\"])\n    ]),\n    _: 1\n  }, 8, [\"source\"]))\n}","\n<template>\n  <use-clipboard v-slot=\"{ copy }\" :source=\"source\">\n    <v-snackbar \n      v-if=\"tooltipDisabled || alert\"\n      class=\"share-button-snackbar\"   \n      timeout=\"3500\" \n      location=\"top\" \n      activator=\"#share-button\"\n      text=\"Share link copied to clipboard. Paste to share this view!\"\n      color=\"success\"\n      variant=\"flat\"\n      min-height=\"0px\"\n      min-width=\"0px\"\n      transition=\"slide-y-transition\"\n      close-on-content-click\n      >\n    </v-snackbar>\n    <v-tooltip :disabled=\"tooltipDisabled\" text=\"Share selected view\">\n      <template v-slot:activator=\"{ props }\">\n        <v-btn\n          id=\"share-button\"\n          aria-label=\"Get link to share selected view\"\n          class=\"share-button\"\n          icon\n          @click=\"() => {\n            copy(source);\n            $emit('share');\n          }\n          \"\n          @keyup.enter=\"() => {\n            copy(source);\n            $emit('share');\n          }\"\n          v-bind=\"props\"\n          :color=\"buttonColor\"\n          :elevation=\"elevation\"\n          :size=\"size\"\n          :rounded=\"rounded\"\n        > \n          <v-icon :color=\"iconColor\">mdi-share-variant</v-icon>\n        </v-btn>\n      </template>\n    </v-tooltip>\n  </use-clipboard>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  props: {\n    source: {\n      type: String,\n      required: true,\n    },\n    buttonColor: {\n      type: String,\n      default: \"#ffffff66\",\n    },\n    iconColor: {\n      type: String,\n      default: \"#333\",\n    },\n    elevation: {\n      type: [String, Number],\n      default: \"0\",\n    },\n    size: {\n      type: String,\n      default: \"small\",\n    },\n    rounded: {\n      type: [String, Number],\n      default: \"1\",\n    },\n    tooltipDisabled: {\n      type: Boolean,\n      default: false,\n    },\n    alert: {\n      type: Boolean,\n      default: false,\n    },\n    \n  },\n  \n  data() {\n    return {\n      snackbar: false,\n    };\n  },\n\n  emits: [\"share\"],\n});\n</script>\n\n<style>\n.share-button {\n  z-index: 1000;\n  padding-inline: 5px;\n  border-radius: 8px !important;\n  border: thin solid var(--accent-color-2) !important;\n}\n\n.share-button-snackbar .v-snackbar__wrapper > .v-snackbar__content {\n  padding: 0.75em 1em;\n}\n\n</style>\n","import { render } from \"./ShareButton.vue?vue&type=template&id=1a0de751&ts=true\"\nimport script from \"./ShareButton.vue?vue&type=script&lang=ts\"\nexport * from \"./ShareButton.vue?vue&type=script&lang=ts\"\n\nimport \"./ShareButton.vue?vue&type=style&index=0&id=1a0de751&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { onBeforeUnmount, Ref, watch } from \"vue\";\n\nimport { DragInfo } from \"../types\";\n\nexport interface UseDraggableDialogOptions {\n  root: Ref<HTMLElement | null>;\n  dragPredicate?: (element: HTMLElement) => boolean;\n  dialogSelector?: string;\n  scrimSelector?: string;\n}\n\nexport function useDraggableDialog(options: UseDraggableDialogOptions) {\n\n  const root = options.root;\n  const dialogSelector = options.dialogSelector ?? \".v-dialog.v-overlay--active\";\n  const scrimSelector = options.scrimSelector ?? \".v-overlay__scrim\";\n\n  let dragInfo: DragInfo | null = null;\n  type MouseEventHandler = (event: MouseEvent) => void;\n  let mousedown: MouseEventHandler | null = null;\n  let mouseup: MouseEventHandler | null = null;\n  let mousemove: MouseEventHandler | null = null;\n\n  function removeListeners(element: HTMLElement) {\n    if (mousedown) {\n      element.removeEventListener(\"mousedown\", mousedown);\n    }\n    if (mouseup) {\n      element.removeEventListener(\"mouseup\", mouseup);\n    }\n    if (mousemove) {\n      element.removeEventListener(\"mousemove\", mousemove);\n    }\n  }\n\n  function setupDraggable(element: HTMLElement) {\n    removeListeners(element);\n\n    let dragging = false;\n\n    mousedown = (event: MouseEvent) => {\n      if (options.dragPredicate && !options.dragPredicate(event.target as HTMLElement)) {\n        element.style.cursor = \"\";\n        return;\n      }\n      dragging = true;\n\n      element.style.cursor = \"grabbing\";\n      const closestDialog = element.closest(dialogSelector);\n      if (event.button === 0 && closestDialog != null) {\n        const boundingRect = closestDialog.getBoundingClientRect();\n        const d: DragInfo = {\n          el: closestDialog as HTMLElement,\n          title: element,\n          mouseStartX: event.clientX,\n          mouseStartY: event.clientY,\n          elStartX: boundingRect.left,\n          elStartY: boundingRect.top,\n          overlays: document.querySelectorAll(scrimSelector),\n        };\n        if (dragInfo && dragInfo.el) {\n          d.oldTransition = dragInfo.el.style.transition;\n        }\n        if (d.el) {\n          d.el.style.margin = \"0\";\n          d.el.style.transition = \"none\";\n          if (d.el.style.position !== \"fixed\") {\n            d.el.style.position = \"fixed\";\n            d.el.style.left = Math.min(\n              Math.max(d.elStartX + event.clientX - d.mouseStartX, 0),\n              window.innerWidth - boundingRect.width\n            ) + \"px\";\n            d.el.style.top = Math.min(\n              Math.max(d.elStartY + event.clientY - d.mouseStartY , 0),\n              window.innerHeight - boundingRect.height\n            ) - 0.5 * window.innerHeight + \"px\";\n          }\n        }\n        d.title.classList.add(\"dragging\");\n        d.overlays.forEach(overlay => (overlay as HTMLElement).style.display = \"none\");\n\n        dragInfo = d;\n      }\n    };\n    element.addEventListener(\"mousedown\", mousedown);\n\n    mousemove = (event: MouseEvent) => {\n      if (options.dragPredicate && !options.dragPredicate(event.target as HTMLElement)) {\n        element.style.cursor = \"\";\n        return;\n      }\n      element.style.cursor = dragging ? \"grabbing\" : \"grab\";\n      if (dragInfo === null || dragInfo.el == null) {\n        return;\n      }\n      const boundingRect = dragInfo.el.getBoundingClientRect();\n      dragInfo.el.style.left = Math.min(\n        Math.max(dragInfo.elStartX + event.clientX - dragInfo.mouseStartX, 0),\n        window.innerWidth - boundingRect.width\n      ) + \"px\";\n      dragInfo.el.style.top = Math.min(\n        Math.max(dragInfo.elStartY + event.clientY - dragInfo.mouseStartY , 0),\n        window.innerHeight - boundingRect.height\n      ) - 0.5 * window.innerHeight + \"px\";\n    };\n    document.addEventListener(\"mousemove\", mousemove);\n\n    mouseup = (event: MouseEvent) => {\n      if (options.dragPredicate && !options.dragPredicate(event.target as HTMLElement)) {\n        element.style.cursor = \"\";\n        return;\n      }\n\n      dragging = false;\n\n      element.style.cursor = \"grab\";\n      if (dragInfo === null) {\n        return;\n      }\n      if (dragInfo.oldTransition && dragInfo.el) {\n        dragInfo.el.style.transition = dragInfo.oldTransition;\n      }\n      dragInfo.el = undefined;\n      dragInfo.title.classList.remove(\"dragging\");\n      dragInfo.overlays.forEach(overlay => (overlay as HTMLElement).style.display = '');\n    };\n    document.addEventListener(\"mouseup\", mouseup);\n    \n    // If the window changes size, the dialog may be partially/completely out of bounds\n    // We fix that here\n    const resizeObserver = new ResizeObserver(entries => {\n      entries.forEach(entry => {\n        const dialogs = entry.target.querySelectorAll(dialogSelector);\n        dialogs.forEach(d => {\n          const dialog = d as HTMLElement;\n          const boundingRect = dialog.getBoundingClientRect();\n          dialog.style.left = Math.min(parseInt(dialog.style.left), window.innerWidth - boundingRect.width) + \"px\";\n          dialog.style.top = Math.min(parseInt(dialog.style.top), window.innerHeight - boundingRect.height) + \"px\";\n        });\n      });\n    });\n    resizeObserver.observe(document.body);\n  }\n\n  if (root.value) {\n    setupDraggable(root.value);\n  }\n\n  watch(root, newRoot => {\n    if (newRoot !== null) {\n      setupDraggable(newRoot);\n    }\n  });\n\n  onBeforeUnmount(() => {\n    const element = root.value;\n    if (element) {\n      removeListeners(element);\n      element.style.cursor = \"\";\n    }\n  });\n\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { normalizeProps as _normalizeProps, guardReactiveProps as _guardReactiveProps, renderSlot as _renderSlot, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withKeys as _withKeys, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementVNode as _createElementVNode, unref as _unref, normalizeClass as _normalizeClass } from \"vue\"\n\nimport { computed, ref, onMounted, nextTick, watch, useAttrs, useTemplateRef } from \"vue\";\nimport { VCard } from \"vuetify/components\";\nimport { UseDraggableDialogOptions, useDraggableDialog } from \"../composables/useDraggableDialog\";\n\ninterface CDSDialogProps {\n  title: string;\n  modelValue?: boolean;\n  color?: string;\n  shortTitle?: string;\n  draggable?: boolean;\n  button?: boolean;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CDSDialog',\n  props: {\n    title: {},\n    modelValue: { type: Boolean, default: false },\n    color: { default: \"red\" },\n    shortTitle: { default: \"\" },\n    draggable: { type: Boolean, default: false },\n    button: { type: Boolean, default: false }\n  },\n  emits: [\"update:modelValue\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\nconst card = useTemplateRef<InstanceType<typeof VCard>>(\"card\");\nconst showDialog = ref(props.modelValue);\nconst displayedShortTitle = computed(() => props.shortTitle || props.title);\nconst cardRoot = ref<HTMLElement | null>(null);\n\nconst attrs = useAttrs();\n\nif (props.draggable) {\n  const options: UseDraggableDialogOptions = {\n    root: cardRoot,\n    dialogSelector: \".cds-dialog-card\",\n  };\n  if (attrs[\"drag-predicate\"]) {\n    options.dragPredicate = attrs[\"drag-predicate\"] as (element: HTMLElement) => boolean;\n  }\n  useDraggableDialog(options);\n}\n\nfunction updateRoot() {\n  nextTick(() => {\n    if (card.value) {\n      cardRoot.value = card.value.$el;\n    }\n  });\n}\n\nonMounted(() => {\n  if (props.draggable && props.modelValue) {\n    updateRoot();\n  }\n});\n\nwatch(showDialog, value => {\n  emit(\"update:modelValue\", value);\n});\n\nwatch(() => props.modelValue, value => {\n  showDialog.value = value;\n  if (value && props.draggable) {\n    updateRoot();\n  }\n});\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\")!\n  const _component_v_card_title = _resolveComponent(\"v-card-title\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_v_dialog, {\n    class: _normalizeClass(`cds-dialog ${displayedShortTitle.value.toLowerCase().replace(/ /g, '-')}-cds-dialog`),\n    modelValue: showDialog.value,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((showDialog).value = $event))\n  }, {\n    activator: _withCtx(($attrs) => [\n      _renderSlot(_ctx.$slots, \"activator\", _normalizeProps(_guardReactiveProps($attrs)), () => [\n        (_ctx.button)\n          ? (_openBlock(), _createBlock(_component_v_btn, {\n              key: 0,\n              color: _ctx.color,\n              title: displayedShortTitle.value,\n              class: \"cds-dialog-button\",\n              onClick: _cache[0] || (_cache[0] = ($event: any) => (showDialog.value = true)),\n              onKeyup: _cache[1] || (_cache[1] = _withKeys(($event: any) => (showDialog.value = true), [\"enter\"])),\n              tabindex: \"0\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(\" Open \" + _toDisplayString(displayedShortTitle.value), 1)\n              ]),\n              _: 1\n            }, 8, [\"color\", \"title\"]))\n          : _createCommentVNode(\"\", true)\n      ])\n    ]),\n    default: _withCtx(() => [\n      _createVNode(_unref(VCard), {\n        ref_key: \"card\",\n        ref: card,\n        class: \"cds-dialog-card\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_font_awesome_icon, {\n            class: \"cds-dialog-close-icon cds-touch-pad\",\n            icon: \"square-xmark\",\n            size: \"xl\",\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (showDialog.value = false)),\n            onKeyup: _cache[3] || (_cache[3] = _withKeys(($event: any) => (showDialog.value = false), [\"enter\"])),\n            color: _ctx.color,\n            tabindex: \"0\"\n          }, null, 8, [\"color\"]),\n          _createVNode(_component_v_card_title, { tabindex: \"0\" }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"h3\", null, _toDisplayString(_ctx.title), 1)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_card_text, null, {\n            default: _withCtx(() => [\n              _renderSlot(_ctx.$slots, \"default\", {}, () => [\n                _cache[5] || (_cache[5] = _createTextVNode(\" Add content to the default slot \"))\n              ])\n            ]),\n            _: 3\n          })\n        ]),\n        _: 3\n      }, 512)\n    ]),\n    _: 3\n  }, 8, [\"class\", \"modelValue\"]))\n}\n}\n\n})","<template>\n  <v-dialog \n    :class=\"`cds-dialog ${displayedShortTitle.toLowerCase().replace(/ /g, '-')}-cds-dialog`\" \n    v-model=\"showDialog\" \n    >\n    <!-- add the activator slot, but only use it if the appropriate value is given for activator -->\n     <template v-slot:activator=\"$attrs\">\n      <slot name=\"activator\" v-bind=\"$attrs\">\n        <v-btn\n          v-if=\"button\"\n          :color=\"color\"\n          :title=\"displayedShortTitle\"\n          class=\"cds-dialog-button\"\n          @click=\"showDialog = true\"\n          @keyup.enter=\"showDialog = true\"\n          tabindex=\"0\"\n          >\n          Open {{ displayedShortTitle }}\n        </v-btn>\n      </slot>\n    </template>\n     \n    <v-card\n      ref=\"card\"\n      class=\"cds-dialog-card\"\n    >\n      <font-awesome-icon \n        class=\"cds-dialog-close-icon cds-touch-pad\"\n        icon=\"square-xmark\" \n        size=\"xl\" \n        @click=\"showDialog = false\" \n        @keyup.enter=\"showDialog = false\" \n        :color=\"color\" \n        tabindex=\"0\"\n        ></font-awesome-icon>\n        \n      <v-card-title tabindex=\"0\">\n        <h3> \n          {{title}} \n        </h3>\n      </v-card-title>\n      \n      <v-card-text>\n        \n        <slot>\n          Add content to the default slot\n        </slot>\n        \n      </v-card-text>\n    </v-card>\n  </v-dialog>\n\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, onMounted, nextTick, watch, useAttrs, useTemplateRef } from \"vue\";\nimport { VCard } from \"vuetify/components\";\nimport { UseDraggableDialogOptions, useDraggableDialog } from \"../composables/useDraggableDialog\";\n\ninterface CDSDialogProps {\n  title: string;\n  modelValue?: boolean;\n  color?: string;\n  shortTitle?: string;\n  draggable?: boolean;\n  button?: boolean;\n}\n\nconst props = withDefaults(defineProps<CDSDialogProps>(), {\n  modelValue: false,\n  color: \"red\",\n  shortTitle: \"\",\n  draggable: false,\n  button: false,\n});\n\nconst emit = defineEmits<{\n  (event: \"update:modelValue\", value: boolean): void;\n}>();\n\nconst card = useTemplateRef<InstanceType<typeof VCard>>(\"card\");\nconst showDialog = ref(props.modelValue);\nconst displayedShortTitle = computed(() => props.shortTitle || props.title);\nconst cardRoot = ref<HTMLElement | null>(null);\n\nconst attrs = useAttrs();\n\nif (props.draggable) {\n  const options: UseDraggableDialogOptions = {\n    root: cardRoot,\n    dialogSelector: \".cds-dialog-card\",\n  };\n  if (attrs[\"drag-predicate\"]) {\n    options.dragPredicate = attrs[\"drag-predicate\"] as (element: HTMLElement) => boolean;\n  }\n  useDraggableDialog(options);\n}\n\nfunction updateRoot() {\n  nextTick(() => {\n    if (card.value) {\n      cardRoot.value = card.value.$el;\n    }\n  });\n}\n\nonMounted(() => {\n  if (props.draggable && props.modelValue) {\n    updateRoot();\n  }\n});\n\nwatch(showDialog, value => {\n  emit(\"update:modelValue\", value);\n});\n\nwatch(() => props.modelValue, value => {\n  showDialog.value = value;\n  if (value && props.draggable) {\n    updateRoot();\n  }\n});\n\n</script>\n\n<style>\n\n.cds-dialog {\n  display: flex;\n  width: calc(100% - 1rem);\n}\n.cds-dialog-card {\n  align-self: center;\n  max-width: 80%;\n}\n\n.cds-dialog-close-icon {\n  position: absolute;\n  right: 16px;\n  cursor: pointer;\n}\n\n/* pad the touch area by 0.5em */\n.cds-dialog-touch-pad {\n  padding: 0.5em;\n  margin: -0.5em;\n}\n\n\n.v-dialog.cds-dialog > .v-overlay__content > .v-card {\n  padding: 1rem;\n}\n\n.v-dialog.cds-dialog > .v-overlay__content {\n  align-self: center;\n  margin: unset;\n}\n\n.cds-dialog .v-card-text {\n  height: fit-content;\n  max-height: 60vh;\n}\n</style>\n","import script from \"./CDSDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CDSDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CDSDialog.vue?vue&type=style&index=0&id=6abc1a04&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderSlot as _renderSlot, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"cds-marquee-alert elevation-3 sucess\"\n}\nconst _hoisted_2 = { class: \"cds-marquee-alert__content\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_v_avatar = _resolveComponent(\"v-avatar\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n\n  return (_ctx.isVisible)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _createVNode(_component_v_avatar, {\n          variant: \"flat\",\n          color: \"info\",\n          icon: \"mdi-exclamation-thick\"\n        }),\n        _createElementVNode(\"div\", _hoisted_2, [\n          _renderSlot(_ctx.$slots, \"default\", {}, () => [\n            _createElementVNode(\"span\", null, _toDisplayString(_ctx.message), 1)\n          ])\n        ]),\n        _createVNode(_component_v_btn, {\n          onClick: _ctx.close,\n          class: \"cds-marquee-alert__close-button\",\n          \"aria-label\": \"Close alert\",\n          variant: \"tonal\"\n        }, {\n          default: _withCtx(() => _cache[0] || (_cache[0] = [\n            _createTextVNode(\" Close \")\n          ])),\n          _: 1,\n          __: [0]\n        }, 8, [\"onClick\"])\n      ]))\n    : _createCommentVNode(\"\", true)\n}","<style>\n.cds-marquee-alert\n{\n  position: sticky;\n  top: 0;\n  left: 0;\n  /* width: 100vw; */\n  padding-inline: 1rem;\n  padding-block: 5px;\n  margin-bottom: 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  background-color: rgb(var(--v-theme-success));\n  color: white;\n  z-index: 9999;\n}\n\n.cds-marquee-alert__content\n{\n  line-height: 1.5;\n  flex-grow: 1;\n}\n\n.cds-marquee-alert__close-button\n{\n  padding: 5px;\n}\n</style>\n\n<template>\n  <div v-if=\"isVisible\" class=\"cds-marquee-alert elevation-3 sucess\">\n    <v-avatar variant=\"flat\" color=\"info\" icon=\"mdi-exclamation-thick\" />\n    <div class=\"cds-marquee-alert__content\">\n      <slot>\n        <span>{{ message }}</span>\n      </slot>\n    </div>\n    <v-btn @click=\"close\" class=\"cds-marquee-alert__close-button\" aria-label=\"Close alert\" variant=\"tonal\">\n      Close\n    </v-btn>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n\n\nexport default defineComponent({\n  name: 'MarqueeAlert',\n\n  props: {\n    message: {\n      type: String,\n      default: 'hello'\n    },\n    modelValue: {\n      type: Boolean,\n      required: false,\n      default: true\n    },\n    timeout: {\n      type: Number,\n      default: 5000\n    }\n  },\n  \n  mounted() {\n    setTimeout(() => {\n      this.isVisible = false;\n    }, this.timeout);\n  },\n\n  data() {\n    return {\n      isVisible: true,\n    };\n  },\n\n  methods: {\n    close() {\n      this.isVisible = false;\n    }\n  },\n\n  watch: {\n    isVisible(value) {\n      this.$emit('update:modelValue', value);\n    },\n\n    modelValue(value) {\n      this.isVisible = value;\n    }\n  }\n\n\n});\n</script>\n","import { render } from \"./MarqeeAlert.vue?vue&type=template&id=185155c3&ts=true\"\nimport script from \"./MarqeeAlert.vue?vue&type=script&lang=ts\"\nexport * from \"./MarqeeAlert.vue?vue&type=script&lang=ts\"\n\nimport \"./MarqeeAlert.vue?vue&type=style&index=0&id=185155c3&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { onMounted, ref, watch } from \"vue\";\nimport { v4 } from \"uuid\";\nimport { PlotlyHTMLElement, newPlot, type Data, type Datum, type PlotMouseEvent } from \"plotly.js-dist-min\";\n\nimport { AggValue, RectangleSelection, MappingBackends } from \"../types\";\n\n\ninterface TimeseriesProps {\n  data: Omit<RectangleSelection<MappingBackends>[], 'layer'>;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TimeseriesGraph',\n  props: {\n    data: {}\n  },\n  emits: [\"click\"],\n  setup(__props: any, { emit: __emit }) {\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nconst props = __props;\n\nconst id = `timeseries-${v4()}`;\n\nconst plot = ref<PlotlyHTMLElement | null>(null);\nconst graph = ref<HTMLDivElement | null>(null);\n\nconst emit = __emit;\n\nfunction datumToDate(datum: Datum): Date | null {\n  if (datum === null) { return null; }\n  if (datum instanceof Date) { return datum; }\n  return new Date(datum);\n}\n\nconst legendGroups: Record<string, string> = {};\n\nfunction renderPlot() {\n  \n  const plotlyData: Data[] = [];\n  if (props.data.length === 0) {\n    console.log(\"No data provided for timeseries graph\");\n    return;\n  }\n  \n  if (props.data.map(sel => Object.keys(sel.samples ?? {}).length).every(len => len === 0)) {\n    console.log(\"No samples provided for timeseries graph\");\n    return;\n  }\n\n  let max = 0;\n  props.data.forEach(data => {\n    const samples = data.samples;\n    if (!samples) { return; }\n    const ts = Object.keys(samples).sort();\n    const dataT: Date[] = [];\n    const dataV: (number | null)[] = [];\n    ts.forEach(t => {\n      const point: AggValue = samples[t];\n      if (point.value !== null) {\n        dataT.push(point.date);\n        dataV.push(point.value);\n      }\n    });\n    max = Math.max(max, Math.max(...dataV.filter((v): v is number => v !== null)));\n\n    const legendGroup = v4();\n    legendGroups[data.id] = legendGroup;\n    plotlyData.push({\n      x: dataT,\n      y: dataV,\n      mode: \"lines+markers\",\n      legendgroup: legendGroup,\n      name: data.name,\n      marker: {\n        color: data.color,\n      },\n    });\n\n    const errors = data.errors;\n    if (errors != null) {\n      const upperY: (number | null)[] = [];\n      const lowerY: (number | null)[] = [];\n\n      ts.forEach(t => {\n        const point: AggValue = samples[t];\n        const value = point.value;\n        const errs = errors[t];\n        if (value === null || errs == null) {\n          // lowerY.push(null);\n          // upperY.push(null);\n          return;\n        }\n        const { lower, upper } = errs;\n        const valueLower = value - lower;\n        const valueHigher = value + upper;\n        lowerY.push(Math.min(valueLower, valueHigher));\n        upperY.push(Math.max(valueLower, valueHigher));\n      });\n\n      plotlyData.push({\n        x: dataT,\n        y: lowerY,\n        mode: \"lines\",\n        line: { width: 0 },\n        showlegend: false,\n        legendgroup: legendGroup,\n        marker: {\n          color: data.color,\n        },\n      });\n\n      plotlyData.push({\n        x: dataT,\n        y: upperY,\n        mode: \"lines\",\n        line: { width: 0 },\n        fill: \"tonexty\",\n        showlegend: false,\n        legendgroup: legendGroup,\n        marker: {\n          color: data.color,\n        },\n      });\n    }\n  });\n\n  const layout = {\n    width: 600,\n    height: 400,\n    yaxis: {\n      range: [0, 1.2 * max],\n    }\n  };\n\n  newPlot(graph.value ?? id, plotlyData, layout).then((el: PlotlyHTMLElement) => {\n    plot.value = el;\n    el.on(\"plotly_click\", (data: PlotMouseEvent) => {\n      data.points.forEach(point => {\n        const traceIndex = point.curveNumber;\n        if (traceIndex !== 0 || point.x == null || point.y == null) {\n          return;\n        }\n        const date = datumToDate(point.x);\n        if (date !== null) {\n          emit(\"click\", { date, value: point.y as number });\n        }\n      });\n    });\n  });\n}\n\n\nonMounted(() => {\n  renderPlot();\n});\n\n\nwatch(() => props.data.map(sel => Object.keys(sel.samples ?? {}).length), (newData) => {\n  if (newData.length === 0) {\n    console.log(\"No data provided for timeseries graph\");\n    return;\n  }\n  console.log(\"Data changed, re-rendering plot\");\n  renderPlot();\n}, \n{ immediate: true } // needed to force render in some situations\n);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    ref_key: \"graph\",\n    ref: graph,\n    id: id,\n    class: \"timeseries\"\n  }, null, 512))\n}\n}\n\n})","<!-- eslint-disable @typescript-eslint/no-unused-vars -->\n<template>\n  <div\n    ref=\"graph\"\n    :id=\"id\"\n    class=\"timeseries\"\n  >\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { onMounted, ref, watch } from \"vue\";\nimport { v4 } from \"uuid\";\nimport { PlotlyHTMLElement, newPlot, type Data, type Datum, type PlotMouseEvent } from \"plotly.js-dist-min\";\n\nimport { AggValue, RectangleSelection, MappingBackends } from \"../types\";\n\n\ninterface TimeseriesProps {\n  data: Omit<RectangleSelection<MappingBackends>[], 'layer'>;\n}\n\nconst props = defineProps<TimeseriesProps>();\n\nconst id = `timeseries-${v4()}`;\n\nconst plot = ref<PlotlyHTMLElement | null>(null);\nconst graph = ref<HTMLDivElement | null>(null);\n\nconst emit = defineEmits<{\n  (event: \"click\", value: AggValue): void;\n}>();\n\nfunction datumToDate(datum: Datum): Date | null {\n  if (datum === null) { return null; }\n  if (datum instanceof Date) { return datum; }\n  return new Date(datum);\n}\n\nconst legendGroups: Record<string, string> = {};\n\nfunction renderPlot() {\n  \n  const plotlyData: Data[] = [];\n  if (props.data.length === 0) {\n    console.log(\"No data provided for timeseries graph\");\n    return;\n  }\n  \n  if (props.data.map(sel => Object.keys(sel.samples ?? {}).length).every(len => len === 0)) {\n    console.log(\"No samples provided for timeseries graph\");\n    return;\n  }\n\n  let max = 0;\n  props.data.forEach(data => {\n    const samples = data.samples;\n    if (!samples) { return; }\n    const ts = Object.keys(samples).sort();\n    const dataT: Date[] = [];\n    const dataV: (number | null)[] = [];\n    ts.forEach(t => {\n      const point: AggValue = samples[t];\n      if (point.value !== null) {\n        dataT.push(point.date);\n        dataV.push(point.value);\n      }\n    });\n    max = Math.max(max, Math.max(...dataV.filter((v): v is number => v !== null)));\n\n    const legendGroup = v4();\n    legendGroups[data.id] = legendGroup;\n    plotlyData.push({\n      x: dataT,\n      y: dataV,\n      mode: \"lines+markers\",\n      legendgroup: legendGroup,\n      name: data.name,\n      marker: {\n        color: data.color,\n      },\n    });\n\n    const errors = data.errors;\n    if (errors != null) {\n      const upperY: (number | null)[] = [];\n      const lowerY: (number | null)[] = [];\n\n      ts.forEach(t => {\n        const point: AggValue = samples[t];\n        const value = point.value;\n        const errs = errors[t];\n        if (value === null || errs == null) {\n          // lowerY.push(null);\n          // upperY.push(null);\n          return;\n        }\n        const { lower, upper } = errs;\n        const valueLower = value - lower;\n        const valueHigher = value + upper;\n        lowerY.push(Math.min(valueLower, valueHigher));\n        upperY.push(Math.max(valueLower, valueHigher));\n      });\n\n      plotlyData.push({\n        x: dataT,\n        y: lowerY,\n        mode: \"lines\",\n        line: { width: 0 },\n        showlegend: false,\n        legendgroup: legendGroup,\n        marker: {\n          color: data.color,\n        },\n      });\n\n      plotlyData.push({\n        x: dataT,\n        y: upperY,\n        mode: \"lines\",\n        line: { width: 0 },\n        fill: \"tonexty\",\n        showlegend: false,\n        legendgroup: legendGroup,\n        marker: {\n          color: data.color,\n        },\n      });\n    }\n  });\n\n  const layout = {\n    width: 600,\n    height: 400,\n    yaxis: {\n      range: [0, 1.2 * max],\n    }\n  };\n\n  newPlot(graph.value ?? id, plotlyData, layout).then((el: PlotlyHTMLElement) => {\n    plot.value = el;\n    el.on(\"plotly_click\", (data: PlotMouseEvent) => {\n      data.points.forEach(point => {\n        const traceIndex = point.curveNumber;\n        if (traceIndex !== 0 || point.x == null || point.y == null) {\n          return;\n        }\n        const date = datumToDate(point.x);\n        if (date !== null) {\n          emit(\"click\", { date, value: point.y as number });\n        }\n      });\n    });\n  });\n}\n\n\nonMounted(() => {\n  renderPlot();\n});\n\n\nwatch(() => props.data.map(sel => Object.keys(sel.samples ?? {}).length), (newData) => {\n  if (newData.length === 0) {\n    console.log(\"No data provided for timeseries graph\");\n    return;\n  }\n  console.log(\"Data changed, re-rendering plot\");\n  renderPlot();\n}, \n{ immediate: true } // needed to force render in some situations\n);\n</script>\n\n<style scoped>\n.timeseries:not(:empty) {\n  width: 600px;\n  height: 400px;\n}\n</style>\n","import script from \"./TimeseriesGraph.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TimeseriesGraph.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TimeseriesGraph.vue?vue&type=style&index=0&id=c9c9a2f4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c9c9a2f4\"]])\n\nexport default __exports__","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport Vue, { createApp } from \"vue\";\n\nimport { FundingAcknowledgement, IconButton, CreditLogos } from \"@cosmicds/vue-toolkit\";\nimport LocationSearch from \"./components/LocationSearch.vue\";\nimport TempoLite from \"./TempoLite.vue\";\nimport Colorbar from './components/ColorBar.vue';\nimport ColorBarHorizontal from \"./components/ColorBarHorizontal.vue\";\nimport InfoButton from \"./components/InfoButton.vue\";\nimport vuetify from \"../plugins/vuetify\";\nimport SnackbarAlert from \"./components/SnackbarAlert.vue\";\nimport ShareButton from \"./components/ShareButton.vue\";\nimport CDSDialog from \"./components/CDSDialog.vue\";\nimport MarqeeAlert from \"./components/MarqeeAlert.vue\";\nimport TimeseriesGraph from \"./components/TimeseriesGraph.vue\";\n\n\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport {\n  faBookOpen,\n  faPlay,\n  faPause,\n  faTimes,\n  faVideo,\n  faMagnifyingGlass,\n  faCircleXmark,\n  faSquareXmark,\n  faHome,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nimport VueDatePicker from \"@vuepic/vue-datepicker\";\nimport '@vuepic/vue-datepicker/dist/main.css';\nimport { UseClipboard } from \"@vueuse/components\";\n\nlibrary.add(faBookOpen);\nlibrary.add(faPlay);\nlibrary.add(faPause);\nlibrary.add(faTimes);\nlibrary.add(faVideo);\nlibrary.add(faMagnifyingGlass);\nlibrary.add(faCircleXmark);\nlibrary.add(faSquareXmark);\nlibrary.add(faHome);\n\n\n/** v-hide directive taken from https://www.ryansouthgate.com/2020/01/30/vue-js-v-hide-element-whilst-keeping-occupied-space/ */\n// Extract the function out, up here, so I'm not writing it twice\nconst update = (el: HTMLElement, binding: Vue.DirectiveBinding) => el.style.visibility = (binding.value) ? \"hidden\" : \"\";\n\ncreateApp(TempoLite, {})\n\n  // Plugins\n  .use(vuetify)\n\n  // Directives\n  .directive(\n    /**\n    * Hides an HTML element, keeping the space it would have used if it were visible (css: Visibility)\n    */\n    \"hide\", {\n      // Run on initialisation (first render) of the directive on the element\n      beforeMount(el, binding, _vnode, _prevVnode) {\n        update(el, binding);\n      },\n      // Run on subsequent updates to the value supplied to the directive\n      updated(el, binding, _vnode, _prevVnode) {\n        update(el, binding);\n      }\n    })\n\n  // Components\n  .component('font-awesome-icon', FontAwesomeIcon)\n  .component('icon-button', IconButton)\n  .component('funding-acknowledgement', FundingAcknowledgement)\n  .component('credit-logos', CreditLogos)\n  .component('colorbar', Colorbar)\n  .component('location-search', LocationSearch)\n  .component('info-button', InfoButton)\n  .component('colorbar-horizontal', ColorBarHorizontal)\n  .component('date-picker', VueDatePicker)\n  .component('use-clipboard', UseClipboard as Vue.Component)\n  .component('snackbar-alert', SnackbarAlert)\n  .component('share-button', ShareButton)\n  .component('cds-dialog', CDSDialog)\n  .component('marquee-alert', MarqeeAlert)\n  .component('timeseries-graph', TimeseriesGraph)\n\n  // Mount\n  .mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_cosmicds_tempo_lite\"] = self[\"webpackChunk_cosmicds_tempo_lite\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], () => (__webpack_require__(6853)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_font_awesome_icon","class","style","cssStyles","locationJustUpdated","small","modelValue","searchText","$event","setLocationFromSearchFeature","items","searchResults","features","textForMapboxFeature","bgColor","label","density","solo","color","accentColor","performForwardGeocodingSearch","searchErrorMessage","focusCombobox","onFocusChange","ref","menu","menuOpen","append","icon","size","searchOpen","buttonSize","toggleSearch","closeSearch","stayOpen","_","RELEVANT_FEATURE_TYPES","NA_COUNTRIES","NA_ABBREVIATIONS","feature","pieces","text","push","context","forEach","item","itemType","id","split","includes","shortCode","short_code","some","abbr","startsWith","substring","itemText","join","geocodingInfoForSearch","options","Promise","accessToken","search","URLSearchParams","set","types","countries","limit","toString","url","fetch","then","response","json","name","emits","props","searchProvider","type","Function","default","Boolean","required","String","theme","persistSelected","data","this","locationUpdatedText","comboFocused","computed","methods","console","log","length","info","$emit","focused","blurCombobox","input","$refs","searchInput","blur","focus","undefined","place_name","slice","timedJustUpdatedLocation","clearSearchData","setTimeout","watch","value","__exports__","lerp","a","b","t","spline","values","n","i","Math","floor","u","clamp","x","min","max","cbarNO2","cbar_min","cbar_max","cur_val","normalizedVal","r","g","round","preloadedImages","loadImage","src","resolve","reject","img","document","createElement","rel","as","onload","onerror","onabort","href","body","appendChild","_preloadImages","images","remove","promises","map","date","html","highlight","Date","BOUNDS_COLLECTION","novDec","west","south","east","north","march","useBounds","customSelector","defaultSelector","getUTCFullYear","getUTCMonth","selector","currentBounds","boundsArray","bounds","boundsCollection","interestingEvents","endDate","dateString","highlighted","hasFeature","locations","latlng","zoom","time","description","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","key","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","__name","selectionOptions","selectionActive","setup","__props","__emit","filteredSelectionOptions","filter","sel","formatTimeRange","ranges","Array","isArray","range","start","toLocaleDateString","end","allStarts","allEnds","minStart","maxEnd","select","idx","timeRange","variant","open","__","samples","error","Object","keys","result","Number","toExponential","atleast1d","ONEDAYMS","isBad","useUniqueTimeSelection","timestamps","timeIndex","singleDateSelected","minIndex","maxIndex","getOneDaysTimestamps","mod","ts","getTime","setNearestDate","warn","timestamp","val","offset","uniqueDays","easternDates","days","getUTCDate","unique","from","Set","uniqueDaysIndex","e","indexOf","getUniqueDayIndex","findIndex","day","moveBackwardOneDay","currentIndex","moveForwardOneDay","nextIndex","nearestDate","find","nearestDateIndex","index","useTimezone","selectedTimezone","toTimezone","utcDate","fromTimezone","setToMidnight","zonedDate","setHours","setToEndOfDay","formatTimeLong","timeZone","formatDuration","startUtc","endUtc","startZoned","endZoned","startTime","toLocaleTimeString","hour","minute","hour12","endTime","formatTimezoneRange","startDate","month","formatUTCRange","formatTime","timeString","formatDateDisplay","toDateString","timezoneInfo","toLocaleString","timeZoneName","pop","useDateTimeSelector","currentDate","initialTimezone","Intl","DateTimeFormat","resolvedOptions","selectionType","selectedDayOfWeek","selectedTime","instancesBack","timePlusMinus","hasManualWeekdayStartDate","weekdayStartDateTimestamp","weekdayStartDate","get","toISOString","setWeekdayStartTimestamp","dayNames","generateMillisecondRanges","generateWeekdayRanges","generateDateRangeRanges","parsedTime","baseTimestamp","baseDate","targetDayOfWeek","getDay","setDate","getDate","rangeDate","sort","startMs","endMs","newCurrentDate","setStartTimestamp","setEndTimestamp","mode","timezoneRef","chipColor","chipLabel","formattedTime","formattedTimezoneTime","formattedUTCTime","ripple","dense","cols","align","height","defaultStartDate","defaultEndDate","allowedDates","validTimes","emit","currentDateRef","setStartTimestampInternal","setEndTimestampInternal","weekdayCalendar","startDateCalendar","endDateCalendar","weekdayStartDateObj","startDateObj","endDateObj","dayOptions","title","instanceRules","v","updateCustomRange","currentRanges","handleWeekdayDateChange","closeMenu","handleStartDateChange","handleEndDateChange","today","newDate","newTimezone","newDateString","newTimestamp","elevation","row","ref_key","format","clearable","teleport","dark","step","placeholder","rules","selectedIndex","reverse","useUtc","dateOnly","hourOnly","formatDate","getTimezoneOffset","year","timestampsComputed","formattedDates","formattedTimes","handleChipClick","window","devicePixelRatio","useMap","_showRoads","onReady","addCoastlines","addSource","addLayer","addLabels","setupMap","libreMap","cleanupMap","createMap","_map","container","center","loc","attributionControl","addControl","AttributionControl","compact","on","setView","setCenter","setZoom","getCenter","resetView","centerLonLat","onHome","_centerLonLat","_zoom","_onHome","onAdd","_container","className","_button","addEventListener","_goHome","bind","_homeIcon","padding","svg","encodeURIComponent","onRemove","removeEventListener","parentNode","removeChild","flyTo","usezoomhome","home","callback","startingCenter","zoomHome","createControl","control","CDSMaplibreHomeTool","NavigationControl","showCompass","newValue","useImageOverlay","imageUrl","opacity","imageBounds","overlayId","overlay","layer","source","paint","toMaplibreBounds","boundingBox","coordinates","getSource","getLayer","addTo","configureOverlay","updateOrClearImage","updateImage","removeLayer","setPaintProperty","setCoordinates","removeSource","useFieldOfRegard","showFieldOfRegard","usingAugust","fieldOfRegardLayer","fieldOfRegardLayerId","createFoRLayer","clearFoR","updateFieldOfRegard","setData","addFieldOfRegard","loaded","show","useLocationMarker","showLocationMarker","locationMarker","addToMap","setMarker","lnglat","setLngLat","removeMarker","useRectangleSelection","interactColor","startActive","geoJson","rectangleSource","rectangleLayer","startCoords","selectionInfo","active","uuid","v4","onMousedown","event","mMap","lngLat","geometry","lng","lat","properties","onMouseup","eventCoords","xmin","ymin","xmax","ymax","onMousemove","updateListeners","dragPan","disable","scrollZoom","enable","off","nowActive","newMap","createBounds","addRectangleLayer","updateRectangleBounds","getData","removeRectangleLayer","toGeoJSON","points","pt","y","useMultiMarker","sourceId","layerId","optionsToPaint","radius","fillColor","fillOpacity","outlineColor","addMarkers","clearMarkers","geojson","layout","_stretchRule","stretches","_colorMapRule","_resampleRule","composeRasterRules","baseRule","additionalRules","currentRule","nextOuterRule","rasterFunctionArguments","Raster","renderingRule","fetchEsriTimeSteps","esriUrl","variableName","dimensionName","multidimensionalDefinition","params","f","JSON","stringify","fetchURL","URL","res","extractTimeSteps","slices","timesteps","reduce","acc","concat","useEsriLayer","esriLayerId","esriImageSource","esriTimesteps","opacityRef","noEsriData","variableNameRef","urlRef","entries","dynamicMapService","createImageService","ImageService","tileSize","addEsriSource","updateEsriTimeRange","nearest","abs","getEsriTimeSteps","catch","updateEsriOpacity","changeUrl","newUrl","esriServiceOptions","_value","rectangleToGeometry","rect","rings","spatialReference","wkid","pointToGeometry","point","safeParseNumber","parsed","parseFloat","isNaN","stringifyEsriGetSamplesParameters","geometryType","sampleDistance","sampleCount","mosaicRule","pixelSize","returnFirstValueOnly","interpolation","outFields","sliceID","timeStr","baseUrl","variable","setVariable","getVariable","setBaseUrl","getBaseUrl","fetchSample","esriGeometry","isRectBounds","urlWithParams","ok","Error","status","code","message","details","processedSamples","sample","location","attributes","StdTime","locationId","metadata","totalSamples","fetchSamples","timeRanges","tr","all","results","validResults","flat","aggregateByTime","grouped","Map","has","errors","sampleValues","s","calculateMean","calculateError","seen","add","fetchTimeseriesData","rawData","fetchCenterPointData","rectangle","validSamples","sum","lower","upper","mean","squaredDiffs","pow","variance","sqrt","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","tabindex","target","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","zoomScale","showExtendedRangeFeatures","OPT_OUT_KEY","UUID_KEY","infoColor","homeLat","homeLon","showImage","display","calendar","urlParams","showSplashScreen","toLowerCase","extendedRange","hash","hideIntro","WINDOW_DONTSHOWINTRO","localStorage","getItem","touchscreen","documentElement","navigator","msPointerEnabled","STORY_VISIT_URL","API_BASE_URL","pingServer","venue","method","headers","statusText","replace","venues","setItem","clearUrl","origin","pathname","history","replaceState","introSlide","inIntro","dontShowIntro","showNotice","sheet","accentColor2","hasOptOutBeenOpened","introductionOpen","userGuideOpen","whatsNewOpenedCount","whatsNewTimestamp","whatsNewOpenTimeMs","introductionOpenedCount","introductionTimestamp","introductionOpenTimeMs","userGuideOpenedCount","userGuideTimestamp","userGuideOpenTimeMs","aboutDataOpenedCount","aboutDataTimestamp","aboutDataOpenTimeMs","creditsOpenedCount","creditsTimestamp","creditsOpenTimeMs","shareButtonClickedCount","playButtonClickedCount","timeSliderUsedCount","opacitySliderUsedCount","fieldOfRegardToggled","cloudMaskToggled","hiResDataToggled","userSelectedCalendarDates","userSelectedTimezones","userSelectedLocations","userSelectedNotableEvents","STORY_DATA_URL","storedOptOut","maybeUUID","optOut","showPrivacyDialog","responseOptOut","existingUser","selectSheet","blurActiveElement","showTextSheet","cssVars","smallSize","smAndDown","mobile","zpad","width","character","padStart","fosterTimestamps","showExtendedRange","useHighRes","timestampsLoaded","fosterTimestampsSet","erdTimestampsSet","newTimestampsSet","cloudTimestampsSet","extendedRangeTimestampsSet","preprocessedTimestampSet","updateTimestamps","activateExtremeEvents","initLat","initLon","initZoom","initTime","initState","homeZoom","homeState","radio","sublocationRadio","playing","playInterval","showControls","showCredits","showAboutData","loadedImagesProgress","showUserGuide","currentUrl","showChanges","showLADialog","imageName","getTempoFilename","customImageUrl","getTempoDataUrl","showClouds","cloudUrl","getCloudFilename","preload","cloudOverlay","imageOverlay","cloudDataAvailable","highresAvailable","extendedRangeAvailable","showingExtendedRange","esriUrls","whichMolecule","moleculeOptions","esriVariable","tempoDataService","TempoDataService","handleEsriTimeSelected","_index","newSteps","_oldSteps","newMolecule","onMapReady","updateURL","showRoads","selections","updateSelections","addToSelections","selection","selectedID","setSelection","selectionCount","samplesGraph","haveSamples","COLORS","loadingSamples","sampleError","sampleDialog","pointSampleResult","pointSampleError","loadingPointSample","useCustomTimeRange","shape","addTimeseriesLocationsToMap","timeseries","selectionHasSamples","setCurrentSelectionTimeRange","customTimeRange","handleDateTimeRangeSelectionChange","effectiveTimeRange","activateSelectionMode","editSelection","createNewSelection","fetchDataForSelection","fetchCenterPointDataForSelection","_sel","copyAndUseSelection","createSelectionWithTimeRange","_timeRanges","newSelection","copySelectionWithNewTimeRange","existingSelection","copiedSelection","getTimeRangeDisplay","newRange","newSelections","oldSelections","effectiveTimeRangeDisplay","deleteSelection","isSelected","splice","updateHash","_e","createUserEntry","visibilityState","updateUserData","resetData","datesOfInterest","dateIsDST","standardOffset","currentOffset","timezoneOptions","tz","thumbLabel","dateObj","hours","getUTCHours","amPm","hourValue","getUTCMinutes","stateObj","toFixed","lon","getZoom","searchParams","cmapNO2","rgb","geocodingInfoForSearchLimited","_err","setLocationFromSearch","play","setInterval","pause","clearInterval","filename","findNearestImageTimestamp","esriTimestamp","toleranceMinutes","toleranceMs","nearestTimestamp","minDifference","Infinity","imageTimestamp","difference","_date","_timestamp","imagePreload","times","cloudImages","promise","err","locationsOfInterest","goToLocationOfInterst","subindex","loi","goToLA","activateLAViewer","laWildfireIndex","onTimeSliderEnd","onOpacitySliderEnd","content","exists","user_uuid","now","creditsTime","aboutDataTime","whatsNewTime","introductionTime","userGuideTime","delta_whats_new_opened_count","delta_whats_new_open_time_ms","delta_introduction_opened_count","delta_introduction_open_time_ms","delta_user_guide_opened_count","delta_user_guide_open_time_ms","delta_about_data_opened_count","delta_about_data_open_time_ms","delta_credits_opened_count","delta_credits_open_time_ms","delta_share_button_clicked_count","user_selected_calendar_dates","user_selected_timezones","user_selected_locations","user_selected_notable_events","delta_play_clicked_count","delta_time_slider_used_count","delta_opacity_slider_used_count","field_of_regard_toggled","cloud_mask_toggled","high_res_data_toggled","keepalive","_val","btn","querySelector","setAttribute","removeAttribute","_url","_show","d","timezone","currentSelection","useCustom","_component_credit_logos","_component_marquee_alert","_component_cds_dialog","_component_share_button","_component_colorbar_horizontal","_component_info_button","_component_location_search","_component_colorbar","_component_icon_button","_component_date_picker","_component_timeseries_graph","additional","rounded","alt","timeout","changes","change","activator","disabled","buttonColor","iconColor","alert","backgroundColor","nsteps","cmap","extend","contained","for","transitions","button","onClick","subtitle","loading","indeterminate","scrim","startValue","endValue","mounted","colorbarGradient","random","triangles","showStartTriangle","showEndTriangle","cssLinearGradientFromCmap","colors","co","colorbar","firstChild","div","background","styleDownTriangle","styleUpTriangle","offsetWidth","offsetHeight","borderLeft","borderRight","borderBottom","borderTop","styleLeftTriangle","styleRightTriangle","styleColorbarChunk","flexGrow","flexShrink","dialogVisible","activatorProps","tooltipTextValue","showTooltip","handleKeydown","helpText","tooltipText","icons","defaultSet","aliases","sets","mdi","locale","fallback","messages","en","defaultTheme","hide","hideButton","openDialog","prepend","snackbar","$attrs","role","actions","closeDialog","msg","$nextTick","snackbarMessage","$el","_component_use_clipboard","copy","tooltipDisabled","transition","useDraggableDialog","root","dialogSelector","scrimSelector","dragInfo","mousedown","mouseup","mousemove","removeListeners","element","setupDraggable","dragging","dragPredicate","cursor","closestDialog","closest","boundingRect","getBoundingClientRect","el","mouseStartX","clientX","mouseStartY","clientY","elStartX","left","elStartY","top","overlays","querySelectorAll","oldTransition","margin","position","innerWidth","innerHeight","classList","resizeObserver","ResizeObserver","entry","dialogs","dialog","parseInt","observe","newRoot","shortTitle","draggable","card","showDialog","displayedShortTitle","cardRoot","attrs","updateRoot","isVisible","close","plot","graph","datumToDate","datum","legendGroups","renderPlot","plotlyData","every","len","dataT","dataV","legendGroup","legendgroup","marker","errs","valueLower","valueHigher","line","showlegend","fill","yaxis","newPlot","traceIndex","curveNumber","newData","immediate","update","binding","visibility","TempoLite","use","vuetify","directive","beforeMount","_vnode","_prevVnode","updated","component","IconButton","FundingAcknowledgement","CreditLogos","LocationSearch","InfoButton","ColorBarHorizontal","SnackbarAlert","ShareButton","CDSDialog","MarqeeAlert","TimeseriesGraph","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","fulfilled","j","getter","__esModule","definition","o","defineProperty","enumerable","globalThis","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}